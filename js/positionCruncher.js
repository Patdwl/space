(()=>{var __webpack_modules__={32:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,n){var t,r,a;for(void 0===n&&(n=15),r=.5,t=new Date;;){for(a=r*=2;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(new Date-t>n)break}for(a=r;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return 1e3*(3*r-1)/(new Date-t)},numeric._myIndexOf=function(e){var n,t=this.length;for(n=0;n<t;++n)if(this[n]===e)return n;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function n(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+n(-e);if(isFinite(e)){var t=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,t),a=r.toPrecision(numeric.precision);return 10===parseFloat(a)&&(t++,a=(r=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+t.toString()}return"Infinity"}var t=[];return function e(r){var a;if(void 0===r)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof r)return t.push('"'+r+'"'),!1;if("boolean"==typeof r)return t.push(r.toString()),!1;if("number"==typeof r){var o=n(r),i=r.toPrecision(numeric.precision),s=parseFloat(r.toString()).toString(),u=[o,i,s,parseFloat(i).toString(),parseFloat(s).toString()];for(a=1;a<u.length;a++)u[a].length<o.length&&(o=u[a]);return t.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===r)return t.push("null"),!1;if("function"==typeof r){t.push(r.toString());var c=!1;for(a in r)r.hasOwnProperty(a)&&(c?t.push(",\n"):t.push("\n{"),c=!0,t.push(a),t.push(": \n"),e(r[a]));return c&&t.push("}\n"),!0}if(r instanceof Array){if(r.length>numeric.largeArray)return t.push("...Large Array..."),!0;for(c=!1,t.push("["),a=0;a<r.length;a++)a>0&&(t.push(","),c&&t.push("\n ")),c=e(r[a]);return t.push("]"),!0}for(a in t.push("{"),c=!1,r)r.hasOwnProperty(a)&&(c&&t.push(",\n"),c=!0,t.push(a),t.push(": \n"),e(r[a]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(n){if("string"==typeof n)return Date.parse(n.replace(/-/g,"/"));if(!(n instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var t,r=[];for(t=0;t<n.length;t++)r[t]=e(n[t]);return r}(e)},numeric.parseFloat=function(e){return function e(n){if("string"==typeof n)return parseFloat(n);if(!(n instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var t,r=[];for(t=0;t<n.length;t++)r[t]=e(n[t]);return r}(e)},numeric.parseCSV=function(e){var n,t,r,a=e.split("\n"),o=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(t=0;t<a.length;t++){var c,l=(a[t]+",").match(i);if(l.length>0){for(o[u]=[],n=0;n<l.length;n++)c=(r=l[n]).substr(0,r.length-1),s.test(c)?o[u][n]=parseFloat(c):o[u][n]=c;u++}}return o},numeric.toCSV=function(e){var n,t,r,a,o,i=numeric.dim(e);for(r=i[0],i[1],o=[],n=0;n<r;n++){for(a=[],t=0;t<r;t++)a[t]=e[n][t].toString();o[n]=a.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n},numeric.imageURL=function(e){function n(e,n,t){void 0===n&&(n=0),void 0===t&&(t=e.length);var r,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(e.length,r=n;r<t;r++)o=o>>>8^a[255&(o^e[r])];return-1^o}var t,r,a,o,i,s,u,c,l,h,m=e[0].length,f=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,m>>24&255,m>>16&255,m>>8&255,255&m,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(h=n(d,12,29),d[29]=h>>24&255,d[30]=h>>16&255,d[31]=h>>8&255,d[32]=255&h,t=1,r=0,u=0;u<m;u++){for(u<m-1?d.push(0):d.push(1),i=3*f+1+(0===u)&255,s=3*f+1+(0===u)>>8&255,d.push(i),d.push(s),d.push(255&~i),d.push(255&~s),0===u&&d.push(0),c=0;c<f;c++)for(a=0;a<3;a++)r=(r+(t=(t+(i=(i=e[a][u][c])>255?255:i<0?0:Math.round(i)))%65521))%65521,d.push(i);d.push(0)}return l=(r<<16)+t,d.push(l>>24&255),d.push(l>>16&255),d.push(l>>8&255),d.push(255&l),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,h=n(d,37),d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(e){var n,t,r,a,o,i,s,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(n=0;n<u;n+=3)o=((3&(t=e[n]))<<4)+((r=e[n+1])>>4),i=((15&r)<<2)+((a=e[n+2])>>6),s=63&a,n+1>=u?i=s=64:n+2>=u&&(s=64),l+=c.charAt(t>>2)+c.charAt(o)+c.charAt(i)+c.charAt(s);return l}(d)},numeric._dim=function(e){for(var n=[];"object"==typeof e;)n.push(e.length),e=e[0];return n},numeric.dim=function(e){var n;return"object"==typeof e?"object"==typeof(n=e[0])?"object"==typeof n[0]?numeric._dim(e):[e.length,n.length]:[e.length]:[]},numeric.mapreduce=function(e,n){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,n){return Function("x","var n = x.length;\nvar i,xi;\n"+n+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(n,t){var r,a;if(!(n instanceof Array&&t instanceof Array))return!1;if((a=n.length)!==t.length)return!1;for(r=0;r<a;r++)if(n[r]!==t[r]){if("object"!=typeof n[r])return!1;if(!e(n[r],t[r]))return!1}return!0},numeric.rep=function(e,n,t){void 0===t&&(t=0);var r,a=e[t],o=Array(a);if(t===e.length-1){for(r=a-2;r>=0;r-=2)o[r+1]=n,o[r]=n;return-1===r&&(o[0]=n),o}for(r=a-1;r>=0;r--)o[r]=numeric.rep(e,n,t+1);return o},numeric.dotMMsmall=function(e,n){var t,r,a,o,i,s,u,c,l,h,m;for(o=e.length,i=n.length,s=n[0].length,u=Array(o),t=o-1;t>=0;t--){for(c=Array(s),l=e[t],a=s-1;a>=0;a--){for(h=l[i-1]*n[i-1][a],r=i-2;r>=1;r-=2)m=r-1,h+=l[r]*n[r][a]+l[m]*n[m][a];0===r&&(h+=l[0]*n[0][a]),c[a]=h}u[t]=c}return u},numeric._getCol=function(e,n,t){var r;for(r=e.length-1;r>0;--r)t[r]=e[r][n],t[--r]=e[r][n];0===r&&(t[0]=e[0][n])},numeric.dotMMbig=function(e,n){var t,r,a,o=numeric._getCol,i=n.length,s=Array(i),u=e.length,c=n[0].length,l=new Array(u),h=numeric.dotVV;for(--i,r=--u;-1!==r;--r)l[r]=Array(c);for(r=--c;-1!==r;--r)for(o(n,r,s),a=u;-1!==a;--a)t=e[a],l[a][r]=h(t,s);return l},numeric.dotMV=function(e,n){var t,r=e.length,a=(n.length,Array(r)),o=numeric.dotVV;for(t=r-1;t>=0;t--)a[t]=o(e[t],n);return a},numeric.dotVM=function(e,n){var t,r,a,o,i,s,u;for(a=e.length,o=n[0].length,i=Array(o),r=o-1;r>=0;r--){for(s=e[a-1]*n[a-1][r],t=a-2;t>=1;t-=2)u=t-1,s+=e[t]*n[t][r]+e[u]*n[u][r];0===t&&(s+=e[0]*n[0][r]),i[r]=s}return i},numeric.dotVV=function(e,n){var t,r,a=e.length,o=e[a-1]*n[a-1];for(t=a-2;t>=1;t-=2)r=t-1,o+=e[t]*n[t]+e[r]*n[r];return 0===t&&(o+=e[0]*n[0]),o},numeric.dot=function(e,n){var t=numeric.dim;switch(1e3*t(e).length+t(n).length){case 2002:return n.length<10?numeric.dotMMsmall(e,n):numeric.dotMMbig(e,n);case 2001:return numeric.dotMV(e,n);case 1002:return numeric.dotVM(e,n);case 1001:return numeric.dotVV(e,n);case 1e3:return numeric.mulVS(e,n);case 1:return numeric.mulSV(e,n);case 0:return e*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var n,t,r,a,o=e.length,i=Array(o);for(n=o-1;n>=0;n--){for(a=Array(o),t=n+2,r=o-1;r>=t;r-=2)a[r]=0,a[r-1]=0;for(r>n&&(a[r]=0),a[n]=e[n],r=n-1;r>=1;r-=2)a[r]=0,a[r-1]=0;0===r&&(a[0]=0),i[n]=a}return i},numeric.getDiag=function(e){var n,t=Math.min(e.length,e[0].length),r=Array(t);for(n=t-1;n>=1;--n)r[n]=e[n][n],r[--n]=e[n][n];return 0===n&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,n,t){void 0===t&&(t="");var r,a,o=[],i=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)i.test(e[r])?s=a=e[r].substring(0,e[r].length-3):a=e[r],"ret"===a&&(u=!0),o.push(a);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+t+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,n,t){void 0===t&&(t="");var r,a,o=[],i=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)i.test(e[r])?s=a=e[r].substring(0,e[r].length-3):a=e[r],"ret"===a&&(u=!0),o.push(a);return o[e.length]="var _n = "+s+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+t+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(n,t,r,a,o){var i;if(a!==r.length-1)for(i=r[a]-1;i>=0;i--)e("object"==typeof n?n[i]:n,"object"==typeof t?t[i]:t,r,a+1,o);else o(n,t)},numeric._biforeach2=function e(n,t,r,a,o){if(a===r.length-1)return o(n,t);var i,s=r[a],u=Array(s);for(i=s-1;i>=0;--i)u[i]=e("object"==typeof n?n[i]:n,"object"==typeof t?t[i]:t,r,a+1,o);return u},numeric._foreach=function e(n,t,r,a){var o;if(r!==t.length-1)for(o=t[r]-1;o>=0;o--)e(n[o],t,r+1,a);else a(n)},numeric._foreach2=function e(n,t,r,a){if(r===t.length-1)return a(n);var o,i=t[r],s=Array(i);for(o=i-1;o>=0;o--)s[o]=e(n[o],t,r+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,n;for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],numeric.ops2[n]=n;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){n=numeric.ops2[e];var t,r,a="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(a="var "+n+" = Math."+n+";\n",t=function(e,t,r){return e+" = "+n+"("+t+","+r+")"},r=function(e,t){return e+" = "+n+"("+e+","+t+")"}):(t=function(e,t,r){return e+" = "+t+" "+n+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,t){return e+" "+n+"= "+t}:function(e,t){return e+" = "+e+" "+n+" "+t}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],t("ret[i]","x[i]","y[i]"),a),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],t("ret[i]","x","y[i]"),a),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],t("ret[i]","x[i]","y"),a),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[n]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),a),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),a),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],delete numeric.ops2[n];for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],numeric.ops1[n]=n;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(a="",n=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(n)&&(a="var "+n+" = Math."+n+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",a),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",a),numeric[e]=Function("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],delete numeric.ops1[n];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(n=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(n[0],n[1]),numeric[e]=Function("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,n){return"object"==typeof e?"object"==typeof n?numeric.truncVV(e,n):numeric.truncVS(e,n):"object"==typeof n?numeric.truncSV(e,n):Math.round(e/n)*n},numeric.inv=function(e){var n,t,r,a,o,i,s,u=numeric.dim(e),c=Math.abs,l=u[0],h=u[1],m=numeric.clone(e),f=numeric.identity(l);for(i=0;i<h;++i){var d=-1,p=-1;for(o=i;o!==l;++o)(s=c(m[o][i]))>p&&(d=o,p=s);for(t=m[d],m[d]=m[i],m[i]=t,a=f[d],f[d]=f[i],f[i]=a,e=t[i],s=i;s!==h;++s)t[s]/=e;for(s=h-1;-1!==s;--s)a[s]/=e;for(o=l-1;-1!==o;--o)if(o!==i){for(n=m[o],r=f[o],e=n[i],s=i+1;s!==h;++s)n[s]-=t[s]*e;for(s=h-1;s>0;--s)r[s]-=a[s]*e,r[--s]-=a[s]*e;0===s&&(r[0]-=a[0]*e)}}return f},numeric.det=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var t,r,a,o,i,s,u,c,l=n[0],h=1,m=numeric.clone(e);for(r=0;r<l-1;r++){for(a=r,t=r+1;t<l;t++)Math.abs(m[t][r])>Math.abs(m[a][r])&&(a=t);for(a!==r&&(u=m[a],m[a]=m[r],m[r]=u,h*=-1),o=m[r],t=r+1;t<l;t++){for(s=(i=m[t])[r]/o[r],a=r+1;a<l-1;a+=2)c=a+1,i[a]-=o[a]*s,i[c]-=o[c]*s;a!==l&&(i[a]-=o[a]*s)}if(0===o[r])return 0;h*=o[r]}return h*m[r][r]},numeric.transpose=function(e){var n,t,r,a,o,i=e.length,s=e[0].length,u=Array(s);for(t=0;t<s;t++)u[t]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],r=e[n-1],t=s-1;t>=1;--t)(o=u[t])[n]=a[t],o[n-1]=r[t],(o=u[--t])[n]=a[t],o[n-1]=r[t];0===t&&((o=u[0])[n]=a[0],o[n-1]=r[0])}if(0===n){for(r=e[0],t=s-1;t>=1;--t)u[t][0]=r[t],u[--t][0]=r[t];0===t&&(u[0][0]=r[0])}return u},numeric.negtranspose=function(e){var n,t,r,a,o,i=e.length,s=e[0].length,u=Array(s);for(t=0;t<s;t++)u[t]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],r=e[n-1],t=s-1;t>=1;--t)(o=u[t])[n]=-a[t],o[n-1]=-r[t],(o=u[--t])[n]=-a[t],o[n-1]=-r[t];0===t&&((o=u[0])[n]=-a[0],o[n-1]=-r[0])}if(0===n){for(r=e[0],t=s-1;t>=1;--t)u[t][0]=-r[t],u[--t][0]=-r[t];0===t&&(u[0][0]=-r[0])}return u},numeric._random=function e(n,t){var r,a,o=n[t],i=Array(o);if(t===n.length-1){for(a=Math.random,r=o-1;r>=1;r-=2)i[r]=a(),i[r-1]=a();return 0===r&&(i[0]=a()),i}for(r=o-1;r>=0;r--)i[r]=e(n,t+1);return i},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,n,t){if(void 0===t&&(t=Math.max(Math.round(n-e)+1,1)),t<2)return 1===t?[e]:[];var r,a=Array(t);for(r=--t;r>=0;r--)a[r]=(r*n+(t-r)*e)/t;return a},numeric.getBlock=function(e,n,t){var r=numeric.dim(e);return function e(a,o){var i,s=n[o],u=t[o]-s,c=Array(u);if(o===r.length-1){for(i=u;i>=0;i--)c[i]=a[i+s];return c}for(i=u;i>=0;i--)c[i]=e(a[i+s],o+1);return c}(e,0)},numeric.setBlock=function(e,n,t,r){var a=numeric.dim(e);return function e(r,o,i){var s,u=n[i],c=t[i]-u;if(i===a.length-1)for(s=c;s>=0;s--)r[s+u]=o[s];for(s=c;s>=0;s--)e(r[s+u],o[s],i+1)}(e,r,0),e},numeric.getRange=function(e,n,t){var r,a,o,i,s=n.length,u=t.length,c=Array(s);for(r=s-1;-1!==r;--r)for(c[r]=Array(u),o=c[r],i=e[n[r]],a=u-1;-1!==a;--a)o[a]=i[t[a]];return c},numeric.blockMatrix=function(e){var n=numeric.dim(e);if(n.length<4)return numeric.blockMatrix([e]);var t,r,a,o,i,s=n[0],u=n[1];for(t=0,r=0,a=0;a<s;++a)t+=e[a][0].length;for(o=0;o<u;++o)r+=e[0][o][0].length;var c=Array(t);for(a=0;a<t;++a)c[a]=Array(r);var l,h,m,f,d,p=0;for(a=0;a<s;++a){for(l=r,o=u-1;-1!==o;--o)for(l-=(i=e[a][o])[0].length,m=i.length-1;-1!==m;--m)for(d=i[m],h=c[p+m],f=d.length-1;-1!==f;--f)h[l+f]=d[f];p+=e[a][0].length}return c},numeric.tensor=function(e,n){if("number"==typeof e||"number"==typeof n)return numeric.mul(e,n);var t=numeric.dim(e),r=numeric.dim(n);if(1!==t.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,i,s,u=t[0],c=r[0],l=Array(u);for(o=u-1;o>=0;o--){for(a=Array(c),s=e[o],i=c-1;i>=3;--i)a[i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i];for(;i>=0;)a[i]=s*n[i],--i;l[o]=a}return l},numeric.T=function(e,n){this.x=e,this.y=n},numeric.t=function(e,n){return new numeric.T(e,n)},numeric.Tbinop=function(e,n,t,r,a){var o;if(numeric.indexOf,"string"!=typeof a)for(o in a="",numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||n.indexOf(o)>=0||t.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(a+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+t+");\n}\nif(y.y) {\n  return new numeric.T("+n+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,n=numeric.div;if(this.y){var t=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(n(this.x,t),n(numeric.neg(this.y),t))}return new T(n(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var n=numeric.div;return this.y?new numeric.T(n(this.x,e.x),n(this.y,e.x)):new numeric.T(n(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,n=this.x,t=this.y;return t?new numeric.T(e(n),e(t)):new numeric.T(e(n))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,n=this.x,t=this.y;return t?new numeric.T(e(n),numeric.negtranspose(t)):new numeric.T(e(n))},numeric.Tunop=function(e,n,t){return"string"!=typeof t&&(t=""),Function("var x = this;\n"+t+"\nif(x.y) {  "+n+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var n,t,r,a,o,i,s,u,c,l,h,m,f,d,p,M,g,v,y=e.x.length,x=numeric.identity(y),b=numeric.rep([y,y],0),w=numeric.clone(e.x),T=numeric.clone(e.y);for(c=0;c<y;c++){for(m=(d=w[c][c])*d+(p=T[c][c])*p,h=c,l=c+1;l<y;l++)(f=(d=w[l][c])*d+(p=T[l][c])*p)>m&&(h=l,m=f);for(h!==c&&(v=w[c],w[c]=w[h],w[h]=v,v=T[c],T[c]=T[h],T[h]=v,v=x[c],x[c]=x[h],x[h]=v,v=b[c],b[c]=b[h],b[h]=v),n=w[c],t=T[c],o=x[c],i=b[c],d=n[c],p=t[c],l=c+1;l<y;l++)M=n[l],g=t[l],n[l]=(M*d+g*p)/m,t[l]=(g*d-M*p)/m;for(l=0;l<y;l++)M=o[l],g=i[l],o[l]=(M*d+g*p)/m,i[l]=(g*d-M*p)/m;for(l=c+1;l<y;l++){for(r=w[l],a=T[l],s=x[l],u=b[l],d=r[c],p=a[c],h=c+1;h<y;h++)M=n[h],g=t[h],r[h]-=M*d-g*p,a[h]-=g*d+M*p;for(h=0;h<y;h++)M=o[h],g=i[h],s[h]-=M*d-g*p,u[h]-=g*d+M*p}}for(c=y-1;c>0;c--)for(o=x[c],i=b[c],l=c-1;l>=0;l--)for(s=x[l],u=b[l],d=w[l][c],p=T[l][c],h=y-1;h>=0;h--)M=o[h],g=i[h],s[h]-=d*M-p*g,u[h]-=d*g+p*M;return new numeric.T(x,b)},numeric.T.prototype.get=function(e){var n,t=this.x,r=this.y,a=0,o=e.length;if(r){for(;a<o;)t=t[n=e[a]],r=r[n],a++;return new numeric.T(t,r)}for(;a<o;)t=t[n=e[a]],a++;return new numeric.T(t)},numeric.T.prototype.set=function(e,n){var t,r=this.x,a=this.y,o=0,i=e.length,s=n.x,u=n.y;if(0===i)return u?this.y=u:a&&(this.y=void 0),this.x=r,this;if(u){for(a||(a=numeric.rep(numeric.dim(r),0),this.y=a);o<i-1;)r=r[t=e[o]],a=a[t],o++;return r[t=e[o]]=s,a[t]=u,this}if(a){for(;o<i-1;)r=r[t=e[o]],a=a[t],o++;return r[t=e[o]]=s,a[t]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<i-1;)r=r[t=e[o]],o++;return r[t=e[o]]=s,this},numeric.T.prototype.getRows=function(e,n){var t,r,a=n-e+1,o=Array(a),i=this.x,s=this.y;for(t=e;t<=n;t++)o[t-e]=i[t];if(s){for(r=Array(a),t=e;t<=n;t++)r[t-e]=s[t];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,n,t){var r,a=this.x,o=this.y,i=t.x,s=t.y;for(r=e;r<=n;r++)a[r]=i[r-e];if(s)for(o||(o=numeric.rep(numeric.dim(a),0),this.y=o),r=e;r<=n;r++)o[r]=s[r-e];else if(o)for(r=e;r<=n;r++)o[r]=numeric.rep([i[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var n=this.x,t=this.y;return t?new numeric.T(n[e],t[e]):new numeric.T(n[e])},numeric.T.prototype.setRow=function(e,n){var t=this.x,r=this.y,a=n.x,o=n.y;return t[e]=a,o?(r||(r=numeric.rep(numeric.dim(t),0),this.y=r),r[e]=o):r&&(r=numeric.rep([a.length],0)),this},numeric.T.prototype.getBlock=function(e,n){var t=this.x,r=this.y,a=numeric.getBlock;return r?new numeric.T(a(t,e,n),a(r,e,n)):new numeric.T(a(t,e,n))},numeric.T.prototype.setBlock=function(e,n,t){t instanceof numeric.T||(t=new numeric.T(t));var r=this.x,a=this.y,o=numeric.setBlock,i=t.x,s=t.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),o(r,e,n,i),o(a,e,n,s),this;o(r,e,n,i),a&&o(a,e,n,numeric.rep(numeric.dim(i),0))},numeric.T.rep=function(e,n){var t=numeric.T;n instanceof t||(n=new t(n));var r=n.x,a=n.y,o=numeric.rep;return a?new t(o(e,r),o(e,a)):new t(o(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var n=e.x,t=e.y,r=numeric.diag;return t?new numeric.T(r(n),r(t)):new numeric.T(r(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,n=this.x,t=this.y;return t?new e.T(e.getDiag(n),e.getDiag(t)):new e.T(e.getDiag(n))},numeric.house=function(e){var n=numeric.clone(e),t=(e[0]>=0?1:-1)*numeric.norm2(e);n[0]+=t;var r=numeric.norm2(n);if(0===r)throw new Error("eig: internal error");return numeric.div(n,r)},numeric.toUpperHessenberg=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var t,r,a,o,i,s,u,c,l,h,m=n[0],f=numeric.clone(e),d=numeric.identity(m);for(r=0;r<m-2;r++){for(o=Array(m-r-1),t=r+1;t<m;t++)o[t-r-1]=f[t][r];if(numeric.norm2(o)>0){for(i=numeric.house(o),s=numeric.getBlock(f,[r+1,r],[m-1,m-1]),u=numeric.tensor(i,numeric.dot(i,s)),t=r+1;t<m;t++)for(c=f[t],l=u[t-r-1],a=r;a<m;a++)c[a]-=2*l[a-r];for(s=numeric.getBlock(f,[0,r+1],[m-1,m-1]),u=numeric.tensor(numeric.dot(s,i),i),t=0;t<m;t++)for(c=f[t],l=u[t],a=r+1;a<m;a++)c[a]-=2*l[a-r-1];for(s=Array(m-r-1),t=r+1;t<m;t++)s[t-r-1]=d[t];for(u=numeric.tensor(i,numeric.dot(i,s)),t=r+1;t<m;t++)for(h=d[t],l=u[t-r-1],a=0;a<m;a++)h[a]-=2*l[a]}}return{H:f,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,n){void 0===n&&(n=1e4),e=numeric.clone(e),numeric.clone(e);var t,r,a,o,i,s,u,c,l,h,m,f,d,p,M,g,v,y,x=numeric.dim(e)[0],b=numeric.identity(x);if(x<3)return{Q:b,B:[[0,x-1]]};var w=numeric.epsilon;for(y=0;y<n;y++){for(g=0;g<x-1;g++)if(Math.abs(e[g+1][g])<w*(Math.abs(e[g][g])+Math.abs(e[g+1][g+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[g,g]),n),A=numeric.QRFrancis(numeric.getBlock(e,[g+1,g+1],[x-1,x-1]),n);for(f=Array(g+1),M=0;M<=g;M++)f[M]=b[M];for(d=numeric.dot(T.Q,f),M=0;M<=g;M++)b[M]=d[M];for(f=Array(x-g-1),M=g+1;M<x;M++)f[M-g-1]=b[M];for(d=numeric.dot(A.Q,f),M=g+1;M<x;M++)b[M]=d[M-g-1];return{Q:b,B:T.B.concat(numeric.add(A.B,g+1))}}var _,E,N;for(a=e[x-2][x-2],o=e[x-2][x-1],i=e[x-1][x-2],c=a+(s=e[x-1][x-1]),u=a*s-o*i,l=numeric.getBlock(e,[0,0],[2,2]),c*c>=4*u?(_=.5*(c+Math.sqrt(c*c-4*u)),E=.5*(c-Math.sqrt(c*c-4*u)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,_+E)),numeric.diag(numeric.rep([3],_*E)))):l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,c)),numeric.diag(numeric.rep([3],u))),t=[l[0][0],l[1][0],l[2][0]],r=numeric.house(t),f=[e[0],e[1],e[2]],d=numeric.tensor(r,numeric.dot(r,f)),M=0;M<3;M++)for(m=e[M],p=d[M],v=0;v<x;v++)m[v]-=2*p[v];for(f=numeric.getBlock(e,[0,0],[x-1,2]),d=numeric.tensor(numeric.dot(f,r),r),M=0;M<x;M++)for(m=e[M],p=d[M],v=0;v<3;v++)m[v]-=2*p[v];for(f=[b[0],b[1],b[2]],d=numeric.tensor(r,numeric.dot(r,f)),M=0;M<3;M++)for(h=b[M],p=d[M],v=0;v<x;v++)h[v]-=2*p[v];for(g=0;g<x-2;g++){for(v=g;v<=g+1;v++)if(Math.abs(e[v+1][v])<w*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){for(T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),n),A=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[x-1,x-1]),n),f=Array(v+1),M=0;M<=v;M++)f[M]=b[M];for(d=numeric.dot(T.Q,f),M=0;M<=v;M++)b[M]=d[M];for(f=Array(x-v-1),M=v+1;M<x;M++)f[M-v-1]=b[M];for(d=numeric.dot(A.Q,f),M=v+1;M<x;M++)b[M]=d[M-v-1];return{Q:b,B:T.B.concat(numeric.add(A.B,v+1))}}for(N=Math.min(x-1,g+3),t=Array(N-g),M=g+1;M<=N;M++)t[M-g-1]=e[M][g];for(r=numeric.house(t),f=numeric.getBlock(e,[g+1,g],[N,x-1]),d=numeric.tensor(r,numeric.dot(r,f)),M=g+1;M<=N;M++)for(m=e[M],p=d[M-g-1],v=g;v<x;v++)m[v]-=2*p[v-g];for(f=numeric.getBlock(e,[0,g+1],[x-1,N]),d=numeric.tensor(numeric.dot(f,r),r),M=0;M<x;M++)for(m=e[M],p=d[M],v=g+1;v<=N;v++)m[v]-=2*p[v-g-1];for(f=Array(N-g),M=g+1;M<=N;M++)f[M-g-1]=b[M];for(d=numeric.tensor(r,numeric.dot(r,f)),M=g+1;M<=N;M++)for(h=b[M],p=d[M-g-1],v=0;v<x;v++)h[v]-=2*p[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,n){var t,r,a,o,i,s,u,c,l,h,m,f,d,p,M,g,v=numeric.toUpperHessenberg(e),y=numeric.QRFrancis(v.H,n),x=numeric.T,b=e.length,w=y.B,T=numeric.dot(y.Q,numeric.dot(v.H,numeric.transpose(y.Q))),A=new x(numeric.dot(y.Q,v.Q)),_=w.length,E=Math.sqrt;for(r=0;r<_;r++)if((t=w[r][0])===w[r][1]);else{if(o=t+1,i=T[t][t],s=T[t][o],u=T[o][t],c=T[o][o],0===s&&0===u)continue;(h=(l=-i-c)*l-4*(i*c-s*u))>=0?((M=(i-(m=l<0?-.5*(l-E(h)):-.5*(l+E(h))))*(i-m)+s*s)>(g=u*u+(c-m)*(c-m))?(d=(i-m)/(M=E(M)),p=s/M):(d=u/(g=E(g)),p=(c-m)/g),a=new x([[p,-d],[d,p]]),A.setRows(t,o,a.dot(A.getRows(t,o)))):(m=-.5*l,f=.5*E(-h),(M=(i-m)*(i-m)+s*s)>(g=u*u+(c-m)*(c-m))?(d=(i-m)/(M=E(M+f*f)),p=s/M,m=0,f/=M):(d=u/(g=E(g+f*f)),p=(c-m)/g,m=f/g,f=0),a=new x([[p,-d],[d,p]],[[m,f],[f,-m]]),A.setRows(t,o,a.dot(A.getRows(t,o))))}var N=A.dot(e).dot(A.transjugate()),I=(b=e.length,numeric.T.identity(b));for(o=0;o<b;o++)if(o>0)for(r=o-1;r>=0;r--){var S=N.get([r,r]),R=N.get([o,o]);numeric.neq(S.x,R.x)||numeric.neq(S.y,R.y)?(m=N.getRow(r).getBlock([r],[o-1]),f=I.getRow(o).getBlock([r],[o-1]),I.set([o,r],N.get([r,o]).neg().sub(m.dot(f)).div(S.sub(R)))):I.setRow(o,I.getRow(r))}for(o=0;o<b;o++)m=I.getRow(o),I.setRow(o,m.div(m.norm2()));return I=I.transpose(),I=A.transjugate().dot(I),{lambda:N.getDiag(),E:I}},numeric.ccsSparse=function(e){var n,t,r,a=e.length,o=[];for(t=a-1;-1!==t;--t)for(r in n=e[t]){for(r=parseInt(r);r>=o.length;)o[o.length]=0;0!==n[r]&&o[r]++}var i=o.length,s=Array(i+1);for(s[0]=0,t=0;t<i;++t)s[t+1]=s[t]+o[t];var u=Array(s[i]),c=Array(s[i]);for(t=a-1;-1!==t;--t)for(r in n=e[t])0!==n[r]&&(o[r]--,u[s[r]+o[r]]=t,c[s[r]+o[r]]=n[r]);return[s,u,c]},numeric.ccsFull=function(e){var n,t,r,a,o=e[0],i=e[1],s=e[2],u=numeric.ccsDim(e),c=u[0],l=u[1],h=numeric.rep([c,l],0);for(n=0;n<l;n++)for(r=o[n],a=o[n+1],t=r;t<a;++t)h[i[t]][n]=s[t];return h},numeric.ccsTSolve=function(e,n,t,r,a){var o,i,s,u,c,l,h,m=e[0],f=e[1],d=e[2],p=m.length-1,M=Math.max,g=0;function v(e){var n;if(0===t[e]){for(t[e]=1,n=m[e];n<m[e+1];++n)v(f[n]);a[g]=e,++g}}for(void 0===r&&(t=numeric.rep([p],0)),void 0===r&&(r=numeric.linspace(0,t.length-1)),void 0===a&&(a=[]),o=r.length-1;-1!==o;--o)v(r[o]);for(a.length=g,o=a.length-1;-1!==o;--o)t[a[o]]=0;for(o=r.length-1;-1!==o;--o)i=r[o],t[i]=n[i];for(o=a.length-1;-1!==o;--o){for(i=a[o],s=m[i],u=M(m[i+1],s),c=s;c!==u;++c)if(f[c]===i){t[i]/=d[c];break}for(h=t[i],c=s;c!==u;++c)(l=f[c])!==i&&(t[l]-=h*d[c])}return t},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,n,t,r,a,o){var i,s,u,c=0,l=a.length,h=this.k,m=this.k1,f=this.j;if(0===r[e])for(r[e]=1,f[0]=e,h[0]=s=n[e],m[0]=u=n[e+1];;)if(s>=u){if(a[l]=f[c],0===c)return;++l,s=h[--c],u=m[c]}else 0===r[i=o[t[s]]]?(r[i]=1,h[c]=s,f[++c]=i,s=n[i],m[c]=u=n[i+1]):++s},numeric.ccsLPSolve=function(e,n,t,r,a,o,i){var s,u,c,l,h,m,f,d,p,M=e[0],g=e[1],v=e[2],y=(M.length,n[0]),x=n[1],b=n[2];for(u=y[a],c=y[a+1],r.length=0,s=u;s<c;++s)i.dfs(o[x[s]],M,g,t,r,o);for(s=r.length-1;-1!==s;--s)t[r[s]]=0;for(s=u;s!==c;++s)t[l=o[x[s]]]=b[s];for(s=r.length-1;-1!==s;--s){for(h=M[l=r[s]],m=M[l+1],f=h;f<m;++f)if(o[g[f]]===l){t[l]/=v[f];break}for(p=t[l],f=h;f<m;++f)(d=o[g[f]])!==l&&(t[d]-=p*v[f])}return t},numeric.ccsLUP1=function(e,n){var t,r,a,o,i,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],m=l[0],f=l[1],d=l[2],p=h[0],M=h[1],g=h[2],v=numeric.rep([c],0),y=numeric.rep([c],0),x=numeric.ccsLPSolve,b=(Math.max,Math.abs),w=numeric.linspace(0,c-1),T=numeric.linspace(0,c-1),A=new numeric.ccsDFS(c);for(void 0===n&&(n=1),t=0;t<c;++t){for(x(l,e,v,y,t,T,A),o=-1,i=-1,r=y.length-1;-1!==r;--r)(a=y[r])<=t||(s=b(v[a]))>o&&(i=a,o=s);for(b(v[t])<n*o&&(r=w[t],o=w[i],w[t]=o,T[o]=t,w[i]=r,T[r]=i,o=v[t],v[t]=v[i],v[i]=o),o=m[t],i=p[t],u=v[t],f[o]=w[t],d[o]=1,++o,r=y.length-1;-1!==r;--r)s=v[a=y[r]],y[r]=0,v[a]=0,a<=t?(M[i]=a,g[i]=s,++i):(f[o]=w[a],d[o]=s/u,++o);m[t+1]=o,p[t+1]=i}for(r=f.length-1;-1!==r;--r)f[r]=T[f[r]];return{L:l,U:h,P:w,Pinv:T}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,n,t,r,a,o,i){var s,u,c,l=0,h=a.length,m=this.k,f=this.k1,d=this.j;if(0===r[e])for(r[e]=1,d[0]=e,m[0]=u=n[o[e]],f[0]=c=n[o[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(a[h]=o[d[l]],0===l)return;++h,u=m[--l],c=f[l]}else 0===r[s=t[u]]?(r[s]=1,m[l]=u,d[++l]=s,u=n[s=o[s]],f[l]=c=n[s+1]):++u}},numeric.ccsLPSolve0=function(e,n,t,r,a,o,i,s){var u,c,l,h,m,f,d,p,M,g=e[0],v=e[1],y=e[2],x=(g.length,n[0]),b=n[1],w=n[2];for(c=x[a],l=x[a+1],r.length=0,u=c;u<l;++u)s.dfs(b[u],g,v,t,r,o,i);for(u=r.length-1;-1!==u;--u)t[i[h=r[u]]]=0;for(u=c;u!==l;++u)t[h=b[u]]=w[u];for(u=r.length-1;-1!==u;--u){for(p=i[h=r[u]],m=g[h],f=g[h+1],d=m;d<f;++d)if(v[d]===p){t[p]/=y[d];break}for(M=t[p],d=m;d<f;++d)t[v[d]]-=M*y[d];t[p]=M}},numeric.ccsLUP0=function(e,n){var t,r,a,o,i,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],m=l[0],f=l[1],d=l[2],p=h[0],M=h[1],g=h[2],v=numeric.rep([c],0),y=numeric.rep([c],0),x=numeric.ccsLPSolve0,b=(Math.max,Math.abs),w=numeric.linspace(0,c-1),T=numeric.linspace(0,c-1),A=new numeric.ccsDFS0(c);for(void 0===n&&(n=1),t=0;t<c;++t){for(x(l,e,v,y,t,T,w,A),o=-1,i=-1,r=y.length-1;-1!==r;--r)(a=y[r])<=t||(s=b(v[w[a]]))>o&&(i=a,o=s);for(b(v[w[t]])<n*o&&(r=w[t],o=w[i],w[t]=o,T[o]=t,w[i]=r,T[r]=i),o=m[t],i=p[t],u=v[w[t]],f[o]=w[t],d[o]=1,++o,r=y.length-1;-1!==r;--r)s=v[w[a=y[r]]],y[r]=0,v[w[a]]=0,a<=t?(M[i]=a,g[i]=s,++i):(f[o]=w[a],d[o]=s/u,++o);m[t+1]=o,p[t+1]=i}for(r=f.length-1;-1!==r;--r)f[r]=T[f[r]];return{L:l,U:h,P:w,Pinv:T}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,n,t){var r=numeric.ccsDim(e),a=r[0],o=r[1];void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]),void 0===t?t=numeric.linspace(0,o-1):"number"==typeof t&&(t=[t]);var i,s,u,c,l=n.length,h=t.length,m=numeric.rep([o],0),f=[],d=[],p=[m,f,d],M=e[0],g=e[1],v=e[2],y=numeric.rep([a],0),x=0,b=numeric.rep([a],0);for(s=0;s<h;++s){var w=M[c=t[s]],T=M[c+1];for(i=w;i<T;++i)b[u=g[i]]=1,y[u]=v[i];for(i=0;i<l;++i)b[n[i]]&&(f[x]=i,d[x]=y[n[i]],++x);for(i=w;i<T;++i)b[u=g[i]]=0;m[s+1]=x}return p},numeric.ccsDot=function(e,n){var t,r,a,o,i,s,u,c,l,h,m,f=e[0],d=e[1],p=e[2],M=n[0],g=n[1],v=n[2],y=numeric.ccsDim(e),x=numeric.ccsDim(n),b=y[0],w=(y[1],x[1]),T=numeric.rep([b],0),A=numeric.rep([b],0),_=Array(b),E=numeric.rep([w],0),N=[],I=[],S=[E,N,I];for(a=0;a!==w;++a){for(o=M[a],i=M[a+1],l=0,r=o;r<i;++r)for(h=g[r],m=v[r],s=f[h],u=f[h+1],t=s;t<u;++t)0===A[c=d[t]]&&(_[l]=c,A[c]=1,l+=1),T[c]=T[c]+p[t]*m;for(i=(o=E[a])+l,E[a+1]=i,r=l-1;-1!==r;--r)m=o+r,t=_[r],N[m]=t,I[m]=T[t],A[t]=0,T[t]=0;E[a+1]=E[a]+l}return S},numeric.ccsLUPSolve=function(e,n){var t=e.L,r=e.U,a=(e.P,n[0]),o=!1;"object"!=typeof a&&(a=(n=[[0,n.length],numeric.linspace(0,n.length-1),n])[0],o=!0);var i,s,u,c,l,h,m=n[1],f=n[2],d=t[0].length-1,p=a.length-1,M=numeric.rep([d],0),g=Array(d),v=numeric.rep([d],0),y=Array(d),x=numeric.rep([p+1],0),b=[],w=[],T=numeric.ccsTSolve,A=0;for(i=0;i<p;++i){for(l=0,u=a[i],c=a[i+1],s=u;s<c;++s)h=e.Pinv[m[s]],y[l]=h,v[h]=f[s],++l;for(y.length=l,T(t,v,M,y,g),s=y.length-1;-1!==s;--s)v[y[s]]=0;if(T(r,M,v,g,y),o)return v;for(s=g.length-1;-1!==s;--s)M[g[s]]=0;for(s=y.length-1;-1!==s;--s)h=y[s],b[A]=h,w[A]=v[h],v[h]=0,++A;x[i+1]=A}return[x,b,w]},numeric.ccsbinop=function(e,n){return void 0===n&&(n=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+n+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var n,t=e[0],r=e[1],a=e[2],o=numeric.sup(r)+1,i=t.length,s=numeric.rep([o],0),u=Array(i),c=Array(i),l=numeric.rep([o],0);for(n=0;n<i;++n)l[r[n]]++;for(n=0;n<o;++n)s[n+1]=s[n]+l[n];var h,m,f=s.slice(0);for(n=0;n<i;++n)u[h=f[m=r[n]]]=t[n],c[h]=a[n],f[m]=f[m]+1;return[s,u,c]},numeric.ccsGather=function(e){var n,t,r,a,o,i=e[0],s=e[1],u=e[2],c=i.length-1,l=s.length,h=Array(l),m=Array(l),f=Array(l);for(o=0,n=0;n<c;++n)for(r=i[n],a=i[n+1],t=r;t!==a;++t)m[o]=n,h[o]=s[t],f[o]=u[t],++o;return[h,m,f]},numeric.sdim=function e(n,t,r){if(void 0===t&&(t=[]),"object"!=typeof n)return t;var a;for(a in void 0===r&&(r=0),r in t||(t[r]=0),n.length>t[r]&&(t[r]=n.length),n)n.hasOwnProperty(a)&&e(n[a],t,r+1);return t},numeric.sclone=function e(n,t,r){void 0===t&&(t=0),void 0===r&&(r=numeric.sdim(n).length);var a,o=Array(n.length);if(t===r-1){for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}for(a in n)n.hasOwnProperty(a)&&(o[a]=e(n[a],t+1,r));return o},numeric.sdiag=function(e){var n,t,r=e.length,a=Array(r);for(n=r-1;n>=1;n-=2)t=n-1,a[n]=[],a[n][n]=e[n],a[t]=[],a[t][t]=e[t];return 0===n&&(a[0]=[],a[0][0]=e[n]),a},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var n,t,r,a=[];for(n in e.length,e)if(e.hasOwnProperty(n))for(t in r=e[n])r.hasOwnProperty(t)&&("object"!=typeof a[t]&&(a[t]=[]),a[t][n]=r[t]);return a},numeric.sLUP=function(e,n){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,n){var t,r,a,o,i,s,u,c=e.length,l=(n.length,numeric.stranspose(n)),h=l.length,m=Array(c);for(a=c-1;a>=0;a--){for(u=[],t=e[a],i=h-1;i>=0;i--){for(o in s=0,r=l[i],t)t.hasOwnProperty(o)&&o in r&&(s+=t[o]*r[o]);s&&(u[i]=s)}m[a]=u}return m},numeric.sdotMV=function(e,n){var t,r,a,o,i=e.length,s=Array(i);for(r=i-1;r>=0;r--){for(a in o=0,t=e[r])t.hasOwnProperty(a)&&n[a]&&(o+=t[a]*n[a]);o&&(s[r]=o)}return s},numeric.sdotVM=function(e,n){var t,r,a,o,i=[];for(t in e)if(e.hasOwnProperty(t))for(r in a=n[t],o=e[t],a)a.hasOwnProperty(r)&&(i[r]||(i[r]=0),i[r]+=o*a[r]);return i},numeric.sdotVV=function(e,n){var t,r=0;for(t in e)e[t]&&n[t]&&(r+=e[t]*n[t]);return r},numeric.sdot=function(e,n){var t=numeric.sdim(e).length,r=numeric.sdim(n).length;switch(1e3*t+r){case 0:return e*n;case 1001:return numeric.sdotVV(e,n);case 2001:return numeric.sdotMV(e,n);case 1002:return numeric.sdotVM(e,n);case 2002:return numeric.sdotMM(e,n);default:throw new Error("numeric.sdot not implemented for tensors of order "+t+" and "+r)}},numeric.sscatter=function(e){var n,t,r,a,o=e[0].length,i=e.length,s=[];for(t=o-1;t>=0;--t)if(e[i-1][t]){for(a=s,r=0;r<i-2;r++)a[n=e[r][t]]||(a[n]=[]),a=a[n];a[e[r][t]]=e[r+1][t]}return s},numeric.sgather=function e(n,t,r){var a,o,i;for(o in void 0===t&&(t=[]),void 0===r&&(r=[]),a=r.length,n)if(n.hasOwnProperty(o))if(r[a]=parseInt(o),"number"==typeof(i=n[o])){if(i){if(0===t.length)for(o=a+1;o>=0;--o)t[o]=[];for(o=a;o>=0;--o)t[o].push(r[o]);t[a+1].push(i)}}else e(i,t,r);return r.length>a&&r.pop(),t},numeric.cLU=function(e){var n,t,r,a,o,i,s=e[0],u=e[1],c=e[2],l=s.length,h=0;for(n=0;n<l;n++)s[n]>h&&(h=s[n]);h++;var m,f=Array(h),d=Array(h),p=numeric.rep([h],1/0),M=numeric.rep([h],-1/0);for(r=0;r<l;r++)n=s[r],(t=u[r])<p[n]&&(p[n]=t),t>M[n]&&(M[n]=t);for(n=0;n<h-1;n++)M[n]>M[n+1]&&(M[n+1]=M[n]);for(n=h-1;n>=1;n--)p[n]<p[n-1]&&(p[n-1]=p[n]);for(n=0;n<h;n++)d[n]=numeric.rep([M[n]-p[n]+1],0),f[n]=numeric.rep([n-p[n]],0),p[n],M[n];for(r=0;r<l;r++)d[n=s[r]][u[r]-p[n]]=c[r];for(n=0;n<h-1;n++)for(a=n-p[n],y=d[n],t=n+1;p[t]<=n&&t<h;t++)if(o=n-p[t],i=M[n]-n,m=(x=d[t])[o]/y[a]){for(r=1;r<=i;r++)x[r+o]-=m*y[r+a];f[t][n-p[t]]=m}var g,v,y=[],x=[],b=[],w=[],T=[],A=[];for(l=0,g=0,n=0;n<h;n++){for(a=p[n],o=M[n],v=d[n],t=n;t<=o;t++)v[t-a]&&(y[l]=n,x[l]=t,b[l]=v[t-a],l++);for(v=f[n],t=a;t<n;t++)v[t-a]&&(w[g]=n,T[g]=t,A[g]=v[t-a],g++);w[g]=n,T[g]=n,A[g]=1,g++}return{U:[y,x,b],L:[w,T,A]}},numeric.cLUsolve=function(e,n){var t,r,a=e.L,o=e.U,i=numeric.clone(n),s=a[0],u=a[1],c=a[2],l=o[0],h=o[1],m=o[2],f=l.length,d=(s.length,i.length);for(r=0,t=0;t<d;t++){for(;u[r]<t;)i[t]-=c[r]*i[u[r]],r++;r++}for(r=f-1,t=d-1;t>=0;t--){for(;h[r]>t;)i[t]-=m[r]*i[h[r]],r--;i[t]/=m[r],r--}return i},numeric.cgrid=function(e,n){"number"==typeof e&&(e=[e,e]);var t,r,a,o=numeric.rep(e,-1);for("function"!=typeof n&&(n="L"===n?function(n,t){return n>=e[0]/2||t<e[1]/2}:function(e,n){return!0}),a=0,t=1;t<e[0]-1;t++)for(r=1;r<e[1]-1;r++)n(t,r)&&(o[t][r]=a,a++);return o},numeric.cdelsq=function(e){var n,t,r,a,o,i=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],c=s[1],l=[],h=[],m=[];for(n=1;n<u-1;n++)for(t=1;t<c-1;t++)if(!(e[n][t]<0)){for(r=0;r<4;r++)a=n+i[r][0],o=t+i[r][1],e[a][o]<0||(l.push(e[n][t]),h.push(e[a][o]),m.push(-1));l.push(e[n][t]),h.push(e[n][t]),m.push(4)}return[l,h,m]},numeric.cdotMV=function(e,n){var t,r,a,o=e[0],i=e[1],s=e[2],u=o.length;for(a=0,r=0;r<u;r++)o[r]>a&&(a=o[r]);for(a++,t=numeric.rep([a],0),r=0;r<u;r++)t[o[r]]+=s[r]*n[i[r]];return t},numeric.Spline=function(e,n,t,r,a){this.x=e,this.yl=n,this.yr=t,this.kl=r,this.kr=a},numeric.Spline.prototype._at=function(e,n){var t,r,a,o=this.x,i=this.yl,s=this.yr,u=this.kl,c=this.kr,l=numeric.add,h=numeric.sub,m=numeric.mul;t=h(m(u[n],o[n+1]-o[n]),h(s[n+1],i[n])),r=l(m(c[n+1],o[n]-o[n+1]),h(s[n+1],i[n]));var f=(a=(e-o[n])/(o[n+1]-o[n]))*(1-a);return l(l(l(m(1-a,i[n]),m(a,s[n+1])),m(t,f*(1-a))),m(r,f*a))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var n,t,r,a=this.x,o=a.length,i=Math.floor;for(n=0,t=o-1;t-n>1;)a[r=i((n+t)/2)]<=e?n=r:t=r;return this._at(e,n)}o=e.length;var s,u=Array(o);for(s=o-1;-1!==s;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,n,t,r=this.x,a=this.yl,o=this.yr,i=this.kl,s=this.kr,u=a.length,c=i,l=s,h=Array(u),m=Array(u),f=numeric.add,d=numeric.mul,p=numeric.div,M=numeric.sub;for(e=u-1;-1!==e;--e)n=r[e+1]-r[e],t=M(o[e+1],a[e]),h[e]=p(f(d(t,6),d(i[e],-4*n),d(s[e+1],-2*n)),n*n),m[e+1]=p(f(d(t,-6),d(i[e],2*n),d(s[e+1],4*n)),n*n);return new numeric.Spline(r,c,l,h,m)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var n=[],t=this.x,r=this.yl,a=this.yr,o=this.kl,i=this.kr;"number"==typeof r[0]&&(r=[r],a=[a],o=[o],i=[i]);var s,u,c,l,h,m,f,d,p,M,g,v,y,x,b,w,T,A,_,E,N,I,S,R=r.length,D=t.length-1,z=(n=Array(R),Math.sqrt);for(s=0;s!==R;++s){for(l=r[s],h=a[s],m=o[s],f=i[s],d=[],u=0;u!==D;u++){for(u>0&&h[u]*l[u]<0&&d.push(t[u]),w=t[u+1]-t[u],t[u],g=l[u],v=h[u+1],p=m[u]/w,y=(M=f[u+1]/w)+3*g+2*p-3*v,x=3*(M+p+2*(g-v)),(b=e(p-M+3*(g-v))+12*M*g)<=0?T=(A=y/x)>t[u]&&A<t[u+1]?[t[u],A,t[u+1]]:[t[u],t[u+1]]:(A=(y-z(b))/x,_=(y+z(b))/x,T=[t[u]],A>t[u]&&A<t[u+1]&&T.push(A),_>t[u]&&_<t[u+1]&&T.push(_),T.push(t[u+1])),N=T[0],A=this._at(N,u),c=0;c<T.length-1;c++)if(I=T[c+1],_=this._at(I,u),0!==A)if(0===_||A*_>0)N=I,A=_;else{for(var O=0;!((S=(A*I-_*N)/(A-_))<=N||S>=I);)if((E=this._at(S,u))*_>0)I=S,_=E,-1===O&&(A*=.5),O=-1;else{if(!(E*A>0))break;N=S,A=E,1===O&&(_*=.5),O=1}d.push(S),N=T[c+1],A=this._at(N,u)}else d.push(N),N=I,A=_;0===_&&d.push(I)}n[s]=d}return"number"==typeof this.yl[0]?n[0]:n},numeric.spline=function(e,n,t,r){var a,o=e.length,i=[],s=[],u=[],c=numeric.sub,l=numeric.mul,h=numeric.add;for(a=o-2;a>=0;a--)s[a]=e[a+1]-e[a],u[a]=c(n[a+1],n[a]);"string"!=typeof t&&"string"!=typeof r||(t=r="periodic");var m=[[],[],[]];switch(typeof t){case"undefined":i[0]=l(3/(s[0]*s[0]),u[0]),m[0].push(0,0),m[1].push(0,1),m[2].push(2/s[0],1/s[0]);break;case"string":i[0]=h(l(3/(s[o-2]*s[o-2]),u[o-2]),l(3/(s[0]*s[0]),u[0])),m[0].push(0,0,0),m[1].push(o-2,0,1),m[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:i[0]=t,m[0].push(0),m[1].push(0),m[2].push(1)}for(a=1;a<o-1;a++)i[a]=h(l(3/(s[a-1]*s[a-1]),u[a-1]),l(3/(s[a]*s[a]),u[a])),m[0].push(a,a,a),m[1].push(a-1,a,a+1),m[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof r){case"undefined":i[o-1]=l(3/(s[o-2]*s[o-2]),u[o-2]),m[0].push(o-1,o-1),m[1].push(o-2,o-1),m[2].push(1/s[o-2],2/s[o-2]);break;case"string":m[1][m[1].length-1]=0;break;default:i[o-1]=r,m[0].push(o-1),m[1].push(o-1),m[2].push(1)}i="number"!=typeof i[0]?numeric.transpose(i):[i];var f=Array(i.length);if("string"==typeof t)for(a=f.length-1;-1!==a;--a)f[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(m)),i[a]),f[a][o-1]=f[a][0];else for(a=f.length-1;-1!==a;--a)f[a]=numeric.cLUsolve(numeric.cLU(m),i[a]);return f="number"==typeof n[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,n,n,f,f)},numeric.fftpow2=function e(n,t){var r=n.length;if(1!==r){var a,o,i=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),l=Array(r/2),h=Array(r/2);for(o=r/2,a=r-1;-1!==a;--a)l[--o]=n[a],h[o]=t[a],--a,u[o]=n[a],c[o]=t[a];e(u,c),e(l,h),o=r/2;var m,f,d,p=-6.283185307179586/r;for(a=r-1;-1!==a;--a)-1==--o&&(o=r/2-1),f=i(m=p*a),d=s(m),n[a]=u[o]+f*l[o]-d*h[o],t[a]=c[o]+f*h[o]+d*l[o]}},numeric._ifftpow2=function e(n,t){var r=n.length;if(1!==r){var a,o,i=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),l=Array(r/2),h=Array(r/2);for(o=r/2,a=r-1;-1!==a;--a)l[--o]=n[a],h[o]=t[a],--a,u[o]=n[a],c[o]=t[a];e(u,c),e(l,h),o=r/2;var m,f,d,p=6.283185307179586/r;for(a=r-1;-1!==a;--a)-1==--o&&(o=r/2-1),f=i(m=p*a),d=s(m),n[a]=u[o]+f*l[o]-d*h[o],t[a]=c[o]+f*h[o]+d*l[o]}},numeric.ifftpow2=function(e,n){numeric._ifftpow2(e,n),numeric.diveq(e,e.length),numeric.diveq(n,n.length)},numeric.convpow2=function(e,n,t,r){var a,o,i,s,u;for(numeric.fftpow2(e,n),numeric.fftpow2(t,r),a=e.length-1;-1!==a;--a)o=e[a],s=n[a],i=t[a],u=r[a],e[a]=o*i-s*u,n[a]=o*u+s*i;numeric.ifftpow2(e,n)},numeric.T.prototype.fft=function(){var e,n,t=this.x,r=this.y,a=t.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,m=Math.sin,f=-3.141592653589793/a,d=numeric.rep([u],0),p=numeric.rep([u],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=t[e];if(void 0!==r)for(e=0;e<a;e++)p[e]=r[e];for(c[0]=1,e=1;e<=u/2;e++)n=f*e*e,c[e]=h(n),l[e]=m(n),c[u-e]=h(n),l[u-e]=m(n);var M=new numeric.T(d,p),g=new numeric.T(c,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M},numeric.T.prototype.ifft=function(){var e,n,t=this.x,r=this.y,a=t.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,m=Math.sin,f=3.141592653589793/a,d=numeric.rep([u],0),p=numeric.rep([u],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=t[e];if(void 0!==r)for(e=0;e<a;e++)p[e]=r[e];for(c[0]=1,e=1;e<=u/2;e++)n=f*e*e,c[e]=h(n),l[e]=m(n),c[u-e]=h(n),l[u-e]=m(n);var M=new numeric.T(d,p),g=new numeric.T(c,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M.div(a)},numeric.gradient=function(e,n){var t=n.length,r=e(n);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var a,o,i,s,u,c,l,h,m,f=Math.max,d=numeric.clone(n),p=Array(t),M=(numeric.div,numeric.sub,f=Math.max,Math.abs),g=Math.min,v=0;for(a=0;a<t;a++)for(var y=f(1e-6*r,1e-8);;){if(++v>20)throw new Error("Numerical gradient fails");if(d[a]=n[a]+y,o=e(d),d[a]=n[a]-y,i=e(d),d[a]=n[a],isNaN(o)||isNaN(i))y/=16;else{if(p[a]=(o-i)/(2*y),s=n[a]-y,u=n[a],c=n[a]+y,l=(o-r)/y,h=(r-i)/y,m=f(M(p[a]),M(r),M(o),M(i),M(s),M(u),M(c),1e-8),!(g(f(M(l-p[a]),M(h-p[a]),M(l-h))/m,y/m)>.001))break;y/=16}}return p},numeric.uncmin=function(e,n,t,r,a,o,i){var s=numeric.gradient;void 0===i&&(i={}),void 0===t&&(t=1e-8),void 0===r&&(r=function(n){return s(e,n)}),void 0===a&&(a=1e3);var u,c,l=(n=numeric.clone(n)).length,h=e(n);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var m=Math.max,f=numeric.norm2;t=m(t,numeric.epsilon);var d,p,M,g,v,y,x,b,w,T,A=i.Hinv||numeric.identity(l),_=numeric.dot,E=(numeric.inv,numeric.sub),N=numeric.add,I=numeric.tensor,S=numeric.div,R=numeric.mul,D=numeric.all,z=numeric.isFinite,O=numeric.neg,C=0,P="";for(p=r(n);C<a;){if("function"==typeof o&&o(C,n,h,p,A)){P="Callback returned true";break}if(!D(z(p))){P="Gradient has Infinity or NaN";break}if(!D(z(d=O(_(A,p))))){P="Search direction has Infinity or NaN";break}if((T=f(d))<t){P="Newton step smaller than tol";break}for(w=1,c=_(p,d),v=n;C<a&&!(w*T<t)&&(v=N(n,g=R(d,w)),(u=e(v))-h>=.1*w*c||isNaN(u));)w*=.5,++C;if(w*T<t){P="Line search step size smaller than tol";break}if(C===a){P="maxit reached during line search";break}b=_(y=E(M=r(v),p),g),x=_(A,y),A=E(N(A,R((b+_(y,x))/(b*b),I(g,g))),S(N(I(x,g),I(g,x)),b)),n=v,h=u,p=M,++C}return{solution:n,f:h,gradient:p,invHessian:A,iterations:C,message:P}},numeric.Dopri=function(e,n,t,r,a,o,i){this.x=e,this.y=n,this.f=t,this.ymid=r,this.iterations=a,this.events=i,this.message=o},numeric.Dopri.prototype._at=function(e,n){function t(e){return e*e}var r,a,o,i,s,u,c,l,h,m=this,f=m.x,d=m.y,p=m.f,M=m.ymid,g=(f.length,Math.floor,numeric.add),v=numeric.mul,y=numeric.sub;return r=f[n],a=f[n+1],i=d[n],s=d[n+1],o=r+.5*(a-r),u=M[n],c=y(p[n],v(i,1/(r-o)+2/(r-a))),l=y(p[n+1],v(s,1/(a-o)+2/(a-r))),g(g(g(g(v(i,(h=[t(e-a)*(e-o)/t(r-a)/(r-o),t(e-r)*t(e-a)/t(r-o)/t(a-o),t(e-r)*(e-o)/t(a-r)/(a-o),(e-r)*t(e-a)*(e-o)/t(r-a)/(r-o),(e-a)*t(e-r)*(e-o)/t(r-a)/(a-o)])[0]),v(u,h[1])),v(s,h[2])),v(c,h[3])),v(l,h[4]))},numeric.Dopri.prototype.at=function(e){var n,t,r,a=Math.floor;if("number"!=typeof e){var o=e.length,i=Array(o);for(n=o-1;-1!==n;--n)i[n]=this.at(e[n]);return i}var s=this.x;for(n=0,t=s.length-1;t-n>1;)s[r=a(.5*(n+t))]<=e?n=r:t=r;return this._at(e,n)},numeric.dopri=function(e,n,t,r,a,o,i){void 0===a&&(a=1e-6),void 0===o&&(o=1e3);var s,u,c,l,h,m,f,d,p,M,g,v,y,x=[e],b=[t],w=[r(e,t)],T=[],A=[3/40,9/40],_=[44/45,-56/15,32/9],E=[19372/6561,-25360/2187,64448/6561,-212/729],N=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],I=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],R=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],z=0,O=(n-e)/10,C=0,P=numeric.add,L=numeric.mul,j=(Math.max,Math.min),k=Math.abs,U=numeric.norminf,q=Math.pow,F=numeric.any,Y=numeric.lt,G=numeric.and,V=(numeric.sub,new numeric.Dopri(x,b,w,T,-1,""));for("function"==typeof i&&(g=i(e,t));e<n&&C<o;)if(++C,e+O>n&&(O=n-e),s=r(e+R[0]*O,P(t,L(.2*O,w[z]))),u=r(e+R[1]*O,P(P(t,L(A[0]*O,w[z])),L(A[1]*O,s))),c=r(e+R[2]*O,P(P(P(t,L(_[0]*O,w[z])),L(_[1]*O,s)),L(_[2]*O,u))),l=r(e+R[3]*O,P(P(P(P(t,L(E[0]*O,w[z])),L(E[1]*O,s)),L(E[2]*O,u)),L(E[3]*O,c))),h=r(e+R[4]*O,P(P(P(P(P(t,L(N[0]*O,w[z])),L(N[1]*O,s)),L(N[2]*O,u)),L(N[3]*O,c)),L(N[4]*O,l))),m=r(e+O,p=P(P(P(P(P(t,L(w[z],O*I[0])),L(u,O*I[2])),L(c,O*I[3])),L(l,O*I[4])),L(h,O*I[5]))),(M="number"==typeof(f=P(P(P(P(P(L(w[z],O*D[0]),L(u,O*D[2])),L(c,O*D[3])),L(l,O*D[4])),L(h,O*D[5])),L(m,O*D[6])))?k(f):U(f))>a){if(e+(O=.2*O*q(a/M,.25))===e){V.msg="Step size became too small";break}}else{if(T[z]=P(P(P(P(P(P(t,L(w[z],O*S[0])),L(u,O*S[2])),L(c,O*S[3])),L(l,O*S[4])),L(h,O*S[5])),L(m,O*S[6])),x[++z]=e+O,b[z]=p,w[z]=m,"function"==typeof i){var J,B,H=e,X=e+.5*O;if(v=i(X,T[z-1]),F(y=G(Y(g,0),Y(0,v)))||(H=X,g=v,v=i(X=e+O,p),y=G(Y(g,0),Y(0,v))),F(y)){for(var W,Q,K=0,Z=1,$=1;;){if("number"==typeof g)B=($*v*H-Z*g*X)/($*v-Z*g);else for(B=X,d=g.length-1;-1!==d;--d)g[d]<0&&v[d]>0&&(B=j(B,($*v[d]*H-Z*g[d]*X)/($*v[d]-Z*g[d])));if(B<=H||B>=X)break;Q=i(B,J=V._at(B,z-1)),F(W=G(Y(g,0),Y(0,Q)))?(X=B,v=Q,y=W,$=1,-1===K?Z*=.5:Z=1,K=-1):(H=B,g=Q,Z=1,1===K?$*=.5:$=1,K=1)}return p=V._at(.5*(e+B),z-1),V.f[z]=r(B,J),V.x[z]=B,V.y[z]=J,V.ymid[z-1]=p,V.events=y,V.iterations=C,V}}e+=O,t=p,g=v,O=j(.8*O*q(a/M,.25),4*O)}return V.iterations=C,V},numeric.LU=function(e,n){n=n||!1;var t,r,a,o,i,s,u,c,l,h=Math.abs,m=e.length,f=m-1,d=new Array(m);for(n||(e=numeric.clone(e)),a=0;a<m;++a){for(u=a,l=h((s=e[a])[a]),r=a+1;r<m;++r)l<(o=h(e[r][a]))&&(l=o,u=r);for(d[a]=u,u!=a&&(e[a]=e[u],e[u]=s,s=e[a]),i=s[a],t=a+1;t<m;++t)e[t][a]/=i;for(t=a+1;t<m;++t){for(c=e[t],r=a+1;r<f;++r)c[r]-=c[a]*s[r],c[++r]-=c[a]*s[r];r===f&&(c[r]-=c[a]*s[r])}}return{LU:e,P:d}},numeric.LUsolve=function(e,n){var t,r,a,o,i,s=e.LU,u=s.length,c=numeric.clone(n),l=e.P;for(t=u-1;-1!==t;--t)c[t]=n[t];for(t=0;t<u;++t)for(a=l[t],l[t]!==t&&(i=c[t],c[t]=c[a],c[a]=i),o=s[t],r=0;r<t;++r)c[t]-=c[r]*o[r];for(t=u-1;t>=0;--t){for(o=s[t],r=t+1;r<u;++r)c[t]-=c[r]*o[r];c[t]/=o[t]}return c},numeric.solve=function(e,n,t){return numeric.LUsolve(numeric.LU(e,t),n)},numeric.echelonize=function(e){var n,t,r,a,o,i,s,u,c=numeric.dim(e),l=c[0],h=c[1],m=numeric.identity(l),f=Array(l),d=Math.abs,p=numeric.diveq;for(e=numeric.clone(e),n=0;n<l;++n){for(r=0,o=e[n],i=m[n],t=1;t<h;++t)d(o[r])<d(o[t])&&(r=t);for(f[n]=r,p(i,o[r]),p(o,o[r]),t=0;t<l;++t)if(t!==n){for(u=(s=e[t])[r],a=h-1;-1!==a;--a)s[a]-=o[a]*u;for(s=m[t],a=l-1;-1!==a;--a)s[a]-=i[a]*u}}return{I:m,A:e,P:f}},numeric.__solveLP=function(e,n,t,r,a,o,i){var s,u,c,l,h=numeric.sum,m=(numeric.log,numeric.mul),f=numeric.sub,d=numeric.dot,p=numeric.div,M=numeric.add,g=e.length,v=t.length,y=!1,x=1,b=(numeric.transpose(n),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),T=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),_=numeric.all,E=numeric.gt,N=Array(g),I=Array(v),S=(numeric.rep([v],1),numeric.solve),R=f(t,d(n,o)),D=d(e,e);for(c=0;c<a;++c){var z,O;for(z=v-1;-1!==z;--z)I[z]=p(n[z],R[z]);var C=b(I);for(z=g-1;-1!==z;--z)N[z]=h(C[z]);x=.25*T(D/d(e,N));var P=100*w(D/d(N,N));for((!isFinite(x)||x>P)&&(x=P),l=M(e,m(x,N)),u=d(C,I),z=g-1;-1!==z;--z)u[z][z]+=1;O=S(u,p(l,x),!0);var L=p(R,d(n,O)),j=1;for(z=v-1;-1!==z;--z)L[z]<0&&(j=A(j,-.999*L[z]));if(s=f(o,m(O,j)),!_(E(R=f(t,d(n,s)),0)))return{solution:o,message:"",iterations:c};if(o=s,x<r)return{solution:s,message:"",iterations:c};if(i){var k=d(e,l),U=d(n,l);for(y=!0,z=v-1;-1!==z;--z)if(k*U[z]<0){y=!1;break}}else y=!(o[g-1]>=0);if(y)return{solution:s,message:"Unbounded",iterations:c}}return{solution:o,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(e,n,t,r,a){var o=e.length,i=t.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),l=numeric.rep([i,1],-1),h=numeric.blockMatrix([[n,l]]),m=t,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(t)))+1),d=numeric.__solveLP(c,h,m,r,a,f,!1),p=numeric.clone(d.solution);if(p.length=o,numeric.inf(s(t,u(n,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var M=numeric.__solveLP(e,n,t,r,a-d.iterations,p,!0);return M.iterations+=d.iterations,M},numeric.solveLP=function(e,n,t,r,a,o,i){if(void 0===i&&(i=1e3),void 0===o&&(o=numeric.epsilon),void 0===r)return numeric._solveLP(e,n,t,o,i);var s,u=r.length,c=r[0].length,l=n.length,h=numeric.echelonize(r),m=numeric.rep([c],0),f=h.P,d=[];for(s=f.length-1;-1!==s;--s)m[f[s]]=1;for(s=c-1;-1!==s;--s)0===m[s]&&d.push(s);var p=numeric.getRange,M=numeric.linspace(0,u-1),g=numeric.linspace(0,l-1),v=p(r,M,d),y=p(n,g,f),x=p(n,g,d),b=numeric.dot,w=numeric.sub,T=b(y,h.I),A=w(x,b(T,v)),_=w(t,b(T,a)),E=Array(f.length),N=Array(d.length);for(s=f.length-1;-1!==s;--s)E[s]=e[f[s]];for(s=d.length-1;-1!==s;--s)N[s]=e[d[s]];var I=w(N,b(E,b(h.I,v))),S=numeric._solveLP(I,A,_,o,i),R=S.solution;if(R!=R)return S;var D=b(h.I,w(a,b(v,R))),z=Array(e.length);for(s=f.length-1;-1!==s;--s)z[f[s]]=D[s];for(s=d.length-1;-1!==s;--s)z[d[s]]=R[s];return{solution:z,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var n,t,r,a,o=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,u=0,c={},l=[],h=0,m={},f=0,d=[],p=[],M=[];function g(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+i[o]+"\n")}for(n=0;n<s;++n){var v=(r=e[n]).match(/\S*/g),y=[];for(t=0;t<v.length;++t)""!==v[t]&&y.push(v[t]);if(0!==y.length){for(t=0;t<i.length&&r.substr(0,i[t].length)!==i[t];++t);if(t<i.length){if(o=t,1===t&&(a=y[1]),6===t)return{name:a,c:d,A:numeric.transpose(p),b:M,rows:c,vars:m}}else switch(o){case 0:case 1:g("Unexpected line");case 2:switch(y[0]){case"N":0===u?u=y[1]:g("Two or more N rows");break;case"L":c[y[1]]=h,l[h]=1,M[h]=0,++h;break;case"G":c[y[1]]=h,l[h]=-1,M[h]=0,++h;break;case"E":c[y[1]]=h,l[h]=0,M[h]=0,++h;break;default:g("Parse error "+numeric.prettyPrint(y))}break;case 3:m.hasOwnProperty(y[0])||(m[y[0]]=f,d[f]=0,p[f]=numeric.rep([h],0),++f);var x=m[y[0]];for(t=1;t<y.length;t+=2)if(y[t]!==u){var b=c[y[t]];p[x][b]=(l[b]<0?-1:1)*parseFloat(y[t+1])}else d[x]=parseFloat(y[t+1]);break;case 4:for(t=1;t<y.length;t+=2)M[c[y[t]]]=(l[c[y[t]]]<0?-1:1)*parseFloat(y[t+1]);break;case 5:break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,n,t,r,a,o,i){function s(e){var n,r,a=this,o=e.length,i=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(e=[o++]);i<t;)a.S[i]=i++;for(i=0;i<t;i++)s=l(s+(n=a.S[i])+e[i%o]),r=a.S[s],a.S[i]=r,a.S[s]=n;a.g=function(e){var n=a.S,r=l(a.i+1),o=n[r],i=l(a.j+o),s=n[i];n[r]=s,n[i]=o;for(var u=n[l(o+s)];--e;)r=l(r+1),s=n[i=l(i+(o=n[r]))],n[r]=s,n[i]=o,u=u*t+n[l(o+s)];return a.i=r,a.j=i,u},a.g(t)}function u(e,n,t,r,a){if(t=[],a=typeof e,n&&"object"==a)for(r in e)if(r.indexOf("S")<5)try{t.push(u(e[r],n-1))}catch(e){}return t.length?t:e+("string"!=a?"\0":"")}function c(e,n,t,r){for(e+="",t=0,r=0;r<e.length;r++)n[l(r)]=l((t^=19*n[l(r)])+e.charCodeAt(r));for(r in e="",n)e+=String.fromCharCode(n[r]);return e}function l(e){return e&t-1}n.seedrandom=function(r,l){var h,m=[];return r=c(u(l?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),m),c((h=new s(m)).S,e),n.random=function(){for(var e=h.g(6),n=i,r=0;e<a;)e=(e+r)*t,n*=t,r=h.g(1);for(;e>=o;)e/=2,n/=2,r>>>=1;return(e+r)/n},r},i=n.pow(t,6),a=n.pow(2,a),o=2*a,c(n.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function n(e){if("object"!=typeof e)return e;var t,r=[],a=e.length;for(t=0;t<a;t++)r[t+1]=n(e[t]);return r}function t(e){if("object"!=typeof e)return e;var n,r=[],a=e.length;for(n=1;n<a;n++)r[n-1]=t(e[n]);return r}e.solveQP=function(e,r,a,o,i,s){e=n(e),r=n(r),a=n(a);var u,c,l,h,m,f=[],d=[],p=[],M=[],g=[];if(i=i||0,s=s?n(s):[void 0,0],o=o?n(o):[],c=e.length-1,l=a[1].length-1,!o)for(u=1;u<=l;u+=1)o[u]=0;for(u=1;u<=l;u+=1)d[u]=0;for(h=Math.min(c,l),u=1;u<=c;u+=1)p[u]=0;for(f[1]=0,u=1;u<=2*c+h*(h+5)/2+2*l+1;u+=1)M[u]=0;for(u=1;u<=2;u+=1)g[u]=0;return function(e,n,t,r,a,o,i,s,u,c,l,h,m,f,d,p){var M,g,v,y,x,b,w,T,A,_,E,N,I,S,R,D,z,O,C,P,L,j,k,U,q,F,Y;I=Math.min(r,c),v=2*r+I*(I+5)/2+2*c+1,U=1e-60;do{q=1+.1*(U+=U),F=1+.2*U}while(q<=1||F<=1);for(M=1;M<=r;M+=1)d[M]=n[M];for(M=r+1;M<=v;M+=1)d[M]=0;for(M=1;M<=c;M+=1)h[M]=0;if(x=[],0===p[1]){if(function(e,n,t,r){var a,o,i,s,u,c;for(o=1;o<=t;o+=1){if(r[1]=o,c=0,(i=o-1)<1){if((c=e[o][o]-c)<=0)break;e[o][o]=Math.sqrt(c)}else{for(s=1;s<=i;s+=1){for(u=e[s][o],a=1;a<s;a+=1)u-=e[a][o]*e[a][s];u/=e[s][s],e[s][o]=u,c+=u*u}if((c=e[o][o]-c)<=0)break;e[o][o]=Math.sqrt(c)}r[1]=0}}(e,0,r,x),0!==x[1])return void(p[1]=2);!function(e,n,t,r){var a,o,i,s;for(o=1;o<=t;o+=1){for(s=0,a=1;a<o;a+=1)s+=e[a][o]*r[a];r[o]=(r[o]-s)/e[o][o]}for(i=1;i<=t;i+=1)for(r[o=t+1-i]=r[o]/e[o][o],s=-r[o],a=1;a<o;a+=1)r[a]=r[a]+s*e[a][o]}(e,0,r,n),function(e,n,t){var r,a,o,i,s;for(o=1;o<=t;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],r=1;r<o;r+=1)e[r][o]=s*e[r][o];if(t<(i=o+1))break;for(a=i;a<=t;a+=1)for(s=e[o][a],e[o][a]=0,r=1;r<=o;r+=1)e[r][a]=e[r][a]+s*e[r][o]}}(e,0,r)}else{for(g=1;g<=r;g+=1)for(a[g]=0,M=1;M<=g;M+=1)a[g]=a[g]+e[M][g]*n[M];for(g=1;g<=r;g+=1)for(n[g]=0,M=g;M<=r;M+=1)n[g]=n[g]+e[g][M]*a[M]}for(o[1]=0,g=1;g<=r;g+=1)for(a[g]=n[g],o[1]=o[1]+d[g]*a[g],d[g]=0,M=g+1;M<=r;M+=1)e[M][g]=0;for(o[1]=-o[1]/2,p[1]=0,S=(_=(A=(E=(T=(w=r)+r)+I)+I+1)+I*(I+1)/2)+c,M=1;M<=c;M+=1){for(D=0,g=1;g<=r;g+=1)D+=i[g][M]*i[g][M];d[S+M]=Math.sqrt(D)}function G(){for(f[1]=f[1]+1,v=_,M=1;M<=c;M+=1){for(v+=1,D=-s[M],g=1;g<=r;g+=1)D+=i[g][M]*a[g];if(Math.abs(D)<U&&(D=0),M>l)d[v]=D;else if(d[v]=-Math.abs(D),D>0){for(g=1;g<=r;g+=1)i[g][M]=-i[g][M];s[M]=-s[M]}}for(M=1;M<=m;M+=1)d[_+h[M]]=0;for(N=0,R=0,M=1;M<=c;M+=1)d[_+M]<R*d[S+M]&&(N=M,R=d[_+M]/d[S+M]);return 0===N?999:0}function V(){for(M=1;M<=r;M+=1){for(D=0,g=1;g<=r;g+=1)D+=e[g][M]*i[g][N];d[M]=D}for(y=w,M=1;M<=r;M+=1)d[y+M]=0;for(g=m+1;g<=r;g+=1)for(M=1;M<=r;M+=1)d[y+M]=d[y+M]+e[M][g]*d[g];for(j=!0,M=m;M>=1;M-=1){for(D=d[M],y=(v=A+M*(M+3)/2)-M,g=M+1;g<=m;g+=1)D-=d[v]*d[T+g],v+=g;if(D/=d[y],d[T+M]=D,h[M]<l)break;if(D<0)break;j=!1,b=M}if(!j)for(z=d[E+b]/d[T+b],M=1;M<=m&&!(h[M]<l)&&!(d[T+M]<0);M+=1)(R=d[E+M]/d[T+M])<z&&(z=R,b=M);for(D=0,M=w+1;M<=w+r;M+=1)D+=d[M]*d[M];if(Math.abs(D)<=U){if(j)return p[1]=1,999;for(M=1;M<=m;M+=1)d[E+M]=d[E+M]-z*d[T+M];return d[E+m+1]=d[E+m+1]+z,700}for(D=0,M=1;M<=r;M+=1)D+=d[w+M]*i[M][N];for(O=-d[_+N]/D,k=!0,j||z<O&&(O=z,k=!1),M=1;M<=r;M+=1)a[M]=a[M]+O*d[w+M],Math.abs(a[M])<U&&(a[M]=0);for(o[1]=o[1]+O*D*(O/2+d[E+m+1]),M=1;M<=m;M+=1)d[E+M]=d[E+M]-O*d[T+M];if(d[E+m+1]=d[E+m+1]+O,!k){for(D=-s[N],g=1;g<=r;g+=1)D+=a[g]*i[g][N];if(N>l)d[_+N]=D;else if(d[_+N]=-Math.abs(D),D>0){for(g=1;g<=r;g+=1)i[g][N]=-i[g][N];s[N]=-s[N]}return 700}for(h[m+=1]=N,v=A+(m-1)*m/2+1,M=1;M<=m-1;M+=1)d[v]=d[M],v+=1;if(m===r)d[v]=d[r];else{for(M=r;M>=m+1&&0!==d[M]&&(C=Math.max(Math.abs(d[M-1]),Math.abs(d[M])),P=Math.min(Math.abs(d[M-1]),Math.abs(d[M])),R=d[M-1]>=0?Math.abs(C*Math.sqrt(1+P*P/(C*C))):-Math.abs(C*Math.sqrt(1+P*P/(C*C))),C=d[M-1]/R,P=d[M]/R,1!==C);M-=1)if(0===C)for(d[M-1]=P*R,g=1;g<=r;g+=1)R=e[g][M-1],e[g][M-1]=e[g][M],e[g][M]=R;else for(d[M-1]=R,L=P/(1+C),g=1;g<=r;g+=1)R=C*e[g][M-1]+P*e[g][M],e[g][M]=L*(e[g][M-1]+R)-e[g][M],e[g][M-1]=R;d[v]=d[m]}return 0}function J(){if(0===d[y=(v=A+b*(b+1)/2+1)+b])return 798;if(C=Math.max(Math.abs(d[y-1]),Math.abs(d[y])),P=Math.min(Math.abs(d[y-1]),Math.abs(d[y])),R=d[y-1]>=0?Math.abs(C*Math.sqrt(1+P*P/(C*C))):-Math.abs(C*Math.sqrt(1+P*P/(C*C))),C=d[y-1]/R,P=d[y]/R,1===C)return 798;if(0===C){for(M=b+1;M<=m;M+=1)R=d[y-1],d[y-1]=d[y],d[y]=R,y+=M;for(M=1;M<=r;M+=1)R=e[M][b],e[M][b]=e[M][b+1],e[M][b+1]=R}else{for(L=P/(1+C),M=b+1;M<=m;M+=1)R=C*d[y-1]+P*d[y],d[y]=L*(d[y-1]+R)-d[y],d[y-1]=R,y+=M;for(M=1;M<=r;M+=1)R=C*e[M][b]+P*e[M][b+1],e[M][b+1]=L*(e[M][b]+R)-e[M][b+1],e[M][b]=R}return 0}function B(){for(y=v-b,M=1;M<=b;M+=1)d[y]=d[v],v+=1,y+=1;return d[E+b]=d[E+b+1],h[b]=h[b+1],(b+=1)<m?797:0}function H(){return d[E+m]=d[E+m+1],d[E+m+1]=0,h[m]=0,m-=1,f[2]=f[2]+1,0}for(m=0,f[1]=0,f[2]=0,Y=0;;){if(999===(Y=G()))return;for(;0!==(Y=V());){if(999===Y)return;if(700===Y)if(b===m)H();else{for(;J(),797===(Y=B()););H()}}}}(e,r,0,c,p,f,a,o,0,l,i,d,0,g,M,s),m="",1===s[1]&&(m="constraints are inconsistent, no solution!"),2===s[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:t(p),value:t(f),unconstrained_solution:t(r),iterations:t(g),iact:t(d),message:m}}}(numeric),numeric.svd=function(e){var n,t=numeric.epsilon,r=1e-64/t,a=0,o=0,i=0,s=0,u=0,c=numeric.clone(e),l=c.length,h=c[0].length;if(l<h)throw"Need more rows than columns";var m=new Array(h),f=new Array(h);for(o=0;o<h;o++)m[o]=f[o]=0;var d=numeric.rep([h,h],0);function p(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0==n?e:n*Math.sqrt(1+e*e/n/n)}var M=0,g=0,v=0,y=0,x=0,b=0,w=0;for(o=0;o<h;o++){for(m[o]=g,w=0,u=o+1,i=o;i<l;i++)w+=c[i][o]*c[i][o];if(w<=r)g=0;else for(M=c[o][o],g=Math.sqrt(w),M>=0&&(g=-g),v=M*g-w,c[o][o]=M-g,i=u;i<h;i++){for(w=0,s=o;s<l;s++)w+=c[s][o]*c[s][i];for(M=w/v,s=o;s<l;s++)c[s][i]+=M*c[s][o]}for(f[o]=g,w=0,i=u;i<h;i++)w+=c[o][i]*c[o][i];if(w<=r)g=0;else{for(M=c[o][o+1],g=Math.sqrt(w),M>=0&&(g=-g),v=M*g-w,c[o][o+1]=M-g,i=u;i<h;i++)m[i]=c[o][i]/v;for(i=u;i<l;i++){for(w=0,s=u;s<h;s++)w+=c[i][s]*c[o][s];for(s=u;s<h;s++)c[i][s]+=w*m[s]}}(x=Math.abs(f[o])+Math.abs(m[o]))>y&&(y=x)}for(o=h-1;-1!=o;o+=-1){if(0!=g){for(v=g*c[o][o+1],i=u;i<h;i++)d[i][o]=c[o][i]/v;for(i=u;i<h;i++){for(w=0,s=u;s<h;s++)w+=c[o][s]*d[s][i];for(s=u;s<h;s++)d[s][i]+=w*d[s][o]}}for(i=u;i<h;i++)d[o][i]=0,d[i][o]=0;d[o][o]=1,g=m[o],u=o}for(o=h-1;-1!=o;o+=-1){for(u=o+1,g=f[o],i=u;i<h;i++)c[o][i]=0;if(0!=g){for(v=c[o][o]*g,i=u;i<h;i++){for(w=0,s=u;s<l;s++)w+=c[s][o]*c[s][i];for(M=w/v,s=o;s<l;s++)c[s][i]+=M*c[s][o]}for(i=o;i<l;i++)c[i][o]=c[i][o]/g}else for(i=o;i<l;i++)c[i][o]=0;c[o][o]+=1}for(t*=y,s=h-1;-1!=s;s+=-1)for(var T=0;T<50;T++){var A=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(m[u])<=t){A=!0;break}if(Math.abs(f[u-1])<=t)break}if(!A){a=0,w=1;var _=u-1;for(o=u;o<s+1&&(M=w*m[o],m[o]=a*m[o],!(Math.abs(M)<=t));o++)for(v=p(M,g=f[o]),f[o]=v,a=g/v,w=-M/v,i=0;i<l;i++)x=c[i][_],b=c[i][o],c[i][_]=x*a+b*w,c[i][o]=-x*w+b*a}if(b=f[s],u==s){if(b<0)for(f[s]=-b,i=0;i<h;i++)d[i][s]=-d[i][s];break}if(T>=49)throw"Error: no convergence.";for(y=f[u],g=p(M=(((x=f[s-1])-b)*(x+b)+((g=m[s-1])-(v=m[s]))*(g+v))/(2*v*x),1),M=M<0?((y-b)*(y+b)+v*(x/(M-g)-v))/y:((y-b)*(y+b)+v*(x/(M+g)-v))/y,a=1,w=1,o=u+1;o<s+1;o++){for(g=m[o],x=f[o],v=w*g,g*=a,b=p(M,v),m[o-1]=b,M=y*(a=M/b)+g*(w=v/b),g=-y*w+g*a,v=x*w,x*=a,i=0;i<h;i++)y=d[i][o-1],b=d[i][o],d[i][o-1]=y*a+b*w,d[i][o]=-y*w+b*a;for(b=p(M,v),f[o-1]=b,M=(a=M/b)*g+(w=v/b)*x,y=-w*g+a*x,i=0;i<l;i++)x=c[i][o-1],b=c[i][o],c[i][o-1]=x*a+b*w,c[i][o]=-x*w+b*a}m[u]=0,m[s]=M,f[s]=y}for(o=0;o<f.length;o++)f[o]<t&&(f[o]=0);for(o=0;o<h;o++)for(i=o-1;i>=0;i--)if(f[i]<f[o]){for(a=f[i],f[i]=f[o],f[o]=a,s=0;s<c.length;s++)n=c[s][o],c[s][o]=c[s][i],c[s][i]=n;for(s=0;s<d.length;s++)n=d[s][o],d[s][o]=d[s][i],d[s][i]=n;o=i}return{U:c,S:f,V:d}}},991:function(e){var n;n=()=>(()=>{"use strict";var e={d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{DetailedSat:()=>S,Sat:()=>N,Sensor:()=>z,Sgp4:()=>m,SpaceObjectType:()=>r,Star:()=>C,Tle:()=>w,Transforms:()=>f,Utils:()=>y});var t={};e.r(t),e.d(t,{SpaceObjectType:()=>r});var r,a=Math.PI,o=2*a,i=a/180,s=2/3,u=15e-13,c=360/o,l=864e5,h=1.15741e-8,m=function(){function e(){}return e.angle=function(n,t){var r=e.mag(n),a=e.mag(t);if(r*a>1e-8*1e-8){var o=e.dot(n,t)/(r*a);return Math.abs(o)>1&&(o=Number(e.sgn(o))),Math.acos(o)}return 999999.1},e.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))},e.createSatrec=function(n,t,r,o){void 0===r&&(r="wgs72"),void 0===o&&(o="i");var s,u={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},c=1440/(2*a);u.error=0,u.satnum=n.substring(2,7),u.epochyr=parseInt(n.substring(18,20)),u.epochdays=parseFloat(n.substring(20,32)),u.ndot=parseFloat(n.substring(33,43)),u.nddot=parseFloat("".concat(n.substring(44,45),".").concat(n.substring(45,50),"E").concat(n.substring(50,52))),u.bstar=parseFloat("".concat(n.substring(53,54),".").concat(n.substring(54,59),"E").concat(n.substring(59,61))),u.inclo=parseFloat(t.substring(8,16)),u.nodeo=parseFloat(t.substring(17,25)),u.ecco=parseFloat(".".concat(t.substring(26,33))),u.argpo=parseFloat(t.substring(34,42)),u.mo=parseFloat(t.substring(43,51)),u.no=parseFloat(t.substring(52,63)),u.no/=c,u.inclo*=i,u.nodeo*=i,u.argpo*=i,u.mo*=i,s=u.epochyr<57?u.epochyr+2e3:u.epochyr+1900;var l=e.days2mdhms(s,u.epochdays),h=l.mon,m=l.day,f=l.hr,d=l.min,p=l.sec,M=e.jday(s,h,m,f,d,p);return u.jdsatepoch=M.jd+M.jdFrac,e.sgp4init_(u,{whichconst:r,opsmode:o,satn:u.satnum,epoch:u.jdsatepoch-2433281.5,xbstar:u.bstar,xecco:u.ecco,xargpo:u.argpo,xinclo:u.inclo,xndot:u.ndot,xnddot:u.nddot,xmo:u.mo,xno:u.no,xnodeo:u.nodeo}),u},e.cross=function(e,n){var t=[0,0,0];return t[0]=e[1]*n[2]-e[2]*n[1],t[1]=e[2]*n[0]-e[0]*n[2],t[2]=e[0]*n[1]-e[1]*n[0],t},e.days2mdhms=function(e,n){for(var t=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],r=Math.floor(n),a=1,o=0;r>o+t[a-1]&&a<12;)o+=t[a-1],a+=1;var i=a,s=r-o,u=24*(n-r),c=Math.floor(u);u=60*(u-c);var l=Math.floor(u);return{mon:i,day:s,hr:c,min:l,sec:60*(u-l)}},e.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},e.gstime=function(e){var n=(e-2451545)/36525,t=-62e-7*n*n*n+.093104*n*n+3164400184.812866*n+67310.54841;return(t=t*i/240%o)<0&&(t+=o),t},e.invjday=function(n,t){var r,a;Math.abs(t)>=1&&(n+=Math.floor(t),t-=Math.floor(t));var o=n-Math.floor(n)-.5;Math.abs(o)>1e-8&&(n-=o,t+=o);var i=n-2415019.5,s=i/365.25,u=1900+Math.floor(s);r=Math.floor(.25*(u-1901)),(a=Math.floor(i-(365*(u-1900)+r)))+t<1&&(u-=1,r=Math.floor(.25*(u-1901)),a=Math.floor(i-(365*(u-1900)+r)));var c=e.days2mdhms(u,a+t);return{year:u,mon:c.mon,day:c.day,hr:c.hr,min:c.min,sec:c.sec}},e.jday=function(e,n,t,r,a,o,i){void 0===n&&(n=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),e instanceof Date&&(n=e.getUTCMonth()+1,t=e.getUTCDate(),r=e.getUTCHours(),a=e.getUTCMinutes(),o=e.getUTCSeconds(),i=e.getUTCMilliseconds(),e=e.getUTCFullYear());var s=367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+t+1721013.5,u=(i/1e3+o+60*a+3600*r)/86400;if(Math.abs(u)>1){var c=Math.floor(u);s+=c,u-=c}return{jd:s,jdFrac:u}},e.mag=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},e.newtonnu=function(n,t){var r=999999.9,o=999999.9,i=1e-8;if(Math.abs(n)<i)o=t,r=t;else if(n<1-i){var s=Math.sqrt(1-n*n)*Math.sin(t)/(1+n*Math.cos(t)),u=(n+Math.cos(t))/(1+n*Math.cos(t));o=(r=Math.atan2(s,u))-n*Math.sin(r)}else n>1+i?n>1&&Math.abs(t)+1e-5<a-Math.acos(1/n)&&(s=Math.sqrt(n*n-1)*Math.sin(t)/(1+n*Math.cos(t)),r=e.asinh(s),o=n*e.sinh(r)-r):Math.abs(t)<168*a/180&&(o=(r=Math.tan(.5*t))+r*r*r/3);return n<1&&((o%=2*a)<0&&(o+=2*a),r%=2*a),{e0:r,m:o}},e.propagate=function(n,t){var r=n.xke,i=n.j2,c=n.j3oj2,l=n.radiusearthkm*n.xke/60;n.t=t,n.error=0;var h=n.mo+n.mdot*n.t,m=n.argpo+n.argpdot*n.t,f=n.nodeo+n.nodedot*n.t,d=m,p=h,M=n.t*n.t,g=f+n.nodecf*M,v=1-n.cc1*n.t,y=n.bstar*n.cc4*n.t,x=n.t2cof*M;if(1!==n.isimp){var b=n.omgcof*n.t,w=1+n.eta*Math.cos(h),T=b+n.xmcof*(w*w*w-n.delmo);p=h+T,d=m-T;var A=M*n.t,_=A*n.t;v=v-n.d2*M-n.d3*A-n.d4*_,y+=n.bstar*n.cc5*(Math.sin(p)-n.sinmao),x=x+n.t3cof*A+_*(n.t4cof+n.t*n.t5cof)}var E=n.no,N=n.ecco,I=n.inclo;if("d"===n.method){var S=n.t,R=e.dspace_(n.irez,n.d2201,n.d2211,n.d3210,n.d3222,n.d4410,n.d4422,n.d5220,n.d5232,n.d5421,n.d5433,n.dedt,n.del1,n.del2,n.del3,n.didt,n.dmdt,n.dnodt,n.domdt,n.argpo,n.argpdot,n.t,S,n.gsto,n.xfact,n.xlamo,n.no,n.atime,N,d,I,n.xli,p,n.xni,g,E);N=R[0],d=R[1],I=R[2],p=R[3],g=R[4],E=R[5]}if(E<=0)return n.error=2,{position:!1,velocity:!1};var D=Math.pow(r/E,s)*v*v;if(E=r/Math.pow(D,1.5),(N-=y)>=1||N<-.001)return n.error=1,{position:!1,velocity:!1};N<1e-6&&(N=1e-6);var z=(p+=n.no*x)+d+g,O=N,C=I,P=d%=o,L=g%=o,j=p=((z%=o)-d-g)%o,k=Math.sin(I),U=Math.cos(I);if("d"===n.method){var q={inclo:n.inclo,init:"n",ep:O,inclp:C,nodep:L,argpp:P,mp:j,opsmode:n.operationmode},F=e.dpper_(n,q);if(O=F.ep,L=F.nodep,P=F.argpp,j=F.mp,(C=F.inclp)<0&&(C=-C,L+=a,P-=a),O<0||O>1)return n.error=3,{position:!1,velocity:!1}}"d"===n.method&&(k=Math.sin(C),U=Math.cos(C),n.aycof=-.5*c*k,Math.abs(U+1)>15e-13?n.xlcof=-.25*c*k*(3+5*U)/(1+U):n.xlcof=-.25*c*k*(3+5*U)/u);for(var Y,G,V=O*Math.cos(P),J=1/(D*(1-O*O)),B=O*Math.sin(P)+J*n.aycof,H=(j+P+L+J*n.xlcof*V-L)%o,X=H,W=9999.9,Q=1;Math.abs(W)>=1e-12&&Q<=10;)G=Math.sin(X),W=(H-B*(Y=Math.cos(X))+V*G-X)/(W=1-Y*V-G*B),Math.abs(W)>=.95&&(W=W>0?.95:-.95),X+=W,Q+=1;var K=V*Y+B*G,Z=V*G-B*Y,$=V*V+B*B,ee=D*(1-$);if(ee<0)return n.error=4,{position:!1,velocity:!1};var ne=D*(1-K),te=Math.sqrt(D)*Z/ne,re=Math.sqrt(ee)/ne,ae=Math.sqrt(1-$),oe=D/ne*(G-B-V*(J=Z/(1+ae))),ie=D/ne*(Y-V+B*J),se=Math.atan2(oe,ie),ue=(ie+ie)*oe,ce=1-2*oe*oe,le=.5*i*(J=1/ee),he=le*J;if("d"===n.method){var me=U*U;n.con41=3*me-1,n.x1mth2=1-me,n.x7thm1=7*me-1}var fe=ne*(1-1.5*he*ae*n.con41)+.5*le*n.x1mth2*ce;if(fe<1)return n.error=6,{position:!1,velocity:!1};se-=.25*he*n.x7thm1*ue;var de=L+1.5*he*U*ue,pe=C+1.5*he*U*k*ce,Me=te-E*le*n.x1mth2*ue/r,ge=re+E*le*(n.x1mth2*ce+1.5*n.con41)/r,ve=Math.sin(se),ye=Math.cos(se),xe=Math.sin(de),be=Math.cos(de),we=Math.sin(pe),Te=Math.cos(pe),Ae=-xe*Te,_e=be*Te,Ee=Ae*ve+be*ye,Ne=_e*ve+xe*ye,Ie=we*ve,Se=Ae*ye-be*ve,Re=_e*ye-xe*ve,De=we*ye;return{position:{x:fe*Ee*n.radiusearthkm,y:fe*Ne*n.radiusearthkm,z:fe*Ie*n.radiusearthkm},velocity:{x:(Me*Ee+ge*Se)*l,y:(Me*Ne+ge*Re)*l,z:(Me*Ie+ge*De)*l}}},e.rv2coe=function(n,t,r){var i,s,u,c,l,h,m,f,d,p,M,g,v,y,x,b,w,T=[0,0,0],A=[0,0,0],_=.5*a,E=1e-8,N=999999.1,I=e.mag(n),S=e.mag(t),R=e.cross(n,t),D=e.mag(R);if(D>E){T[0]=-R[1],T[1]=R[0],T[2]=0,v=e.mag(T);var z=S*S-r/I;for(g=e.dot(n,t),b=0;b<=2;b++)A[b]=(z*n[b]-g*t[b])/r;if(u=e.mag(A),x=S*S*.5-r/I,s=Math.abs(x)>E?-r/(2*x):999999.9,i=D*D/r,y=R[2]/D,c=Math.acos(y),w=1,u<E?w=c<E||Math.abs(c-a)<E?2:3:(c<E||Math.abs(c-a)<E)&&(w=4),v>E){var O=T[0]/v;Math.abs(O)>1&&(O=e.sgn(O)),l=Math.acos(O),T[1]<0&&(l=o-l)}else l=N;1===w?(h=e.angle(T,A),A[2]<0&&(h=o-h)):h=N,1===w||4===w?(m=e.angle(A,n),g<0&&(m=o-m)):m=N,3===w?(d=e.angle(T,n),n[2]<0&&(d=o-d),f=d):d=N,u>E&&4===w?(O=A[0]/u,Math.abs(O)>1&&(O=e.sgn(O)),M=Math.acos(O),A[1]<0&&(M=o-M),c>_&&(M=o-M)):M=N,I>E&&2===w?(O=n[0]/I,Math.abs(O)>1&&(O=e.sgn(O)),p=Math.acos(O),n[1]<0&&(p=o-p),c>_&&(p=o-p),f=p):p=N,1!==w&&4!==w||(f=e.newtonnu(u,m).m)}else i=N,s=N,u=N,c=N,l=N,h=N,m=N,f=N,d=N,p=N,M=N;return{p:i,a:s,ecc:u,incl:c,omega:l,argp:h,nu:m,m:f,arglat:d,truelon:p,lonper:M}},e.sgn=function(e){return e<0?-1:1},e.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2},e.dpper_=function(e,n){var t=e.e3,r=e.ee2,i=e.peo,s=e.pgho,u=e.pho,c=e.PInco,l=e.plo,h=e.se2,m=e.se3,f=e.sgh2,d=e.sgh3,p=e.sgh4,M=e.sh2,g=e.sh3,v=e.si2,y=e.si3,x=e.sl2,b=e.sl3,w=e.sl4,T=e.t,A=e.xgh2,_=e.xgh3,E=e.xgh4,N=e.xh2,I=e.xh3,S=e.xi2,R=e.xi3,D=e.xl2,z=e.xl3,O=e.xl4,C=e.zmol,P=e.zmos,L=n.ep,j=n.inclp,k=n.nodep,U=n.argpp,q=n.mp,F=n.opsmode,Y=void 0===F?"i":F,G=n.init,V=P+119459e-10*T;"y"===G&&(V=P);var J=V+.0335*Math.sin(V),B=Math.sin(J),H=.5*B*B-.25,X=-.5*B*Math.cos(J),W=h*H+m*X,Q=v*H+y*X,K=x*H+b*X+w*B,Z=f*H+d*X+p*B,$=M*H+g*X;V=C+.00015835218*T,"y"===G&&(V=C),J=V+.1098*Math.sin(V);var ee=W+(r*(H=.5*(B=Math.sin(J))*B-.25)+t*(X=-.5*B*Math.cos(J))),ne=Q+(S*H+R*X),te=K+(D*H+z*X+O*B),re=Z+(A*H+_*X+E*B),ae=$+(N*H+I*X);if("n"===G){te-=l,re-=s,ae-=u,j+=ne-=c,L+=ee-=i;var oe=Math.sin(j),ie=Math.cos(j);if(j>=.2)U+=re-=ie*(ae/=oe),k+=ae,q+=te;else{var se=Math.sin(k),ue=Math.cos(k),ce=oe*se,le=oe*ue;ce+=ae*ue+ne*ie*se,le+=-ae*se+ne*ie*ue,(k%=o)<0&&"a"===Y&&(k+=o);var he=q+U+ie*k;he+=te+re-ne*k*oe;var me=k;(k=Math.atan2(ce,le))<0&&"a"===Y&&(k+=o),Math.abs(me-k)>a&&(k<me?k+=o:k-=o),U=he-(q+=te)-ie*k}}return{ep:L,inclp:j,nodep:k,argpp:U,mp:q}},e.dscom_=function(e){var n,t,r,a,o,i,s,u,c,l,h,m,f,d,p,M,g,v,y,x,b,w,T,A,_,E,N,I,S,R,D,z,O,C,P,L,j,k,U=e.epoch,q=e.ep,F=e.argpp,Y=e.tc,G=e.inclp,V=e.nodep,J=e.np,B=.01675,H=.0549,X=2*Math.PI,W=J,Q=q,K=Math.sin(V),Z=Math.cos(V),$=Math.sin(F),ee=Math.cos(F),ne=Math.sin(G),te=Math.cos(G),re=Q*Q,ae=1-re,oe=Math.sqrt(ae),ie=U+18261.5+Y/1440,se=(4.523602-.00092422029*ie)%X,ue=Math.sin(se),ce=Math.cos(se),le=.91375164-.03568096*ce,he=Math.sqrt(1-le*le),me=.089683511*ue/he,fe=Math.sqrt(1-me*me),de=5.8351514+.001944368*ie,pe=.39785416*ue/he,Me=fe*ce+.91744867*me*ue;pe=Math.atan2(pe,Me),pe+=de-se;for(var ge=Math.cos(pe),ve=Math.sin(pe),ye=.1945905,xe=-.98088458,be=.91744867,we=.39785416,Te=Z,Ae=K,_e=29864797e-13,Ee=1/W,Ne=1;Ne<=2;Ne++){var Ie=ye*Te+xe*be*Ae,Se=-xe*Te+ye*be*Ae,Re=-ye*Ae+xe*be*Te,De=xe*we,ze=xe*Ae+ye*be*Te,Oe=ye*we,Ce=te*Re+ne*De,Pe=te*ze+ne*Oe,Le=-ne*Re+te*De,je=-ne*ze+te*Oe,ke=Ie*ee+Ce*$,Ue=Se*ee+Pe*$,qe=-Ie*$+Ce*ee,Fe=-Se*$+Pe*ee,Ye=Le*$,Ge=je*$,Ve=Le*ee,Je=je*ee;I=-6*Ie*Le+re*(-24*ke*Ve-6*qe*Ye),S=-6*(Ie*je+Se*Le)+re*(-24*(Ue*Ve+ke*Je)+-6*(qe*Ge+Fe*Ye)),R=-6*Se*je+re*(-24*Ue*Je-6*Fe*Ge),z=6*Ce*Le+re*(24*ke*Ye-6*qe*Ve),O=6*(Pe*Le+Ce*je)+re*(24*(Ue*Ye+ke*Ge)-6*(Fe*Ve+qe*Je)),C=6*Pe*je+re*(24*Ue*Ge-6*Fe*Je),N=(N=3*(Ie*Ie+Ce*Ce)+(L=12*ke*ke-3*qe*qe)*re)+N+ae*L,D=(D=6*(Ie*Se+Ce*Pe)+(j=24*ke*Ue-6*qe*Fe)*re)+D+ae*j,P=(P=3*(Se*Se+Pe*Pe)+(k=12*Ue*Ue-3*Fe*Fe)*re)+P+ae*k,t=-.5*(r=_e*Ee)/oe,n=-15*Q*(a=r*oe),o=ke*qe+Ue*Fe,i=Ue*qe+ke*Fe,s=Ue*Fe-ke*qe,1===Ne&&(u=n,c=t,l=r,h=a,m=o,f=i,d=s,p=N,y=D,T=P,M=I,g=S,v=R,x=z,b=O,w=C,A=L,_=j,E=k,ye=ge,xe=ve,be=le,we=he,Te=fe*Z+me*K,Ae=K*fe-Z*me,_e=4.7968065e-7)}return{snodm:K,cnodm:Z,sinim:ne,cosim:te,sinomm:$,cosomm:ee,day:ie,e3:2*n*s,ee2:2*n*i,em:Q,emsq:re,gam:de,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:oe,se2:2*u*f,se3:2*u*d,sgh2:2*h*_,sgh3:2*h*(E-A),sgh4:-18*h*B,sh2:-2*c*b,sh3:-2*c*(w-x),si2:2*c*g,si3:2*c*(v-M),sl2:-2*l*y,sl3:-2*l*(T-p),sl4:-2*l*(-21-9*re)*B,s1:n,s2:t,s3:r,s4:a,s5:o,s6:i,s7:s,ss1:u,ss2:c,ss3:l,ss4:h,ss5:m,ss6:f,ss7:d,sz1:p,sz2:y,sz3:T,sz11:M,sz12:g,sz13:v,sz21:x,sz22:b,sz23:w,sz31:A,sz32:_,sz33:E,xgh2:2*a*j,xgh3:2*a*(k-L),xgh4:-18*a*H,xh2:-2*t*O,xh3:-2*t*(C-z),xi2:2*t*S,xi3:2*t*(R-I),xl2:-2*r*D,xl3:-2*r*(P-N),xl4:-2*r*(-21-9*re)*H,nm:W,z1:N,z2:D,z3:P,z11:I,z12:S,z13:R,z21:z,z22:O,z23:C,z31:L,z32:j,z33:k,zmol:(.2299715*ie-de+4.7199672)%X,zmos:(6.2565837+.017201977*ie)%X}},e.dsinit_=function(e){var n=e.xke,t=e.cosim,r=e.argpo,i=e.s1,s=e.s2,u=e.s3,c=e.s4,l=e.s5,h=e.sinim,m=e.ss1,f=e.ss2,d=e.ss3,p=e.ss4,M=e.ss5,g=e.sz1,v=e.sz3,y=e.sz11,x=e.sz13,b=e.sz21,w=e.sz23,T=e.sz31,A=e.sz33,_=e.t,E=e.tc,N=e.gsto,I=e.mo,S=e.mdot,R=e.no,D=e.nodeo,z=e.nodedot,O=e.xPIdot,C=e.z1,P=e.z3,L=e.z11,j=e.z13,k=e.z21,U=e.z23,q=e.z31,F=e.z33,Y=e.ecco,G=e.eccsq,V=e.emsq,J=e.em,B=e.argpm,H=e.inclm,X=e.mm,W=e.nm,Q=e.nodem,K=e.irez,Z=e.atime,$=e.d2201,ee=e.d2211,ne=e.d3210,te=e.d3222,re=e.d4410,ae=e.d4422,oe=e.d5220,ie=e.d5232,se=e.d5421,ue=e.d5433,ce=e.dedt,le=e.didt,he=e.dmdt,me=e.dnodt,fe=e.domdt,de=e.del1,pe=e.del2,Me=e.del3,ge=e.xfact,ve=e.xlamo,ye=e.xli,xe=e.xni,be=.0043752690880113,we=.00015835218,Te=119459e-10;K=0,W<.0052359877&&W>.0034906585&&(K=1),W>=.00826&&W<=.00924&&J>=.5&&(K=2);var Ae=-Te*f*(b+w);(H<.052359877||H>a-.052359877)&&(Ae=0),0!==h&&(Ae/=h);var _e=-we*s*(k+U);(H<.052359877||H>a-.052359877)&&(_e=0),fe=p*Te*(T+A-6)-t*Ae+c*we*(q+F-6),me=Ae,0!==h&&(fe-=t/h*_e,me+=_e/h);var Ee=(N+E*be)%o;if(J+=(ce=m*Te*M+i*we*l)*_,H+=(le=f*Te*(y+x)+s*we*(L+j))*_,B+=fe*_,Q+=me*_,X+=(he=-Te*d*(g+v-14-6*V)-we*u*(C+P-14-6*V))*_,0!==K){var Ne=Math.pow(W/n,2/3);if(2===K){var Ie=t*t,Se=J,Re=V,De=(J=Y)*(V=G),ze=void 0,Oe=void 0,Ce=void 0,Pe=void 0,Le=void 0,je=void 0,ke=void 0,Ue=void 0,qe=void 0;J<=.65?(ze=3.616-13.247*J+16.29*V,Oe=117.39*J-19.302-228.419*V+156.591*De,Ce=109.7927*J-18.9068-214.6334*V+146.5816*De,Pe=242.694*J-41.122-471.094*V+313.953*De,Le=841.88*J-146.407-1629.014*V+1083.435*De,je=3017.977*J-532.114-5740.032*V+3708.276*De):(ze=331.819*J-72.099-508.738*V+266.724*De,Oe=1582.851*J-346.844-2415.925*V+1246.113*De,Ce=1554.908*J-342.585-2366.899*V+1215.972*De,Pe=4758.686*J-1052.797-7193.992*V+3651.957*De,Le=16178.11*J-3581.69-24462.77*V+12422.52*De,je=J>.715?29936.92*J-5149.66-54087.36*V+31324.56*De:1464.74-4664.75*J+3763.64*V),J<.7?(qe=4988.61*J-919.2277-9064.77*V+5542.21*De,ke=4568.6173*J-822.71072-8491.4146*V+5337.524*De,Ue=4690.25*J-853.666-8624.77*V+5341.4*De):(qe=161616.52*J-37995.78-229838.2*V+109377.94*De,ke=218913.95*J-51752.104-309468.16*V+146349.42*De,Ue=170470.89*J-40023.88-242699.48*V+115605.82*De);var Fe=h*h,Ye=W*W*3*(Ne*Ne),Ge=17891679e-13*Ye;$=Ge*(Ve=.75*(1+2*t+Ie))*(-.306-.44*(J-.64)),ee=Ge*(1.5*Fe)*ze,ne=(Ge=3.7393792e-7*(Ye*=Ne))*(1.875*h*(1-2*t-3*Ie))*Oe,te=Ge*(-1.875*h*(1+2*t-3*Ie))*Ce,re=(Ge=2*(Ye*=Ne)*7.3636953e-9)*(35*Fe*Ve)*Pe,ae=Ge*(39.375*Fe*Fe)*Le,oe=(Ge=1.1428639e-7*(Ye*=Ne))*(9.84375*h*(Fe*(1-2*t-5*Ie)+.33333333*(4*t-2+6*Ie)))*je,ie=Ge*(h*(4.92187512*Fe*(-2-4*t+10*Ie)+6.56250012*(1+2*t-3*Ie)))*Ue,se=(Ge=2*Ye*2.1765803e-9)*(29.53125*h*(2-8*t+Ie*(8*t-12+10*Ie)))*ke,ue=Ge*(29.53125*h*(-2-8*t+Ie*(12+8*t-10*Ie)))*qe,ve=(I+D+D-(Ee+Ee))%o,ge=S+he+2*(z+me-be)-R,J=Se,V=Re}if(1===K){var Ve,Je=1+t;pe=2*(de=3*W*W*Ne*Ne)*(Ve=.75*(1+t)*(1+t))*(1+V*(.8125*V-2.5))*17891679e-13,Me=3*de*(Je*=1.875*Je*Je)*(1+V*(6.60937*V-6))*2.2123015e-7*Ne,de=de*(.9375*h*h*(1+3*t)-.75*(1+t))*(Oe=1+2*V)*21460748e-13*Ne,ve=(I+D+r-Ee)%o,ge=S+O+he+fe+me-(R+be)}ye=ve,xe=R,Z=0,W=R+0}return{em:J,argpm:B,inclm:H,mm:X,nm:W,nodem:Q,irez:K,atime:Z,d2201:$,d2211:ee,d3210:ne,d3222:te,d4410:re,d4422:ae,d5220:oe,d5232:ie,d5421:se,d5433:ue,dedt:ce,didt:le,dmdt:he,dndt:0,dnodt:me,domdt:fe,del1:de,del2:pe,del3:Me,xfact:ge,xlamo:ve,xli:ye,xni:xe}},e.dspace_=function(e,n,t,r,a,i,s,u,c,l,h,m,f,d,p,M,g,v,y,x,b,w,T,A,_,E,N,I,S,R,D,z,O,C,P,L){var j=.13130908,k=2.8843198,U=.37448087,q=5.7686396,F=.95240898,Y=1.8014998,G=1.050833,V=4.4108898,J=259200,B=0,H=(A+.0043752690880113*T)%o;if(S+=m*w,D+=M*w,R+=y*w,P+=v*w,O+=g*w,0!==e){var X;(0===I||w*I<=0||Math.abs(w)<Math.abs(I))&&(I=0,C=N,z=E),X=w>0?720:-720;for(var W=void 0,Q=void 0,K=void 0,Z=void 0,$=void 0,ee=void 0,ne=void 0,te=381;381===te;)2!==e?(ee=f*Math.sin(z-j)+d*Math.sin(2*(z-k))+p*Math.sin(3*(z-U)),Z=C+_,$=f*Math.cos(z-j)+2*d*Math.cos(2*(z-k))+3*p*Math.cos(3*(z-U)),$*=Z):(K=(ne=x+b*I)+ne,Q=z+z,ee=n*Math.sin(K+z-q)+t*Math.sin(z-q)+r*Math.sin(ne+z-F)+a*Math.sin(-ne+z-F)+i*Math.sin(K+Q-Y)+s*Math.sin(Q-Y)+u*Math.sin(ne+z-G)+c*Math.sin(-ne+z-G)+l*Math.sin(ne+Q-V)+h*Math.sin(-ne+Q-V),Z=C+_,$=n*Math.cos(K+z-q)+t*Math.cos(z-q)+r*Math.cos(ne+z-F)+a*Math.cos(-ne+z-F)+u*Math.cos(ne+z-G)+c*Math.cos(-ne+z-G)+2*(i*Math.cos(K+Q-Y)+s*Math.cos(Q-Y)+l*Math.cos(ne+Q-V)+h*Math.cos(-ne+Q-V)),$*=Z),Math.abs(w-I)>=720?te=381:(W=w-I,te=0),381===te&&(z+=Z*X+ee*J,C+=ee*X+$*J,I+=X);L=C+ee*W+$*W*W*.5;var re=z+Z*W+ee*W*W*.5;1!==e?(O=re-2*P+2*H,B=L-N):(O=re-P-R+H,B=L-N),L=N+B}return[S,R,D,O,P,L]},e.getgravconst_=function(e){var n,t,r,a,o,i,s,u;switch(e){case"wgs72old":o=398600.79964,i=6378.135,s=1/(u=.0743669161),a=-165597e-11,r=(t=-253881e-11)/(n=.001082616);break;case"wgs72":o=398600.8,i=6378.135,s=1/(u=60/Math.sqrt(i*i*i/o)),a=-165597e-11,r=(t=-253881e-11)/(n=.001082616);break;case"wgs84":o=398600.5,i=6378.137,s=1/(u=60/Math.sqrt(i*i*i/o)),a=-161098761e-14,r=(t=-253215306e-14)/(n=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(e))}return{tumin:s,mus:o,radiusearthkm:i,xke:u,j2:n,j3:t,j4:a,j3oj2:r}},e.initl_=function(n){var t=n.opsmode,r=n.ecco,a=n.epoch,o=n.inclo,i=n.xke,s=n.j2,u=n.no,c=2*Math.PI,l=2/3,h=r*r,m=1-h,f=Math.sqrt(m),d=Math.cos(o),p=d*d,M=Math.pow(i/u,l),g=.75*s*(3*p-1)/(f*m),v=g/(M*M),y=M*(1-v*v-v*(1/3+134*v*v/81));u/=1+(v=g/(y*y));var x,b=Math.pow(i/u,l),w=Math.sin(o),T=b*m,A=1-5*p,_=-A-p-p,E=1/b,N=T*T,I=b*(1-r);if("a"===t){var S=a-7305,R=Math.floor(S+1e-8),D=.017202791694070362;(x=(1.7321343856509375+D*R+(D+c)*(S-R)+S*S*5075514194322695e-30)%c)<0&&(x+=c)}else x=e.gstime(a+2433281.5);return{no:u,method:"n",ainv:E,ao:b,con41:_,con42:A,cosio:d,cosio2:p,eccsq:h,omeosq:m,posq:N,rp:I,rteosq:f,sinio:w,gsto:x}},e.sgp4init_=function(n,t){var r=t.whichconst,a=void 0===r?"wgs72":r,i=t.opsmode,c=void 0===i?"i":i,l=t.satn,h=void 0===l?n.satnum:l,m=t.epoch,f=t.xbstar,d=t.xecco,p=t.xargpo,M=t.xinclo,g=t.xndot,v=t.xnddot,y=t.xmo,x=t.xno,b=t.xnodeo;n.isimp=0,n.method="n",n.aycof=0,n.con41=0,n.cc1=0,n.cc4=0,n.cc5=0,n.d2=0,n.d3=0,n.d4=0,n.delmo=0,n.eta=0,n.argpdot=0,n.omgcof=0,n.sinmao=0,n.t=0,n.t2cof=0,n.t3cof=0,n.t4cof=0,n.t5cof=0,n.x1mth2=0,n.x7thm1=0,n.mdot=0,n.nodedot=0,n.xlcof=0,n.xmcof=0,n.nodecf=0,n.irez=0,n.d2201=0,n.d2211=0,n.d3210=0,n.d3222=0,n.d4410=0,n.d4422=0,n.d5220=0,n.d5232=0,n.d5421=0,n.d5433=0,n.dedt=0,n.del1=0,n.del2=0,n.del3=0,n.didt=0,n.dmdt=0,n.dnodt=0,n.domdt=0,n.e3=0,n.ee2=0,n.peo=0,n.pgho=0,n.pho=0,n.PInco=0,n.plo=0,n.se2=0,n.se3=0,n.sgh2=0,n.sgh3=0,n.sgh4=0,n.sh2=0,n.sh3=0,n.si2=0,n.si3=0,n.sl2=0,n.sl3=0,n.sl4=0,n.gsto=0,n.xfact=0,n.xgh2=0,n.xgh3=0,n.xgh4=0,n.xh2=0,n.xh3=0,n.xi2=0,n.xi3=0,n.xl2=0,n.xl3=0,n.xl4=0,n.xlamo=0,n.zmol=0,n.zmos=0,n.atime=0,n.xli=0,n.xni=0;var w=e.getgravconst_(a);n.tumin=w.tumin,n.mus=w.mus,n.radiusearthkm=w.radiusearthkm,n.xke=w.xke,n.j2=w.j2,n.j3=w.j3,n.j4=w.j4,n.j3oj2=w.j3oj2;var T=w.j2,A=w.j4,_=w.xke,E=w.j3oj2;n.error=0,n.operationmode=c;var N=h.split("")[0].toLowerCase();isNaN(parseInt(N))?n.satnum=parseInt(N.charCodeAt(0)-96+9+n.satnum.slice(1,5)).toString():n.satnum=h,n.bstar=f,n.ndot=g,n.nddot=v,n.ecco=d,n.argpo=p,n.inclo=M,n.mo=y,n.no=x,n.nodeo=b;var I=78/n.radiusearthkm+1,S=42/n.radiusearthkm,R=S*S*S*S;n.init="y",n.t=0;var D={ecco:n.ecco,epoch:m,inclo:n.inclo,no:n.no,method:n.method,opsmode:n.operationmode,xke:n.xke,j2:n.j2},z=e.initl_(D),O=z.ao,C=z.con42,P=z.cosio,L=z.cosio2,j=z.eccsq,k=z.omeosq,U=z.posq,q=z.rp,F=z.rteosq,Y=z.sinio;if(n.no=z.no,n.con41=z.con41,n.gsto=z.gsto,n.a=Math.pow(n.no*n.tumin,-2/3),n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1,n.error=0,k>=0||n.no>=0){n.isimp=0,q<220/n.radiusearthkm+1&&(n.isimp=1);var G=I,V=R,J=(q-1)*n.radiusearthkm;if(J<156){G=J-78,J<98&&(G=20);var B=(120-G)/n.radiusearthkm;V=B*B*B*B,G=G/n.radiusearthkm+1}var H=1/U,X=1/(O-G);n.eta=O*n.ecco*X;var W=n.eta*n.eta,Q=n.ecco*n.eta,K=Math.abs(1-W),Z=V*Math.pow(X,4),$=Z/Math.pow(K,3.5),ee=$*n.no*(O*(1+1.5*W+Q*(4+W))+.375*T*X/K*n.con41*(8+3*W*(8+W)));n.cc1=n.bstar*ee;var ne=0;n.ecco>1e-4&&(ne=-2*Z*X*E*n.no*Y/n.ecco),n.x1mth2=1-L,n.cc4=2*n.no*$*O*k*(n.eta*(2+.5*W)+n.ecco*(.5+2*W)-T*X/(O*K)*(-3*n.con41*(1-2*Q+W*(1.5-.5*Q))+.75*n.x1mth2*(2*W-Q*(1+W))*Math.cos(2*n.argpo))),n.cc5=2*$*O*k*(1+2.75*(W+Q)+Q*W);var te=L*L,re=1.5*T*H*n.no,ae=.5*re*T*H,oe=-.46875*A*H*H*n.no;n.mdot=n.no+.5*re*F*n.con41+.0625*ae*F*(13-78*L+137*te),n.argpdot=-.5*re*C+.0625*ae*(7-114*L+395*te)+oe*(3-36*L+49*te);var ie=-re*P;n.nodedot=ie+(.5*ae*(4-19*L)+2*oe*(3-7*L))*P;var se=n.argpdot+n.nodedot;n.omgcof=n.bstar*ne*Math.cos(n.argpo),n.xmcof=0,n.ecco>1e-4&&(n.xmcof=-s*Z*n.bstar/Q),n.nodecf=3.5*k*ie*n.cc1,n.t2cof=1.5*n.cc1,Math.abs(P+1)>15e-13?n.xlcof=-.25*E*Y*(3+5*P)/(1+P):n.xlcof=-.25*E*Y*(3+5*P)/u,n.aycof=-.5*E*Y;var ue=1+n.eta*Math.cos(n.mo);if(n.delmo=ue*ue*ue,n.sinmao=Math.sin(n.mo),n.x7thm1=7*L-1,o/n.no>=225){n.method="d",n.isimp=1;var ce=n.inclo,le={epoch:m,ep:n.ecco,argpp:n.argpo,tc:0,inclp:n.inclo,nodep:n.nodeo,np:n.no,e3:n.e3,ee2:n.ee2,peo:n.peo,pgho:n.pgho,pho:n.pho,PInco:n.PInco,plo:n.plo,se2:n.se2,se3:n.se3,sgh2:n.sgh2,sgh3:n.sgh3,sgh4:n.sgh4,sh2:n.sh2,sh3:n.sh3,si2:n.si2,si3:n.si3,sl2:n.sl2,sl3:n.sl3,sl4:n.sl4,xgh2:n.xgh2,xgh3:n.xgh3,xgh4:n.xgh4,xh2:n.xh2,xh3:n.xh3,xi2:n.xi2,xi3:n.xi3,xl2:n.xl2,xl3:n.xl3,xl4:n.xl4,zmol:n.zmol,zmos:n.zmos},he=e.dscom_(le);n.e3=he.e3,n.ee2=he.ee2,n.peo=he.peo,n.pgho=he.pgho,n.pho=he.pho,n.PInco=he.PInco,n.plo=he.plo,n.se2=he.se2,n.se3=he.se3,n.sgh2=he.sgh2,n.sgh3=he.sgh3,n.sgh4=he.sgh4,n.sh2=he.sh2,n.sh3=he.sh3,n.si2=he.si2,n.si3=he.si3,n.sl2=he.sl2,n.sl3=he.sl3,n.sl4=he.sl4;var me=he.sinim,fe=he.cosim,de=he.em,pe=he.emsq,Me=he.s1,ge=he.s2,ve=he.s3,ye=he.s4,xe=he.s5,be=he.ss1,we=he.ss2,Te=he.ss3,Ae=he.ss4,_e=he.ss5,Ee=he.sz1,Ne=he.sz3,Ie=he.sz11,Se=he.sz13,Re=he.sz21,De=he.sz23,ze=he.sz31,Oe=he.sz33;n.xgh2=he.xgh2,n.xgh3=he.xgh3,n.xgh4=he.xgh4,n.xh2=he.xh2,n.xh3=he.xh3,n.xi2=he.xi2,n.xi3=he.xi3,n.xl2=he.xl2,n.xl3=he.xl3,n.xl4=he.xl4,n.zmol=he.zmol,n.zmos=he.zmos;var Ce=he.nm,Pe=he.z1,Le=he.z3,je=he.z11,ke=he.z13,Ue=he.z21,qe=he.z23,Fe=he.z31,Ye=he.z33,Ge={inclo:ce,init:n.init,ep:n.ecco,inclp:n.inclo,nodep:n.nodeo,argpp:n.argpo,mp:n.mo,opsmode:n.operationmode},Ve=e.dpper_(n,Ge);n.ecco=Ve.ep,n.inclo=Ve.inclp,n.nodeo=Ve.nodep,n.argpo=Ve.argpp,n.mo=Ve.mp;var Je={xke:_,cosim:fe,emsq:pe,argpo:n.argpo,s1:Me,s2:ge,s3:ve,s4:ye,s5:xe,sinim:me,ss1:be,ss2:we,ss3:Te,ss4:Ae,ss5:_e,sz1:Ee,sz3:Ne,sz11:Ie,sz13:Se,sz21:Re,sz23:De,sz31:ze,sz33:Oe,t:n.t,tc:0,gsto:n.gsto,mo:n.mo,mdot:n.mdot,no:n.no,nodeo:n.nodeo,nodedot:n.nodedot,xPIdot:se,z1:Pe,z3:Le,z11:je,z13:ke,z21:Ue,z23:qe,z31:Fe,z33:Ye,ecco:n.ecco,eccsq:j,em:de,argpm:0,inclm:ce,mm:0,nm:Ce,nodem:0,irez:n.irez,atime:n.atime,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,del1:n.del1,del2:n.del2,del3:n.del3,xfact:n.xfact,xlamo:n.xlamo,xli:n.xli,xni:n.xni},Be=e.dsinit_(Je);n.irez=Be.irez,n.atime=Be.atime,n.d2201=Be.d2201,n.d2211=Be.d2211,n.d3210=Be.d3210,n.d3222=Be.d3222,n.d4410=Be.d4410,n.d4422=Be.d4422,n.d5220=Be.d5220,n.d5232=Be.d5232,n.d5421=Be.d5421,n.d5433=Be.d5433,n.dedt=Be.dedt,n.didt=Be.didt,n.dmdt=Be.dmdt,n.dnodt=Be.dnodt,n.domdt=Be.domdt,n.del1=Be.del1,n.del2=Be.del2,n.del3=Be.del3,n.xfact=Be.xfact,n.xlamo=Be.xlamo,n.xli=Be.xli,n.xni=Be.xni}if(1!==n.isimp){var He=n.cc1*n.cc1;n.d2=4*O*X*He;var Xe=n.d2*X*n.cc1/3;n.d3=(17*O+G)*Xe,n.d4=.5*Xe*O*X*(221*O+31*G)*n.cc1,n.t3cof=n.d2+2*He,n.t4cof=.25*(3*n.d3+n.cc1*(12*n.d2+10*He)),n.t5cof=.2*(3*n.d4+12*n.cc1*n.d3+6*n.d2*n.d2+15*He*(2*n.d2+He))}}e.propagate(n,0),n.init="n"},e}(),f=function(){function e(){}return e.getDegLat=function(n){if(n<-a/2||n>a/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return e.rad2deg(n)},e.getDegLon=function(n){if(n<-a||n>a)throw new RangeError("Longitude radians must be in range [-PI; PI].");return e.rad2deg(n)},e.getRadLat=function(n){if(n<-90||n>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return e.deg2rad(n)},e.getRadLon=function(n){if(n<-180||n>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return e.deg2rad(n)},e.rad2deg=function(e){return 180*e/a},e.deg2rad=function(e){return e*a/180},e.ecf2eci=function(e,n){return{x:e.x*Math.cos(n)-e.y*Math.sin(n),y:e.x*Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.ecf2rae=function(n,t){var r=e.lla2sez(n,t);return e.sez2rae(r)},e.eci2lla=function(e,n){for(var t=6378.137,r=Math.sqrt(e.x*e.x+e.y*e.y),i=(t-6356.7523142)/t,s=2*i-i*i,u=Math.atan2(e.y,e.x)-n;u<-a;)u+=o;for(;u>a;)u-=o;for(var c,l=0,h=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));l<20;)c=1/Math.sqrt(1-s*(Math.sin(h)*Math.sin(h))),h=Math.atan2(e.z+t*c*s*Math.sin(h),r),l+=1;return{lon:u,lat:h,alt:r/Math.cos(h)-t*c}},e.eci2ecf=function(e,n){return{x:e.x*Math.cos(n)+e.y*Math.sin(n),y:e.x*-Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.lla2ecf=function(e){var n=e.lon,t=e.lat,r=e.alt,a=6378.137,o=(a-6356.7523142)/a,i=2*o-o*o,s=a/Math.sqrt(1-i*(Math.sin(t)*Math.sin(t)));return{x:(s+r)*Math.cos(t)*Math.cos(n),y:(s+r)*Math.cos(t)*Math.sin(n),z:(s*(1-i)+r)*Math.sin(t)}},e.lla2sez=function(n,t){var r=n.lon,a=n.lat,o=e.lla2ecf(n),i=t.x-o.x,s=t.y-o.y,u=t.z-o.z;return{s:Math.sin(a)*Math.cos(r)*i+Math.sin(a)*Math.sin(r)*s-Math.cos(a)*u,e:-Math.sin(r)*i+Math.cos(r)*s,z:Math.cos(a)*Math.cos(r)*i+Math.cos(a)*Math.sin(r)*s+Math.sin(a)*u}},e.rae2sez=function(e){return{s:-e.rng*Math.cos(e.el)*Math.cos(e.az),e:e.rng*Math.cos(e.el)*Math.sin(e.az),z:e.rng*Math.sin(e.el)}},e.rae2ecf=function(n,t){var r=e.lla2ecf(t),a=e.rae2sez(n),o=Math.sin(t.lat),i=Math.sin(t.lon),s=Math.cos(t.lat),u=Math.cos(t.lon);return{x:o*u*a.s+-i*a.e+s*u*a.z+r.x,y:o*i*a.s+u*a.e+s*i*a.z+r.y,z:-s*a.s+o*a.z+r.z}},e.sez2rae=function(e){var n=Math.sqrt(e.s*e.s+e.e*e.e+e.z*e.z),t=Math.asin(e.z/n);return{rng:n,az:Math.atan2(-e.e,e.s)+a,el:t}},e.lla2ecef=function(e){var n=e.lat,t=e.lon,r=e.alt,a=6378.137,o=Math.sqrt(1-Math.pow(6356.752314245,2)/Math.pow(a,2)),i=a/Math.sqrt(1-Math.pow(o,2)*Math.pow(Math.sin(n),2));return{x:(i+r)*Math.cos(n)*Math.cos(t),y:(i+r)*Math.cos(n)*Math.sin(t),z:(i*(1-Math.pow(o,2))+r)*Math.sin(n)}},e.ecf2enu=function(e,n){var t=n.lat,r=n.lon,a=e.x,o=e.y,i=e.z;return{x:-Math.sin(r)*a+Math.cos(r)*o,y:-Math.sin(t)*Math.cos(r)*a-Math.sin(t)*Math.sin(r)*o+Math.cos(t)*i,z:Math.cos(t)*Math.cos(r)*a+Math.cos(t)*Math.sin(r)*o+Math.sin(t)*i}},e.rae2enu=function(e){return{x:e.rng*Math.cos(e.el)*Math.sin(e.az),y:e.rng*Math.cos(e.el)*Math.cos(e.az),z:e.rng*Math.sin(e.el)}},e.enu2rf=function(e,n,t){var r=e.x,a=e.y,o=e.z;return{x:Math.cos(t)*Math.cos(n)*r-Math.sin(n)*a+Math.sin(t)*Math.cos(n)*o,y:Math.cos(t)*Math.sin(n)*r+Math.cos(n)*a+Math.sin(t)*Math.sin(n)*o,z:-Math.sin(t)*r+Math.cos(t)*o}},e.azel2uv=function(e,n,t){if(e>t&&e<t)throw new RangeError("Azimuth is out of bounds: ".concat(e));if(n>t&&n<t)throw new RangeError("Elevation is out of bounds: ".concat(n));var r=e/(t*c)*90,a=n/(t*c)*90,o=Math.sin(r),i=-Math.sin(a);return{u:o,v:i=Object.is(i,-0)?0:i}},e.uv2azel=function(e,n,t){if(e>1||e<-1)throw new RangeError("u is out of bounds: ".concat(e));if(n>1||n<-1)throw new RangeError("v is out of bounds: ".concat(n));var r=Math.asin(e),a=Math.asin(n);return{az:r/90*(t*c),el:a/90*(t*c)}},e.rae2ruv=function(e,n,t){var r=this.rae2raeOffBoresight(e,n,t),a=r.az,o=r.el,i=this.azel2uv(a,o,n.coneHalfAngle),s=i.u,u=i.v;return{rng:e.rng,u:s,v:u}},e.rae2raeOffBoresight=function(e,n,t){return e.az=e.az>t*i?e.az-o:e.az,{az:e.az-n.boresight.az,el:e.el-n.boresight.el}},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(r||(r={}));var d,p,M=2*Math.PI,g=function(){function e(){}return e.approxTransit=function(n,t,r){return e.J0_+(n+t)/M+r},e.astroRefraction=function(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))},e.azimuth=function(e,n,t){return Math.PI+Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(t)*Math.cos(n))},e.date2jSince2000=function(n){return n.getTime()/l+e.J1970_-e.J2000_},e.declination=function(n,t){return Math.asin(Math.sin(t)*Math.cos(e.e_)+Math.cos(t)*Math.sin(e.e_)*Math.sin(n))},e.eclipticLatitude=function(e){var n=M/360,t=e-.00569-.00478*Math.sin(n*e);return M*(t+3e-4*Math.sin(2*n*t))},e.eclipticLongitude=function(e){return e+i*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*i+Math.PI},e.elevation=function(e,n,t){return Math.asin(Math.sin(n)*Math.sin(t)+Math.cos(n)*Math.cos(t)*Math.cos(e))},e.getSetJulian=function(n,t,r,a,o,i,s){var u=e.hourAngle(n,r,a),c=e.approxTransit(u,t,o);return e.solarTransitJulian(c,i,s)},e.getSolarTime=function(e,n,t){var r=new Date;r.setUTCFullYear(e.getUTCFullYear(),0,1),r.setUTCHours(0,0,0,0);var a=e.getTime()-r.getTime(),o=360/365*(Math.floor(a/l)-81)*i,s=9.87*Math.sin(2*o)-7.53*Math.cos(o)-1.5*Math.sin(o)+4*(t-15*n);return new Date(e.getTime()+60*s*1e3)},e.getStarAzEl=function(n,t,r,a,o){var s=-r*i,u=t*i,c=e.date2jSince2000(n),l=e.siderealTime(c,s)-a,h=e.elevation(l,u,o);return{az:e.azimuth(l,u,o),el:h+=e.astroRefraction(h)}},e.getSunAzEl=function(n,t,r){var a=-r*i,o=t*i,s=e.date2jSince2000(n),u=e.getSunRaDec(s),c=e.siderealTime(s,a)-u.ra;return{az:e.azimuth(c,o,u.dec),el:e.elevation(c,o,u.dec)}},e.getSunRaDec=function(n){var t=e.solarMeanAnomaly_(n),r=e.eclipticLongitude(t);return{dec:e.declination(r,0),ra:e.rightAscension(r,0)}},e.getSunTimeByAzimuth=function(n,t,r,a,o){if(void 0===o&&(o=!1),isNaN(a))throw new Error("azimuth missing");if(isNaN(t))throw new Error("latitude missing");if(isNaN(r))throw new Error("longitude missing");o&&(a*=i);var s=new Date(n),u=i*-r,c=i*t,h=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0).getTime(),m=l;for(h+=m;m>200;){var f=e.date2jSince2000(new Date(h)),d=e.getSunRaDec(f),p=e.siderealTime(f,u)-d.ra;m/=2,e.getAzimuth_(p,c,d.dec)<a?h+=m:h-=m}return new Date(Math.floor(h))},e.getTimes=function(n,t,r,a,o){if(void 0===a&&(a=0),void 0===o&&(o=!1),isNaN(t))throw new Error("latitude missing");if(isNaN(r))throw new Error("longitude missing");var s=new Date(n);o?s.setUTCHours(12,0,0,0):s.setHours(12,0,0,0);var u,c=0,l=[],h=0,m=0,f=0,d=e.calculateJnoon_(r,t,a,s),p=d.Jnoon,M=d.dh,g=d.lw,v=d.phi,y=d.dec,x=d.n,b=d.M,w=d.L,T={solarNoon:e.julian2date(p),nadir:e.julian2date(p+.5)};for(c=0,u=e.times_.length;c<u;c+=1)h=((l=e.times_[c])[0]+M)*i,f=p-((m=e.getSetJ_(h,g,v,y,x,b,w))-p),T[l[1]]=e.julian2date(f),T[l[2]]=e.julian2date(m);return T},e.hourAngle=function(e,n,t){return Math.acos((Math.sin(e)-Math.sin(n)*Math.sin(t))/(Math.cos(n)*Math.cos(t)))},e.julian2date=function(n){return new Date((n-e.J1970_)*l)},e.julianCyle=function(n,t){return Math.round(n-e.J0_-t/(2*M/2))},e.rightAscension=function(n,t){return Math.atan2(Math.sin(n)*Math.cos(e.e_)-Math.tan(t)*Math.sin(e.e_),Math.cos(n))},e.siderealTime=function(e,n){return i*(280.16+360.9856235*e)-n},e.solarTransitJulian=function(n,t,r){return e.J2000_+n+.0053*Math.sin(t)-.0069*Math.sin(2*r)},e.calculateJnoon_=function(n,t,r,a){var o=i*-n,s=i*t,u=e.observerAngle_(r),c=e.date2jSince2000(a),l=e.julianCycle_(c,o),h=e.approxTransit(0,o,l),m=e.solarMeanAnomaly_(h),f=e.eclipticLongitude(m),d=e.declination(f,0);return{Jnoon:e.solarTransitJulian(h,m,f),dh:u,lw:o,phi:s,dec:d,n:l,M:m,L:f}},e.getAzimuth_=function(e,n,t){return Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(t)*Math.cos(n))+Math.PI},e.getSetJ_=function(n,t,r,a,o,i,s){var u=e.hourAngle(n,r,a),c=e.approxTransit(u,t,o);return e.solarTransitJulian(c,i,s)},e.julianCycle_=function(n,t){var r=t/M;return Math.round(n-e.J0_-r)},e.observerAngle_=function(e){return-2.076*Math.sqrt(e)/60},e.solarMeanAnomaly_=function(e){return i*(357.5291+.98560028*e)},e.J0_=9e-4,e.J1970_=2440587.5,e.J2000_=2451545,e.e_=23.4397*i,e.times_=[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]],e}(),v=function(){function e(){}return e.getMoonIllumination=function(n){var t=n instanceof Date?n.getTime():n,r=2551442778,a=g.date2jSince2000(new Date(t)),o=g.getSunRaDec(a),i=e.moonCoords(a),s=149598e3,u=Math.acos(Math.sin(o.dec)*Math.sin(i.dec)+Math.cos(o.dec)*Math.cos(i.dec)*Math.cos(o.ra-i.ra)),c=Math.atan2(s*Math.sin(u),i.dist-s*Math.cos(u)),l=Math.atan2(Math.cos(o.dec)*Math.sin(o.ra-i.ra),Math.sin(o.dec)*Math.cos(i.dec)-Math.cos(o.dec)*Math.sin(i.dec)*Math.cos(o.ra-i.ra)),h=.5+.5*c*(l<0?-1:1)/Math.PI,m=(t-94717884e4)%r;m<0&&(m+=r);var f=r-m+t,d=1275721389-m+t;d<t&&(d+=r);var p=637860694.5-m+t;p<t&&(p+=r);var M,v=1913582083.5-m+t;v<t&&(v+=r);for(var y,x=Math.min(f,p,d,v),b=0;b<e.moonCycles_.length;b++){var w=e.moonCycles_[b];if(h>=w.from&&h<=w.to){y=w;break}}return M=x===f?"newMoon":x===p?"firstQuarter":x===d?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(c))/2,phase:y,phaseValue:h,angle:l,next:{value:x,date:new Date(x).toISOString(),type:M,newMoon:{value:f,date:new Date(f).toISOString()},fullMoon:{value:d,date:new Date(d).toISOString()},firstQuarter:{value:p,date:new Date(p).toISOString()},thirdQuarter:{value:v,date:new Date(v).toISOString()}}}},e.getMoonPosition=function(n,t,r){var a=i*-r,o=i*t,s=g.date2jSince2000(n),u=e.moonCoords(s),c=g.siderealTime(s,a)-u.ra,l=g.elevation(c,o,u.dec),h=Math.atan2(Math.sin(c),Math.tan(o)*Math.cos(u.dec)-Math.sin(u.dec)*Math.cos(c));return l+=g.astroRefraction(l),{az:g.azimuth(c,o,u.dec),el:l,rng:u.dist,parallacticAngle:h}},e.getMoonTimes=function(n,t,r,a){void 0===a&&(a=!1);var o=new Date(n);a?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);var i=e.calculateRiseSetTimes_(o,t,r),s=i.rise,u=i.set,c=i.ye,l={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return l.rise=s?new Date(e.hoursLater(o,s)):NaN,l.set=u?new Date(e.hoursLater(o,u)):NaN,s||u?s&&u?(l.alwaysUp=!1,l.alwaysDown=!1,l.highest=new Date(e.hoursLater(o,Math.min(s,u)+Math.abs(u-s)/2))):(l.alwaysUp=!1,l.alwaysDown=!1):c>0?(l.alwaysUp=!0,l.alwaysDown=!1):(l.alwaysUp=!1,l.alwaysDown=!0),l},e.hoursLater=function(e,n){return new Date(e.getTime()+n*l/24)},e.moonCoords=function(e){var n=i*(134.963+13.064993*e),t=i*(93.272+13.22935*e),r=i*(218.316+13.176396*e)+6.289*i*Math.sin(n),a=5.128*i*Math.sin(t),o=385001-20905*Math.cos(n);return{ra:g.rightAscension(r,a),dec:g.declination(r,a),dist:o}},e.calculateRiseSetTimes_=function(n,t,r){for(var a=.133*i,o=e.getMoonPosition(n,t,r).el-a,s=0,u=0,c=0,l=0,h=0,m=0,f=0,d=0,p=0,M=0,g=0,v=0,y=0,x=1;x<=24&&(s=e.getMoonPosition(e.hoursLater(n,x),t,r).el-a,d=((h=(o+(u=e.getMoonPosition(e.hoursLater(n,x+1),t,r).el-a))/2-s)*(f=-(m=(u-o)/2)/(2*h))+m)*f+s,M=0,(p=m*m-4*h*s)>=0&&(g=f-(y=Math.sqrt(p)/(2*Math.abs(h))),v=f+y,Math.abs(g)<=1&&M++,Math.abs(v)<=1&&M++,g<-1&&(g=v)),1===M?o<0?c=x+g:l=x+g:2===M&&(c=x+(d<0?v:g),l=x+(d<0?g:v)),!c||!l);x+=2)o=u;return{rise:c,set:l,ye:d}},e.moonCycles_=[{from:0,to:.033863193308711,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}],e}(),y=function(){function e(){}return e.createVec=function(e,n,t){for(var r=[],a=e;a<=n;a+=t)r.push(a);return r},e.distance=function(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2))},e.dopplerFactor=function(n,t,r){var a=7292115e-11,o={x:t.x-n.x,y:t.y-n.y,z:t.z-n.z},i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)+Math.pow(o.z,2)),s=r.x+a*n.y,u=r.y-a*n.x,c=r.z,l=(o.x*s+o.y*u+o.z*c)/i;return 1+l/299792.458*e.sign_(l)},e.getDayOfYear=function(n){var t=(n=n||new Date).getMonth(),r=n.getUTCDate(),a=[0,31,59,90,120,151,181,212,243,273,304,334][t]+r;return t>1&&e.isLeapYear_(n)&&a++,a},e.roundToNDecimalPlaces=function(e,n){return Math.round(e*Math.pow(10,n))/Math.pow(10,n)},e.isLeapYear_=function(e){var n=e.getUTCFullYear();return 0==(3&n)&&(n%100!=0||n%400==0)},e.sign_=function(e){return e>=0?1:-1},e.MoonMath=v,e.SunMath=g,e.Types=t,e.jday=function(e,n,t,r,a,o){if(!e){var i=new Date,s=new Date(i.getUTCFullYear(),0,0),u=i.getDate()-s.getDate();return Math.floor(u/h)}return 367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+t+1721013.5+((o/60+a)/60+r)/24},e}(),x=function(e,n){this.start=e-1,this.stop=n,this.length=this.stop-this.start},b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)},w=function(){function e(){}return e.parseTle=function(n,t){var r=e.parseLine1(n),a=e.parseLine2(t);if(r.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(r.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==r.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return{satNum:r.satNum,intlDes:r.intlDes,epochYear:r.epochYear,epochDay:r.epochDay,meanMoDev1:r.meanMoDev1,meanMoDev2:r.meanMoDev2,bstar:r.bstar,inclination:a.inclination,raan:a.raan,eccentricity:a.eccentricity,argOfPerigee:a.argOfPerigee,meanAnomaly:a.meanAnomaly,meanMotion:a.meanMotion}},e.parseTleFull=function(n,t){var r=e.parseLine1(n),a=e.parseLine2(t);if(r.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(r.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==r.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return b(b({},r),a)},e.parseLine1=function(n){return{lineNumber1:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),classification:e.getClassification(n),intlDes:e.getIntlDes(n),intlDesYear:e.getIntlDesYear(n),intlDesLaunchNum:e.getIntlDesLaunchNum(n),intlDesLaunchPiece:e.getIntlDesLaunchPiece(n),epochYear:e.getEpochYear(n),epochYearFull:e.getEpochYearFull(n),epochDay:e.getEpochDay(n),meanMoDev1:e.getMeanMoDev1(n),meanMoDev2:e.getMeanMoDev2(n),bstar:e.getBstar(n),ephemerisType:e.getEphemerisType(n),elsetNum:e.getElsetNum(n),checksum1:e.getChecksum(n)}},e.parseLine2=function(n){return{lineNumber2:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),inclination:e.getInclination(n),raan:e.getRaan(n),eccentricity:e.getEccentricity(n),argOfPerigee:e.getArgOfPerigee(n),meanAnomaly:e.getMeanAnomaly(n),meanMotion:e.getMeanMotion(n),revNum:e.getRevNum(n),checksum2:e.getChecksum(n)}},e.getLineNumber=function(n){var t=parseInt(n.substring(e.lineNumber.start,e.lineNumber.stop));if(1!==t&&2!==t)throw new Error("Invalid line number");return t},e.getSatNum=function(n){var t=n.substring(e.satNum.start,e.satNum.stop),r=t.split("")[0].toLowerCase();return isNaN(parseInt(r))?parseInt(r.charCodeAt(0)-96+9+t.slice(1,5)):parseInt(t)},e.getRawSatNum=function(n){return n.substring(e.satNum.start,e.satNum.stop)},e.getClassification=function(n){return n.substring(e.classification.start,e.classification.stop)},e.getIntlDes=function(n){return n.substring(e.intlDes.start,e.intlDes.stop).trim()},e.getIntlDesYear=function(n){return parseInt(n.substring(e.intlDesYear.start,e.intlDesYear.stop))},e.getIntlDesLaunchNum=function(n){return parseInt(n.substring(e.intlDesLaunchNum.start,e.intlDesLaunchNum.stop))},e.getIntlDesLaunchPiece=function(n){return n.substring(e.intlDesLaunchPiece.start,e.intlDesLaunchPiece.stop).trim()},e.getEpochYear=function(n){var t=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t},e.getEpochYearFull=function(n){var t=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t<57?t+2e3:t+1900},e.getEpochDay=function(n){var t=parseFloat(n.substring(e.epochDay.start,e.epochDay.stop));if(t<1||t>365.99999999)throw new Error("Invalid epoch day");return y.roundToNDecimalPlaces(t,8)},e.getMeanMoDev1=function(n){var t=parseFloat(n.substring(e.meanMoDev1.start,e.meanMoDev1.stop));if(isNaN(t))throw new Error("Invalid first derivative of mean motion.");return y.roundToNDecimalPlaces(t,8)},e.getMeanMoDev2=function(n){var t=parseFloat(n.substring(e.meanMoDev2.start,e.meanMoDev2.stop));if(isNaN(t))throw new Error("Invalid second derivative of mean motion.");return t},e.getBstar=function(n){var t=e.bstar.start+1,r=e.bstar.start+6,a=e.bstar.stop-1,o=n.substring(e.bstar.start,t),i=parseFloat("0.".concat(n.substring(t,r))),s=n.substring(r,a),u=parseInt(n.substring(a,e.bstar.stop));if("-"===s)u*=-1;else if("+"!==s)throw new Error("Invalid BSTAR symbol: ".concat(o));if(i*=Math.pow(10,u),"-"===o)i*=-1;else if("+"!==o&&" "!==o)throw new Error("Invalid BSTAR symbol: ".concat(o));return y.roundToNDecimalPlaces(i,14)},e.getEphemerisType=function(n){return parseInt(n.substring(e.ephemerisType.start,e.ephemerisType.stop))},e.getElsetNum=function(n){return parseInt(n.substring(e.elsetNum.start,e.elsetNum.stop))},e.getChecksum=function(n){return parseInt(n.substring(e.checksum.start,e.checksum.stop))},e.getInclination=function(n){var t=parseFloat(n.substring(e.inclination.start,e.inclination.stop));if(t<0||t>180)throw new Error("Invalid inclination: ".concat(t));return y.roundToNDecimalPlaces(t,4)},e.getRaan=function(n){var t=parseFloat(n.substring(e.raan.start,e.raan.stop));if(!(t>=0&&t<=360))throw new Error("Invalid RAAN: ".concat(t));return y.roundToNDecimalPlaces(t,4)},e.getEccentricity=function(n){var t=parseFloat("0.".concat(n.substring(e.eccentricity.start,e.eccentricity.stop)));if(!(t>=0&&t<=1))throw new Error("Invalid eccentricity: ".concat(t));return y.roundToNDecimalPlaces(t,7)},e.getArgOfPerigee=function(n){var t=parseFloat(n.substring(e.argPerigee.start,e.argPerigee.stop));if(!(t>=0&&t<=360))throw new Error("Invalid argument of perigee: ".concat(t));return y.roundToNDecimalPlaces(t,4)},e.getMeanAnomaly=function(n){var t=parseFloat(n.substring(e.meanAnom.start,e.meanAnom.stop));if(!(t>=0&&t<=360))throw new Error("Invalid mean anomaly: ".concat(t));return y.roundToNDecimalPlaces(t,4)},e.getMeanMotion=function(n){var t=parseFloat(n.substring(e.meanMo.start,e.meanMo.stop));if(!(t>=0&&t<=17))throw new Error("Invalid mean motion: ".concat(t));return y.roundToNDecimalPlaces(t,8)},e.getRevNum=function(n){return parseInt(n.substring(e.revNum.start,e.revNum.stop))},e.lineNumber=new x(1,1),e.satNum=new x(3,7),e.classification=new x(8,8),e.intlDes=new x(10,17),e.intlDesYear=new x(10,11),e.intlDesLaunchNum=new x(12,14),e.intlDesLaunchPiece=new x(15,17),e.epochYear=new x(19,20),e.epochDay=new x(21,32),e.meanMoDev1=new x(34,43),e.meanMoDev2=new x(45,52),e.bstar=new x(54,61),e.ephemerisType=new x(63,63),e.elsetNum=new x(65,68),e.checksum=new x(69,69),e.inclination=new x(9,16),e.raan=new x(18,25),e.eccentricity=new x(27,33),e.argPerigee=new x(35,42),e.meanAnom=new x(44,51),e.meanMo=new x(53,63),e.revNum=new x(64,68),e}(),T=function(){function e(e){this.type=e.type||r.UNKNOWN,this.name=e.name||"Unknown",this.position=e.position||{x:0,y:0,z:0},this.time=e.time||new Date}return e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},e.prototype.getTypeString=function(){var e;return((e={})[r.UNKNOWN]="Unknown",e[r.PAYLOAD]="Payload",e[r.ROCKET_BODY]="Rocket Body",e[r.DEBRIS]="Debris",e[r.SPECIAL]="Special",e[r.RADAR_MEASUREMENT]="Radar Measurement",e[r.RADAR_TRACK]="Radar Track",e[r.RADAR_OBJECT]="Radar Object",e[r.BALLISTIC_MISSILE]="Ballistic Missile",e[r.STAR]="Star",e[r.INTERGOVERNMENTAL_ORGANIZATION]="Intergovernmental Organization",e[r.SUBORBITAL_PAYLOAD_OPERATOR]="Suborbital Payload Operator",e[r.PAYLOAD_OWNER]="Payload Owner",e[r.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER]="Meteorological Rocket Launch Agency or Manufacturer",e[r.PAYLOAD_MANUFACTURER]="Payload Manufacturer",e[r.LAUNCH_AGENCY]="Launch Agency",e[r.LAUNCH_SITE]="Launch Site",e[r.LAUNCH_POSITION]="Launch Position",e[r.LAUNCH_FACILITY]="Launch Facility",e[r.CONTROL_FACILITY]="Control Facility",e[r.GROUND_SENSOR_STATION]="Ground Sensor Station",e[r.OPTICAL]="Optical",e[r.MECHANICAL]="Mechanical",e[r.PHASED_ARRAY_RADAR]="Phased Array Radar",e[r.OBSERVER]="Observer",e[r.BISTATIC_RADIO_TELESCOPE]="Bistatic Radio Telescope",e[r.COUNTRY]="Country",e[r.LAUNCH_VEHICLE_MANUFACTURER]="Launch Vehicle Manufacturer",e[r.ENGINE_MANUFACTURER]="Engine Manufacturer",e)[this.type]||"Unknown"},e}(),A=(d=function(e,n){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},d(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}d(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),_=function(e){function n(n){var t=e.call(this,n)||this;return n.rcs&&(t.rcs=n.rcs),n.vmag&&(t.vmag=n.vmag),t}return A(n,e),n.prototype.getRcs=function(){return this.rcs},n.prototype.getVmag=function(){return this.vmag},n}(T),E=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),N=function(e){function n(n,t){var r=e.call(this,n)||this,a=w.parseTle(n.tle1,n.tle2);return r.satNum=a.satNum,r.intlDes=a.intlDes,r.epochYear=a.epochYear,r.epochDay=a.epochDay,r.meanMoDev1=a.meanMoDev1,r.meanMoDev2=a.meanMoDev2,r.bstar=a.bstar,r.inclination=a.inclination,r.raan=a.raan,r.eccentricity=a.eccentricity,r.argOfPerigee=a.argOfPerigee,r.meanAnomaly=a.meanAnomaly,r.meanMotion=a.meanMotion,r.period=1440/r.meanMotion,r.satrec=m.createSatrec(n.tle1,n.tle2),r.options=t||{},r}return E(n,e),n.prototype.propagateTo=function(e){var t=n.calculateTimeVariables(e,this.satrec).m,r=m.propagate(this.satrec,t).position||{x:0,y:0,z:0};return this.position=r,this.time=e,this},n.prototype.getStateVec=function(e){void 0===e&&(e=this.time);var t=n.calculateTimeVariables(e,this.satrec).m;return m.propagate(this.satrec,t)},n.prototype.getEci=function(e){void 0===e&&(e=this.time);var t=n.calculateTimeVariables(e,this.satrec).m;return m.propagate(this.satrec,t).position||{x:0,y:0,z:0}},n.prototype.getEcf=function(e){void 0===e&&(e=this.time);var t=n.calculateTimeVariables(e,this.satrec),r=t.m,a=t.gmst,o=m.propagate(this.satrec,r).position||{x:0,y:0,z:0};return f.eci2ecf(o,a)},n.prototype.getLla=function(e){void 0===e&&(e=this.time);var t=n.calculateTimeVariables(e,this.satrec),r=t.m,a=t.gmst,o=m.propagate(this.satrec,r).position||{x:0,y:0,z:0};return f.eci2lla(o,a)},n.prototype.getRae=function(e,t){void 0===t&&(t=this.time);var r=n.calculateTimeVariables(t,this.satrec),a=r.m,o=r.gmst,i=m.propagate(this.satrec,a).position||{x:0,y:0,z:0},s=f.eci2ecf(i,o);return f.ecf2rae({lat:e.lat,lon:e.lon,alt:e.alt},s)},n.prototype.getAzimuth=function(e,n){return void 0===n&&(n=this.time),this.getRae(e,n).az},n.prototype.getElevation=function(e,n){return void 0===n&&(n=this.time),this.getRae(e,n).el},n.prototype.getRange=function(e,n){return void 0===n&&(n=this.time),this.getRae(e,n).rng},n.calculateTimeVariables=function(e,n){var t=y.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*h;return{gmst:m.gstime(t),m:n?1440*(t-n.jdsatepoch):null,j:t}},n.checkSatrec=function(e){return!(isNaN(e.a)||isNaN(e.am)||isNaN(e.alta)||isNaN(e.em)||isNaN(e.mo)||isNaN(e.ecco)||isNaN(e.no))},n}(_),I=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),S=function(e){function n(n,t,r){var a=e.call(this,n,t)||this;return a.setLaunchDetails(r.launchDetails),a.setSpaceCraftDetails(r.spaceCraftDetails),a.setOperationsDetails(r.operationsDetails),a}return I(n,e),n.prototype.setLaunchDetails=function(e){e.launchDate&&(this.launchDate=e.launchDate),e.launchMass&&(this.launchMass=e.launchMass),e.launchSite&&(this.launchSite=e.launchSite),e.launchVehicle&&(this.launchVehicle=e.launchVehicle)},n.prototype.getLaunchDetails=function(){return{launchDate:this.launchDate,launchMass:this.launchMass,launchSite:this.launchSite,launchVehicle:this.launchVehicle}},n.prototype.setSpaceCraftDetails=function(e){e.lifetime&&(this.lifetime=e.lifetime),e.maneuver&&(this.maneuver=e.maneuver),e.manufacturer&&(this.manufacturer=e.manufacturer),e.motor&&(this.motor=e.motor),e.power&&(this.power=e.power),e.payload&&(this.payload=e.payload),e.purpose&&(this.purpose=e.purpose),e.shape&&(this.shape=e.shape),e.span&&(this.span=e.span),e.configuration&&(this.configuration=e.configuration),e.equipment&&(this.equipment=e.equipment),e.dryMass&&(this.dryMass=e.dryMass)},n.prototype.getSpaceCraftDetails=function(){return{lifetime:this.lifetime,maneuver:this.maneuver,manufacturer:this.manufacturer,motor:this.motor,power:this.power,payload:this.payload,purpose:this.purpose,shape:this.shape,span:this.span,configuration:this.configuration,equipment:this.equipment,dryMass:this.dryMass}},n.prototype.setOperationsDetails=function(e){e.user&&(this.user=e.user),e.mission&&(this.mission=e.mission),e.owner&&(this.owner=e.owner),e.country&&(this.country=e.country)},n.prototype.getOperationsDetails=function(){return{user:this.user,mission:this.mission,owner:this.owner,country:this.country}},n}(N),R=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){e[e.OUT_OF_VIEW=-1]="OUT_OF_VIEW",e[e.ENTER=0]="ENTER",e[e.IN_VIEW=1]="IN_VIEW",e[e.EXIT=2]="EXIT"}(p||(p={}));var D=2*Math.PI,z=function(e){function n(n){var t=this;if(n.type)switch(n.type){case r.OPTICAL:case r.MECHANICAL:case r.PHASED_ARRAY_RADAR:case r.OBSERVER:case r.BISTATIC_RADIO_TELESCOPE:break;default:throw new Error("Invalid sensor type")}return(t=e.call(this,n)||this).validateInputData(n),t}return R(n,e),n.prototype.validateInputData=function(e){this.validateLla(e),this.validateFov(e)},n.prototype.validateFov=function(e){this.validateMinAz(e),this.validateMaxAz(e),this.validateMinEl(e),this.validateMaxEl(e),this.validateMinRng(e),this.validateMaxRng(e)},n.prototype.validateMaxRng=function(e){if(e.maxRng>=0)this.maxRng=e.maxRng;else{if(void 0!==e.maxRng)throw new Error("Invalid maximum range - must be greater than 0");this.maxRng=5e4}},n.prototype.validateMinRng=function(e){if(e.minRng>=0)this.minRng=e.minRng;else{if(void 0!==e.minRng)throw new Error("Invalid minimum range - must be greater than 0");this.minRng=0}},n.prototype.validateMaxEl=function(e){if(e.maxEl>=0&&e.maxEl<=180)this.maxEl=e.maxEl;else{if(void 0!==e.maxEl)throw new Error("Invalid maximum elevation - must be between 0 and 180");this.maxEl=90}},n.prototype.validateMinEl=function(e){if(e.minEl>=0&&e.minEl<=90)this.minEl=e.minEl;else{if(void 0!==e.minEl)throw new Error("Invalid minimum elevation - must be between 0 and 90");this.minEl=0}},n.prototype.validateMaxAz=function(e){if(e.maxAz>=0&&e.maxAz<=360)this.maxAz=e.maxAz;else{if(void 0!==e.maxAz)throw new Error("Invalid maximum azimuth - must be between 0 and 360");this.maxAz=360}},n.prototype.validateMinAz=function(e){if(e.minAz>=0&&e.minAz<=360)this.minAz=e.minAz;else{if(void 0!==e.minAz)throw new Error("Invalid minimum azimuth - must be between 0 and 360");this.minAz=0}},n.prototype.validateLla=function(e){if(!(e.lat>=-90&&e.lat<=90))throw new Error("Invalid latitude");if(this.lat=e.lat,!(e.lon>=-180&&e.lon<=180))throw new Error("Invalid longitude");if(this.lon=e.lon,!(e.alt>=0))throw new Error("Invalid altitude");this.alt=e.alt},n.prototype.setTime=function(e){return this.time=e,this},n.prototype.getRae=function(e,n){return void 0===n&&(n=this.time),e.getRae(this,n)},n.prototype.isRaeInFov=function(e){if(e.el*c<this.minEl||e.el*c>this.maxEl)return!1;if(e.rng<this.minRng||e.rng>this.maxRng)return!1;if(this.minAz*c>this.maxAz){if(e.az*c<this.minAz&&e.az*c>this.maxAz)return!1}else if(e.az*c<this.minAz||e.az*c>this.maxAz)return!1;return!0},n.prototype.isSatInFov=function(e,n){return void 0===n&&(n=this.time),this.isRaeInFov(this.getRae(e,n))},n.prototype.calculatePasses=function(e,t,r){void 0===r&&(r=this.time);for(var a=!1,o=0,i=[],s=r.getTime(),u=0;u<e;u++){var c=new Date(s+1e3*u),l=this.getRae(t,c),h=360*l.az/D,m=360*l.el/D,f=this.isRaeInFov(l);if(0===u){var d=this.getRae(t,new Date(Date.now()-1e3));a=this.isRaeInFov(d)}var M=n.getPassType_(f,a);if(o=Math.max(o,l.el),M===p.ENTER||M===p.EXIT){var g={type:M,time:c,az:h,el:m,rng:l.rng};M===p.EXIT&&(g.maxElPass=o),i.push(g),o=0}a=f}return i},n.getPassType_=function(e,n){var t=p.OUT_OF_VIEW;return e&&!n?t=p.ENTER:!e&&n?t=p.EXIT:e&&n&&(t=p.IN_VIEW),t},n}(T),O=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),C=function(e){function n(n){var t=this;if(n.type&&n.type!==r.STAR)throw new Error("Invalid object type");return n.type=r.STAR,(t=e.call(this,n)||this).ra=n.ra,t.dec=n.dec,n.pname&&(t.pname=n.pname),n.bf&&(t.bf=n.bf),n.h&&(t.h=n.h),t}return O(n,e),n.prototype.getEci=function(e,t){void 0===e&&(e={lat:180*i,lon:0,alt:0}),void 0===t&&(t=this.time);var r=this.getRae(e,t),a=n.calculateTimeVariables_(t).gmst;return f.ecf2eci(f.rae2ecf(r,{lat:0,lon:0,alt:0}),a)},n.prototype.getRae=function(e,n){void 0===e&&(e={lat:180*i,lon:0,alt:0}),void 0===n&&(n=this.time);var t=y.SunMath.getStarAzEl(n,e.lat*c,e.lon*c,this.ra,this.dec);return{az:t.az,el:t.el,rng:25e4}},n.calculateTimeVariables_=function(e){var n=y.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*h;return{gmst:m.gstime(n),j:n}},n}(_);return n})(),e.exports=n()}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(32),n=__webpack_require__.n(e),t=__webpack_require__(991);const r=Math.PI,a=2*Math.PI,o=a/360,i=360/a,s=1.15741e-8,u=6371;var c;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",e[e.NOTIONAL=29]="NOTIONAL",e[e.FRAGMENT=30]="FRAGMENT"}(c||(c={}));const l={lat:null,lon:0,alt:0},h={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(e,n,t){if(isNaN(e)||isNaN(n))throw Error("Invalid EclCoord object: ("+e+", "+n+")");this.lat=e,this.lng=n,void 0!==t&&(this.h=t)}};h.EclCoord.prototype={toWgs84String:function(){return h.Math.formatNum(180*this.lat/Math.PI)+", "+h.Math.formatNum(180*-this.lng/Math.PI)}},h.EclCoordfromWgs84=function(e,n,t){return new h.EclCoord(e*Math.PI/180,-n*Math.PI/180,t)},h.EqCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid EqCoord object: ("+e+", "+n+")");this.ra=e,this.dec=n},h.EqCoord.prototype={toString:function(){return"ra:"+h.Math.formatNum(180*this.ra/Math.PI)+", dec:"+h.Math.formatNum(180*this.dec/Math.PI)}},h.HzCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid HzCoord object: ("+e+", "+n+")");this.az=e,this.alt=n},h.HzCoord.prototype={toString:function(){return"azi:"+h.Math.formatNum(180*this.az/Math.PI)+", alt:"+h.Math.formatNum(180*this.alt/Math.PI)}},h.Coord={dmsToDeg:function(e,n,t,r){return r=(60*(60*n+t)+r)/3600,e?-r:r},calcAngle:function(e,n,t,r){return h.Coord.dmsToDeg(e,n,t,r)*Math.PI/180},calcRA:function(e,n,t){return h.Coord.dmsToDeg(!1,e,n,t)%24*15*Math.PI/180},secondsToHMSStr:function(e){var n=Math.floor(e/86400);e=h.Math.pMod(e,86400);var t=Math.floor(e/3600)%24,r=Math.floor(e/60)%60;return(0!==n?n+"d ":"")+(10>t?"0":"")+t+":"+(10>r?"0":"")+r+":"+(10>(e=Math.floor(e%60))?"0":"")+e},secondsToHMStr:function(e){var n=Math.floor(e/86400);e=h.Math.pMod(e,86400);var t=Math.floor(e/3600)%24;return(0!==n?n+"d ":"")+(10>t?"0":"")+t+":"+(10>(e=Math.floor(e/60)%60)?"0":"")+e},eqToEcl:function(e,n){var t=Math.sin(e.ra),r=Math.sin(e.dec),a=Math.cos(e.dec),o=Math.sin(n);return n=Math.cos(n),new h.EclCoord(Math.atan2(t*n+r/a*o,Math.cos(e.ra)),Math.asin(r*n-a*o*t))},eclToEq:function(e,n){var t=Math.sin(e.lat),r=Math.sin(e.lng),a=Math.cos(e.lng),o=Math.sin(n);n=Math.cos(n);let i=Math.atan2(t*n-r/a*o,Math.cos(e.lat));return 0>i&&(i+=2*Math.PI),new h.EqCoord(i,Math.asin(r*n+a*o*t))},eqToHz:function(e,n,t){t=t-n.lng-e.ra;var r=Math.cos(t),a=Math.sin(n.lat);n=Math.cos(n.lat);var o=Math.sin(e.dec);return e=Math.cos(e.dec),new h.HzCoord(Math.atan2(Math.sin(t),r*a-o/e*n),Math.asin(a*o+n*e*r))}},h.DeltaT={jdToJde:function(e,n){return n||(n=h.DeltaT.estimate(e)),e+n/86400},jdeToJd:function(e,n){return n||(n=h.DeltaT.estimate(e)),e-n/86400},decimalYear:function(e){return(e=h.JulianDay.jdToCalendar(e)).y+(e.m-.5)/12},estimate:function(e){var n=h.DeltaT.decimalYear(e);return e=Math.pow,-500>n?32*e((n-1820)/100,2)-20:500>n?10583.6-1014.41*(n/=100)+33.78311*e(n,2)-5.952053*e(n,3)-.1798452*e(n,4)+.022174192*e(n,5)+.0090316521*e(n,6):1600>n?1574.2-556.01*(n=(n-1e3)/100)+71.23472*e(n,2)+.319781*e(n,3)-.8503463*e(n,4)-.005050998*e(n,5)+.0083572073*e(n,6):1700>n?120-.9808*(n-=1600)-.01532*e(n,2)+e(n,3)/7129:1800>n?8.83+.1603*(n-=1700)-.0059285*e(n,2)+13336e-8*e(n,3)-e(n,4)/1174e3:1860>n?13.72-.332447*(n-=1800)+.0068612*e(n,2)+.0041116*e(n,3)-37436e-8*e(n,4)+121272e-10*e(n,5)-1.699e-7*e(n,6)+8.75e-10*e(n,7):1900>n?7.62+.5737*(n-=1860)-.251754*e(n,2)+.01680668*e(n,3)-.0004473624*e(n,4)+e(n,5)/233174:1920>n?1.494119*(n-=1900)-2.79-.0598939*e(n,2)+.0061966*e(n,3)-197e-6*e(n,4):1941>n?21.2+.84493*(n-=1920)-.0761*e(n,2)+.0020936*e(n,3):1961>n?29.07+.407*(n-=1950)-e(n,2)/233+e(n,3)/2547:1986>n?45.45+1.067*(n-=1975)-e(n,2)/260-e(n,3)/718:2005>n?63.86+.3345*(n-=2e3)-.060374*e(n,2)+.0017275*e(n,3)+651814e-9*e(n,4)+2373599e-11*e(n,5):2050>n?62.92+.32217*(n-=2e3)+.005589*e(n,2):2150>n?32*e((n-1820)/100,2)-20-.5628*(2150-n):32*e((n-1820)/100,2)-20}},h.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(e,n){n||(n=0);var t=1-h.Globe.Fl;return n=.001*n/h.Globe.Er,{rhoslat:Math.sin(Math.atan(t*Math.tan(e)))*t+n*Math.sin(e),rhoclat:Math.cos(Math.atan(t*Math.tan(e)))+n*Math.cos(e)}}},h.Interp={newLen3:function(e,n,t){if(3!=t.length)throw"Error not 3";if(n==e)throw"Error no x range";var r=t[1]-t[0],a=t[2]-t[1];return{x1:e,x3:n,y:t,a:r,b:a,c:a-r,abSum:r+a,xSum:n+e,xDiff:n-e}},interpolateX:function(e,n){return h.Interp.interpolateN(e,(2*n-e.xSum)/e.xDiff)},interpolateN:function(e,n){return e.y[1]+.5*n*(e.abSum+n*e.c)}},h.JulianDay=function(e,n){e instanceof Date&&(e=h.JulianDay.dateToJD(e)),this.jd=e,this.deltaT=n||h.DeltaT.estimate(this.jd),this.jde=h.DeltaT.jdToJde(this.jd,this.deltaT)},h.JulianDay.prototype={toCalendar:function(){return h.JulianDay.jdToCalendar(this.jd)},toDate:function(){return h.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-h.J2000)/h.JulianCentury},jdeJ2000Century:function(){return(this.jde-h.J2000)/h.JulianCentury},startOfDay:function(){return new h.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},h.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),h.JulianDay.jdFromGregorian=function(e,n,t){return new h.JulianDay(h.JulianDay.jdFromGregorian(e,n,t))},h.JulianDay.jdFromJulian=function(e,n,t){return new h.JulianDay(h.JulianDay.calendarJulianToJD(e,n,t))},h.JulianDay.jdFromJDE=function(e){var n=h.DeltaT.estimate(e);return e=h.DeltaT.jdeToJd(e,n),new h.JulianDay(e,n)},h.JulianDay.dateToJD=function(e){var n=e.getUTCDate()+h.JulianDay.secondsFromHMS(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/86400;return e.getTime()<h.JulianDay.gregorianTimeStart?h.JulianDay.calendarJulianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n):h.JulianDay.calendarGregorianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n)},h.JulianDay.calendarGregorianToJD=function(e,n,t){1!=n&&2!=n||(e--,n+=12);var r=Math.floor(e/100);return Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+(2-r+Math.floor(r/4))+t-1524.5},h.JulianDay.calendarJulianToJD=function(e,n,t){return 1!=n&&2!=n||(e--,n+=12),Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+t-1524.5},h.JulianDay.secondsFromHMS=function(e,n,t){return 3600*e+60*n+t},h.JulianDay.jdToDate=function(e){var n=h.JulianDay.jdToCalendar(e);return e=h.Math.modF(e+.5)[1],e=Math.round(86400*e),new Date(Date.UTC(n.y,n.m-1,Math.floor(n.d),Math.floor(e/3600)%24,Math.floor(e/60)%60,Math.floor(e%60)))},h.JulianDay.jdToCalendar=function(e){var n=(e=h.Math.modF(e+.5))[0],t=n;2299151<=n&&(t=n+1+(t=Math.floor((100*n-186721625)/3652425))-Math.floor(t/4));var r=t+1524;n=Math.floor((100*r-12210)/36525);var a=Math.floor(36525*n/100);return t=Math.floor(1e4*(r-a)/306001),e=r-a-Math.floor(306001*t/1e4)+e[1],{y:1==(t=14==t||15==t?t-13:t-1)||2==t?Math.floor(n)-4715:Math.floor(n)-4716,m:t,d:e}},h.JulianDay.leapYearGregorian=function(e){return 0==e%4&&0!=e%100||0==e%400},h.JulianDay.dayOfYear=function(e,n,t,r){return e=2,r&&e--,h.JulianDay._wholeMonths(n,e)+t},h.JulianDay._wholeMonths=function(e,n){return Math.round(275*e/9-(e+9)/12*n-30)},h.Math={pMod:function(e,n){return 0>(e%=n)&&(e+=n),e},modF:function(e){return 0>e?(e=-e,[-Math.floor(e),-e%1]):[Math.floor(e),e%1]},horner:function(e,n){var t=n.length-1;if(0>=t)throw"empty array not supported";for(var r=n[t];0<t;)r=r*e+n[--t];return r},formatNum:function(e,n){return n=Math.pow(10,4|n),Math.round(e*n)/n}},h.Moon={parallax:function(e){return Math.asin(6378.14/e)},apparentEquatorial:function(e){var n=h.Moon.geocentricPosition(e),t=h.Nutation.nutation(e);return e=h.Nutation.meanObliquityLaskar(e)+t.deltaobliquity,{eq:h.Coord.eclToEq(new h.EclCoord(n.lng+t.deltalng,n.lat),e),delta:n.delta}},apparentTopocentric:function(e,n,t){var r=h.Moon.apparentEquatorial(e),a=h.Globe.parallaxConstants(n.lat,n.h),o=h.Moon.parallax(r.delta);return t||(t=h.Sidereal.apparentInRa(e)),{eq:h.Parallax.topocentric(r.eq,o,a.rhoslat,a.rhoclat,n.lng,t),delta:r.delta}},topocentricPosition:function(e,n,t){var r=h.Sidereal.apparentInRa(e);e=h.Moon.apparentTopocentric(e,n,r);var a=h.Coord.eqToHz(e.eq,n,r);return!0===t&&(a.alt+=h.Refraction.bennett2(a.alt)),n=h.Moon.parallacticAngle(n.lat,r-(n.lng+e.eq.ra),e.eq.dec),{hz:a,eq:e.eq,delta:e.delta,q:n}},approxTransit:function(e,n){return e=e.startOfDay(),h.Rise.approxTransit(n,h.Sidereal.apparent0UT(e),h.Moon.apparentTopocentric(e,n).eq)},approxTimes:function(e,n){e=e.startOfDay();var t=h.Moon.apparentTopocentric(e,n),r=h.Moon.parallax(t.delta);return r=h.Rise.stdh0Lunar(r),e=h.Sidereal.apparent0UT(e),h.Rise.approxTimes(n,r,e,t.eq)},times:function(e,n){e=e.startOfDay();var t=h.Moon.apparentTopocentric(new h.JulianDay(e.jd-1,e.deltaT),n),r=h.Moon.apparentTopocentric(e,n),a=h.Moon.apparentTopocentric(new h.JulianDay(e.jd+1,e.deltaT),n),o=h.Moon.parallax(r.delta);o=h.Rise.stdh0Lunar(o);var i=h.Sidereal.apparent0UT(e);return h.Rise.times(n,e.deltaT,o,i,[t.eq,r.eq,a.eq])},parallacticAngle:function(e,n,t){return Math.atan2(Math.sin(n),Math.tan(e)*Math.cos(t)-Math.sin(t)*Math.cos(n))},geocentricPosition:function(e){var n=Math.PI/180,t=e.jdeJ2000Century();e=h.Math.pMod(h.Math.horner(t,[218.3164477*n,481267.88123421*n,-.0015786*n,n/538841,-n/65194e3]),2*Math.PI);var r=h.Math.pMod(h.Math.horner(t,[297.8501921*n,445267.1114034*n,-.0018819*n,n/545868,-n/113065e3]),2*Math.PI),a=h.Math.pMod(h.Math.horner(t,[357.5291092*n,35999.0502909*n,-1535e-7*n,n/2449e4]),2*Math.PI),o=h.Math.pMod(h.Math.horner(t,[134.9633964*n,477198.8675055*n,.0087414*n,n/69699,-n/14712e3]),2*Math.PI),i=h.Math.pMod(h.Math.horner(t,[93.272095*n,483202.0175233*n,-.0036539*n,-n/3526e3,n/86331e4]),2*Math.PI),s=119.75*n+131.849*n*t,u=53.09*n+479264.29*n*t,c=313.45*n+481266.484*n*t,l=(t=h.Math.horner(t,[1,-.002516,-74e-7]))*t;u=3958*Math.sin(s)+1962*Math.sin(e-i)+318*Math.sin(u);var m=0;for(s=-2235*Math.sin(e)+382*Math.sin(c)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(e-o)-115*Math.sin(e+o),c=0;c<h.Moon.ta.length;c++){var f=h.Moon.ta[c],d=r*f[0]+a*f[1]+o*f[2]+i*f[3],p=Math.sin(d);switch(d=Math.cos(d),f[1]){case 0:u+=f[4]*p,m+=f[5]*d;break;case 1:case-1:u+=f[4]*p*t,m+=f[5]*d*t;break;case 2:case-2:u+=f[4]*p*l,m+=f[5]*d*l;break;default:throw"error"}}for(c=0;c<h.Moon.tb.length;c++)switch(f=h.Moon.tb[c],p=Math.sin(r*f[0]+a*f[1]+o*f[2]+i*f[3]),f[1]){case 0:s+=f[4]*p;break;case 1:case-1:s+=f[4]*p*t;break;case 2:case-2:s+=f[4]*p*l;break;default:throw"error"}return{lng:h.Math.pMod(e,2*Math.PI)+1e-6*u*n,lat:1e-6*s*n,delta:385000.56+.001*m}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},h.MoonIllum={phaseAngleEq:function(e,n,t,r){return e=h.MoonIllum._coselong(e,t),Math.atan2(r*Math.sin(Math.acos(e)),n-r*e)},phaseAngleEq2:function(e,n){return Math.acos(-h.MoonIllum._coselong(e,n))},illuminated:function(e){return(1+Math.cos(e))/2},positionAngle:function(e,n){var t=Math.cos(n.dec);return Math.atan2(t*Math.sin(n.ra-e.ra),Math.sin(n.dec)*Math.cos(e.dec)-t*Math.sin(e.dec)*Math.cos(n.ra-e.ra))},_coselong:function(e,n){return Math.sin(n.dec)*Math.sin(e.dec)+Math.cos(n.dec)*Math.cos(e.dec)*Math.cos(n.ra-e.ra)}},h.Nutation={nutation:function(e){e=e.jdeJ2000Century();for(var n=h.Math.horner(e,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,t=h.Math.horner(e,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,r=h.Math.horner(e,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,a=h.Math.horner(e,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,o=h.Math.horner(e,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,u=h.Nutation.table22A.length-1;0<=u;u--){var c=h.Nutation.table22A[u],l=c[0]*n+c[1]*t+c[2]*r+c[3]*a+c[4]*o,m=Math.cos(l);i+=Math.sin(l)*(c[5]+c[6]*e),s+=m*(c[7]+c[8]*e)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(e){var n=h.Nutation.meanObliquityLaskar(e);return(e=h.Nutation.nutation(e)).deltalng*Math.cos(n+e.deltaobliquity)},trueObliquity:function(e){return h.Nutation.meanObliquityLaskar(e)+(e=h.Nutation.nutation(e)).deltaobliquity},meanObliquity:function(e){return h.Math.horner(e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(e){return h.Math.horner(.01*e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},h.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(e){return 8.794/60/60*Math.PI/180/e},topocentric:function(e,n,t,r,a,o){a=h.Math.pMod(o-a-e.ra,2*Math.PI),n=Math.sin(n),o=Math.cos(a);var i=Math.cos(e.dec);return a=Math.atan2(-r*n*Math.sin(a),i-r*n*o),new h.EqCoord(e.ra+a,Math.atan2((Math.sin(e.dec)-t*n)*Math.cos(a),i-r*n*o))},topocentric2:function(e,n,t,r,a,o){return a=h.Math.pMod(o-a-e.ra,2*Math.PI),o=Math.cos(e.dec),new h.EqCoord(e.ra+-n*r*Math.sin(a)/o,e.dec+-n*(t*o-r*Math.cos(a)*Math.sin(e.dec)))}},h.Refraction={bennett:function(e){0>e&&(e=0);var n=Math.PI/180;return n/60/Math.tan(e+7.31*n*n/(e+4.4*n))},bennett2:function(e){var n=Math.PI/180,t=60/n,r=.06/t;return t=14.7*t*n,n*=13,(e=h.Refraction.bennett(e))-r*Math.sin(t*e+n)},saemundsson:function(e){var n=Math.PI/180;return 1.02*n/60/Math.tan(e+10.3*n*n/(e+5.11*n))}},h.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(e){return.7275*e-h.Rise.meanRefraction},circumpolar:function(e,n,t){return-1>(e=(Math.sin(n)-Math.sin(e)*Math.sin(t))/(Math.cos(e)*Math.cos(t)))||1<e?null:e},approxTransit:function(e,n,t){return 43200*(t.ra+e.lng)/Math.PI-n},approxTimes:function(e,n,t,r){return(n=h.Rise.circumpolar(e.lat,n,r.dec))?(n=43200*Math.acos(n)/Math.PI,e=43200*(r.ra+e.lng)/Math.PI-t,{transit:h.Math.pMod(e,86400),transitd:Math.floor(e/86400),rise:h.Math.pMod(e-n,86400),rised:Math.floor((e-n)/86400),set:h.Math.pMod(e+n,86400),setd:Math.floor((e+n)/86400)}):null},times:function(e,n,t,r,a){function o(a){var o=h.Math.pMod(r+360.985647*a/360,86400),i=a+n,c=h.Interp.interpolateX(s,i);return i=h.Interp.interpolateX(u,i),o=o*Math.PI/43200-(e.lng+c),c=Math.cos(i),h.Math.pMod(a+(l*Math.sin(i)+m*c*Math.cos(o)-t)/(c*m*Math.sin(o))*43200/Math.PI,86400)}var i=h.Rise.approxTimes(e,t,r,a[1]);if(!i)return null;var s=h.Interp.newLen3(-86400,86400,[a[0].ra,a[1].ra,a[2].ra]),u=h.Interp.newLen3(-86400,86400,[a[0].dec,a[1].dec,a[2].dec]);a=r+360.985647*i.transit/360;var c=h.Interp.interpolateX(s,i.transit+n);i.transit=h.Math.pMod(i.transit-(a-43200*(e.lng+c)/Math.PI),86400);var l=Math.sin(e.lat),m=Math.cos(e.lat);return i.rise=o(i.rise),i.set=o(i.set),i}},h.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(e){return e=h.Math.modF(e.jd+.5),[new h.JulianDay(e[0]-.5).jdJ2000Century(),e[1]]},mean:function(e){return h.Math.pMod(h.Sidereal._mean(e),86400)},_mean:function(e){return(e=h.Sidereal._mean0UT(e)).s+86636.55536784*e.f},_meanInRA:function(e){return(e=h.Sidereal._mean0UT(e)).s*Math.PI/43200+2.0054758187*e.f*Math.PI},mean0UT:function(e){return e=h.Sidereal._mean0UT(e),h.Math.pMod(e.s,86400)},_mean0UT:function(e){return e=h.Sidereal.jdToCFrac(e),{s:h.Math.horner(e[0],h.Sidereal.iau82),f:e[1]}},apparentInRa:function(e){var n=h.Sidereal._meanInRA(e);return e=h.Nutation.nutationInRA(e),h.Math.pMod(n+e,2*Math.PI)},apparent:function(e){var n=h.Sidereal._mean(e);return e=648e3*h.Nutation.nutationInRA(e)/Math.PI/15,h.Math.pMod(n+e,86400)},apparentLocal:function(e,n){return e=h.Sidereal.apparent(e),h.Math.pMod(e-43200*n/Math.PI,86400)},apparent0UT:function(e){var n=h.Math.modF(e.jd+.5);return e=h.Math.modF(e.jde+.5),n=h.Math.horner((n[0]-.5-h.J2000)/36525,h.Sidereal.iau82)+86636.55536784*n[1],e=648e3*h.Nutation.nutationInRA(new h.JulianDay(e[0]))/Math.PI/15,h.Math.pMod(n+e,86400)}},h.Solar={earthsunDelta:149597870,apparentEquatorial:function(e){var n=e.jdJ2000Century(),t=h.Solar.node(n);return n=h.Solar.apparentLongitude(n,t),e=h.Nutation.meanObliquityLaskar(e)+.00256*Math.PI/180*Math.cos(t),t=Math.sin(n),new h.EqCoord(Math.atan2(Math.cos(e)*t,Math.cos(n)),Math.asin(Math.sin(e)*t))},apparentTopocentric:function(e,n,t){var r=h.Solar.apparentEquatorial(e),a=h.Globe.parallaxConstants(n.lat,n.h);return t||(t=h.Sidereal.apparentInRa(e)),h.Parallax.topocentric2(r,h.Parallax.earthsunParallax,a.rhoslat,a.rhoclat,n.lng,t)},topocentricPosition:function(e,n,t){var r=h.Sidereal.apparentInRa(e);return e=h.Solar.apparentTopocentric(e,n,r),n=h.Coord.eqToHz(e,n,r),!0===t&&(n.alt+=h.Refraction.bennett2(n.alt)),{hz:n,eq:e}},approxTransit:function(e,n){return e=e.startOfDay(),h.Rise.approxTransit(n,h.Sidereal.apparent0UT(e),h.Solar.apparentTopocentric(e,n))},approxTimes:function(e,n){var t=e.startOfDay();e=h.Solar.apparentTopocentric(t,n);var r=h.Rise.stdh0Solar;return t=h.Sidereal.apparent0UT(t),h.Rise.approxTimes(n,r,t,e)},times:function(e,n){e=e.startOfDay();var t=h.Solar.apparentTopocentric(new h.JulianDay(e.jd-1,e.deltaT),n),r=h.Solar.apparentTopocentric(e,n),a=h.Solar.apparentTopocentric(new h.JulianDay(e.jd+1,e.deltaT),n),o=h.Rise.stdh0Solar,i=h.Sidereal.apparent0UT(e);return h.Rise.times(n,e.deltaT,o,i,[t,r,a])},meanAnomaly:function(e){return h.Math.horner(e,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(e){var n=h.Math.horner(e,[280.46646,36000.76983,3032e-7])*Math.PI/180,t=h.Solar.meanAnomaly(e);return e=(h.Math.horner(e,[1.914602,-.004817,-14e-6])*Math.sin(t)+(.019993-101e-6*e)*Math.sin(2*t)+289e-6*Math.sin(3*t))*Math.PI/180,{s:h.Math.pMod(n+e,2*Math.PI),v:h.Math.pMod(t+e,2*Math.PI)}},apparentLongitude:function(e,n){return n||(n=h.Solar.node(e)),h.Solar.trueLongitude(e).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(n)},node:function(e){return(125.04-1934.136*e)*Math.PI/180}},h.Solistice={march:function(e){return 1e3>e?h.Solistice._eq(e,h.Solistice.mc0):h.Solistice._eq(e-2e3,h.Solistice.mc2)},june:function(e){return 1e3>e?h.Solistice._eq(e,h.Solistice.jc0):h.Solistice._eq(e-2e3,h.Solistice.jc2)},september:function(e){return 1e3>e?h.Solistice._eq(e,h.Solistice.sc0):h.Solistice._eq(e-2e3,h.Solistice.sc2)},december:function(e){return 1e3>e?h.Solistice._eq(e,h.Solistice.dc0):h.Solistice._eq(e-2e3,h.Solistice.dc2)},_eq:function(e,n){n=((e=h.Math.horner(.001*e,n))-h.J2000)/h.JulianCentury;var t=35999.373*Math.PI/180*n-2.47*Math.PI/180;t=1+.0334*Math.cos(t)+7e-4*Math.cos(2*t);for(var r=0,a=this.terms.length-1;0<=a;a--){var o=this.terms[a];r+=o[0]*Math.cos((o[1]+o[2]*n)*Math.PI/180)}return e+1e-5*r/t},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const m=(e,n,t,r,a,o)=>{if(e<0||n<1||t<0||r<0||a<0||o<0)throw new Error("Invalid negative value");if(n>12)throw new Error("Invalid month value");if(t>31)throw new Error("Invalid day value");if(r>23)throw new Error("Invalid hour value");if(a>59)throw new Error("Invalid minute value");if(o>60)throw new Error("Invalid second value");return 367*e-Math.trunc(7*(e+Math.trunc((n+9)/12))*.25)+Math.trunc(275*n/9)+t+1721013.5+((o/60+a)/60+r)/24},f=(e,n,r,a,i,s)=>{const u={lat:a,lon:i,alt:s},c=t.Transforms.lla2ecf(u),l=Math.sin(a),h=Math.sin(i),m=Math.cos(a),f=Math.cos(i),d=o*e,p=o*n,M=-r*Math.cos(p)*Math.cos(d),g=r*Math.cos(p)*Math.sin(d),v=r*Math.sin(p);return{x:l*f*M+-h*g+m*f*v+c.x,y:l*h*M+f*g+m*h*v+c.y,z:-m*M+l*v+c.z}},d=(e,n)=>{const t=e.az*i,r=e.el*i,a=e.rng;if(n.obsminaz>n.obsmaxaz){if((t>=n.obsminaz||t<=n.obsmaxaz)&&r>=n.obsminel&&r<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||(t>=n.obsminaz2||t<=n.obsmaxaz2)&&r>=n.obsminel2&&r<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1}else if(t>=n.obsminaz&&t<=n.obsmaxaz&&r>=n.obsminel&&r<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||t>=n.obsminaz2&&t<=n.obsmaxaz2&&r>=n.obsminel2&&r<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1;return 0},p=(e,n,t)=>({lon:n,lat:e,alt:t}),M=(e,n)=>e.el*i>0&&90-e.el*i<n,g=(e,n)=>e.length>1&&n.type===c.OPTICAL||e.length>1&&n.type===c.OBSERVER||e.length>1&&n.type===c.MECHANICAL,v=(e,n,t)=>(e[3*n]=t.x,e[3*n+1]=t.y,e[3*n+2]=t.z,e),y=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e),x=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e);var b,w;!function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.UMBRAL=0]="UMBRAL",e[e.PENUMBRAL=1]="PENUMBRAL",e[e.SUN=2]="SUN"}(w||(w={}));const T=t.Utils.SunMath,A=new Float32Array(0),_=new Int8Array(0);let E,N=0,I=[],S=A,R=A,D=_,z=_,O=[0],C=[-1],P=!1,L=1e3,j=1,k=!1,U=1,q=Date.now(),F=0,Y=1,G=90,V=!1,J=!1,B=!1,H=!1,X=!1,W=!1,Q=!1,K=!1,Z=!1,$=!1,ee=0,ne=50,te=[],re={observerGd:{lat:null,lon:0,alt:0},alt:null,country:"",lat:null,lon:null,name:"",obsmaxaz:0,obsmaxel:0,obsmaxrange:0,obsminaz:0,obsminel:0,obsminrange:0,shortName:"",staticNum:0,sun:"",volume:!1,zoom:""};const ae="undefined"!=typeof process&&(null===(b=null===process||void 0===process?void 0:process.release)||void 0===b?void 0:b.name);try{onmessage=e=>oe(e)}catch(e){if(!process)throw e}const oe=e=>{let n,r,i=0,s=[];switch(e.data.typ){case"offset":return F=e.data.staticOffset,q=e.data.dynamicOffsetEpoch,Y=e.data.propRate,P=!0,void(U=1);case"satdata":for(n=JSON.parse(e.data.dat),E=n.length,i=0;i<E;){const e={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};r=null,n[i].static||n[i].missile||n[i].isRadarData?(r=n[i],delete r.id,s.push(e),I.push(r),i++):(r=t.Sgp4.createSatrec(n[i].TLE1,n[i].TLE2),e.lowAlt=r.isimp,e.inclination=r.inclo,e.eccentricity=r.ecco,e.raan=r.nodeo,e.argPe=r.argpo,e.meanMotion=60*r.no*24/a,e.semiMajorAxis=Math.pow(8681663.653/e.meanMotion,2/3),e.semiMinorAxis=e.semiMajorAxis*Math.sqrt(1-Math.pow(e.eccentricity,2)),e.apogee=e.semiMajorAxis*(1+e.eccentricity)-u,r.apogee=e.apogee,e.perigee=e.semiMajorAxis*(1-e.eccentricity)-u,r.perigee=e.perigee,e.period=1440/e.meanMotion,s.push(e),delete r.id,I.push(r),i++)}S=new Float32Array(3*E),R=new Float32Array(3*E);try{postMessage({extraData:JSON.stringify(s)})}catch(e){if(!process)throw e}break;case"satEdit":r=t.Sgp4.createSatrec(e.data.TLE1,e.data.TLE2),I[e.data.id]=Object.assign(Object.assign({},I[e.data.id]),r),I[e.data.id].skip=!1,s=[];const c={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,TLE1:null,TLE2:null};if(c.inclination=r.inclo,c.eccentricity=r.ecco,c.raan=r.nodeo,c.argPe=r.argpo,c.meanMotion=60*r.no*24/a,c.semiMajorAxis=Math.pow(8681663.653/c.meanMotion,2/3),c.semiMinorAxis=c.semiMajorAxis*Math.sqrt(1-Math.pow(c.eccentricity,2)),c.apogee=c.semiMajorAxis*(1+c.eccentricity)-u,I[e.data.id].apogee=c.apogee,c.perigee=c.semiMajorAxis*(1-c.eccentricity)-u,c.period=1440/c.meanMotion,c.TLE1=e.data.TLE1,c.TLE2=e.data.TLE2,s.push(c),ae)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(s),satId:e.data.id}),P=!0;break;case"newMissile":I[e.data.id]=e.data;break;case"satelliteSelected":C=e.data.satelliteSelected,-1===C[0]&&(X=!0,Z||(Z=!0));break;case"sensor":e.data.multiSensor?(W=!0,te=e.data.sensor,re=e.data.sensor,j=2,$||($=!0)):e.data.sensor&&(re=e.data.sensor[0],e.data.setlatlong&&(e.data.resetObserverGd?(j=1,re.observerGd=l,te=[],$||($=!0)):(j=2,re.observerGd={lon:e.data.sensor[0].lon*o,lat:e.data.sensor[0].lat*o,alt:parseFloat(e.data.sensor[0].alt)},$||($=!0))),W=!1);break;case"isShowSatOverfly":G=e.data.selectedSatFOV?e.data.selectedSatFOV:G,"enable"===e.data.isShowSatOverfly&&(H=!0),"reset"===e.data.isShowSatOverfly&&(X=!0,H=!1,Z||(Z=!0));break;default:e.data.isSunlightView&&(Q=e.data.isSunlightView),e.data.isSlowCPUModeEnabled&&(L=2e3),e.data.isLowPerf&&(K=!0),e.data.fieldOfViewSetLength&&(ee=e.data.fieldOfViewSetLength),"enable"===e.data.isShowFOVBubble&&(V=!0),"reset"===e.data.isShowFOVBubble&&(B=!0,V=!1,Z||(Z=!0)),"enable"===e.data.isShowSurvFence&&(J=!0,Z||(Z=!0)),"disable"===e.data.isShowSurvFence&&(J=!1,Z||(Z=!0))}k||"satdata"!==e.data.typ||(E=-1,ie(),k=!0)},ie=e=>{var n;I=e||I;const{now:a,j:o,gmst:u,gmstNext:d,isSunExclusion:p,sunEci:M}=((e,n,a,o,u,d)=>{var p;const M=((e,n,t)=>{const r=new Date,a=r.getTime()-e;return r.setTime(e+n+a*t),r})(e,n,a),g=m(M.getUTCFullYear(),M.getUTCMonth()+1,M.getUTCDate(),M.getUTCHours(),M.getUTCMinutes(),M.getUTCSeconds())+M.getUTCMilliseconds()*s,v=t.Sgp4.gstime(g);let y=!1,x={x:0,y:0,z:0};(null===(p=null==d?void 0:d.observerGd)||void 0===p?void 0:p.lat)&&o&&!u&&([y,x]=((e,n,a,o)=>{const s=new h.JulianDay(n),u=h.EclCoordfromWgs84(0,0,0),m=h.EclCoordfromWgs84(e.observerGd.lat*i,e.observerGd.lon*i,e.observerGd.alt),d=h.Solar.topocentricPosition(s,u,!1),p=h.Solar.topocentricPosition(s,m,!1),M=d.hz.az*i+180,g=d.hz.alt*i%360,v=p.hz.alt*i%360,y=new h.JulianDay(h.JulianDay.dateToJD(o)).jdJ2000Century();let x=180*h.Solar.meanAnomaly(y)/r;x%=360;const b=149597870700*(1.00014-.01671*Math.cos(x)-14e-5*Math.cos(2*x))/1e3,w=t.Transforms.ecf2eci(f(M,g,b,0,0,0),a);return e.observerGd!==l&&(e.type===c.OPTICAL||e.type===c.OBSERVER)&&v>-6?[!0,w]:[!1,w]})(d,g,v,M));const b=m(M.getUTCFullYear(),M.getUTCMonth()+1,M.getUTCDate(),M.getUTCHours(),M.getUTCMinutes(),M.getUTCSeconds()+1)+M.getUTCMilliseconds()*s;return{now:M,j:g,gmst:v,gmstNext:t.Sgp4.gstime(b),isSunExclusion:y,sunEci:x}})(q,F,Y,Q,W,re);E=de()?I.length-1-ee:I.length-1,null!==(null===(n=re.observerGd)||void 0===n?void 0:n.lat)?D&&D!==_||(D=new Int8Array(I.length)):D=_,Q?z&&z!==_||(z=new Int8Array(I.length)):z=_,se(a,o,u,d,p,M),B&&(B=!1,E-=ee),P||ge(),P=!1,setTimeout((()=>{ie()}),L*j/U)},se=(e,n,t,r,a,o)=>{let i=-1;for(;i<E&&!P;){i++;let s=!1;if(I[i].satnum?s=!fe(i,t,o,n,a):I[i].isRadarData?s=!ue(i):I[i].static&&!I[i].marker&&I[i].isStar?(le(i,e),x(R,i)):I[i].static&&!I[i].marker?(me(i,t),x(R,i)):I[i].missile?s=!he(i,e,r,t):I[i].marker&&(V||B)?i=Me(i,t):I[i].marker&&(H||X)&&(i=ce(i,t)),!s&&(X=!1,I[i].marker)){pe(i);break}}},ue=e=>!I[e].skip&&(I[e].skip=!0,y(S,e),x(R,e),!0),ce=(e,n)=>{if(X&&!0===I[e].active)return e;let r,a,s,u,c,l,h,m,f,d,g,y,b;for(let w=0;w<C.length+1;w++){if(w===C.length){O.push(e);break}if(-1!==C[w]){if(!H)continue;for(c={x:S[3*C[w]],y:S[3*C[w]+1],z:S[3*C[w]+2]},l=t.Transforms.ecf2eci(c,n),h=t.Transforms.eci2lla(l,n),m=h.alt,f=p(h.lat,h.lon,1),g=1,m<2500&&G<=60&&(g=.5),(m>7e3||G>=90)&&(g=2),C.length>1&&(g=2),d=-60;d<60;d+=g)if(a=Math.max(Math.min(Math.round(h.lat*i)+d,90),-90)*o,!(a>90))for(b=m<2500&&G<=60?.5:m>7e3||G>=90?2:1,C.length>1&&(b=2),y=0;y<181;y+=b){if(s=h.lon+y*o,f=p(a,s,15),r=t.Transforms.ecf2rae(f,c),M(r,G)){if(u=t.Transforms.lla2ecf(f),e===E)continue;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(0!==y&&180!==y){if(s=h.lon-y*o,f=p(a,s,15),r=t.Transforms.ecf2rae(f,c),M(r,G)){if(u=t.Transforms.lla2ecf(f),e===E)continue;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(90===a||-90===a)break}}}}return e},le=(e,n)=>{const t=T.getStarAzEl(n,0,188,I[e].ra,I[e].dec),r=f(t.az*i,t.el*i,25e4,0,0,0);S[3*e]=r.x,S[3*e+1]=r.y,S[3*e+2]=r.z},he=(e,n,r,a)=>{if(!I[e].active)return S[3*e]=0,S[3*e+1]=0,S[3*e+2]=0,!1;let i,s,u,c;const l=I[e].altList.length;let h;for(let t=0;t<l;t++)if(1*I[e].startTime+1e3*t>=n.getTime()){h=t;break}I[e].lastTime=I[e].lastTime>=0?I[e].lastTime:0,i=Math.cos(I[e].latList[I[e].lastTime+1]*o),s=Math.sin(I[e].latList[I[e].lastTime+1]*o),u=Math.cos(I[e].lonList[I[e].lastTime+1]*o+r),c=Math.sin(I[e].lonList[I[e].lastTime+1]*o+r),0===I[e].lastTime?x(R,e):0===R[3*e]&&0===R[3*e+1]&&0===R[3*e+2]?(R[3*e]=(6371+I[e].altList[I[e].lastTime+1])*i*u-S[3*e],R[3*e+1]=(6371+I[e].altList[I[e].lastTime+1])*i*c-S[3*e+1],R[3*e+2]=(6371+I[e].altList[I[e].lastTime+1])*s-S[3*e+2]):(R[3*e]+=(6371+I[e].altList[I[e].lastTime+1])*i*u-S[3*e],R[3*e+1]+=(6371+I[e].altList[I[e].lastTime+1])*i*c-S[3*e+1],R[3*e+2]+=(6371+I[e].altList[I[e].lastTime+1])*s-S[3*e+2],R[3*e]*=.5,R[3*e+1]*=.5,R[3*e+2]*=.5),i=Math.cos(I[e].latList[h]*o),s=Math.sin(I[e].latList[h]*o),u=Math.cos(I[e].lonList[h]*o+a),c=Math.sin(I[e].lonList[h]*o+a),S[3*e]=(6371+I[e].altList[h])*i*u,S[3*e+1]=(6371+I[e].altList[h])*i*c,S[3*e+2]=(6371+I[e].altList[h])*s,I[e].lastTime=h;const m=S[3*e],f=S[3*e+1],p=S[3*e+2],M=t.Transforms.eci2ecf({x:m,y:f,z:p},a);t.Transforms.eci2lla({x:m,y:f,z:p},a).alt<=150&&!1===I[e].missile&&(I[e].skip=!0);const g=t.Transforms.ecf2rae(re.observerGd,M);return D[e]=d(g,re),!0},me=(e,n)=>{const t=Math.cos(I[e].lat*o),r=Math.sin(I[e].lat*o),a=Math.cos(I[e].lon*o+n),i=Math.sin(I[e].lon*o+n);S[3*e]=(6372+I[e].alt)*t*a,S[3*e+1]=(6372+I[e].alt)*t*i,S[3*e+2]=(6372+I[e].alt)*r},fe=(e,s,l,h,m)=>{var f,p;let M,g,v,y,x;if(I[e].skip)return!1;const b=1440*(h-I[e].jdsatepoch),T=t.Sgp4.propagate(I[e],b);try{if(N<5&&N>1&&(ne=Math.max(ne,ne*Y),Math.abs(T.position.x-S[3*e])>ne||Math.abs(T.position.y-S[3*e+1])>ne||Math.abs(T.position.z-S[3*e+2])>ne))throw new Error("Impossible orbit");if(S[3*e]=T.position.x,S[3*e+1]=T.position.y,S[3*e+2]=T.position.z,R[3*e]=T.velocity.x,R[3*e+1]=T.velocity.y,R[3*e+2]=T.velocity.z,I[e].isimp||b/1440>20){const n=6378.137,t=6356.7523142,o=Math.sqrt(T.position.x*T.position.x+T.position.y*T.position.y),i=(n-t)/n,u=2*i-i*i;let c=Math.atan2(T.position.y,T.position.x)-s;for(;c<-r;)c+=a;for(;c>r;)c-=a;const l=20;let h,m=0,f=Math.atan2(T.position.z,Math.sqrt(T.position.x*T.position.x+T.position.y*T.position.y));for(;m<l;)h=1/Math.sqrt(1-u*(Math.sin(f)*Math.sin(f))),f=Math.atan2(T.position.z+n*h*u*Math.sin(f),o),m+=1;const d=o/Math.cos(f)-n*h;if(d>I[e].apogee+1e3||d<I[e].perigee-100)throw new Error("Impossible orbit")}null===(null===(f=re.observerGd)||void 0===f?void 0:f.lat)||W||(x=t.Transforms.ecf2rae(re.observerGd,t.Transforms.eci2ecf(T.position,s)))}catch(n){I[e].skip=!0,postMessage({badSatNumber:I[e].satnum}),S[3*e]=0,S[3*e+1]=0,S[3*e+2]=0,R[3*e]=0,R[3*e+1]=0,R[3*e+2]=0,y=0,x=0}if(Q&&(z[e]=w.SUN,M=Math.asin(u/Math.sqrt(Math.pow(-S[3*e],2)+Math.pow(-S[3*e+1],2)+Math.pow(-S[3*e+2],2)))*i,g=Math.asin(695700/Math.sqrt(Math.pow(-S[3*e]+l.x,2)+Math.pow(-S[3*e+1]+l.y,2)+Math.pow(-S[3*e+2]+l.z,2)))*i,v=Math.acos(n().dot([-S[3*e],-S[3*e+1],-S[3*e+2]],[-S[3*e]+l.x,-S[3*e+1]+l.y,-S[3*e+2]+l.z])/(Math.sqrt(Math.pow(-S[3*e],2)+Math.pow(-S[3*e+1],2)+Math.pow(-S[3*e+2],2))*Math.sqrt(Math.pow(-S[3*e]+l.x,2)+Math.pow(-S[3*e+1]+l.y,2)+Math.pow(-S[3*e+2]+l.z,2))))*i,M>g&&v<M-g&&(z[e]=w.UMBRAL),Math.abs(M-g)<v&&v<M+g&&(z[e]=w.PENUMBRAL),g>M&&(z[e]=w.PENUMBRAL),v<g-M&&(z[e]=w.PENUMBRAL)),null!==(null===(p=re.observerGd)||void 0===p?void 0:p.lat)&&!m)if(D[e]=0,W){for(let n=0;n<te.length;n++)if(re.type!==c.OPTICAL||z[e]!==w.UMBRAL){if(D[e])break;re=te[n],re.observerGd={lon:re.lon*o,lat:re.lat*o,alt:1*re.alt};try{y=t.Transforms.eci2ecf(T.position,s),x=t.Transforms.ecf2rae(re.observerGd,y)}catch(e){continue}D[e]=d(x,re)}}else re.type===c.OPTICAL&&z[e]===w.UMBRAL||(D[e]=d(x,re));return!0},de=()=>!X&&!H&&!B&&!V||K,pe=e=>{for(;e<E;e++){if(!I[e].active){E-=ee;break}y(S,e),x(R,e),I[e].active=!1}},Me=(e,n)=>{var r;let a,i,s,u,c,h;W||null===(null===(r=re.observerGd)||void 0===r?void 0:r.lat)||(te[0]=re,te.length=1),O=[];for(let r=0;r<te.length+1&&(O.push(e),r!==te.length);r++)if(re=te[r],re.observerGd=p(re.lat*o,re.lon*o,re.alt),y(S,e),x(R,e),!B&&V&&re.observerGd!==l&&!g(te,re)){if(c=Math.abs(re.obsmaxaz-re.obsminaz)<30?.5:3,h=re.obsmaxrange-re.obsminrange<720?125:30,!J)if(0!==re.obsminaz&&360!==re.obsmaxaz){for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=re.obsminaz,i=re.obsminel;i<re.obsmaxel;i+=c){u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n);try{I[e].active=!0,S=v(S,e,u),x(R,e),e++}catch(e){}}for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=re.obsmaxaz,i=re.obsminel;i<re.obsmaxel;i+=c){u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n);try{I[e].active=!0}catch(e){}S=v(S,e,u),x(R,e),e++}if(void 0!==re.obsminaz2){for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=re.obsminaz2,i=re.obsminel2;i<re.obsmaxel2;i+=c)u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),I[e].active=!0,S=v(S,e,u),x(R,e),e++;for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=re.obsmaxaz2,i=re.obsminel2;i<re.obsmaxel2;i+=c)u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),I[e].active=!0,S=v(S,e,u),x(R,e),e++}}else for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(i=re.obsmaxel,a=re.obsminaz;a<re.obsmaxaz;a+=c){u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n);try{I[e].active=!0}catch(e){}S=v(S,e,u),x(R,e),e++}if(re.obsmaxel-re.obsminel<20)for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=0;a<Math.max(360,re.obsmaxaz);a+=c){if(re.obsminaz>re.obsmaxaz){if(!(a>=re.obsminaz||a<=re.obsmaxaz))continue}else if(!(a>=re.obsminaz&&a<=re.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,re.obsmaxel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e===E)break;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(void 0!==re.obsminaz2)for(c=2,s=Math.max(re.obsminrange2,100);s<Math.min(re.obsmaxrange2,6e4);s+=Math.min(re.obsmaxrange2,6e4)/h)for(a=0;a<360;a+=1*c){if(re.obsminaz2>re.obsmaxaz2){if(!(a>=re.obsminaz2||a<=re.obsmaxaz2))continue}else if(!(a>=re.obsminaz2&&a<=re.obsmaxaz2))continue;if(u=t.Transforms.ecf2eci(f(a,re.obsminel2,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e===E)break;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(!J){for(s=Math.min(re.obsmaxrange,6e4),a=0;a<Math.max(360,re.obsmaxaz);a+=c){if(re.obsminaz>re.obsmaxaz){if(!(a>=re.obsminaz||a<=re.obsmaxaz))continue}else if(!(a>=re.obsminaz&&a<=re.obsmaxaz))continue;for(i=re.obsminel;i<re.obsmaxel&&(u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e!==E);i+=c)I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(void 0!==re.obsminaz2)for(s=Math.min(re.obsmaxrange2,6e4),a=0;a<Math.max(360,re.obsmaxaz2);a+=c){if(re.obsminaz2>re.obsmaxaz2){if(!(a>=re.obsminaz2||a<=re.obsmaxaz2))continue}else if(!(a>=re.obsminaz2&&a<=re.obsmaxaz2))continue;for(i=re.obsminel2;i<re.obsmaxel2&&(u=t.Transforms.ecf2eci(f(a,i,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e!==E);i+=c)I[e].active=!0,S=v(S,e,u),x(R,e),e++}}for(c=.25,s=re.obsmaxrange,a=0;a<Math.max(360,re.obsmaxaz);a+=c){if(re.obsminaz>re.obsmaxaz){if(!(a>=re.obsminaz||a<=re.obsmaxaz))continue}else if(!(a>=re.obsminaz&&a<=re.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,re.obsminel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e===E)break;I[e].active=!0,S=v(S,e,u),x(R,e),e++}for(s=re.obsminrange,a=0;a<Math.max(360,re.obsmaxaz);a+=c){if(re.obsminaz>re.obsmaxaz){if(!(a>=re.obsminaz||a<=re.obsmaxaz))continue}else if(!(a>=re.obsminaz&&a<=re.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,re.obsminel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e===E)break;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(re.obsmaxrange-re.obsminrange<720)for(s=Math.max(re.obsminrange,100);s<Math.min(re.obsmaxrange,6e4);s+=Math.min(re.obsmaxrange,6e4)/h)for(a=0;a<Math.max(360,re.obsmaxaz);a+=c){if(re.obsminaz>re.obsmaxaz){if(!(a>=re.obsminaz||a<=re.obsmaxaz))continue}else if(!(a>=re.obsminaz&&a<=re.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,re.obsminel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e===E)break;I[e].active=!0,S=v(S,e,u),x(R,e),e++}if(re.obsminaz!==re.obsmaxaz&&re.obsminaz!==re.obsmaxaz-360){for(c=(re.obsmaxrange-re.obsminrange)/5555,a=re.obsmaxaz;a===re.obsmaxaz;a+=1)for(s=re.obsminrange;s<re.obsmaxrange&&(u=t.Transforms.ecf2eci(f(a,re.obsminel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e!==E);s+=c)I[e].active=!0,S=v(S,e,u),x(R,e),e++;for(a=re.obsminaz;a===re.obsminaz;a+=1)for(s=re.obsminrange;s<re.obsmaxrange&&(u=t.Transforms.ecf2eci(f(a,re.obsminel,s,re.observerGd.lat,re.observerGd.lon,re.observerGd.alt),n),e!==E);s+=c)I[e].active=!0,S=v(S,e,u),x(R,e),e++}}return e},ge=()=>{var e;N<5&&N++;const n={satPos:S};null!==(null===(e=re.observerGd)||void 0===e?void 0:e.lat)?n.satInView=D:n.satInView=_,n.satInSun=Q?z:_,O.length>=1?n.sensorMarkerArray=O:n.sensorMarkerArray=[];try{postMessage(n),postMessage({satVel:R})}catch(e){if(!process)throw e}}})()})();