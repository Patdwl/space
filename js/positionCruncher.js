/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{"use strict";var e,t,a,r,n,i,o,s;!function(e){e.LEO="Low Earth Orbit",e.MEO="Medium Earth Orbit",e.HEO="Highly Eccentric Orbit",e.GEO="Geosynchronous Orbit",e.OTHER="Uncategorized Orbit"}(e||(e={})),function(e){e.AFSPC="a",e.IMPROVED="i"}(t||(t={})),function(e){e[e.Circle=0]="Circle",e[e.Sphere=1]="Sphere"}(a||(a={})),(s=r||(r={}))[s.Cosine=0]="Cosine",s[s.Haversine=1]="Haversine",function(e){e[e.OUT_OF_VIEW=-1]="OUT_OF_VIEW",e[e.ENTER=0]="ENTER",e[e.IN_VIEW=1]="IN_VIEW",e[e.EXIT=2]="EXIT"}(n||(n={})),(o=i||(i={}))[o.UNKNOWN=0]="UNKNOWN",o[o.PAYLOAD=1]="PAYLOAD",o[o.ROCKET_BODY=2]="ROCKET_BODY",o[o.DEBRIS=3]="DEBRIS",o[o.SPECIAL=4]="SPECIAL",o[o.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",o[o.STAR=9]="STAR",o[o.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",o[o.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",o[o.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",o[o.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",o[o.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",o[o.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",o[o.LAUNCH_SITE=16]="LAUNCH_SITE",o[o.LAUNCH_POSITION=17]="LAUNCH_POSITION",o[o.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",o[o.CONTROL_FACILITY=19]="CONTROL_FACILITY",o[o.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",o[o.OPTICAL=21]="OPTICAL",o[o.MECHANICAL=22]="MECHANICAL",o[o.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",o[o.OBSERVER=24]="OBSERVER",o[o.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",o[o.COUNTRY=26]="COUNTRY",o[o.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",o[o.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",o[o.NOTIONAL=29]="NOTIONAL",o[o.FRAGMENT=30]="FRAGMENT",o[o.SHORT_TERM_FENCE=31]="SHORT_TERM_FENCE",o[o.MAX_SPACE_OBJECT_TYPE=32]="MAX_SPACE_OBJECT_TYPE";var l=2*Math.PI,h=(Math.PI,Math.PI/180),c=180/Math.PI,u=1/60/60*h,m=u/1e4,d=864e5,f=86400,g=86164.0905,M=604800,p=Math.PI,v=2/3,y=15e-13,w=1.15741e-8,x=398600.4415;class A{constructor(e){if(function(e,t,a){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"posix",void 0),this.posix=e,e<0)throw new Error("Epoch cannot be negative")}toString(){return this.toDateTime().toISOString()}toExcelString(){return this.toString().substring(0,19)}difference(e){return this.posix-e.posix}equals(e){return this.posix===e.posix}toDateTime(){return new Date(1e3*this.posix)}toEpochYearAndDay(){var e=this.toDateTime();return{epochYr:e.getUTCFullYear().toString().slice(2,4),epochDay:(this.getDayOfYear_(e)+(60*e.getUTCHours()+e.getUTCMinutes())/1440).toFixed(8).padStart(12,"0")}}getDayOfYear_(e){var t=e.getUTCMonth(),a=e.getUTCDate(),r=[0,31,59,90,120,151,181,212,243,273,304,334][t]+a;return t>1&&this.isLeapYear_(e)&&r++,r}isLeapYear_(e){var t=e.getUTCFullYear();return 0==(3&t)&&(t%100!=0||t%400==0)}toJulianDate(){return this.posix/f+2440587.5}toJulianCenturies(){return(this.toJulianDate()-2451545)/36525}operatorGreaterThan(e){return this.posix>e.posix}operatorGreaterThanOrEqual(e){return this.posix>=e.posix}operatorLessThan(e){return this.posix<e.posix}operatorLessThanOrEqual(e){return this.posix<=e.posix}}function b(e){for(var t=Math.abs(e),a=1,r=2;r<=t;r++)a*=r;return a}function E(e,t){for(var a=t[0],r=1;r<t.length;r++)a=a*e+t[r];return a}function _(e,t){var a=e,r=2*Math.PI-e,n=Math.atan2(Math.sin(a-t),Math.cos(a-t)),i=Math.atan2(Math.sin(r-t),Math.cos(r-t));return Math.abs(n)<Math.abs(i)?a:r}function T(e,t){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Sphere){case a.Circle:return 2*Math.atan(e/(2*t));case a.Sphere:return 2*Math.asin(e/(2*t));default:throw new Error("Invalid angular diameter method.")}}function z(e,t){var a=0,r=0;if(Math.abs(e)<1e-8)r=t,a=t;else if(e<1-1e-8){var n=Math.sqrt(1-e*e)*Math.sin(t)/(1+e*Math.cos(t)),i=(e+Math.cos(t))/(1+e*Math.cos(t));r=(a=Math.atan2(n,i))-e*Math.sin(a)}return e<1&&((r-=Math.floor(r/(2*Math.PI))*(2*Math.PI))<0&&(r+=2*Math.PI),a-=Math.floor(a/(2*Math.PI))*(2*Math.PI)),{e0:a,m:r}}function S(e,t,a){return Math.max(t,Math.min(e,a))}function I(e,t){return Number(e.toFixed(t))}i.UNKNOWN,i.PAYLOAD,i.ROCKET_BODY,i.DEBRIS,i.SPECIAL,i.BALLISTIC_MISSILE,i.STAR,i.INTERGOVERNMENTAL_ORGANIZATION,i.SUBORBITAL_PAYLOAD_OPERATOR,i.PAYLOAD_OWNER,i.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER,i.PAYLOAD_MANUFACTURER,i.LAUNCH_AGENCY,i.LAUNCH_SITE,i.LAUNCH_POSITION,i.LAUNCH_FACILITY,i.CONTROL_FACILITY,i.GROUND_SENSOR_STATION,i.OPTICAL,i.MECHANICAL,i.PHASED_ARRAY_RADAR,i.OBSERVER,i.BISTATIC_RADIO_TELESCOPE,i.COUNTRY,i.LAUNCH_VEHICLE_MANUFACTURER,i.ENGINE_MANUFACTURER,i.NOTIONAL,i.FRAGMENT,i.SHORT_TERM_FENCE,i.MAX_SPACE_OBJECT_TYPE;class P{constructor(e){(function(e,t,a){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})(this,"_coeffs",void 0),this._coeffs=e}static fromVals(e){var t=[];for(var a of e){var[r,n,i,o]=a,s=0===n?1:2,l=b(r+n),h=b(r-n)*(s*(2*r+1)),c=Math.sqrt(l/h),u=i/c,m=o/c;t.push([r,n,u,m])}return new P(t)}getCoeffs(e,t){return this._coeffs[P.index_(e,t)]}static index_(e,t){return((e-2)*(e+2)+e>>1)-1+t}}var R=P.fromVals([[2,0,-.000484165371736,0],[2,1,-1.86987635955e-10,1.19528012031e-9],[2,2,243914352398e-17,-140016683654e-17],[3,0,9.57254173792e-7,0],[3,1,202998882184e-17,2.48513158716e-7],[3,2,9.04627768605e-7,-6.19025944205e-7],[3,3,7.21072657057e-7,141435626958e-17],[4,0,5.39873863789e-7,0],[4,1,-5.36321616971e-7,-4.73440265853e-7],[4,2,3.50694105785e-7,6.6267157254e-7],[4,3,9.90771803829e-7,-2.00928369177e-7],[4,4,-1.88560802735e-7,3.08853169333e-7],[5,0,6.8532347563e-8,0],[5,1,-6.21012128528e-8,-9.44226127525e-8],[5,2,6.52438297612e-7,-3.23349612668e-7],[5,3,-4.51955406071e-7,-2.14847190624e-7],[5,4,-2.95301647654e-7,4.96658876769e-8],[5,5,1.74971983203e-7,-6.69384278219e-7],[6,0,-1.49957994714e-7,0],[6,1,-7.60879384947e-8,2.62890545501e-8],[6,2,4.81732442832e-8,-3.73728201347e-7],[6,3,5.71730990516e-8,9.02694517163e-9],[6,4,-8.62142660109e-8,-4.71408154267e-7],[6,5,-2.6713332549e-7,-5.36488432483e-7],[6,6,9.67616121092e-9,-2.37192006935e-7],[7,0,9.0978937145e-8,0],[7,1,2.79872910488e-7,9.54336911867e-8],[7,2,3.29743816488e-7,9.30667596042e-8],[7,3,2.50398657706e-7,-2.17198608738e-7],[7,4,-2.75114355257e-7,-1.23800392323e-7],[7,5,1.93765507243e-9,1.77377719872e-8],[7,6,-3.58856860645e-7,1.51789817739e-7],[7,7,1.09185148045e-9,2.44415707993e-8],[8,0,4.96711667324e-8,0],[8,1,2.33422047893e-8,5.90060493411e-8],[8,2,8.02978722615e-8,6.54175425859e-8],[8,3,-1.91877757009e-8,-8.63454445021e-8],[8,4,-2.44600105471e-7,7.00233016934e-8],[8,5,-2.55352403037e-8,8.91462164788e-8],[8,6,-6.57361610961e-8,3.09238461807e-7],[8,7,6.72811580072e-8,7.47440473633e-8],[8,8,-1.24092493016e-7,1.20533165603e-7],[9,0,2.76714300853e-8,0],[9,1,1.43387502749e-7,2.16834947618e-8],[9,2,2.22288318564e-8,-3.22196647116e-8],[9,3,-1.60811502143e-7,-7.42287409462e-8],[9,4,-9.00179225336e-9,1.94666779475e-8],[9,5,-1.66165092924e-8,-5.41113191483e-8],[9,6,6.26941938248e-8,2.22903525945e-7],[9,7,-1.18366323475e-7,-9.65152667886e-8],[9,8,1.88436022794e-7,-3.08566220421e-9],[9,9,-4.77475386132e-8,9.66412847714e-8],[10,0,5.26222488569e-8,0],[10,1,8.35115775652e-8,-1.31314331796e-7],[10,2,-9.42413882081e-8,-5.1579165739e-8],[10,3,-6.89895048176e-9,-1.53768828694e-7],[10,4,-8.40764549716e-8,-7.92806255331e-8],[10,5,-4.93395938185e-8,-5.05370221897e-8],[10,6,-3.75885236598e-8,-7.95667053872e-8],[10,7,8.11460540925e-9,-3.36629641314e-9],[10,8,4.04927981694e-8,-9.18705975922e-8],[10,9,1.25491334939e-7,-3.76516222392e-8],[10,10,1.00538634409e-7,-2.4014844952e-8],[11,0,-5.09613707522e-8,0],[11,1,1.51687209933e-8,-2.68604146166e-8],[11,2,1.86309749878e-8,-9.90693862047e-8],[11,3,-3.09871239854e-8,-1.4813180426e-7],[11,4,-3.89580205051e-8,-6.3666651198e-8],[11,5,3.77848029452e-8,4.94736238169e-8],[11,6,-1.18676592395e-9,3.44769584593e-8],[11,7,4.11565188074e-9,-8.98252808977e-8],[11,8,-5.984108413e-9,2.43989612237e-8],[11,9,-3.14231072723e-8,4.17731829829e-8],[11,10,-5.21882681927e-8,-1.83364561788e-8],[11,11,4.60344448746e-8,-6.96662308185e-8],[12,0,3.77252636558e-8,0],[12,1,-5.40654977836e-8,-4.35675748979e-8],[12,2,1.42979642253e-8,3.20975937619e-8],[12,3,3.93995876403e-8,2.44264863505e-8],[12,4,-6.86908127934e-8,4.15081109011e-9],[12,5,3.0941112873e-8,7.82536279033e-9],[12,6,3.41523275208e-9,3.91765484449e-8],[12,7,-1.86909958587e-8,3.56131849382e-8],[12,8,-2.53769398865e-8,1.69361024629e-8],[12,9,4.22880630662e-8,2.52692598301e-8],[12,10,-6.17619654902e-9,3.08375794212e-8],[12,11,1.12502994122e-8,-6.37946501558e-9],[12,12,-2.4953260739e-9,-1.117806019e-8],[13,0,4.22982206413e-8,0],[13,1,-5.13569699124e-8,3.90510386685e-8],[13,2,5.59217667099e-8,-6.27337565381e-8],[13,3,-2.19360927945e-8,9.74829362237e-8],[13,4,-3.13762599666e-9,-1.19627874492e-8],[13,5,5.90049394905e-8,6.64975958036e-8],[13,6,-3.59038073075e-8,-6.57280613686e-9],[13,7,2.53002147087e-9,-6.21470822331e-9],[13,8,-9.83150822695e-9,-1.04740222825e-8],[13,9,2.47325771791e-8,4.52870369936e-8],[13,10,4.1032465393e-8,-3.6812102948e-8],[13,11,-4.43869677399e-8,-4.76507804288e-9],[13,12,-3.12622200222e-8,8.78405809267e-8],[13,13,-6.12759553199e-8,6.85261488594e-8],[14,0,-2.42786502921e-8,0],[14,1,-1.86968616381e-8,2.94747542249e-8],[14,2,-3.67789379502e-8,-5.16779392055e-9],[14,3,3.58875097333e-8,2.04618827833e-8],[14,4,1.83865617792e-9,-2.26780613566e-8],[14,5,2.87344273542e-8,-1.63882249728e-8],[14,6,-1.94810485574e-8,2.47831272781e-9],[14,7,3.75003839415e-8,-4.17291319429e-9],[14,8,-3.50946485865e-8,-1.53515265203e-8],[14,9,3.20284939341e-8,2.88804922064e-8],[14,10,3.90329180008e-8,-1.44308452469e-9],[14,11,1.53970516502e-8,-3.90548173245e-8],[14,12,8.40829163869e-9,-3.11327189117e-8],[14,13,3.22147043964e-8,4.5189722496e-8],[14,14,-5.18980794309e-8,-4.81506636748e-9],[15,0,1.47910068708e-9,0],[15,1,1.00817268177e-8,1.09773066324e-8],[15,2,-2.13942673775e-8,-3.08914875777e-8],[15,3,5.21392929041e-8,1.72892926103e-8],[15,4,-4.08150084078e-8,6.50174707794e-9],[15,5,1.24935723108e-8,8.08375563996e-9],[15,6,3.31211643896e-8,-3.68246004304e-8],[15,7,5.96210699259e-8,5.31841171879e-9],[15,8,-3.22428691498e-8,2.21523579587e-8],[15,9,1.28788268085e-8,3.75629820829e-8],[15,10,1.04688722521e-8,1.47222147015e-8],[15,11,-1.11675061934e-9,1.80996198432e-8],[15,12,-3.23962134415e-8,1.55243104746e-8],[15,13,-2.83933019117e-8,-4.22066791103e-9],[15,14,5.1916885933e-9,-2.43752739666e-8],[15,15,-1.90930538322e-8,-4.71139421558e-9],[16,0,-3.15322986722e-9,0],[16,1,2.58360856231e-8,3.25447560859e-8],[16,2,-2.33671404512e-8,2.88799363439e-8],[16,3,-3.36019429391e-8,-2.2041898801e-8],[16,4,4.02316284314e-8,4.83837716909e-8],[16,5,-1.29501939245e-8,-3.19458578129e-9],[16,6,1.40239252323e-8,-3.50760208303e-8],[16,7,-7.08412635136e-9,-8.81581561131e-9],[16,8,-2.09018868094e-8,5.0052739053e-9],[16,9,-2.18588720643e-8,-3.95012419994e-8],[16,10,-1.17529900814e-8,1.14211582961e-8],[16,11,1.87574042592e-8,-3.03161919925e-9],[16,12,1.95400194038e-8,6.66983574071e-9],[16,13,1.38196369576e-8,1.02778499508e-9],[16,14,-1.93182168856e-8,-3.86174893776e-8],[16,15,-1.45149060142e-8,-3.27443078739e-8],[16,16,-3.79671710746e-8,3.02155372655e-9],[17,0,1.97605066395e-8,0],[17,1,-2.54177575118e-8,-3.06630529689e-8],[17,2,-1.95988656721e-8,6.4926589341e-9],[17,3,5.64123066224e-9,6.78327095529e-9],[17,4,7.07457075637e-9,2.49437600834e-8],[17,5,-1.54987006052e-8,6.60021551851e-9],[17,6,-1.18194012847e-8,-2.89770975177e-8],[17,7,2.42149702381e-8,-4.22222973697e-9],[17,8,3.88442097559e-8,3.58904095943e-9],[17,9,3.81356493231e-9,-2.81466943714e-8],[17,10,-3.88216085542e-9,1.81328176508e-8],[17,11,-1.57356600363e-8,1.06560649404e-8],[17,12,2.88013010655e-8,2.03450136084e-8],[17,13,1.65503425731e-8,2.04667531435e-8],[17,14,-1.41983872649e-8,1.14948025244e-8],[17,15,5.42100361657e-9,5.32610369811e-9],[17,16,-3.01992205043e-8,3.65331918531e-9],[17,17,-3.43086856041e-8,-1.98523455381e-8],[18,0,5.08691038332e-9,0],[18,1,7.21098449649e-9,-3.88714473013e-8],[18,2,1.40631771205e-8,1.00093396253e-8],[18,3,-5.07232520873e-9,-4.90865931335e-9],[18,4,5.48759308217e-8,-1.3526711772e-9],[18,5,5.48710485555e-9,2.64338629459e-8],[18,6,1.46570755271e-8,-1.36438019951e-8],[18,7,6.75812328417e-9,6.88577494235e-9],[18,8,3.07619845144e-8,4.17827734107e-9],[18,9,-1.8847060188e-8,3.68302736953e-8],[18,10,5.27535358934e-9,-4.66091535881e-9],[18,11,-7.2962851896e-9,1.9521520802e-9],[18,12,-2.97449412422e-8,-1.64497878395e-8],[18,13,-6.27919717152e-9,-3.48383939938e-8],[18,14,-8.1560533641e-9,-1.28636585027e-8],[18,15,-4.05003412879e-8,-2.02684998021e-8],[18,16,1.04141042028e-8,6.61468817624e-9],[18,17,3.58771586841e-9,4.48065587564e-9],[18,18,3.12351953717e-9,-1.09906032543e-8],[19,0,-3.25780965394e-9,0],[19,1,-7.59903885319e-9,1.26835472605e-9],[19,2,3.53541528655e-8,-1.31346303514e-9],[19,3,-9.74103607309e-9,1.50662259043e-9],[19,4,1.57039009057e-8,-7.61677383811e-9],[19,5,1.09629213379e-8,2.83172176438e-8],[19,6,-4.08745178658e-9,1.86219430719e-8],[19,7,4.78275337044e-9,-7.172834559e-9],[19,8,2.9490836428e-8,-9.93037002883e-9],[19,9,3.07961427159e-9,6.94110477214e-9],[19,10,-3.38415069043e-8,-7.37981767136e-9],[19,11,1.60443652916e-8,9.96673453483e-9],[19,12,-2.47106581581e-9,9.16852310642e-9],[19,13,-7.4471737998e-9,-2.82584466742e-8],[19,14,-4.70502589215e-9,-1.29526697983e-8],[19,15,-1.76580549771e-8,-1.40350990039e-8],[19,16,-2.16950096188e-8,-7.24534721567e-9],[19,17,2.90444936079e-8,-1.5345653107e-8],[19,18,3.48382199593e-8,-9.54146344917e-9],[19,19,-2.5734934943e-9,4.83151822363e-9],[20,0,2.22384610651e-8,0],[20,1,5.16303125218e-9,6.69626726966e-9],[20,2,1.98831128238e-8,1.75183843257e-8],[20,3,-3.62601436785e-9,3.79590724141e-8],[20,4,2.42238118652e-9,-2.11057611874e-8],[20,5,-1.07042562564e-8,-7.71860083169e-9],[20,6,1.1047483757e-8,-2.17720365898e-9],[20,7,-2.10090282728e-8,-223491503969e-22],[20,8,4.42419185637e-9,1.83035804593e-9],[20,9,1.78846216942e-8,-6.63940865358e-9],[20,10,-3.25394919988e-8,-5.12308873621e-9],[20,11,1.38992707697e-8,-1.87706454942e-8],[20,12,-6.3575060075e-9,1.80260853103e-8],[20,13,2.75222725997e-8,6.90887077588e-9],[20,14,1.15841169405e-8,-1.43176160143e-8],[20,15,-2.60130744291e-8,-7.84379672413e-10],[20,16,-1.24137147118e-8,-2.77500443628e-10],[20,17,4.3690966796e-9,-1.37420446198e-8],[20,18,1.51842883022e-8,-8.08429903142e-10],[20,19,-3.14942002852e-9,1.06505202245e-8],[20,20,4.01448327968e-9,-1.20450644785e-8],[21,0,5.87820252575e-9,0],[21,1,-1.61000670141e-8,2.84359400791e-8],[21,2,-6.54460482558e-9,3.78474868508e-9],[21,3,1.9549199526e-8,2.26286963716e-8],[21,4,-5.76604339239e-9,1.94493782631e-8],[21,5,2.58856303016e-9,1.70850368669e-9],[21,6,-1.40168810589e-8,-273814826381e-23],[21,7,-8.64357168475e-9,4.42612277119e-9],[21,8,-1.70477278237e-8,1.5071119263e-9],[21,9,1.64489062394e-8,8.30113196365e-9],[21,10,-1.09928976409e-8,-1.46913794684e-9],[21,11,6.99300364214e-9,-3.53590565124e-8],[21,12,-3.19300109594e-9,1.45786917947e-8],[21,13,-1.8985452459e-8,1.40514791436e-8],[21,14,2.03580785674e-8,7.5577246284e-9],[21,15,1.75530220278e-8,1.04533886832e-8],[21,16,7.86969109367e-9,-6.56089715279e-9],[21,17,-6.99484489981e-9,-7.36064901147e-9],[21,18,2.59643291521e-8,-1.1156080613e-8],[21,19,-2.7374163641e-8,1.63958190052e-8],[21,20,-2.68682473584e-8,1.62086057168e-8],[21,21,8.30374873932e-9,-3.75546121742e-9],[22,0,-1.13735124259e-8,0],[22,1,1.62309865679e-8,-3.77303475153e-9],[22,2,-2.64090261387e-8,-2.10832402428e-9],[22,3,1.1658001654e-8,1.06764617222e-8],[22,4,-2.70979141451e-9,1.74980820565e-8],[22,5,-1.8645262501e-9,7.44718166476e-10],[22,6,9.64390704406e-9,-6.37316743908e-9],[22,7,1.59715981795e-8,4.39600942993e-9],[22,8,-2.35157426998e-8,4.83673695086e-9],[22,9,8.29435796737e-9,8.73382159986e-9],[22,10,6.00704037701e-9,2.21854121109e-8],[22,11,-4.96078301539e-9,-1.78822672474e-8],[22,12,2.13502315463e-9,-7.96120522503e-9],[22,13,-1.72631843979e-8,1.97026896892e-8],[22,14,1.09297133018e-8,8.25280905301e-9],[22,15,2.58410840629e-8,4.60172998318e-9],[22,16,1.41258558921e-10,-7.182380053e-9],[22,17,8.89294096846e-9,-1.45618348246e-8],[22,18,1.05047447464e-8,-1.64271275481e-8],[22,19,1.41305509124e-8,-3.84537168599e-9],[22,20,-1.67617655441e-8,1.99561513321e-8],[22,21,-2.50948756455e-8,2.36151346133e-8],[22,22,-9.59596694809e-9,2.49861413883e-9],[23,0,-2.26201075082e-8,0],[23,1,1.10870239758e-8,1.6137915153e-8],[23,2,-1.35191027779e-8,-5.01411714852e-9],[23,3,-2.45128011445e-8,-1.60570438998e-8],[23,4,-2.39887874558e-8,7.31536362289e-9],[23,5,7.99636624146e-10,-1.6144974141e-10],[23,6,-1.26082781309e-8,1.61308155632e-8],[23,7,-8.04132133762e-9,-1.11647197494e-9],[23,8,7.53785326469e-9,-3.2967992522e-10],[23,9,2.5505325495e-9,-1.28071525548e-8],[23,10,1.65167929134e-8,-1.85239620853e-9],[23,11,9.42656822725e-9,1.52386181583e-8],[23,12,1.63632625535e-8,-1.24098327824e-8],[23,13,-1.15107832808e-8,-4.84279171627e-9],[23,14,6.75321602206e-9,-1.82899962212e-9],[23,15,1.8689804286e-8,-3.60523754481e-9],[23,16,6.13840121864e-9,1.10362707266e-8],[23,17,-5.5372102391e-9,-1.2845906046e-8],[23,18,8.43361263813e-9,-1.49115921605e-8],[23,19,-5.20848228342e-9,1.07789593943e-8],[23,20,8.60434396837e-9,-5.34641639372e-9],[23,21,1.54578189867e-8,1.15333325358e-8],[23,22,-1.78417206471e-8,4.33092348903e-9],[23,23,2.85393980111e-9,-1.1323294597e-8],[24,0,7.63657386411e-10,0],[24,1,-3.14943681427e-9,-1.77191190396e-9],[24,2,1.38595572093e-9,1.711040664e-8],[24,3,-4.76406913528e-9,-9.42329378125e-9],[24,4,6.05108036341e-9,5.49769910191e-9],[24,5,-7.2947904748e-9,-2.13826490504e-8],[24,6,4.54210367535e-9,1.85596665318e-9],[24,7,-6.14244489298e-9,4.70081667951e-9],[24,8,1.54822444425e-8,-4.34472097787e-9],[24,9,-9.76623425797e-9,-1.6275513762e-8],[24,10,1.08934628974e-8,2.09168783608e-8],[24,11,1.45280775337e-8,1.87398018797e-8],[24,12,1.18970310717e-8,-6.2293309815e-9],[24,13,-2.89676673058e-9,3.13251295024e-9],[24,14,-2.00006558603e-8,-1.87249636821e-9],[24,15,6.10396350698e-9,-1.58957680563e-8],[24,16,8.88750753375e-9,2.96492703352e-9],[24,17,-1.19629964611e-8,-5.82074593955e-9],[24,18,-6.52630641555e-10,-1.01332355837e-8],[24,19,-4.38896550264e-9,-8.14552569977e-9],[24,20,-5.17551981851e-9,8.90354942378e-9],[24,21,6.03436755046e-9,1.40116090741e-8],[24,22,3.93640283055e-9,-4.28327655754e-9],[24,23,-6.1428347955e-9,-8.692679021e-9],[24,24,1.23903921309e-8,-3.75059286959e-9],[25,0,3.21309208115e-9,0],[25,1,6.89649208567e-9,-7.995518294e-9],[25,2,2.19498139173e-8,9.01370249111e-9],[25,3,-1.17774931587e-8,-1.26719024392e-8],[25,4,9.4254362892e-9,6.84937199311e-10],[25,5,-1.00497487339e-8,-9.2212239967e-10],[25,6,1.66832871654e-8,4.30583576199e-10],[25,7,7.71426681671e-9,-4.11703290425e-9],[25,8,3.1565194415e-9,-7.81960217669e-10],[25,9,-2.99385350515e-8,2.12695473199e-8],[25,10,8.81931818034e-9,-4.18041586166e-9],[25,11,1.2340148568e-9,1.08069128123e-8],[25,12,-7.65146786755e-9,1.1747374286e-8],[25,13,8.32308127158e-9,-1.13072604626e-8],[25,14,-1.97042124794e-8,6.53183488635e-9],[25,15,-4.35732052985e-9,-7.35147227573e-9],[25,16,9.18239548455e-10,-1.28124888592e-8],[25,17,-1.52176535379e-8,-3.21280397924e-9],[25,18,1.21901534245e-9,-1.49040483259e-8],[25,19,7.77589111757e-9,9.92518771941e-9],[25,20,-7.50856670672e-9,-5.62826155305e-10],[25,21,1.0723284068e-8,8.16090174381e-9],[25,22,-1.39902235929e-8,3.58546198324e-9],[25,23,8.40270853655e-9,-1.23338407961e-8],[25,24,4.12447134569e-9,-8.30716465317e-9],[25,25,1.07484366767e-8,4.72369913984e-9],[26,0,5.05833635414e-9,0],[26,1,-1.54756177965e-9,-7.70012788871e-9],[26,2,-3.58729876836e-9,1.14484111182e-8],[26,3,1.40505671267e-8,4.30905534294e-9],[26,4,1.90548709216e-8,-1.94161179658e-8],[26,5,1.07190025408e-8,9.08952851813e-9],[26,6,1.13116909406e-8,-9.34393384449e-9],[26,7,-1.562282956e-9,4.81168302477e-9],[26,8,3.94920146317e-9,1.153405253e-9],[26,9,-1.20371433638e-8,4.75177058134e-10],[26,10,-1.41246124334e-8,-6.45217247294e-9],[26,11,-5.20385857649e-9,2.12443340407e-9],[26,12,-1.75071176484e-8,2.01974971938e-9],[26,13,-335708835245e-22,1.50474091686e-9],[26,14,7.96385051492e-9,7.84704068835e-9],[26,15,-1.32388781089e-8,8.03960091442e-9],[26,16,1.29093226253e-9,-6.11434455706e-9],[26,17,-1.24494157564e-8,7.8077484564e-9],[26,18,-1.30317424459e-8,4.9998916257e-9],[26,19,-2.05807464595e-9,3.54396135438e-9],[26,20,6.55952144018e-9,-1.1687804118e-8],[26,21,-8.70038868454e-9,1.68222257564e-9],[26,22,1.01580452049e-8,7.54358531576e-9],[26,23,1.24105057436e-9,1.08580088935e-8],[26,24,8.58620351967e-9,1.48288510099e-8],[26,25,3.93441578873e-9,-5.97792415806e-10],[26,26,3.93179749568e-10,1.93894997772e-9],[27,0,2.7717632236e-9,0],[27,1,2.48982909452e-9,3.77378455357e-9],[27,2,1.45270146453e-9,5.03113268026e-10],[27,3,-3.62306812856e-10,1.088457625e-8],[27,4,-5.99191537157e-10,9.40517681233e-9],[27,5,1.67690560888e-8,1.38338587209e-8],[27,6,3.64265989803e-9,6.13032807744e-9],[27,7,-1.23459266009e-8,-3.86514075952e-9],[27,8,-6.1040764482e-9,-8.99504471581e-9],[27,9,3.40113157078e-9,1.10992938665e-8],[27,10,-1.33158893187e-8,1.72832279915e-10],[27,11,1.98322808107e-9,-9.69054254426e-9],[27,12,-1.13695413044e-8,1.90072943781e-9],[27,13,-4.97224781272e-9,-4.14521559996e-9],[27,14,1.55033957088e-8,1.1882128969e-8],[27,15,-1.80057326196e-9,1.1763698622e-9],[27,16,2.7572995289e-9,2.78770269194e-9],[27,17,3.79281571763e-9,3.14983101049e-10],[27,18,-2.87144071715e-9,7.44190558718e-9],[27,19,-3.26518614707e-10,-2.93243500455e-9],[27,20,-8.55182561846e-10,3.47617208115e-9],[27,21,4.86877030983e-9,-7.0872528354e-9],[27,22,-5.74332100084e-9,2.90056687384e-9],[27,23,-5.41033470941e-9,-1.10452433655e-8],[27,24,4.16951885933e-10,-1.80038186307e-9],[27,25,1.22815470212e-8,5.62425137285e-9],[27,26,-6.59498075164e-9,-2.22838418639e-9],[27,27,7.60067381059e-9,6.9238741892e-10],[28,0,-9.10376375863e-9,0],[28,1,-5.55484993587e-9,7.9330019258e-9],[28,2,-1.5189131211e-8,-7.97957089012e-9],[28,3,2.5318254224e-9,1.11373049392e-8],[28,4,-1.99212752126e-9,1.25054704704e-8],[28,5,1.08871875702e-8,-4.22573826989e-9],[28,6,-5.22194316032e-9,1.32656509709e-8],[28,7,-7.05588863746e-10,5.12740997711e-9],[28,8,-4.23704976329e-9,-3.32584474553e-9],[28,9,1.13842461859e-8,-1.04163010811e-8],[28,10,-9.22867885082e-9,8.17851851593e-9],[28,11,-2.9809734257e-9,-1.45944538949e-9],[28,12,-4.83471863256e-10,9.64951845027e-9],[28,13,1.64993974957e-9,6.63803768689e-9],[28,14,-8.23334828619e-9,-1.26939492243e-8],[28,15,-1.22774798187e-8,-1.97537366262e-9],[28,16,-3.57280690709e-9,-1.35890044766e-8],[28,17,1.33742628184e-8,-4.72374226319e-9],[28,18,5.62532322748e-9,-3.87230727328e-9],[28,19,5.77104709635e-9,2.35011734292e-8],[28,20,-1.15922189521e-9,6.62939940662e-9],[28,21,6.63154344375e-9,6.33201211223e-9],[28,22,-1.94231451662e-9,-7.33725263107e-9],[28,23,6.20158165102e-9,2.61202437682e-9],[28,24,1.11186270621e-8,-1.35606378769e-8],[28,25,7.29495896149e-9,-1.76041477031e-8],[28,26,1.23084992259e-8,3.89251843939e-9],[28,27,-8.11971206724e-9,1.3027922855e-9],[28,28,6.9872587832e-9,6.80526167979e-9],[29,0,-4.97406439473e-9,0],[29,1,4.98979084585e-9,-9.82512461189e-9],[29,2,-3.12119754621e-9,-2.63433487676e-9],[29,3,1.82518120454e-9,-1.05769977751e-8],[29,4,-2.42786314995e-8,2.26110758622e-9],[29,5,-6.8110306367e-9,6.01242555817e-9],[29,6,1.19592879211e-8,9.7020069574e-9],[29,7,-5.91100934209e-9,-2.14599788734e-9],[29,8,-1.6946723555e-8,1.11160276839e-8],[29,9,-1.2937116169e-9,1.41793573226e-9],[29,10,1.37184624798e-8,1.79543486167e-9],[29,11,-5.96272885876e-9,6.33350180946e-9],[29,12,-4.56278910357e-10,-5.01222008898e-9],[29,13,-1.09095923049e-9,-2.34179014389e-9],[29,14,-3.23718965114e-9,-4.58306325034e-9],[29,15,-9.57359749406e-9,-6.77546725808e-9],[29,16,1.37450063496e-9,-1.4864526654e-8],[29,17,-1.57662415501e-9,-3.92506699434e-9],[29,18,-3.67597840865e-9,-2.58549575294e-9],[29,19,-6.30046143533e-9,5.86840708296e-9],[29,20,-7.96446331531e-9,5.74239983127e-9],[29,21,-9.8726430286e-9,-5.51700601596e-9],[29,22,1.15574836058e-8,-1.47663300854e-9],[29,23,-1.84576717899e-9,2.63546763516e-9],[29,24,3.42199668119e-10,-2.38230581193e-9],[29,25,5.85864038329e-9,8.68333958543e-9],[29,26,7.87039835357e-9,-6.92232980921e-9],[29,27,-7.98313300841e-9,-1.01903214091e-9],[29,28,9.73355537526e-9,-5.71293958601e-9],[29,29,1.28224843767e-8,-5.01548480482e-9],[30,0,6.02882084759e-9,0],[30,1,-5.57556615596e-10,1.24285275602e-9],[30,2,-1.0370644769e-8,-2.61802322444e-9],[30,3,2.14692300603e-9,-1.36464188501e-8],[30,4,-4.55090433473e-10,-3.91117213505e-9],[30,5,-4.36973977446e-9,-5.35558974983e-9],[30,6,3.28451285815e-10,3.17808233981e-9],[30,7,4.04923220309e-9,1.83962458779e-9],[30,8,2.54952865236e-9,4.62058281854e-9],[30,9,-7.32592511128e-9,-9.7277817424e-9],[30,10,4.27609484555e-9,-4.10864961814e-9],[30,11,-1.04043005227e-8,1.07581457651e-8],[30,12,1.71622295302e-8,-1.08456775556e-8],[30,13,1.42173587056e-8,2.96806226352e-9],[30,14,5.11505860834e-9,8.07288811257e-9],[30,15,2.10512146846e-10,-1.04541123836e-9],[30,16,-1.08921920457e-8,4.35254063533e-9],[30,17,-6.14382436271e-9,-6.03140938575e-9],[30,18,-1.1114926509e-8,-7.65521957976e-9],[30,19,-1.2967398433e-8,2.42005669694e-9],[30,20,-4.89261172033e-9,1.27655684422e-8],[30,21,-1.0628473781e-8,-5.97537587412e-9],[30,22,-4.83763240001e-9,-9.37720111156e-9],[30,23,5.7411388543e-9,-1.03756082222e-8],[30,24,-2.35238020789e-9,-2.7590933962e-9],[30,25,3.04426404856e-9,-1.54853389229e-8],[30,26,1.22149787623e-9,1.24069551653e-8],[30,27,-7.95063844863e-9,1.27529431593e-8],[30,28,-5.47120800289e-9,-7.96006293513e-9],[30,29,4.1592295424e-9,1.89489104417e-9],[30,30,2.64794018006e-9,8.12994755178e-9],[31,0,7.33100089318e-9,0],[31,1,6.11169376734e-9,-1.60774540844e-8],[31,2,7.49625106123e-9,6.37776322444e-9],[31,3,-8.89920966189e-9,-7.6550294416e-9],[31,4,1.22555580723e-8,-4.94466436575e-9],[31,5,-8.71279064045e-9,3.08325747379e-9],[31,6,-1.68890803585e-9,1.3703621527e-9],[31,7,-2.71996133536e-9,-6.8862512168e-10],[31,8,-7.50260355354e-10,2.28102724239e-9],[31,9,-6.55840403272e-10,5.24179002617e-9],[31,10,3.99161675027e-9,-4.73500202132e-9],[31,11,6.93506892777e-10,2.08668068881e-8],[31,12,5.5287540984e-10,4.52042167068e-9],[31,13,9.40389423562e-9,4.6684078573e-9],[31,14,-7.88650771167e-9,3.51952460147e-9],[31,15,4.29954776132e-9,-2.80870684394e-9],[31,16,-7.19430261173e-9,6.11805049979e-9],[31,17,-2.53821168958e-9,6.83008216722e-9],[31,18,-6.02099321996e-10,-2.04187286905e-9],[31,19,2.89086482301e-9,4.43976791609e-9],[31,20,-1.75732193914e-9,5.64081954558e-9],[31,21,-9.67143669208e-9,7.09357408027e-9],[31,22,-9.0531201252e-9,-1.18308417466e-8],[31,23,8.32234353898e-9,4.51774572555e-9],[31,24,-2.81565064366e-9,-3.34369513768e-9],[31,25,-1.64574268169e-8,-2.20460908971e-9],[31,26,-1.26653070356e-8,1.59189398991e-9],[31,27,-1.34953305827e-9,1.07507650019e-8],[31,28,1.04226918411e-8,2.8072229491e-9],[31,29,-1.5812688103e-9,-2.18247510672e-9],[31,30,-9.47416722001e-10,-7.78077525656e-9],[31,31,-8.59193452715e-9,-1.85200316483e-9],[32,0,-2.33966288032e-9,0],[32,1,-1.69210486076e-9,1.27760467976e-9],[32,2,1.13999662663e-8,-3.35609127916e-9],[32,3,-1.444433154e-10,4.05424830941e-9],[32,4,8.56367829112e-10,-6.75422476107e-9],[32,5,8.60776205333e-9,1.82572279646e-9],[32,6,-1.00402568672e-8,-7.6305617634e-9],[32,7,1.37058613278e-9,2.75465347035e-9],[32,8,1.19653531908e-8,4.91018212548e-9],[32,9,7.332252213e-9,7.18971591052e-10],[32,10,912133506379e-22,-5.70680927495e-9],[32,11,-5.42043742127e-9,7.583606425e-9],[32,12,-1.70289059214e-8,1.40808168623e-8],[32,13,4.02186822027e-9,5.34936491964e-9],[32,14,-5.44420334437e-9,2.20410694316e-9],[32,15,5.1658020828e-9,-8.74727531741e-9],[32,16,4.14867061294e-9,4.27270420004e-9],[32,17,-6.46857778906e-9,1.01916486215e-8],[32,18,1.27286345117e-8,-1.12136888089e-9],[32,19,7.55189536923e-10,-2.7754653073e-9],[32,20,3.8161056442e-9,3.19534855653e-10],[32,21,-2.33262996771e-9,1.16411650251e-8],[32,22,-1.20880678762e-8,-2.72691793232e-9],[32,23,8.18682122143e-9,-2.33549712722e-9],[32,24,-3.55036315667e-9,6.54834763861e-10],[32,25,-1.89374992503e-8,-6.43429532848e-9],[32,26,5.22535531492e-9,-3.68856221241e-9],[32,27,-4.53740085214e-9,-6.68075560111e-9],[32,28,1.653041745e-9,-5.73130340772e-9],[32,29,4.32768192965e-9,2.88179889934e-9],[32,30,-6.74805866294e-9,1.39346268546e-9],[32,31,-6.26740251766e-9,-2.18475608171e-10],[32,32,3.3975660331e-9,1.42646165155e-9],[33,0,-3.49357179498e-9,0],[33,1,-1.39642913445e-9,-2.16391760811e-9],[33,2,-7.48774194896e-9,-5.0187208152e-10],[33,3,-1.99661955793e-9,7.0930410268e-9],[33,4,-4.270199819e-9,2.27426656698e-9],[33,5,2.37784729729e-10,3.74439169451e-9],[33,6,1.22603039921e-9,-2.87328300836e-9],[33,7,-6.11215086076e-9,2.49383366316e-9],[33,8,-8.23144405057e-10,1.44915555407e-8],[33,9,5.05097392033e-9,7.4051746902e-9],[33,10,-2.39709923317e-9,1.07022906758e-9],[33,11,2.43388836443e-9,-8.67071813487e-9],[33,12,-2.33510532329e-9,8.9435069891e-9],[33,13,2.6041538193e-9,3.13805750981e-9],[33,14,4.92959662302e-9,5.71204550617e-9],[33,15,-4.64145303396e-9,-3.47835302325e-9],[33,16,7.39530517571e-9,6.28613189283e-9],[33,17,-5.73064590551e-9,1.28779114927e-8],[33,18,-9.74285933562e-9,-1.89598124592e-9],[33,19,8.52447331156e-9,2.07561717246e-9],[33,20,-3.32627500309e-9,-7.77689999053e-9],[33,21,9.38761672387e-10,8.17787598674e-10],[33,22,-1.05439940875e-8,-1.56190227392e-8],[33,23,1.15896250314e-10,-1.01356350767e-8],[33,24,1.11416074527e-8,-8.57153776484e-9],[33,25,5.24730532375e-9,-1.04941656537e-8],[33,26,1.09590005596e-8,4.5404144025e-9],[33,27,-1.32772908147e-9,1.26154161942e-9],[33,28,1.75943381421e-9,-1.02060346415e-9],[33,29,-1.63075128633e-8,5.72191328891e-9],[33,30,-1.56977064277e-9,-1.84579402264e-8],[33,31,4.69481868853e-9,1.02290050028e-9],[33,32,6.56775919022e-9,-4.39711913398e-9],[33,33,-1.52043850303e-9,8.31263004529e-9],[34,0,-9.08833340447e-9,0],[34,1,-2.76889795047e-9,6.3891897021e-9],[34,2,6.7688190654e-9,5.30082118696e-9],[34,3,1.25429669786e-8,8.11619669834e-9],[34,4,-8.30005417504e-9,1.19586870272e-9],[34,5,-3.88131685638e-9,3.54963449977e-9],[34,6,4.84093709579e-10,7.62975480293e-9],[34,7,2.75125793239e-9,-6.56263573163e-9],[34,8,-9.83446807592e-9,4.68751478021e-9],[34,9,1.53042494664e-9,2.10165697829e-9],[34,10,-7.52633242389e-9,1.46544229781e-9],[34,11,-3.82043431506e-9,-1.07829735599e-9],[34,12,1.42629362262e-8,-4.60063642968e-9],[34,13,-3.56240984255e-9,1.03329523096e-9],[34,14,-2.50187664392e-9,9.64686908241e-9],[34,15,3.75939804157e-10,6.2628624977e-9],[34,16,-1.45874042713e-9,-1.4938092908e-9],[34,17,-4.73747570512e-9,3.93698829389e-9],[34,18,-1.47488701345e-8,-5.38197998817e-9],[34,19,-3.59837568897e-9,7.15302015583e-9],[34,20,3.64466859655e-9,-1.01824147346e-8],[34,21,-9.81980297066e-10,-7.42166456548e-9],[34,22,-3.18152215406e-9,3.36620175035e-9],[34,23,-1.1297312057e-9,-1.18981902172e-8],[34,24,8.78079044954e-9,4.20436158037e-9],[34,25,8.41097170248e-9,-9.86300815266e-9],[34,26,3.99964384231e-9,-1.29360014691e-8],[34,27,1.31566196208e-8,-3.91137836409e-9],[34,28,-1.65320604713e-10,-2.00370653858e-8],[34,29,7.08151676681e-9,-4.31563574113e-9],[34,30,-2.05666035677e-8,-5.86948946952e-10],[34,31,-4.57411268111e-9,-1.60852780125e-9],[34,32,9.14033593474e-9,2.31645138264e-9],[34,33,1.37617937967e-8,4.3547198646e-9],[34,34,-8.54011998155e-9,1.65364599023e-9],[35,0,8.60443158492e-9,0],[35,1,-1.07631176168e-8,-1.03576288219e-8],[35,2,-1.48166749807e-8,7.47316845223e-9],[35,3,1.88623900305e-9,3.49967679465e-9],[35,4,-2.82338523108e-9,9.20674937921e-9],[35,5,-7.23688443416e-9,-1.15478796146e-8],[35,6,3.28708320436e-9,7.90142264483e-9],[35,7,-3.45829826367e-9,4.71386839716e-9],[35,8,4.15911228686e-9,9.21486965423e-9],[35,9,-7.83584593022e-10,-1.08780700595e-9],[35,10,-2.63078124596e-9,1.14437669825e-8],[35,11,3.1135284219e-9,-3.11508942142e-9],[35,12,8.10432165903e-9,-6.4323395678e-9],[35,13,-1.60870380988e-9,3.02852925442e-9],[35,14,-7.16511186947e-9,-7.02737046917e-9],[35,15,-1.53690564123e-8,8.75984924717e-9],[35,16,-6.89772047703e-9,-7.36827047584e-9],[35,17,7.03755899027e-10,-8.82920485773e-9],[35,18,-5.55247661498e-9,-1.14710477959e-8],[35,19,-1.07112499273e-9,-3.41854119412e-9],[35,20,9.92702305837e-10,-1.13573745208e-10],[35,21,1.29333785663e-8,-8.17657795386e-10],[35,22,7.51479477595e-9,5.7229930908e-9],[35,23,-8.16391242216e-9,-2.22442612532e-9],[35,24,2.78435090517e-9,6.38499607176e-9],[35,25,7.16858934156e-9,1.99781103645e-9],[35,26,-4.70300232305e-9,4.61488943108e-9],[35,27,1.09602089094e-8,-1.33812635796e-8],[35,28,7.88159460716e-9,-1.53673024839e-8],[35,29,7.70786810766e-9,3.40140754669e-9],[35,30,-4.0519283993e-9,2.87370616224e-9],[35,31,7.84140204315e-9,4.0412480788e-9],[35,32,-3.16267901777e-9,-7.41858064221e-9],[35,33,5.8609633966e-9,-3.07739390905e-9],[35,34,-1.21632099674e-9,2.66717400938e-9],[35,35,-5.8786572941e-9,-5.01230638002e-9],[36,0,-4.02590604243e-9,0],[36,1,-1.13386686386e-9,5.14982653283e-9],[36,2,-4.31575901448e-9,-3.40211031655e-9],[36,3,700409280444e-22,-1.58895672921e-8],[36,4,3.00961129935e-9,1.38917218538e-9],[36,5,-7.42261535513e-9,1.4033786019e-9],[36,6,1.08546024568e-8,-3.16311943226e-9],[36,7,1.70813806147e-9,6.17680210154e-9],[36,8,3.44939360246e-9,-5.03767857861e-9],[36,9,2.92192219493e-9,-3.74028113708e-10],[36,10,4.23119681703e-9,6.83503143788e-9],[36,11,-4.10039232642e-9,4.75118294475e-9],[36,12,4.87204962837e-10,-9.84587714675e-9],[36,13,-6.15416963507e-9,8.0318113556e-9],[36,14,-1.04141682764e-8,-5.94203574762e-9],[36,15,9.54892409044e-10,3.33310574172e-9],[36,16,1.25505913598e-9,-1.60569406116e-10],[36,17,4.95066186034e-9,-8.65314022477e-9],[36,18,1.77184202015e-9,4.4603340077e-9],[36,19,-5.25149217565e-9,-6.65319486115e-9],[36,20,-6.03793346956e-9,3.52627660597e-9],[36,21,1.0690892473e-8,-5.67948915026e-9],[36,22,3.21356130034e-9,1.61234121461e-9],[36,23,-3.61160199501e-10,2.74891917069e-9],[36,24,2.10662869987e-9,-4.24514998756e-9],[36,25,4.3497929214e-9,1.5607147346e-8],[36,26,3.68762567031e-9,9.37175113714e-9],[36,27,-7.91229464362e-9,8.8299681063e-9],[36,28,2.22637976824e-9,-4.34372617405e-9],[36,29,1.84511675839e-9,2.0734471834e-10],[36,30,-1.00411515955e-8,6.05413293608e-9],[36,31,-8.39084442298e-9,-5.54047445598e-9],[36,32,1.25654207109e-8,2.30476235625e-9],[36,33,3.89957606637e-9,-3.50340856893e-9],[36,34,-9.08693282663e-9,4.35776976715e-9],[36,35,-1.38812503272e-10,-1.25527291076e-8],[36,36,4.6014646572e-9,-5.94245336314e-9]]);function D(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O{constructor(e,t,a){D(this,"height",void 0),D(this,"hp0",void 0),D(this,"hp1",void 0),this.height=e,this.hp0=t,this.hp1=a}}function N(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C{constructor(e){N(this,"_table",void 0),N(this,"_hMin",void 0),N(this,"_hMax",void 0),this._table=e,this._hMin=e[0][0],this._hMax=e[e.length-1][0]}static fromVals(e){var t=[];for(var a of e){var[r,n,i]=a;t.push([r,n,i])}return new C(t)}getAtmosphere(e){if(e<this._hMin||e>this._hMax)return null;for(var t=0;t<this._table.length-2&&e>this._table[t+1][0];)t++;return new O(e,this._table[t],this._table[t+1])}}var j=C.fromVals([[100,4.974e-7,4.974e-7],[120,2.49e-8,2.49e-8],[130,8.377e-9,8.71e-9],[140,3.899e-9,4.059e-9],[150,2.122e-9,2.215e-9],[160,1.263e-9,1.344e-9],[170,8.008e-10,8.758e-10],[180,5.283e-10,6.01e-10],[190,3.617e-10,4.297e-10],[200,2.557e-10,3.162e-10],[210,1.839e-10,2.396e-10],[220,1.341e-10,1.853e-10],[230,9949e-14,1.455e-10],[240,7488e-14,1.157e-10],[250,5709e-14,9308e-14],[260,4403e-14,7555e-14],[270,343e-13,6182e-14],[280,2697e-14,5095e-14],[290,2139e-14,4226e-14],[300,1708e-14,3526e-14],[320,1099e-14,2511e-14],[340,7214e-15,1819e-14],[360,4824e-15,1337e-14],[380,3274e-15,9955e-15],[400,2249e-15,7492e-15],[420,1558e-15,5684e-15],[440,1091e-15,4355e-15],[460,7701e-16,3362e-15],[480,5474e-16,2612e-15],[500,3916e-16,2042e-15],[520,2819e-16,1605e-15],[540,2042e-16,1267e-15],[560,1488e-16,1005e-15],[580,1092e-16,7997e-16],[600,807e-16,639e-15],[620,6012e-17,5123e-16],[640,4519e-17,4121e-16],[660,343e-16,3325e-16],[680,2632e-17,2691e-16],[700,2043e-17,2185e-16],[720,1607e-17,1779e-16],[740,1281e-17,1452e-16],[760,1036e-17,119e-15],[780,8496e-18,9776e-17],[800,7069e-18,8059e-17],[840,468e-17,5741e-17],[880,32e-16,421e-16],[920,221e-17,313e-16],[960,156e-17,236e-16],[1e3,115e-17,181e-16]]);class L{constructor(e){(function(e,t,a){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})(this,"_coeffs",void 0),this._coeffs=e}static fromCoeffs(e){var t=[];for(var a of e){var[r,n,i,o,s,l,h,c,u]=a;t.push([r,n,i,o,s,l,h,c,u])}return new L(t)}getCoeffs(e){return this._coeffs[e]}}var F=L.fromCoeffs([[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5]]);function U(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class q{constructor(e,t){U(this,"jd",void 0),U(this,"offset",void 0),this.jd=e,this.offset=t}}function k(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class J{constructor(e){k(this,"_offsets",void 0),k(this,"_jdFirst",void 0),k(this,"_jdLast",void 0),k(this,"_offsetFirst",void 0),k(this,"_offsetLast",void 0),this._offsets=e,this._jdFirst=this._offsets[0].jd,this._jdLast=this._offsets[this._offsets.length-1].jd,this._offsetFirst=this._offsets[0].offset,this._offsetLast=this._offsets[this._offsets.length-1].offset}static fromVals(e){var t=[];for(var a of e){var[r,n]=a;t.push(new q(r,n))}return new J(t)}getLeapSeconds(e){if(e>=this._jdLast)return this._offsetLast;if(e<=this._jdFirst)return this._offsetFirst;for(var t=0;t<this._offsets.length-2;t++)if(e>=this._offsets[t].jd&&e<this._offsets[t+1].jd)return this._offsets[t].offset;return 0}}var Y,H,V,G=J.fromVals([[2441317.5,10],[2441499.5,11],[2441683.5,12],[2442048.5,13],[2442413.5,14],[2442778.5,15],[2443144.5,16],[2443509.5,17],[2443874.5,18],[2444239.5,19],[2444786.5,20],[2445151.5,21],[2445516.5,22],[2446247.5,23],[2447161.5,24],[2447892.5,25],[2448257.5,26],[2448804.5,27],[2449169.5,28],[2449534.5,29],[2450083.5,30],[2450630.5,31],[2451179.5,32],[2453736.5,33],[2454832.5,34],[2456109.5,35],[2457204.5,36],[2457754.5,37]]);class B{constructor(){}static getInstance(){return B.instance_}getEgm96Coeffs(e,t){return R.getCoeffs(e,t)}getIau1980Coeffs(e){return F.getCoeffs(e)}getLeapSeconds(e){return G.getLeapSeconds(e)}getHpAtmosphere(e){return j.getAtmosphere(e)}}function Z(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Y=B,H="instance_",V=new B,(H=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(H))in Y?Object.defineProperty(Y,H,{value:V,enumerable:!0,configurable:!0,writable:!0}):Y[H]=V;class X{constructor(e,t,a){if(Z(this,"week",void 0),Z(this,"seconds",void 0),this.week=e,this.seconds=t,e<0)throw new Error("GPS week must be non-negative.");if(t<0||t>=M)throw new Error("GPS seconds must be within a week.");X.reference=a}get week10Bit(){return this.week%1024}get week13Bit(){return this.week%8192}toString(){return"".concat(this.week,":").concat(this.seconds.toFixed(3))}toUTC(){var e=X.reference.roll(this.week*M+this.seconds),t=B.getInstance().getLeapSeconds(e.toJulianDate());return e.roll(-(t-X.offset))}}Z(X,"reference",void 0),Z(X,"offset",19);class W extends A{}class K extends A{}class Q extends A{}function $(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ee extends A{static now(){return new ee((new Date).getTime()/1e3)}static fromDate(e){var{year:t,month:a,day:r,hour:n=0,minute:i=0,second:o=0}=e;return new ee(ee.dateToPosix_({year:t,month:a,day:r,hour:n,minute:i,second:o}))}static fromDateTime(e){return new ee(e.getTime()/1e3)}static fromDateTimeString(e){var t=e.trim().toUpperCase().endsWith("Z")?e:"".concat(e,"Z");return new ee(new Date(t).getTime()/1e3)}static fromJ2000TTSeconds(e){var t=new ee(e+946728e3),a=B.getInstance().getLeapSeconds(t.toJulianDate());return t.roll(-32.184-a)}static fromDefinitiveString(e){var t=e.trim().split(" "),a=t[0].split("/"),r=parseInt(a[0]),n=parseInt(a[1]),i=t[1],o=new Date("".concat(n,"-01-01T").concat(i,"Z")).getTime()+(r-1)*d;return new ee(o/1e3)}roll(e){return new ee(this.posix+e)}toMjd(){return this.toJulianDate()-2400000.5}toMjdGsfc(){return this.toMjd()-29999.5}toTAI(){var e=B.getInstance().getLeapSeconds(this.toJulianDate());return new W(this.posix+e)}toTT(){return new Q(this.toTAI().posix+32.184)}toTDB(){var e=this.toTT(),t=(357.5277233+35999.05034*e.toJulianCenturies())*h,a=.001658*Math.sin(t)+1385e-8*Math.sin(2*t);return new K(e.posix+a)}toGPS(){var e=ee.fromDateTimeString("1980-01-06T00:00:00.000Z"),t=B.getInstance().getLeapSeconds(this.toJulianDate()),a=this.roll(t-X.offset).difference(e)/M,r=Math.floor(a);return new X(r,(a-r)*M,e)}gmstAngle(){var e=E(this.toJulianCenturies(),ee.gmstPoly_)/240*h%l;return e<0&&(e+=l),e}gmstAngleDegrees(){return this.gmstAngle()*c}static isLeapYear_(e){return e%4==0&&e%100!=0||e%400==0}static dayOfYear_(e,t,a){var r=ee.isLeapYear_(e)?1:0;return ee.dayOfYearLookup_[r][t-1]+a-1}static dateToPosix_(e){var{year:t,month:a,day:r,hour:n,minute:i,second:o}=e,s=t-1900;return 60*i+3600*n+86400*ee.dayOfYear_(t,a,r)+31536e3*(s-70)+86400*Math.floor((s-69)/4)-86400*Math.floor((s-1)/100)+86400*Math.floor((s+299)/400)+o}}$(ee,"gmstPoly_",new Float64Array([-62e-7,.093104,3164400184.812866,67310.54841])),$(ee,"dayOfYearLookup_",[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]]);class te{static get(e){return this.cache_.get(e)}static add(e,t){if(this.cache_.set(e,t),this.cache_.size>1e3){var a=this.cache_.keys().next().value;this.cache_.delete(a)}}}function ae(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t),z:e.z}}function re(e,t){return{x:e.x*Math.cos(t)+e.y*Math.sin(t),y:e.x*-Math.sin(t)+e.y*Math.cos(t),z:e.z}}function ne(e,t){var a="".concat(t,",").concat(e.x,",").concat(e.y,",").concat(e.z),r=te.get(a);if(r)return r;for(var n=6378.137,i=Math.sqrt(e.x*e.x+e.y*e.y),o=(n-6356.7523142)/n,s=2*o-o*o,h=Math.atan2(e.y,e.x)-t;h<-p;)h+=l;for(;h>p;)h-=l;for(var u=0,m=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y)),d=0;u<20;)d=1/Math.sqrt(1-s*(Math.sin(m)*Math.sin(m))),m=Math.atan2(e.z+n*d*s*Math.sin(m),i),u+=1;var f=i/Math.cos(m)-n*d,g={lon:h*=c,lat:m*=c,alt:f};return te.add(a,g),g}function ie(e){var{lon:t,lat:a,alt:r}=e,n=6378.137,i=(n-6356.7523142)/n,o=2*i-i*i,s=n/Math.sqrt(1-o*Math.sin(a)**2);return{x:(s+r)*Math.cos(a)*Math.cos(t),y:(s+r)*Math.cos(a)*Math.sin(t),z:(s*(1-o)+r)*Math.sin(a)}}function oe(e){var{lon:t,lat:a,alt:r}=e;return ie({lon:t*h,lat:a*h,alt:r})}function se(e,t){var a="".concat(t,",").concat(e.lat,",").concat(e.lon,",").concat(e.alt),r=te.get(a);if(r)return r;var{lat:n,lon:i,alt:o}=e,s=Math.cos(n),l=Math.sin(n),h=Math.cos(i+t),c=Math.sin(i+t),u={x:(De.radiusMean+o)*s*h,y:(De.radiusMean+o)*s*c,z:(De.radiusMean+o)*l};return te.add(a,u),u}function le(e,t,a){var r="".concat(a,",").concat(e.rng,",").concat(e.az,",").concat(e.el,",").concat(t.lat,",").concat(t.lon,",").concat(t.alt),n=te.get(r);if(n)return n;var i=ae(function(e,t){var a={lat:t.lat*h,lon:t.lon*h,alt:t.alt},r={az:e.az*h,el:e.el*h,rng:e.rng},n=ie(a),i=function(e){return{s:-e.rng*Math.cos(e.el)*Math.cos(e.az),e:e.rng*Math.cos(e.el)*Math.sin(e.az),z:e.rng*Math.sin(e.el)}}(r),o=Math.sin(a.lat),s=Math.sin(a.lon),l=Math.cos(a.lat),c=Math.cos(a.lon);return{x:o*c*i.s+-s*i.e+l*c*i.z+n.x,y:o*s*i.s+c*i.e+l*s*i.z+n.y,z:-l*i.s+o*i.z+n.z}}(e,t),a);return te.add(r,i),i}function he(e,t){var a,r,n,i=function(e,t){var a=e.lon,r=e.lat,n=ie({lat:r,lon:a,alt:0}),i=t.x-n.x,o=t.y-n.y,s=t.z-n.z;return{s:Math.sin(r)*Math.cos(a)*i+Math.sin(r)*Math.sin(a)*o-Math.cos(r)*s,e:-Math.sin(a)*i+Math.cos(a)*o,z:Math.cos(r)*Math.cos(a)*i+Math.cos(r)*Math.sin(a)*o+Math.sin(r)*s}}(e,t),o=(a=i,r=Math.sqrt(a.s*a.s+a.e*a.e+a.z*a.z),n=Math.asin(a.z/r),{rng:r,az:Math.atan2(-a.e,a.s)+p,el:n});return{rng:o.rng,az:o.az*c,el:o.el*c}}function ce(e,t){var a="".concat(e.lat,",").concat(e.lon,",").concat(e.alt,",").concat(t.x,",").concat(t.y,",").concat(t.z),r=te.get(a);if(r)return r;var{lat:n,lon:i}=e,o=he({lat:n*h,lon:i*h,alt:e.alt},t);return te.add(a,o),o}!function(e,t,a){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(te,"cache_",new Map);var ue,me,de,fe,ge,Me,pe,ve,ye;function we(e){var t=((e,t,a,r,n,i)=>{if(void 0===e){var o=new Date,s=new Date(o.getUTCFullYear(),0,0),l=o.getDate()-s.getDate();return Math.floor(l/w)}if(void 0===t||void 0===a||void 0===r||void 0===n||void 0===i)throw new Error("Invalid date");return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+a+1721013.5+((i/60+n)/60+r)/24})(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*w;return{gmst:Ve.gstime(t),j:t}}function xe(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ae{constructor(e){xe(this,"elements",void 0),xe(this,"rows",void 0),xe(this,"columns",void 0),this.elements=e,this.rows=e.length,this.columns=e[0].length}static allZeros(e,t){return this.fill(e,t,0)}static fill(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],n=0;n<e;n++){r[n]=[];for(var i=0;i<t;i++)r[n][i]=a}return new Ae(r)}static rotX(e){var t=Math.cos(e),a=Math.sin(e),r=Ae.zero(3,3);return r.elements[0][0]=1,r.elements[1][1]=t,r.elements[1][2]=a,r.elements[2][1]=-a,r.elements[2][2]=t,r}static rotY(e){var t=Math.cos(e),a=Math.sin(e),r=Ae.zero(3,3);return r.elements[0][0]=t,r.elements[0][2]=-a,r.elements[1][1]=1,r.elements[2][0]=a,r.elements[2][2]=t,r}static rotZ(e){var t=Math.cos(e),a=Math.sin(e),r=Ae.zero(3,3);return r.elements[0][0]=t,r.elements[0][1]=a,r.elements[1][0]=-a,r.elements[1][1]=t,r.elements[2][2]=1,r}static zero(e,t){for(var a=[],r=0;r<e;r++){a[r]=[];for(var n=0;n<t;n++)a[r][n]=0}return new Ae(a)}static identity(e){for(var t=[],a=0;a<e;a++){t[a]=[];for(var r=0;r<e;r++)t[a][r]=a===r?1:0}return new Ae(t)}static diagonal(e){for(var t=e.length,a=[],r=0;r<t;r++){a[r]=[];for(var n=0;n<t;n++)a[r][n]=r===n?e[r]:0}return new Ae(a)}add(e){for(var t=Ae.zero(this.rows,this.columns),a=0;a<this.rows;a++)for(var r=0;r<this.columns;r++)t.elements[a][r]=this.elements[a][r]+e.elements[a][r];return t}subtract(e){for(var t=Ae.zero(this.rows,this.columns),a=0;a<this.rows;a++)for(var r=0;r<this.columns;r++)t.elements[a][r]=this.elements[a][r]-e.elements[a][r];return t}scale(e){for(var t=Ae.zero(this.rows,this.columns),a=0;a<this.rows;a++)for(var r=0;r<this.columns;r++)t.elements[a][r]=this.elements[a][r]*e;return t}negate(){return this.scale(-1)}multiply(e){for(var t=Ae.zero(this.rows,e.columns),a=0;a<this.rows;a++)for(var r=0;r<e.columns;r++)for(var n=0;n<this.columns;n++)t.elements[a][r]+=this.elements[a][n]*e.elements[n][r];return t}outerProduct(e){for(var t=Ae.zero(this.rows,this.columns),a=0;a<this.rows;a++)for(var r=0;r<this.columns;r++)t.elements[a][r]=this.elements[a][r]*e.elements[a][r];return t}multiplyVector(e){for(var t=[],a=0;a<this.rows;a++){for(var r=0,n=0;n<this.columns;n++)r+=this.elements[a][n]*e.elements[n];t[a]=r}return new Ee(t)}multiplyVector3D(e){for(var t=[],a=0;a<this.rows;a++){for(var r=0,n=0;n<this.columns;n++)switch(n){case 0:r+=this.elements[a][n]*e.x;break;case 1:r+=this.elements[a][n]*e.y;break;case 2:r+=this.elements[a][n]*e.z}t[a]=r}return new Te(t[0],t[1],t[2])}reciprocal(){for(var e=Ae.zero(this.rows,this.columns),t=0;t<this.rows;t++)for(var a=0;a<this.columns;a++)0!==this.elements[t][a]&&(e.elements[t][a]=1/this.elements[t][a]);return e}transpose(){for(var e=Ae.zero(this.columns,this.rows),t=0;t<this.rows;t++)for(var a=0;a<this.columns;a++)e.elements[a][t]=this.elements[t][a];return e}cholesky(){for(var e=Ae.zero(this.rows,this.rows),t=0;t<this.rows;t++)for(var a=0;a<t+1;a++){for(var r=0,n=0;n<a;n++)r+=e.elements[t][n]*e.elements[a][n];e.elements[t][a]=t===a?Math.sqrt(this.elements[t][t]-r):1/e.elements[a][a]*(this.elements[t][a]-r)}return e}_swapRows(e,t){if(e!==t){var a=this.elements[e];this.elements[e]=this.elements[t],this.elements[t]=a}}_toReducedRowEchelonForm(){for(var e=0,t=0;t<this.rows&&e<this.columns;++t,++e){for(var a=t;0===this.elements[a][e];)if(++a===this.rows&&(a=t,++e===this.columns))return;if(this._swapRows(a,t),0!==this.elements[t][e])for(var r=this.elements[t][e],n=0;n<this.columns;++n)this.elements[t][n]/=r;for(var i=0;i<this.rows;++i)if(i!==t)for(var o=this.elements[i][e],s=0;s<this.columns;++s)this.elements[i][s]-=o*this.elements[t][s]}}inverse(){for(var e=Ae.zero(this.rows,2*this.columns),t=0;t<this.rows;++t){for(var a=0;a<this.columns;++a)e.elements[t][a]=this.elements[t][a];e.elements[t][t+this.columns]=1}e._toReducedRowEchelonForm();for(var r=Ae.zero(this.rows,this.columns),n=0;n<this.rows;++n)for(var i=0;i<this.columns;++i)r.elements[n][i]=e.elements[n][i+this.columns];return r}}function be(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee{constructor(e){be(this,"elements",void 0),be(this,"length",void 0),this.elements=e,this.length=e.length}static zero(e){return new Ee(new Array(e).fill(0))}static filled(e,t){return new Ee(new Array(e).fill(t))}static fromList(e){return new Ee(e)}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0)return"[".concat(this.elements.join(", "),"]");var t=this.elements.map((t=>t.toFixed(e)));return"[".concat(t.join(", "),"]")}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}toList(){return Array.from(this.elements)}toArray(){return new Float64Array(this.elements)}magnitude(){var e=0;for(var t of this.elements)e+=t*t;return Math.sqrt(e)}add(e){for(var t=new Array(this.length),a=0;a<this.length;a++)t[a]=this.elements[a]+e.elements[a];return new Ee(t)}subtract(e){for(var t=new Array(this.length),a=0;a<this.length;a++)t[a]=this.elements[a]-e.elements[a];return new Ee(t)}scale(e){for(var t=new Array(this.length),a=0;a<this.length;a++)t[a]=this.elements[a]*e;return new Ee(t)}negate(){return this.scale(-1)}distance(e){return this.subtract(e).magnitude()}normalize(){var e=this.magnitude();return 0===e?Ee.zero(this.length):this.scale(1/e)}dot(e){for(var t=0,a=0;a<this.length;a++)t+=this.elements[a]*e.elements[a];return t}outer(e){for(var t=[],a=0;a<this.length;a++){t[a]=[];for(var r=0;r<e.length;r++)t[a][r]=this.elements[a]*e.elements[r]}return new Ae(t)}cross(e){for(var t=new Array(this.length),a=0;a<this.length;a++)t[a]=this.elements[(a+1)%this.length]*e.elements[(a+2)%this.length]-this.elements[(a+2)%this.length]*e.elements[(a+1)%this.length];return new Ee(t)}skewSymmetric(){if(3!==this.length)throw new Error("Skew-symmetric matrix requires a vector of length 3.");return new Ae([[0,-this.elements[2],this.elements[1]],[this.elements[2],0,-this.elements[0]],[-this.elements[1],this.elements[0],0]])}rotX(e){var t=Math.cos(e),a=Math.sin(e),r=new Array(3);return r[0]=this.elements[0],r[1]=t*this.elements[1]+a*this.elements[2],r[2]=-a*this.elements[1]+t*this.elements[2],new Ee(r)}rotY(e){var t=Math.cos(e),a=Math.sin(e),r=new Array(3);return r[0]=t*this.elements[0]+-a*this.elements[2],r[1]=this.elements[1],r[2]=a*this.elements[0]+t*this.elements[2],new Ee(r)}rotZ(e){var t=Math.cos(e),a=Math.sin(e),r=new Array(3);return r[0]=t*this.elements[0]+a*this.elements[1],r[1]=-a*this.elements[0]+t*this.elements[1],r[2]=this.elements[2],new Ee(r)}angle(e){var t=Math.atan2(this.cross(e).magnitude(),this.dot(e));return isNaN(t)?0:t}angleDegrees(e){return this.angle(e)*(180/Math.PI)}sight(e,t){var a=this.magnitude()**2,r=e.magnitude()**2,n=this.dot(e),i=(a-n)/(a+r-2*n),o=!1;return(i<0||i>1||(1-i)*a+n*i>=t*t)&&(o=!0),o}bisect(e){return this.scale(e.magnitude()).add(e.scale(this.magnitude())).normalize()}join(e){return new Ee(this.toList().concat(e.toList()))}slice(e,t){return new Ee(this.elements.slice(e,t))}row(){return new Ae([this.toList()])}column(){return new Ae(this.toList().map((e=>[e])))}toVector3D(e){return new Te(this.elements[e],this.elements[e+1],this.elements[e+2])}}function _e(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}be(Ee,"origin3",new(ue=Ee)([0,0,0])),be(Ee,"origin6",new ue([0,0,0,0,0,0])),be(Ee,"xAxis",new ue([1,0,0])),be(Ee,"yAxis",new ue([0,1,0])),be(Ee,"zAxis",new ue([0,0,1])),be(Ee,"xAxisNeg",new ue([-1,0,0])),be(Ee,"yAxisNeg",new ue([0,-1,0])),be(Ee,"zAxisNeg",new ue([0,0,-1]));class Te{constructor(e,t,a){_e(this,"x",void 0),_e(this,"y",void 0),_e(this,"z",void 0),this.x=e,this.y=t,this.z=a}static fromVector(e){return new Te(e.x,e.y,e.z)}toList(){return[this.x,this.y,this.z]}toArray(){return new Float64Array([this.x,this.y,this.z])}getElement(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("Index ".concat(e," outside 3D vector bounds."))}}toVector(){return new Ee(this.toList())}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0)return"[".concat(this.toList().join(", "),"]");var t=this.toList().map((t=>t.toFixed(e)));return"[".concat(t.join(", "),"]")}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}add(e){return new Te(this.x+e.x,this.y+e.y,this.z+e.z)}subtract(e){return new Te(this.x-e.x,this.y-e.y,this.z-e.z)}scale(e){return new Te(this.x*e,this.y*e,this.z*e)}negate(){return this.scale(-1)}distance(e){return t=this,a=e,Math.sqrt((t.x-a.x)**2+(t.y-a.y)**2+(t.z-a.z)**2);var t,a}normalize(){var e=this.magnitude();return 0===e?Te.origin:new Te(this.x/e,this.y/e,this.z/e)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}outer(e){return new Ae([[this.x*e.x,this.x*e.y,this.x*e.z],[this.y*e.x,this.y*e.y,this.y*e.z],[this.z*e.x,this.z*e.y,this.z*e.z]])}cross(e){return new Te(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}skewSymmetric(){return new Ae([[0,-this.z,this.y],[this.z,0,-this.x],[-this.y,this.x,0]])}rotX(e){var t=Math.cos(e),a=Math.sin(e);return new Te(this.x,t*this.y+a*this.z,-a*this.y+t*this.z)}rotY(e){var t=Math.cos(e),a=Math.sin(e);return new Te(t*this.x+-a*this.z,this.y,a*this.x+t*this.z)}rotZ(e){var t=Math.cos(e),a=Math.sin(e);return new Te(t*this.x+a*this.y,-a*this.x+t*this.y,this.z)}angle(e){var t=Math.atan2(this.cross(e).magnitude(),this.dot(e));return isNaN(t)?0:t}angleDegrees(e){return this.angle(e)*(180/Math.PI)}sight(e,t){var a=this.magnitude()**2,r=e.magnitude()**2,n=this.dot(e),i=(a-n)/(a+r-2*n),o=!1;return(i<0||i>1||(1-i)*a+n*i>=t*t)&&(o=!0),o}bisect(e){return this.scale(e.magnitude()).add(e.scale(this.magnitude())).normalize()}row(){return new Ae([[this.x,this.y,this.z]])}column(){return new Ae([[this.x],[this.y],[this.z]])}join(e){var t=new Float64Array(6);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=e.x,t[4]=e.y,t[5]=e.z,new Ee(t)}}function ze(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}_e(Te,"origin",new(me=Te)(0,0,0)),_e(Te,"xAxis",new me(1,0,0)),_e(Te,"yAxis",new me(0,1,0)),_e(Te,"zAxis",new me(0,0,1)),_e(Te,"xAxisNeg",new me(-1,0,0)),_e(Te,"yAxisNeg",new me(0,-1,0)),_e(Te,"zAxisNeg",new me(0,0,-1));class Se{constructor(e){var t,a,r,n,o;ze(this,"id",void 0),ze(this,"name",void 0),ze(this,"type",void 0),ze(this,"position",void 0),ze(this,"totalVelocity",void 0),ze(this,"velocity",void 0),ze(this,"active",!0),this.type=null!==(t=e.type)&&void 0!==t?t:i.UNKNOWN,this.name=null!==(a=e.name)&&void 0!==a?a:"Unknown",this.id=e.id,this.active=null===(r=e.active)||void 0===r||r,this.position=null!==(n=e.position)&&void 0!==n?n:{x:0,y:0,z:0},this.velocity=null!==(o=e.velocity)&&void 0!==o?o:{x:0,y:0,z:0},this.totalVelocity=Math.sqrt(this.velocity.x**2+this.velocity.y**2+this.velocity.z**2)}isSatellite(){return!1}isGroundObject(){return!1}isSensor(){return!1}isMarker(){return!1}isStatic(){return 0===this.velocity.x&&0===this.velocity.y&&0===this.velocity.z}isPayload(){return this.type===i.PAYLOAD}isRocketBody(){return this.type===i.ROCKET_BODY}isDebris(){return this.type===i.DEBRIS}isStar(){return this.type===i.STAR}isMissile(){return this.type===i.BALLISTIC_MISSILE}isNotional(){return this.type===i.NOTIONAL}getTypeString(){var e;return null!==(e={[i.UNKNOWN]:"Unknown",[i.PAYLOAD]:"Payload",[i.ROCKET_BODY]:"Rocket Body",[i.DEBRIS]:"Debris",[i.SPECIAL]:"Special",[i.BALLISTIC_MISSILE]:"Ballistic Missile",[i.STAR]:"Star",[i.INTERGOVERNMENTAL_ORGANIZATION]:"Intergovernmental Organization",[i.SUBORBITAL_PAYLOAD_OPERATOR]:"Suborbital Payload Operator",[i.PAYLOAD_OWNER]:"Payload Owner",[i.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER]:"Meteorological Rocket Launch Agency or Manufacturer",[i.PAYLOAD_MANUFACTURER]:"Payload Manufacturer",[i.LAUNCH_AGENCY]:"Launch Agency",[i.LAUNCH_SITE]:"Launch Site",[i.LAUNCH_POSITION]:"Launch Position",[i.LAUNCH_FACILITY]:"Launch Facility",[i.CONTROL_FACILITY]:"Control Facility",[i.GROUND_SENSOR_STATION]:"Ground Sensor Station",[i.OPTICAL]:"Optical",[i.MECHANICAL]:"Mechanical",[i.PHASED_ARRAY_RADAR]:"Phased Array Radar",[i.OBSERVER]:"Observer",[i.BISTATIC_RADIO_TELESCOPE]:"Bistatic Radio Telescope",[i.COUNTRY]:"Country",[i.LAUNCH_VEHICLE_MANUFACTURER]:"Launch Vehicle Manufacturer",[i.ENGINE_MANUFACTURER]:"Engine Manufacturer"}[this.type])&&void 0!==e?e:"Unknown"}validateParameter(e,t,a,r){if(null!=t&&e<t)throw new Error(r);if(null!=a&&e>a)throw new Error(r)}}function Ie(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pe extends Se{constructor(e){var t;super(e),Ie(this,"name","Unknown Ground Object"),Ie(this,"lat",void 0),Ie(this,"lon",void 0),Ie(this,"alt",void 0),this.validateGroundObjectInputData_(e),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.lat=e.lat,this.lon=e.lon,this.alt=e.alt}rae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return e.rae(this,t)}ecf(){return ie(this.toGeodetic())}eci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,{gmst:t}=we(e);return se(this.toGeodetic(),t)}lla(){return{lat:this.lat,lon:this.lon,alt:this.alt}}llaRad(){return{lat:this.lat*h,lon:this.lon*h,alt:this.alt}}static fromGeodetic(e){return new Pe({lat:e.latDeg,lon:e.lonDeg,alt:e.alt})}toGeodetic(){return Ne.fromDegrees(this.lat,this.lon,this.alt)}validateGroundObjectInputData_(e){this.validateParameter(e.lat,-90,90,"Invalid latitude - must be between -90 and 90"),this.validateParameter(e.lon,-180,180,"Invalid longitude - must be between -180 and 180"),this.validateParameter(e.alt,0,null,"Invalid altitude - must be greater than 0")}isGroundObject(){switch(this.type){case i.INTERGOVERNMENTAL_ORGANIZATION:case i.SUBORBITAL_PAYLOAD_OPERATOR:case i.PAYLOAD_OWNER:case i.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER:case i.PAYLOAD_MANUFACTURER:case i.LAUNCH_VEHICLE_MANUFACTURER:case i.ENGINE_MANUFACTURER:case i.LAUNCH_AGENCY:case i.LAUNCH_SITE:case i.LAUNCH_POSITION:return!0;default:return!1}}}function Re(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class De{constructor(){}static smaToMeanMotion(e){return Math.sqrt(De.mu/(e*e*e))}static revsPerDayToSma(e){return De.mu**(1/3)/(l*e/f)**(2/3)}static precession(e){var t=e.toTT().toJulianCenturies();return{zeta:E(t,De.zetaPoly_),theta:E(t,De.thetaPoly_),zed:E(t,De.zedPoly_)}}static nutation(e){for(var t=e.toTT().toJulianCenturies(),a=E(t,De.moonAnomPoly_),r=E(t,De.sunAnomPoly_),n=E(t,De.moonLatPoly_),i=E(t,De.sunElongPoly_),o=E(t,De.moonRaanPoly_),s=0,l=0,h=B.getInstance(),c=0;c<4;c++){var[d,f,g,M,p,v,y,w,x]=h.getIau1980Coeffs(c),A=d*a+f*r+g*n+M*i+p*o,b=w+x*t;s+=(v+y*t)*Math.sin(A),l+=b*Math.cos(A)}s*=m,l*=m;var _=E(t,De.meanEpsilonPoly_),T=_+l,z=s*Math.cos(_)+.00264*u*Math.sin(o)+63e-6*u*Math.sin(2*o);return{dPsi:s,dEps:l,mEps:_,eps:T,eqEq:z,gast:e.gmstAngle()+z}}static smaToDrift(e){return(1-l*Math.sqrt(e**3/De.mu)/g)*l}static smaToDriftDegrees(e){return De.smaToDrift(e)*c}static driftToSemimajorAxis(e){var t=(-e/l+1)*g;return(De.mu*t*t/(4*Math.PI*Math.PI))**(1/3)}static driftDegreesToSma(e){return De.driftToSemimajorAxis(h*e)}static diameter(e){return T(2*De.radiusEquator,e.magnitude(),a.Sphere)}}function Oe(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}de=De,Re(De,"mu",x),Re(De,"radiusEquator",6378.1363),Re(De,"flattening",1/298.257223563),Re(De,"radiusPolar",de.radiusEquator*(1-de.flattening)),Re(De,"radiusMean",(2*de.radiusEquator+de.radiusPolar)/3),Re(De,"eccentricitySquared",de.flattening*(2-de.flattening)),Re(De,"j2",.00108262668355315),Re(De,"j3",-253265648533224e-20),Re(De,"j4",-1619621591367e-18),Re(De,"j5",-2.27296082868698e-7),Re(De,"j6",5.40681239107085e-7),Re(De,"rotation",new Te(0,0,7292115146706979e-20)),Re(De,"zetaPoly_",Float64Array.from([.017998*u,.30188*u,2306.2181*u,0])),Re(De,"thetaPoly_",Float64Array.from([-.041833*u,-.42665*u,2004.3109*u,0])),Re(De,"zedPoly_",Float64Array.from([.018203*u,1.09468*u,2306.2181*u,0])),Re(De,"moonAnomPoly_",Float64Array.from([14343e-9*h,.0088553*h,477198.8675605*h,134.96340251*h])),Re(De,"sunAnomPoly_",Float64Array.from([38e-9*h,-1537e-7*h,35999.0502911*h,357.52910918*h])),Re(De,"moonLatPoly_",Float64Array.from([-288e-9*h,-.003542*h,483202.0174577*h,93.27209062*h])),Re(De,"sunElongPoly_",Float64Array.from([1831e-9*h,-.0017696*h,445267.1114469*h,297.85019547*h])),Re(De,"moonRaanPoly_",Float64Array.from([2139e-9*h,.0020756*h,-1934.1361851*h,125.04455501*h])),Re(De,"meanEpsilonPoly_",Float64Array.from([.001813*u,-59e-5*u,-46.815*u,84381.448*u]));class Ne{constructor(e,t,a){if(Oe(this,"lat",void 0),Oe(this,"lon",void 0),Oe(this,"alt",void 0),Math.abs(e)>Math.PI/2)throw new RangeError("Latitude must be between -90 and 90 in Radians.");if(Math.abs(t)>Math.PI)throw new RangeError("Longitude must be between -180 and 180 in Radians.");if(a<-De.radiusMean)throw new RangeError("Altitude must be greater than ".concat(-De.radiusMean," km. Got ").concat(a," km."));this.lat=e,this.lon=t,this.alt=a}static fromDegrees(e,t,a){return new Ne(e*h,t*h,a)}toString(){return["Geodetic","  Latitude:  ".concat(this.latDeg.toFixed(4),""),"  Longitude: ".concat(this.lonDeg.toFixed(4),""),"  Altitude:  ".concat(this.alt.toFixed(3)," km")].join("\n")}get latDeg(){return this.lat*c}get lonDeg(){return this.lon*c}toGroundObject(){return new Pe({lat:this.latDeg,lon:this.lonDeg,alt:this.alt})}toITRF(e){var t=Math.sin(this.lat),a=Math.cos(this.lat),r=De.radiusEquator/Math.sqrt(1-De.eccentricitySquared*t*t),n=new Te((r+this.alt)*a*Math.cos(this.lon),(r+this.alt)*a*Math.sin(this.lon),(r*(1-De.eccentricitySquared)+this.alt)*t);return new Le(e,n,Te.origin)}angle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Haversine;return function(e,t,a,n){switch(arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.Cosine){case r.Cosine:return function(e,t,a,r){var n=Math.sin(t)*Math.sin(r),i=Math.cos(t)*Math.cos(r)*Math.cos(a-e);return Math.acos(n+i)}(e,t,a,n);case r.Haversine:return function(e,t,a,r){var n=a-e,i=r-t,o=Math.sin(.5*n),s=Math.sin(.5*i),l=s*s+Math.cos(t)*Math.cos(r)*o*o;return 2*Math.asin(Math.min(1,Math.sqrt(l)))}(e,t,a,n);default:throw new Error("Invalid angular distance method.")}}(this.lon,this.lat,e.lon,e.lat,t)}angleDeg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Haversine;return this.angle(e,t)*c}distance(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Haversine;return this.angle(e,t)*De.radiusMean}fieldOfView(){return Math.acos(De.radiusMean/(De.radiusMean+this.alt))}isInView(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Haversine,a=Math.max(this.fieldOfView(),e.fieldOfView());return this.angle(e,t)<=a}}function Ce(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class je{constructor(e,t,a){Ce(this,"epoch",void 0),Ce(this,"position",void 0),Ce(this,"velocity",void 0),this.epoch=e,this.position=t,this.velocity=a}toString(){return["[".concat(this.name,"]"),"  Epoch: ".concat(this.epoch),"  Position: ".concat(this.position.toString(6)," km"),"  Velocity: ".concat(this.velocity.toString(9)," km/s")].join("\n")}get mechanicalEnergy(){var e=this.position.magnitude(),t=this.velocity.magnitude();return t*t*.5-De.mu/e}get semimajorAxis(){var e=this.mechanicalEnergy;return-De.mu/(2*e)}get period(){var e=this.semimajorAxis;return l*Math.sqrt(e*e*e/De.mu)/60}get angularRate(){var e=this.semimajorAxis;return Math.sqrt(De.mu/(e*e*e))}toClassicalElements(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De.mu;if(!this.inertial)throw new Error("Classical elements are undefined for fixed frames.");return Ye.fromStateVector(this,e)}}class Le extends je{get name(){return"ITRF"}get inertial(){return!1}get height(){var e=De.radiusEquator,t=De.eccentricitySquared,a=this.position.magnitude(),r=this.position.z/a,n=1-r*r;return a-e*Math.sqrt((1-t)/(1-t*n))}get alt(){return this.height}toJ2000(){var e=De.precession(this.epoch),t=De.nutation(this.epoch),a=this.epoch.gmstAngle()+t.eqEq,r=this.position.rotZ(-a),n=this.velocity.add(De.rotation.cross(this.position)).rotZ(-a),i=r.rotX(t.eps).rotZ(t.dPsi).rotX(-t.mEps),o=n.rotX(t.eps).rotZ(t.dPsi).rotX(-t.mEps),s=i.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta),l=o.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta);return new Ue(this.epoch,s,l)}toGeodetic(){var e,t=De.radiusEquator,a=De.eccentricitySquared,r=this.position.x,n=this.position.y,i=this.position.z,o=Math.atan2(n,r),s=Math.sqrt(r*r+n*n),l=Math.atan(i/s),h=l,c=0;if(0===r&&0===n)h=l,e=i>0?i-De.radiusPolar:i+De.radiusPolar;else{for(var u=0;u<20;u++){var m=Math.sin(h);c=1/Math.sqrt(1-a*m*m),h=Math.atan((i+t*c*a*m)/s)}e=s/Math.cos(h)-t*c}return new Ne(h,o,e)}}class Fe extends je{get name(){return"TEME"}get inertial(){return!0}static fromClassicalElements(e){var t=e.toPositionVelocity();return new Fe(e.epoch,t.position,t.velocity)}toJ2000(){var e=De.precession(this.epoch),t=De.nutation(this.epoch),a=t.mEps+t.dEps,r=t.dPsi*Math.cos(a),n=this.position.rotZ(-r).rotX(a).rotZ(t.dPsi).rotX(-t.mEps),i=this.velocity.rotZ(-r).rotX(a).rotZ(t.dPsi).rotX(-t.mEps),o=n.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta),s=i.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta);return new Ue(this.epoch,o,s)}}class Ue extends je{static fromClassicalElements(e){var t=e.toPositionVelocity();return new Ue(e.epoch,t.position,t.velocity)}get name(){return"J2000"}get inertial(){return!0}toITRF(){var e=De.precession(this.epoch),t=De.nutation(this.epoch),a=this.epoch.gmstAngle()+t.eqEq,r=this.position.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),n=this.velocity.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),i=r.rotX(t.mEps).rotZ(-t.dPsi).rotX(-t.eps),o=n.rotX(t.mEps).rotZ(-t.dPsi).rotX(-t.eps),s=i.rotZ(a),l=o.rotZ(a).add(De.rotation.negate().cross(s));return new Le(this.epoch,s,l)}toTEME(){var e=De.precession(this.epoch),t=De.nutation(this.epoch),a=t.mEps+t.dEps,r=t.dPsi*Math.cos(a),n=this.position.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),i=this.velocity.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),o=n.rotX(t.mEps).rotZ(-t.dPsi).rotX(-a).rotZ(r),s=i.rotX(t.mEps).rotZ(-t.dPsi).rotX(-a).rotZ(r);return new Fe(this.epoch,o,s)}}function qe(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ke{constructor(e){var{epoch:t,h:a,k:r,lambda:n,a:i,p:o,q:s,mu:l,I:h}=e;qe(this,"epoch",void 0),qe(this,"a",void 0),qe(this,"h",void 0),qe(this,"k",void 0),qe(this,"p",void 0),qe(this,"q",void 0),qe(this,"lambda",void 0),qe(this,"mu",void 0),qe(this,"I",void 0),this.epoch=t,this.h=a,this.k=r,this.lambda=n,this.a=i,this.p=o,this.q=s,this.mu=null!=l?l:x,this.I=null!=h?h:1}toString(){return["[EquinoctialElements]","  Epoch: ".concat(this.epoch),"  a: ".concat(this.a," km"),"  h: ".concat(this.h),"  k: ".concat(this.k),"  p: ".concat(this.p),"  q: ".concat(this.q),"  lambda: ".concat(this.lambda," rad")].join("\n")}get semimajorAxis(){return this.a}get meanLongitude(){return this.lambda}get meanMotion(){return Math.sqrt(this.mu/this.a**3)}get retrogradeFactor(){return this.I}isPrograde(){return 1===this.I}isRetrograde(){return-1===this.I}get period(){return l*Math.sqrt(this.semimajorAxis**3/this.mu)/60}get revsPerDay(){return 1440/this.period}toClassicalElements(){var e=this.semimajorAxis,t=Math.sqrt(this.k*this.k+this.h*this.h),a=Math.PI*(.5*(1-this.I))+2*this.I*Math.atan(Math.sqrt(this.p*this.p+this.q*this.q)),r=Math.atan2(this.p,this.q),n=Math.atan2(this.h,this.k)-this.I*Math.atan2(this.p,this.q),i=function(e,t){var a,r;if(e>1e-8){for(var n=1,i=(a=t<0&&t>-Math.PI||t>Math.PI?t-e:t+e)+(t-a+e*Math.sin(a))/(1-e*Math.cos(a));Math.abs(i-a)>1e-8&&n<=50;)n++,i=(a=i)+(t-a+e*Math.sin(a))/(1-e*Math.cos(a));var o=Math.sqrt(1-e*e)*Math.sin(i)/(1-e*Math.cos(i)),s=(Math.cos(i)-e)/(1-e*Math.cos(i));r=Math.atan2(o,s)}else r=t,a=t;return{e0:a,nu:r}}(t,this.lambda-this.I*r-n).nu;return new Ye({epoch:this.epoch,semimajorAxis:e,eccentricity:t,inclination:a,rightAscension:r,argPerigee:n,trueAnomaly:i,mu:this.mu})}toPositionVelocity(){return this.toClassicalElements().toPositionVelocity()}}function Je(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ye{constructor(e){var{epoch:t,semimajorAxis:a,eccentricity:r,inclination:n,rightAscension:i,argPerigee:o,trueAnomaly:s,mu:l=x}=e;Je(this,"epoch",void 0),Je(this,"semimajorAxis",void 0),Je(this,"eccentricity",void 0),Je(this,"inclination",void 0),Je(this,"rightAscension",void 0),Je(this,"argPerigee",void 0),Je(this,"trueAnomaly",void 0),Je(this,"mu",void 0),this.epoch=t,this.semimajorAxis=a,this.eccentricity=r,this.inclination=n,this.rightAscension=i,this.argPerigee=o,this.trueAnomaly=s,this.mu=l}static fromStateVector(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;if(!e.inertial)throw new Error("State vector must be in inertial frame (like J2000).");var a=e.position,r=e.velocity,n=e.semimajorAxis,i=a.scale(r.magnitude()**2-t/a.magnitude()),o=r.scale(a.dot(r)),s=i.subtract(o).scale(1/t),h=s.magnitude(),c=a.cross(r),u=Math.acos(S(c.z/c.magnitude(),-1,1)),m=Te.zAxis.cross(c),d=Math.acos(S(m.x/m.magnitude(),-1,1));m.y<0&&(d=l-d);var f=m.angle(s);s.z<0&&(f=l-f);var g=s.angle(a);return a.dot(r)<0&&(g=l-g),new Ye({epoch:e.epoch,semimajorAxis:n,eccentricity:h,inclination:u,rightAscension:d,argPerigee:f,trueAnomaly:g,mu:t})}get inclinationDegrees(){return this.inclination*c}get rightAscensionDegrees(){return this.rightAscension*c}get argPerigeeDegrees(){return this.argPerigee*c}get trueAnomalyDegrees(){return this.trueAnomaly*c}get apogee(){return this.semimajorAxis*(1+this.eccentricity)}get perigee(){return this.semimajorAxis*(1-this.eccentricity)}toString(){return["[ClassicalElements]","  Epoch: ".concat(this.epoch),"  Semimajor Axis (a):       ".concat(this.semimajorAxis.toFixed(4)," km"),"  Eccentricity (e):         ".concat(this.eccentricity.toFixed(7)),"  Inclination (i):          ".concat(this.inclinationDegrees.toFixed(4),""),"  Right Ascension ():      ".concat(this.rightAscensionDegrees.toFixed(4),""),"  Argument of Perigee ():  ".concat(this.argPerigeeDegrees.toFixed(4),""),"  True Anomaly ():         ".concat(this.trueAnomalyDegrees.toFixed(4),"")].join("\n")}get meanMotion(){return Math.sqrt(this.mu/this.semimajorAxis**3)}get period(){return l*Math.sqrt(this.semimajorAxis**3/this.mu)/60}get revsPerDay(){return 1440/this.period}getOrbitRegime(){var t=this.revsPerDay,a=.016666666666666666*this.period;return t>=.99&&t<=1.01&&this.eccentricity<.01?e.GEO:a>=600&&a<=800&&this.eccentricity<=.25?e.MEO:t>=11.25&&this.eccentricity<=.25?e.LEO:this.eccentricity>.25?e.HEO:e.OTHER}toPositionVelocity(){var e=new Te(Math.cos(this.trueAnomaly),Math.sin(this.trueAnomaly),0).scale(this.semimajorAxis*(1-this.eccentricity**2)/(1+this.eccentricity*Math.cos(this.trueAnomaly))),t=new Te(-Math.sin(this.trueAnomaly),this.eccentricity+Math.cos(this.trueAnomaly),0).scale(Math.sqrt(this.mu/(this.semimajorAxis*(1-this.eccentricity**2))));return{position:e.rotZ(-this.argPerigee).rotX(-this.inclination).rotZ(-this.rightAscension),velocity:t.rotZ(-this.argPerigee).rotX(-this.inclination).rotZ(-this.rightAscension)}}toEquinoctialElements(){var e=this.inclination>Math.PI/2?-1:1,t=this.eccentricity*Math.sin(this.argPerigee+e*this.rightAscension),a=this.eccentricity*Math.cos(this.argPerigee+e*this.rightAscension),r=z(this.eccentricity,this.trueAnomaly).m+this.argPerigee+e*this.rightAscension,n=this.semimajorAxis,i=Math.tan(.5*this.inclination)**e*Math.sin(this.rightAscension),o=Math.tan(.5*this.inclination)**e*Math.cos(this.rightAscension);return new ke({epoch:this.epoch,k:a,h:t,lambda:r,a:n,p:i,q:o,mu:this.mu,I:e})}propagate(e){for(var t=this.epoch,a=this.meanMotion,r=e.difference(t),n=Math.cos(this.trueAnomaly),i=Math.acos(S((this.eccentricity+n)/(1+this.eccentricity*n),-1,1)),o=(i=_(i,this.trueAnomaly))-this.eccentricity*Math.sin(i),s=((o=_(o,i))+a*r)%l,h=s,c=0;c<32;c++){var u=s+this.eccentricity*Math.sin(h);if(Math.abs(u-h)<1e-12)break;h=u}var m=Math.cos(h),d=S(Math.acos((m-this.eccentricity)/(1-this.eccentricity*m)),-1,1);return d=_(d,h),new Ye({epoch:e,semimajorAxis:this.semimajorAxis,eccentricity:this.eccentricity,inclination:this.inclination,rightAscension:this.rightAscension,argPerigee:this.argPerigee,trueAnomaly:d,mu:this.mu})}}class He{constructor(){}static createTle(e){var{inc:t,meanmo:a,rasc:r,argPe:n,meana:i,ecen:o,epochyr:s,epochday:l,intl:h}=e,c=Ke.convert6DigitToA5(e.scc),u=s.padStart(2,"0"),m=parseFloat(l).toFixed(8).padStart(12,"0"),d=He.inclination(t),f=He.meanMotion(a),g=He.rightAscension(r),M=He.argumentOfPerigee(n),p=He.meanAnomaly(i),v=He.eccentricity(o),y=h.padEnd(8," "),w=e.sat?e.sat.tle1.substring(32,71):" +.00000000 +00000+0 +00000-0 0  9990";return w=" "===(w=" "===(w=" "===(w=" "===w[1]?He.setCharAt(w,1,"+"):w)[12]?He.setCharAt(w,12,"+"):w)[21]?He.setCharAt(w,21,"+"):w)[32]?He.setCharAt(w,32,"0"):w,{tle1:"1 ".concat(c,"U ").concat(y," ").concat(u).concat(m).concat(w),tle2:"2 ".concat(c," ").concat(d," ").concat(g," ").concat(v," ").concat(M," ").concat(p," ").concat(f," 00010")}}static argumentOfPerigee(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("argPe length is not 8");return t}static eccentricity(e){var t=e.padEnd(9,"0");if(7!==(t="."===t[1]?t.substring(2):t.substring(0,7)).length)throw new Error("ecen length is not 7");return t}static inclination(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("inc length is not 8");return t}static meanAnomaly(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("meana length is not 8");return t}static meanMotion(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(8).padStart(11,"0");if(11!==t.length)throw new Error("meanmo length is not 11");return t}static rightAscension(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("rasc length is not 8");return t}static setCharAt(e,t,a){return t>e.length-1?e:"".concat(e.substring(0,t)).concat(a).concat(e.substring(t+1))}}!function(e){e.wgs72old="wgs72old",e.wgs72="wgs72",e.wgs84="wgs84"}(fe||(fe={}));class Ve{static angle_(e,t){var a=Ve.mag_(e),r=Ve.mag_(t);if(a*r>1e-8*1e-8){var n=Ve.dot_(e,t)/(a*r);return Math.abs(n)>1&&(n=Number(Ve.sgn_(n))),Math.acos(n)}return 999999.1}static asinh_(e){return Math.log(e+Math.sqrt(e*e+1))}static createSatrec(e,a){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe.wgs72,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.IMPROVED,o={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},s=1440/(2*p);o.error=0,o.satnum=e.substring(2,7),o.epochyr=parseInt(e.substring(18,20)),o.epochdays=parseFloat(e.substring(20,32)),o.ndot=parseFloat(e.substring(33,43)),o.nddot=parseFloat("".concat(e.substring(44,45),".").concat(e.substring(45,50),"E").concat(e.substring(50,52))),o.bstar=parseFloat("".concat(e.substring(53,54),".").concat(e.substring(54,59),"E").concat(e.substring(59,61))),o.inclo=parseFloat(a.substring(8,16)),o.nodeo=parseFloat(a.substring(17,25)),o.ecco=parseFloat(".".concat(a.substring(26,33))),o.argpo=parseFloat(a.substring(34,42)),o.mo=parseFloat(a.substring(43,51)),o.no=parseFloat(a.substring(52,63)),o.no/=s,o.inclo*=h,o.nodeo*=h,o.argpo*=h,o.mo*=h,r=o.epochyr<57?o.epochyr+2e3:o.epochyr+1900;var{mon:l,day:c,hr:u,min:m,sec:d}=Ve.days2mdhms(r,o.epochdays),f=Ve.jday(r,l,c,u,m,d);return o.jdsatepoch=f.jd+f.jdFrac,Ve.sgp4init_(o,{whichconst:n,opsmode:i,satn:o.satnum,epoch:o.jdsatepoch-2433281.5,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xndot:o.ndot,xnddot:o.nddot,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}static cross_(e,t){var a=[0,0,0];return a[0]=e[1]*t[2]-e[2]*t[1],a[1]=e[2]*t[0]-e[0]*t[2],a[2]=e[0]*t[1]-e[1]*t[0],a}static days2mdhms(e,t){for(var a=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],r=Math.floor(t),n=1,i=0;r>i+a[n-1]&&n<12;)i+=a[n-1],n+=1;var o=n,s=r-i,l=24*(t-r),h=Math.floor(l);l=60*(l-h);var c=Math.floor(l);return{mon:o,day:s,hr:h,min:c,sec:60*(l-c)}}static dot_(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}static gstime(e){var t=(e-2451545)/36525,a=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(a=a*h/240%l)<0&&(a+=l),a}static invjday(e,t){var a,r;Math.abs(t)>=1&&(e+=Math.floor(t),t-=Math.floor(t));var n=e-Math.floor(e)-.5;Math.abs(n)>1e-8&&(e-=n,t+=n);var i=e-2415019.5,o=i/365.25,s=1900+Math.floor(o);a=Math.floor(.25*(s-1901)),(r=Math.floor(i-(365*(s-1900)+a)))+t<1&&(s-=1,a=Math.floor(.25*(s-1901)),r=Math.floor(i-(365*(s-1900)+a)));var{mon:l,day:h,hr:c,min:u,sec:m}=Ve.days2mdhms(s,r+t);return{year:s,mon:l,day:h,hr:c,min:u,sec:m}}static jday(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;e instanceof Date&&(t=e.getUTCMonth()+1,a=e.getUTCDate(),r=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds(),e=e.getUTCFullYear());var s=367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+a+1721013.5,l=(o/1e3+i+60*n+3600*r)/86400;if(Math.abs(l)>1){var h=Math.floor(l);s+=h,l-=h}return{jd:s,jdFrac:l}}static mag_(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}static newtonnu_(e,t){var a=999999.9,r=999999.9,n=1e-8;if(Math.abs(e)<n)r=t,a=t;else if(e<1-n){var i=Math.sqrt(1-e*e)*Math.sin(t)/(1+e*Math.cos(t)),o=(e+Math.cos(t))/(1+e*Math.cos(t));r=(a=Math.atan2(i,o))-e*Math.sin(a)}else if(e>1+n){if(e>1&&Math.abs(t)+1e-5<p-Math.acos(1/e)){var s=Math.sqrt(e*e-1)*Math.sin(t)/(1+e*Math.cos(t));a=Ve.asinh_(s),r=e*Ve.sinh_(a)-a}}else Math.abs(t)<168*p/180&&(r=(a=Math.tan(.5*t))+a*a*a/3);return e<1&&((r%=2*p)<0&&(r+=2*p),a%=2*p),{e0:a,m:r}}static propagate(e,t){var{xke:a,j2:r,j3oj2:n}=e,i=e.radiusearthkm*e.xke/60;e.t=t,e.error=0;var o=e.mo+e.mdot*e.t,s=e.argpo+e.argpdot*e.t,h=e.nodeo+e.nodedot*e.t,c=s,u=o,m=e.t*e.t,d=h+e.nodecf*m,f=1-e.cc1*e.t,g=e.bstar*e.cc4*e.t,M=e.t2cof*m;if(1!==e.isimp){var w=e.omgcof*e.t,x=1+e.eta*Math.cos(o),A=w+e.xmcof*(x*x*x-e.delmo);u=o+A,c=s-A;var b=m*e.t,E=b*e.t;f=f-e.d2*m-e.d3*b-e.d4*E,g+=e.bstar*e.cc5*(Math.sin(u)-e.sinmao),M=M+e.t3cof*b+E*(e.t4cof+e.t*e.t5cof)}var _=e.no,T=e.ecco,z=e.inclo;if("d"===e.method){var S=e.t,I=Ve.dspace_(e.irez,e.d2201,e.d2211,e.d3210,e.d3222,e.d4410,e.d4422,e.d5220,e.d5232,e.d5421,e.d5433,e.dedt,e.del1,e.del2,e.del3,e.didt,e.dmdt,e.dnodt,e.domdt,e.argpo,e.argpdot,e.t,S,e.gsto,e.xfact,e.xlamo,e.no,e.atime,T,c,z,e.xli,u,e.xni,d,_);[T,c,z,u,d,_]=I}if(_<=0)return e.error=2,{position:!1,velocity:!1};var P=(a/_)**v*f*f;if(_=a/P**1.5,(T-=g)>=1||T<-.001)return e.error=1,{position:!1,velocity:!1};T<1e-6&&(T=1e-6);var R=(u+=e.no*M)+c+d,D=T,O=z,N=c%=l,C=d%=l,j=u=((R%=l)-c-d)%l,L=Math.sin(z),F=Math.cos(z);if("d"===e.method){var U={inclo:e.inclo,init:"n",ep:D,inclp:O,nodep:C,argpp:N,mp:j,opsmode:e.operationmode},q=Ve.dpper_(e,U);if(({ep:D,nodep:C,argpp:N,mp:j}=q),(O=q.inclp)<0&&(O=-O,C+=p,N-=p),D<0||D>1)return e.error=3,{position:!1,velocity:!1}}"d"===e.method&&(L=Math.sin(O),F=Math.cos(O),e.aycof=-.5*n*L,Math.abs(F+1)>15e-13?e.xlcof=-.25*n*L*(3+5*F)/(1+F):e.xlcof=-.25*n*L*(3+5*F)/y);for(var k=D*Math.cos(N),J=1/(P*(1-D*D)),Y=D*Math.sin(N)+J*e.aycof,H=(j+N+C+J*e.xlcof*k-C)%l,V=H,G=9999.9,B=1,Z=0,X=0;Math.abs(G)>=1e-12&&B<=10;)X=Math.sin(V),G=(H-Y*(Z=Math.cos(V))+k*X-V)/(G=1-Z*k-X*Y),Math.abs(G)>=.95&&(G=G>0?.95:-.95),V+=G,B+=1;var W=k*Z+Y*X,K=k*X-Y*Z,Q=k*k+Y*Y,$=P*(1-Q);if($<0)return e.error=4,{position:!1,velocity:!1};var ee=P*(1-W),te=Math.sqrt(P)*K/ee,ae=Math.sqrt($)/ee,re=Math.sqrt(1-Q),ne=P/ee*(X-Y-k*(J=K/(1+re))),ie=P/ee*(Z-k+Y*J),oe=Math.atan2(ne,ie),se=(ie+ie)*ne,le=1-2*ne*ne,he=.5*r*(J=1/$),ce=he*J;if("d"===e.method){var ue=F*F;e.con41=3*ue-1,e.x1mth2=1-ue,e.x7thm1=7*ue-1}var me=ee*(1-1.5*ce*re*e.con41)+.5*he*e.x1mth2*le;if(me<1)return e.error=6,{position:!1,velocity:!1};oe-=.25*ce*e.x7thm1*se;var de=C+1.5*ce*F*se,fe=O+1.5*ce*F*L*le,ge=te-_*he*e.x1mth2*se/a,Me=ae+_*he*(e.x1mth2*le+1.5*e.con41)/a,pe=Math.sin(oe),ve=Math.cos(oe),ye=Math.sin(de),we=Math.cos(de),xe=Math.sin(fe),Ae=Math.cos(fe),be=-ye*Ae,Ee=we*Ae,_e=be*pe+we*ve,Te=Ee*pe+ye*ve,ze=xe*pe,Se=be*ve-we*pe,Ie=Ee*ve-ye*pe,Pe=xe*ve;return{position:{x:me*_e*e.radiusearthkm,y:me*Te*e.radiusearthkm,z:me*ze*e.radiusearthkm},velocity:{x:(ge*_e+Me*Se)*i,y:(ge*Te+Me*Ie)*i,z:(ge*ze+Me*Pe)*i}}}static rv2coe(e,t,a){var r,n,i,o,s,h,c,u,m,d,f,g,M,v,y,w,x=[0,0,0],A=[0,0,0],b=0,E=.5*p,_=1e-8,T=999999.1,z=Ve.mag_(e),S=Ve.mag_(t),I=Ve.cross_(e,t),P=Ve.mag_(I);if(P>_){x[0]=-I[1],x[1]=I[0],x[2]=0,g=Ve.mag_(x);var R=S*S-a/z;for(f=Ve.dot_(e,t),y=0;y<=2;y++)A[y]=(R*e[y]-f*t[y])/a;if(i=Ve.mag_(A),v=S*S*.5-a/z,n=Math.abs(v)>_?-a/(2*v):999999.9,r=P*P/a,M=I[2]/P,o=Math.acos(M),w=1,i<_?w=o<_||Math.abs(o-p)<_?2:3:(o<_||Math.abs(o-p)<_)&&(w=4),g>_){var D=x[0]/g;Math.abs(D)>1&&(D=Ve.sgn_(D)),s=Math.acos(D),x[1]<0&&(s=l-s)}else s=T;if(1===w?(h=Ve.angle_(x,A),A[2]<0&&(h=l-h)):h=T,1===w||4===w?(c=Ve.angle_(A,e),f<0&&(c=l-c)):c=T,3===w?(u=Ve.angle_(x,e),e[2]<0&&(u=l-u),b=u):u=T,i>_&&4===w){var O=A[0]/i;Math.abs(O)>1&&(O=Ve.sgn_(O)),d=Math.acos(O),A[1]<0&&(d=l-d),o>E&&(d=l-d)}else d=T;if(z>_&&2===w){var N=e[0]/z;Math.abs(N)>1&&(N=Ve.sgn_(N)),m=Math.acos(N),e[1]<0&&(m=l-m),o>E&&(m=l-m),b=m}else m=T;1!==w&&4!==w||(b=Ve.newtonnu_(i,c).m)}else r=T,n=T,i=T,o=T,s=T,h=T,c=T,b=T,u=T,m=T,d=T;return{p:r,a:n,ecc:i,incl:o,omega:s,argp:h,nu:c,m:b,arglat:u,truelon:m,lonper:d}}static sgn_(e){return e<0?-1:1}static sinh_(e){return(Math.exp(e)-Math.exp(-e))/2}static dpper_(e,t){var{e3:a,ee2:r,peo:n,pgho:i,pho:o,PInco:s,plo:h,se2:c,se3:u,sgh2:m,sgh3:d,sgh4:f,sh2:g,sh3:M,si2:v,si3:y,sl2:w,sl3:x,sl4:A,t:b,xgh2:E,xgh3:_,xgh4:T,xh2:z,xh3:S,xi2:I,xi3:P,xl2:R,xl3:D,xl4:O,zmol:N,zmos:C}=e,{ep:j,inclp:L,nodep:F,argpp:U,mp:q}=t,{opsmode:k="i",init:J}=t,Y=C+119459e-10*b;"y"===J&&(Y=C);var H=Y+.0335*Math.sin(Y),V=Math.sin(H),G=.5*V*V-.25,B=-.5*V*Math.cos(H),Z=c*G+u*B,X=v*G+y*B,W=w*G+x*B+A*V,K=m*G+d*B+f*V,Q=g*G+M*B;Y=N+.00015835218*b,"y"===J&&(Y=N),H=Y+.1098*Math.sin(Y);var $=Z+(r*(G=.5*(V=Math.sin(H))*V-.25)+a*(B=-.5*V*Math.cos(H))),ee=X+(I*G+P*B),te=W+(R*G+D*B+O*V),ae=K+(E*G+_*B+T*V),re=Q+(z*G+S*B);if("n"===J){te-=h,ae-=i,re-=o,L+=ee-=s,j+=$-=n;var ne=Math.sin(L),ie=Math.cos(L);if(L>=.2)U+=ae-=ie*(re/=ne),F+=re,q+=te;else{var oe=Math.sin(F),se=Math.cos(F),le=ne*oe,he=ne*se;le+=re*se+ee*ie*oe,he+=-re*oe+ee*ie*se,(F%=l)<0&&"a"===k&&(F+=l);var ce=q+U+ie*F;ce+=te+ae-ee*F*ne;var ue=F;(F=Math.atan2(le,he))<0&&"a"===k&&(F+=l),Math.abs(ue-F)>p&&(F<ue?F+=l:F-=l),U=ce-(q+=te)-ie*F}}return{ep:j,inclp:L,nodep:F,argpp:U,mp:q}}static dscom_(e){var{epoch:t,ep:a,argpp:r,tc:n,inclp:i,nodep:o,np:s}=e,l=.01675,h=.0549,c=2*Math.PI,u=0,m=0,d=0,f=0,g=0,M=0,p=0,v=0,y=0,w=0,x=0,A=0,b=0,E=0,_=0,T=0,z=0,S=0,I=0,P=0,R=0,D=0,O=0,N=0,C=0,j=0,L=0,F=0,U=0,q=0,k=0,J=0,Y=0,H=0,V=0,G=0,B=0,Z=0,X=s,W=a,K=Math.sin(o),Q=Math.cos(o),$=Math.sin(r),ee=Math.cos(r),te=Math.sin(i),ae=Math.cos(i),re=W*W,ne=1-re,ie=Math.sqrt(ne),oe=t+18261.5+n/1440,se=(4.523602-.00092422029*oe)%c,le=Math.sin(se),he=Math.cos(se),ce=.91375164-.03568096*he,ue=Math.sqrt(1-ce*ce),me=.089683511*le/ue,de=Math.sqrt(1-me*me),fe=5.8351514+.001944368*oe,ge=.39785416*le/ue,Me=de*he+.91744867*me*le;ge=Math.atan2(ge,Me),ge+=fe-se;for(var pe=Math.cos(ge),ve=Math.sin(ge),ye=.1945905,we=-.98088458,xe=.91744867,Ae=.39785416,be=Q,Ee=K,_e=29864797e-13,Te=1/X,ze=1;ze<=2;ze++){var Se=ye*be+we*xe*Ee,Ie=-we*be+ye*xe*Ee,Pe=-ye*Ee+we*xe*be,Re=we*Ae,De=we*Ee+ye*xe*be,Oe=ye*Ae,Ne=ae*Pe+te*Re,Ce=ae*De+te*Oe,je=-te*Pe+ae*Re,Le=-te*De+ae*Oe,Fe=Se*ee+Ne*$,Ue=Ie*ee+Ce*$,qe=-Se*$+Ne*ee,ke=-Ie*$+Ce*ee,Je=je*$,Ye=Le*$,He=je*ee,Ve=Le*ee;F=-6*Se*je+re*(-24*Fe*He-6*qe*Je),U=-6*(Se*Le+Ie*je)+re*(-24*(Ue*He+Fe*Ve)+-6*(qe*Ye+ke*Je)),q=-6*Ie*Le+re*(-24*Ue*Ve-6*ke*Ye),J=6*Ne*je+re*(24*Fe*Je-6*qe*He),Y=6*(Ce*je+Ne*Le)+re*(24*(Ue*Je+Fe*Ye)-6*(ke*He+qe*Ve)),H=6*Ce*Le+re*(24*Ue*Ye-6*ke*Ve),L=(L=3*(Se*Se+Ne*Ne)+(G=12*Fe*Fe-3*qe*qe)*re)+L+ne*G,k=(k=6*(Se*Ie+Ne*Ce)+(B=24*Fe*Ue-6*qe*ke)*re)+k+ne*B,V=(V=3*(Ie*Ie+Ce*Ce)+(Z=12*Ue*Ue-3*ke*ke)*re)+V+ne*Z,m=-.5*(d=_e*Te)/ie,u=-15*W*(f=d*ie),g=Fe*qe+Ue*ke,M=Ue*qe+Fe*ke,p=Ue*ke-Fe*qe,1===ze&&(v=u,y=m,w=d,x=f,A=g,b=M,E=p,_=L,I=k,O=V,T=F,z=U,S=q,P=J,R=Y,D=H,N=G,C=B,j=Z,ye=pe,we=ve,xe=ce,Ae=ue,be=de*Q+me*K,Ee=K*de-Q*me,_e=4.7968065e-7)}return{snodm:K,cnodm:Q,sinim:te,cosim:ae,sinomm:$,cosomm:ee,day:oe,e3:2*u*p,ee2:2*u*M,em:W,emsq:re,gam:fe,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:ie,se2:2*v*b,se3:2*v*E,sgh2:2*x*C,sgh3:2*x*(j-N),sgh4:-18*x*l,sh2:-2*y*R,sh3:-2*y*(D-P),si2:2*y*z,si3:2*y*(S-T),sl2:-2*w*I,sl3:-2*w*(O-_),sl4:-2*w*(-21-9*re)*l,s1:u,s2:m,s3:d,s4:f,s5:g,s6:M,s7:p,ss1:v,ss2:y,ss3:w,ss4:x,ss5:A,ss6:b,ss7:E,sz1:_,sz2:I,sz3:O,sz11:T,sz12:z,sz13:S,sz21:P,sz22:R,sz23:D,sz31:N,sz32:C,sz33:j,xgh2:2*f*B,xgh3:2*f*(Z-G),xgh4:-18*f*h,xh2:-2*m*Y,xh3:-2*m*(H-J),xi2:2*m*U,xi3:2*m*(q-F),xl2:-2*d*k,xl3:-2*d*(V-L),xl4:-2*d*(-21-9*re)*h,nm:X,z1:L,z2:k,z3:V,z11:F,z12:U,z13:q,z21:J,z22:Y,z23:H,z31:G,z32:B,z33:Z,zmol:(.2299715*oe-fe+4.7199672)%c,zmos:(6.2565837+.017201977*oe)%c}}static dsinit_(e){var{xke:t,cosim:a,argpo:r,s1:n,s2:i,s3:o,s4:s,s5:h,sinim:c,ss1:u,ss2:m,ss3:d,ss4:f,ss5:g,sz1:M,sz3:v,sz11:y,sz13:w,sz21:x,sz23:A,sz31:b,sz33:E,t:_,tc:T,gsto:z,mo:S,mdot:I,no:P,nodeo:R,nodedot:D,xPIdot:O,z1:N,z3:C,z11:j,z13:L,z21:F,z23:U,z31:q,z33:k,ecco:J,eccsq:Y}=e,{emsq:H,em:V,argpm:G,inclm:B,mm:Z,nm:X,nodem:W,irez:K,atime:Q,d2201:$,d2211:ee,d3210:te,d3222:ae,d4410:re,d4422:ne,d5220:ie,d5232:oe,d5421:se,d5433:le,dedt:he,didt:ce,dmdt:ue,dnodt:me,domdt:de,del1:fe,del2:ge,del3:Me,xfact:pe,xlamo:ve,xli:ye,xni:we}=e,xe=.0043752690880113,Ae=.00015835218,be=119459e-10;K=0,X<.0052359877&&X>.0034906585&&(K=1),X>=.00826&&X<=.00924&&V>=.5&&(K=2);var Ee=-be*m*(x+A);(B<.052359877||B>p-.052359877)&&(Ee=0),0!==c&&(Ee/=c),ue=-be*d*(M+v-14-6*H)-Ae*o*(N+C-14-6*H);var _e=-Ae*i*(F+U);(B<.052359877||B>p-.052359877)&&(_e=0),de=f*be*(b+E-6)-a*Ee+s*Ae*(q+k-6),me=Ee,0!==c&&(de-=a/c*_e,me+=_e/c);var Te=(z+T*xe)%l;if(V+=(he=u*be*g+n*Ae*h)*_,0!==K){var ze=(X/t)**(2/3);if(2===K){var Se,Ie,Pe,Re,De,Oe,Ne,Ce,je,Le=a*a,Fe=V,Ue=H,qe=(V=J)*(H=Y);V<=.65?(Se=3.616-13.247*V+16.29*H,Ie=117.39*V-19.302-228.419*H+156.591*qe,Pe=109.7927*V-18.9068-214.6334*H+146.5816*qe,Re=242.694*V-41.122-471.094*H+313.953*qe,De=841.88*V-146.407-1629.014*H+1083.435*qe,Oe=3017.977*V-532.114-5740.032*H+3708.276*qe):(Se=331.819*V-72.099-508.738*H+266.724*qe,Ie=1582.851*V-346.844-2415.925*H+1246.113*qe,Pe=1554.908*V-342.585-2366.899*H+1215.972*qe,Re=4758.686*V-1052.797-7193.992*H+3651.957*qe,De=16178.11*V-3581.69-24462.77*H+12422.52*qe,Oe=V>.715?29936.92*V-5149.66-54087.36*H+31324.56*qe:1464.74-4664.75*V+3763.64*H),V<.7?(je=4988.61*V-919.2277-9064.77*H+5542.21*qe,Ne=4568.6173*V-822.71072-8491.4146*H+5337.524*qe,Ce=4690.25*V-853.666-8624.77*H+5341.4*qe):(je=161616.52*V-37995.78-229838.2*H+109377.94*qe,Ne=218913.95*V-51752.104-309468.16*H+146349.42*qe,Ce=170470.89*V-40023.88-242699.48*H+115605.82*qe);var ke=c*c,Je=.75*(1+2*a+Le),Ye=X*X*3*(ze*ze),He=17891679e-13*Ye;$=He*Je*(-.306-.44*(V-.64)),ee=He*(1.5*ke)*Se,te=(He=3.7393792e-7*(Ye*=ze))*(1.875*c*(1-2*a-3*Le))*Ie,ae=He*(-1.875*c*(1+2*a-3*Le))*Pe,re=(He=2*(Ye*=ze)*7.3636953e-9)*(35*ke*Je)*Re,ne=He*(39.375*ke*ke)*De,ie=(He=1.1428639e-7*(Ye*=ze))*(9.84375*c*(ke*(1-2*a-5*Le)+.33333333*(4*a-2+6*Le)))*Oe,oe=He*(c*(4.92187512*ke*(-2-4*a+10*Le)+6.56250012*(1+2*a-3*Le)))*Ce,se=(He=2*Ye*2.1765803e-9)*(29.53125*c*(2-8*a+Le*(8*a-12+10*Le)))*Ne,le=He*(29.53125*c*(-2-8*a+Le*(12+8*a-10*Le)))*je,ve=(S+R+R-(Te+Te))%l,pe=I+ue+2*(D+me-xe)-P,V=Fe,H=Ue}if(1===K){var Ve=1+a;ge=2*(fe=3*X*X*ze*ze)*(.75*(1+a)*(1+a))*(1+H*(.8125*H-2.5))*17891679e-13,Me=3*fe*(Ve*=1.875*Ve*Ve)*(1+H*(6.60937*H-6))*2.2123015e-7*ze,fe=fe*(.9375*c*c*(1+3*a)-.75*(1+a))*(1+2*H)*21460748e-13*ze,ve=(S+R+r-Te)%l,pe=I+O+ue+de+me-(P+xe)}ye=ve,we=P,Q=0,X=P+0}return{em:V,argpm:G+=de*_,inclm:B+=(ce=m*be*(y+w)+i*Ae*(j+L))*_,mm:Z+=ue*_,nm:X,nodem:W+=me*_,irez:K,atime:Q,d2201:$,d2211:ee,d3210:te,d3222:ae,d4410:re,d4422:ne,d5220:ie,d5232:oe,d5421:se,d5433:le,dedt:he,didt:ce,dmdt:ue,dndt:0,dnodt:me,domdt:de,del1:fe,del2:ge,del3:Me,xfact:pe,xlamo:ve,xli:ye,xni:we}}static dspace_(e,t,a,r,n,i,o,s,h,c,u,m,d,f,g,M,p,v,y,w,x,A,b,E,_,T,z,S,I,P,R,D,O,N,C,j){var L=.13130908,F=2.8843198,U=.37448087,q=5.7686396,k=.95240898,J=1.8014998,Y=1.050833,H=4.4108898,V=259200,G=0,B=(E+.0043752690880113*b)%l;if(I+=m*A,R+=M*A,P+=y*A,C+=v*A,O+=p*A,0!==e){var Z;(0===S||A*S<=0||Math.abs(A)<Math.abs(S))&&(S=0,N=z,D=T),Z=A>0?720:-720;for(var X=0,W=0,K=0,Q=0,$=0,ee=0,te=0,ae=381;381===ae;)2!==e?(ee=d*Math.sin(D-L)+f*Math.sin(2*(D-F))+g*Math.sin(3*(D-U)),Q=N+_,$=d*Math.cos(D-L)+2*f*Math.cos(2*(D-F))+3*g*Math.cos(3*(D-U)),$*=Q):(K=(te=w+x*S)+te,W=D+D,ee=t*Math.sin(K+D-q)+a*Math.sin(D-q)+r*Math.sin(te+D-k)+n*Math.sin(-te+D-k)+i*Math.sin(K+W-J)+o*Math.sin(W-J)+s*Math.sin(te+D-Y)+h*Math.sin(-te+D-Y)+c*Math.sin(te+W-H)+u*Math.sin(-te+W-H),Q=N+_,$=t*Math.cos(K+D-q)+a*Math.cos(D-q)+r*Math.cos(te+D-k)+n*Math.cos(-te+D-k)+s*Math.cos(te+D-Y)+h*Math.cos(-te+D-Y)+2*(i*Math.cos(K+W-J)+o*Math.cos(W-J)+c*Math.cos(te+W-H)+u*Math.cos(-te+W-H)),$*=Q),Math.abs(A-S)>=720?ae=381:(X=A-S,ae=0),381===ae&&(D+=Q*Z+ee*V,N+=ee*Z+$*V,S+=Z);j=N+ee*X+$*X*X*.5;var re=D+Q*X+ee*X*X*.5;1!==e?(O=re-2*C+2*B,G=j-z):(O=re-C-P+B,G=j-z),j=z+G}return[I,P,R,O,C,j]}static getgravconst_(e){var t,a,r,n,i,o,s,l;switch(e){case"wgs72old":i=398600.79964,o=6378.135,s=1/(l=.0743669161),n=-165597e-11,r=(a=-253881e-11)/(t=.001082616);break;case"wgs72":i=398600.8,o=6378.135,s=1/(l=60/Math.sqrt(o*o*o/i)),n=-165597e-11,r=(a=-253881e-11)/(t=.001082616);break;case"wgs84":i=398600.5,o=6378.137,s=1/(l=60/Math.sqrt(o*o*o/i)),n=-161098761e-14,r=(a=-253215306e-14)/(t=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(e))}return{tumin:s,mus:i,radiusearthkm:o,xke:l,j2:t,j3:a,j4:n,j3oj2:r}}static initl_(e){var t,{opsmode:a,ecco:r,epoch:n,inclo:i,xke:o,j2:s}=e,{no:l}=e,{PI:h}=Math,c=2*h,u=2/3,m=r*r,d=1-m,f=Math.sqrt(d),g=Math.cos(i),M=g*g,p=(o/l)**u,v=.75*s*(3*M-1)/(f*d),y=v/(p*p),w=p*(1-y*y-y*(1/3+134*y*y/81)),x=(o/(l/=1+(y=v/(w*w))))**u,A=Math.sin(i),b=x*d,E=1-5*M,_=-E-M-M,T=1/x,z=b*b,S=x*(1-r);if("a"===a){var I=n-7305,P=Math.floor(I+1e-8),R=.017202791694070362;(t=(1.7321343856509375+R*P+(R+c)*(I-P)+I*I*5075514194322695e-30)%c)<0&&(t+=c)}else t=Ve.gstime(n+2433281.5);return{no:l,method:"n",ainv:T,ao:x,con41:_,con42:E,cosio:g,cosio2:M,eccsq:m,omeosq:d,posq:z,rp:S,rteosq:f,sinio:A,gsto:t}}static sgp4init_(e,a){var{whichconst:r=fe.wgs72,opsmode:n=t.IMPROVED,satn:i=e.satnum,epoch:o,xbstar:s,xecco:h,xargpo:c,xinclo:u,xndot:m,xnddot:d,xmo:f,xno:g,xnodeo:M}=a;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.PInco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0;var p=Ve.getgravconst_(r);e.tumin=p.tumin,e.mus=p.mus,e.radiusearthkm=p.radiusearthkm,e.xke=p.xke,e.j2=p.j2,e.j3=p.j3,e.j4=p.j4,e.j3oj2=p.j3oj2;var{j2:w}=p,{j4:x}=p,{xke:A}=p,{j3oj2:b}=p;e.error=0,e.operationmode=n;var E=i.split("")[0].toLowerCase();isNaN(parseInt(E))&&" "!==E?e.satnum=parseInt(E.charCodeAt(0)-96+9+e.satnum.slice(1,5)).toString():e.satnum=i,e.bstar=s,e.ndot=m,e.nddot=d,e.ecco=h,e.argpo=c,e.inclo=u,e.mo=f,e.no=g,e.nodeo=M;var _=78/e.radiusearthkm+1,T=42/e.radiusearthkm,z=T*T*T*T;e.init="y",e.t=0;var S={ecco:e.ecco,epoch:o,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode,xke:e.xke,j2:e.j2},I=Ve.initl_(S),{ao:P,con42:R,cosio:D,cosio2:O,eccsq:N,omeosq:C,posq:j,rp:L,rteosq:F,sinio:U}=I;if(e.no=I.no,e.con41=I.con41,e.gsto=I.gsto,e.a=(e.no*e.tumin)**(-2/3),e.alta=e.a*(1+e.ecco)-1,e.altp=e.a*(1-e.ecco)-1,e.error=0,C>=0||e.no>=0){e.isimp=0,L<220/e.radiusearthkm+1&&(e.isimp=1);var q=_,k=z,J=(L-1)*e.radiusearthkm;if(J<156){q=J-78,J<98&&(q=20);var Y=(120-q)/e.radiusearthkm;k=Y*Y*Y*Y,q=q/e.radiusearthkm+1}var H=1/j,V=1/(P-q);e.eta=P*e.ecco*V;var G=e.eta*e.eta,B=e.ecco*e.eta,Z=Math.abs(1-G),X=k*V**4,W=X/Z**3.5,K=W*e.no*(P*(1+1.5*G+B*(4+G))+.375*w*V/Z*e.con41*(8+3*G*(8+G)));e.cc1=e.bstar*K;var Q=0;e.ecco>1e-4&&(Q=-2*X*V*b*e.no*U/e.ecco),e.x1mth2=1-O,e.cc4=2*e.no*W*P*C*(e.eta*(2+.5*G)+e.ecco*(.5+2*G)-w*V/(P*Z)*(-3*e.con41*(1-2*B+G*(1.5-.5*B))+.75*e.x1mth2*(2*G-B*(1+G))*Math.cos(2*e.argpo))),e.cc5=2*W*P*C*(1+2.75*(G+B)+B*G);var $=O*O,ee=1.5*w*H*e.no,te=.5*ee*w*H,ae=-.46875*x*H*H*e.no;e.mdot=e.no+.5*ee*F*e.con41+.0625*te*F*(13-78*O+137*$),e.argpdot=-.5*ee*R+.0625*te*(7-114*O+395*$)+ae*(3-36*O+49*$);var re=-ee*D;e.nodedot=re+(.5*te*(4-19*O)+2*ae*(3-7*O))*D;var ne=e.argpdot+e.nodedot;e.omgcof=e.bstar*Q*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-v*X*e.bstar/B),e.nodecf=3.5*C*re*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(D+1)>15e-13?e.xlcof=-.25*b*U*(3+5*D)/(1+D):e.xlcof=-.25*b*U*(3+5*D)/y,e.aycof=-.5*b*U;var ie=1+e.eta*Math.cos(e.mo);if(e.delmo=ie*ie*ie,e.sinmao=Math.sin(e.mo),e.x7thm1=7*O-1,l/e.no>=225){e.method="d",e.isimp=1;var oe=e.inclo,se={epoch:o,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,PInco:e.PInco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos},le=Ve.dscom_(se);e.e3=le.e3,e.ee2=le.ee2,e.peo=le.peo,e.pgho=le.pgho,e.pho=le.pho,e.PInco=le.PInco,e.plo=le.plo,e.se2=le.se2,e.se3=le.se3,e.sgh2=le.sgh2,e.sgh3=le.sgh3,e.sgh4=le.sgh4,e.sh2=le.sh2,e.sh3=le.sh3,e.si2=le.si2,e.si3=le.si3,e.sl2=le.sl2,e.sl3=le.sl3,e.sl4=le.sl4;var{sinim:he,cosim:ce,em:ue,emsq:me,s1:de,s2:ge,s3:Me,s4:pe,s5:ve,ss1:ye,ss2:we,ss3:xe,ss4:Ae,ss5:be,sz1:Ee,sz3:_e,sz11:Te,sz13:ze,sz21:Se,sz23:Ie,sz31:Pe,sz33:Re}=le;e.xgh2=le.xgh2,e.xgh3=le.xgh3,e.xgh4=le.xgh4,e.xh2=le.xh2,e.xh3=le.xh3,e.xi2=le.xi2,e.xi3=le.xi3,e.xl2=le.xl2,e.xl3=le.xl3,e.xl4=le.xl4,e.zmol=le.zmol,e.zmos=le.zmos;var{nm:De,z1:Oe,z3:Ne,z11:Ce,z13:je,z21:Le,z23:Fe,z31:Ue,z33:qe}=le,ke={inclo:oe,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode},Je=Ve.dpper_(e,ke);e.ecco=Je.ep,e.inclo=Je.inclp,e.nodeo=Je.nodep,e.argpo=Je.argpp,e.mo=Je.mp;var Ye={xke:A,cosim:ce,emsq:me,argpo:e.argpo,s1:de,s2:ge,s3:Me,s4:pe,s5:ve,sinim:he,ss1:ye,ss2:we,ss3:xe,ss4:Ae,ss5:be,sz1:Ee,sz3:_e,sz11:Te,sz13:ze,sz21:Se,sz23:Ie,sz31:Pe,sz33:Re,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xPIdot:ne,z1:Oe,z3:Ne,z11:Ce,z13:je,z21:Le,z23:Fe,z31:Ue,z33:qe,ecco:e.ecco,eccsq:N,em:ue,argpm:0,inclm:oe,mm:0,nm:De,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni},He=Ve.dsinit_(Ye);e.irez=He.irez,e.atime=He.atime,e.d2201=He.d2201,e.d2211=He.d2211,e.d3210=He.d3210,e.d3222=He.d3222,e.d4410=He.d4410,e.d4422=He.d4422,e.d5220=He.d5220,e.d5232=He.d5232,e.d5421=He.d5421,e.d5433=He.d5433,e.dedt=He.dedt,e.didt=He.didt,e.dmdt=He.dmdt,e.dnodt=He.dnodt,e.domdt=He.domdt,e.del1=He.del1,e.del2=He.del2,e.del3=He.del3,e.xfact=He.xfact,e.xlamo=He.xlamo,e.xli=He.xli,e.xni=He.xni}if(1!==e.isimp){var Ge=e.cc1*e.cc1;e.d2=4*P*V*Ge;var Be=e.d2*V*e.cc1/3;e.d3=(17*P+q)*Be,e.d4=.5*Be*P*V*(221*P+31*q)*e.cc1,e.t3cof=e.d2+2*Ge,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*Ge)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*Ge*(2*e.d2+Ge))}}Ve.propagate(e,0),e.init="n"}}function Ge(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Be{constructor(e,t){Ge(this,"start",void 0),Ge(this,"stop",void 0),Ge(this,"length",void 0),this.start=e-1,this.stop=t,this.length=this.stop-this.start}}function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){We(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function We(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ke{constructor(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.AFSPC,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe.wgs72;We(this,"line1",void 0),We(this,"line2",void 0),We(this,"epoch",void 0),We(this,"satnum",void 0),We(this,"satrec_",void 0),this.line1=e,this.line2=a,this.epoch=Ke.parseEpoch_(e.substring(18,32)),this.satnum=parseInt(Ke.convertA5to6Digit(e.substring(2,7))),this.satrec_=Ve.createSatrec(e,a,n,r)}toString(){return"".concat(this.line1,"\n").concat(this.line2)}get semimajorAxis(){return Ke.tleSma_(this.line2)}get eccentricity(){return Ke.tleEcc_(this.line2)}get inclination(){return Ke.tleInc_(this.line2)}get inclinationDegrees(){return Ke.tleInc_(this.line2)*c}get apogee(){return this.semimajorAxis*(1+this.eccentricity)}get perigee(){return this.semimajorAxis*(1-this.eccentricity)}get period(){return l*Math.sqrt(this.semimajorAxis**3/x)/60}static parseEpoch_(e){var t=parseInt(e.substring(0,2));t+=t>=57?1900:2e3;var a=parseFloat(e.substring(2,14))-1;return ee.fromDateTimeString("".concat(t,"-01-01T00:00:00.000Z")).roll(a*f)}propagate(e){var t=new Float64Array(3),a=new Float64Array(3),r=Ve.propagate(this.satrec_,e.difference(this.epoch)/60);if(!r)throw new Error("Propagation failed");return Ke.sv2rv_(r,t,a),new Fe(e,new Te(t[0],t[1],t[2]),new Te(a[0],a[1],a[2]))}static sv2rv_(e,t,a){var r=e.position,n=e.velocity;t[0]=r.x,t[1]=r.y,t[2]=r.z,a[0]=n.x,a[1]=n.y,a[2]=n.z}currentState_(){var e=new Float64Array(3),t=new Float64Array(3),a=Ve.propagate(this.satrec_,0);return Ke.sv2rv_(a,e,t),new Fe(this.epoch,new Te(e[0],e[1],e[2]),new Te(t[0],t[1],t[2]))}get state(){return this.currentState_()}static tleSma_(e){var t=parseFloat(e.substring(52,63));return x**(1/3)/(l*t/f)**(2/3)}static tleEcc_(e){return parseFloat("0.".concat(e.substring(26,33)))}static tleInc_(e){return parseFloat(e.substring(8,16))*h}static fromClassicalElements(e){var{epochYr:t,epochDay:a}=e.epoch.toEpochYearAndDay(),r=He.createTle({inc:He.inclination(e.inclinationDegrees),meanmo:He.meanMotion(e.revsPerDay),ecen:He.eccentricity(e.eccentricity.toFixed(7)),argPe:He.argumentOfPerigee(e.argPerigeeDegrees),meana:He.meanAnomaly(z(e.eccentricity,e.trueAnomaly).m*c),rasc:He.rightAscension(e.rightAscensionDegrees),epochday:a,epochyr:t,scc:"00001",intl:"58001A  "});return new Ke(r.tle1,r.tle2)}static argOfPerigee(e){var t=parseFloat(e.substring(Ke.argPerigee_.start,Ke.argPerigee_.stop));if(!(t>=0&&t<360))throw new Error("Invalid argument of perigee: ".concat(t));return I(t,4)}static bstar(e){var t=Ke.bstar_.start+1,a=Ke.bstar_.start+6,r=Ke.bstar_.stop-1,n=e.substring(Ke.bstar_.start,t),i=parseFloat("0.".concat(e.substring(t,a))),o=e.substring(a,r),s=parseInt(e.substring(r,Ke.bstar_.stop));if("-"===o)s*=-1;else if("+"!==o)throw new Error("Invalid BSTAR symbol: ".concat(n));if(i*=10**s,"-"===n)i*=-1;else if("+"!==n&&" "!==n)throw new Error("Invalid BSTAR symbol: ".concat(n));return I(i,14)}static checksum(e){return parseInt(e.substring(Ke.checksum_.start,Ke.checksum_.stop))}static classification(e){return e.substring(Ke.classification_.start,Ke.classification_.stop)}static eccentricity(e){var t=parseFloat("0.".concat(e.substring(Ke.eccentricity_.start,Ke.eccentricity_.stop)));if(!(t>=0&&t<=1))throw new Error("Invalid eccentricity: ".concat(t));return I(t,7)}static elsetNum(e){return parseInt(e.substring(Ke.elsetNum_.start,Ke.elsetNum_.stop))}static ephemerisType(e){var t=parseInt(e.substring(Ke.ephemerisType_.start,Ke.ephemerisType_.stop));if(0!==t&&4!==t)throw new Error("Invalid ephemeris type");if(4===t)throw new Error("SGP4-XP is not supported");return t}static epochDay(e){var t=parseFloat(e.substring(Ke.epochDay_.start,Ke.epochDay_.stop));if(t<1||t>365.99999999)throw new Error("Invalid epoch day");return I(t,8)}static epochYear(e){var t=parseInt(e.substring(Ke.epochYear_.start,Ke.epochYear_.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t}static epochYearFull(e){var t=parseInt(e.substring(Ke.epochYear_.start,Ke.epochYear_.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t<57?t+2e3:t+1900}static inclination(e){var t=parseFloat(e.substring(Ke.inclination_.start,Ke.inclination_.stop));if(t<0||t>180)throw new Error("Invalid inclination: ".concat(t));return I(t,4)}static intlDes(e){return e.substring(Ke.intlDes_.start,Ke.intlDes_.stop).trim()}static intlDesLaunchNum(e){return parseInt(e.substring(Ke.intlDesLaunchNum_.start,Ke.intlDesLaunchNum_.stop))}static intlDesLaunchPiece(e){return e.substring(Ke.intlDesLaunchPiece_.start,Ke.intlDesLaunchPiece_.stop).trim()}static intlDesYear(e){return parseInt(e.substring(Ke.intlDesYear_.start,Ke.intlDesYear_.stop))}static lineNumber(e){var t=parseInt(e.substring(Ke.lineNumber_.start,Ke.lineNumber_.stop));if(1!==t&&2!==t)throw new Error("Invalid line number");return t}static meanAnomaly(e){var t=parseFloat(e.substring(Ke.meanAnom_.start,Ke.meanAnom_.stop));if(!(t>=0&&t<=360))throw new Error("Invalid mean anomaly: ".concat(t));return I(t,4)}static meanMoDev1(e){var t=parseFloat(e.substring(Ke.meanMoDev1_.start,Ke.meanMoDev1_.stop));if(isNaN(t))throw new Error("Invalid first derivative of mean motion.");return I(t,8)}static meanMoDev2(e){var t=parseFloat(e.substring(Ke.meanMoDev2_.start,Ke.meanMoDev2_.stop));if(isNaN(t))throw new Error("Invalid second derivative of mean motion.");return t}static meanMotion(e){var t=parseFloat(e.substring(Ke.meanMo_.start,Ke.meanMo_.stop));if(!(t>0&&t<=17))throw new Error("Invalid mean motion: ".concat(t));return I(t,8)}static period(e){return 1440/Ke.meanMotion(e)}static rightAscension(e){var t=parseFloat(e.substring(Ke.rightAscension_.start,Ke.rightAscension_.stop));if(!(t>=0&&t<=360))throw new Error("Invalid Right Ascension: ".concat(t));return I(t,4)}static rawSatNum(e){return e.substring(Ke.satNum_.start,Ke.satNum_.stop)}static revNum(e){return parseInt(e.substring(Ke.revNum_.start,Ke.revNum_.stop))}static satNum(e){var t=e.substring(Ke.satNum_.start,Ke.satNum_.stop),a=Ke.convertA5to6Digit(t);return parseInt(a)}static parseLine1(e){return{lineNumber1:Ke.lineNumber(e),satNum:Ke.satNum(e),satNumRaw:Ke.rawSatNum(e),classification:Ke.classification(e),intlDes:Ke.intlDes(e),intlDesYear:Ke.intlDesYear(e),intlDesLaunchNum:Ke.intlDesLaunchNum(e),intlDesLaunchPiece:Ke.intlDesLaunchPiece(e),epochYear:Ke.epochYear(e),epochYearFull:Ke.epochYearFull(e),epochDay:Ke.epochDay(e),meanMoDev1:Ke.meanMoDev1(e),meanMoDev2:Ke.meanMoDev2(e),bstar:Ke.bstar(e),ephemerisType:Ke.ephemerisType(e),elsetNum:Ke.elsetNum(e),checksum1:Ke.checksum(e)}}static parseLine2(e){return{lineNumber2:Ke.lineNumber(e),satNum:Ke.satNum(e),satNumRaw:Ke.rawSatNum(e),inclination:Ke.inclination(e),rightAscension:Ke.rightAscension(e),eccentricity:Ke.eccentricity(e),argOfPerigee:Ke.argOfPerigee(e),meanAnomaly:Ke.meanAnomaly(e),meanMotion:Ke.meanMotion(e),revNum:Ke.revNum(e),checksum2:Ke.checksum(e),period:Ke.period(e)}}static parse(e,t){var a=Ke.parseLine1(e),r=Ke.parseLine2(t);if(a.satNum!==r.satNum)throw new Error("Satellite numbers do not match");if(a.satNumRaw!==r.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==a.lineNumber1)throw new Error("First line number must be 1");if(2!==r.lineNumber2)throw new Error("Second line number must be 2");return{satNum:a.satNum,intlDes:a.intlDes,epochYear:a.epochYear,epochDay:a.epochDay,meanMoDev1:a.meanMoDev1,meanMoDev2:a.meanMoDev2,bstar:a.bstar,inclination:r.inclination,rightAscension:r.rightAscension,eccentricity:r.eccentricity,argOfPerigee:r.argOfPerigee,meanAnomaly:r.meanAnomaly,meanMotion:r.meanMotion,period:r.period}}static parseAll(e,t){var a=Ke.parseLine1(e),r=Ke.parseLine2(t);if(a.satNum!==r.satNum)throw new Error("Satellite numbers do not match");if(a.satNumRaw!==r.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==a.lineNumber1)throw new Error("First line number must be 1");if(2!==r.lineNumber2)throw new Error("Second line number must be 2");return Xe(Xe({},a),r)}static convert6DigitToA5(e){if(e.length<6)return e;if(RegExp(/[A-Z\u017F\u212A]/i,"u").test(e[0]))return e;var t=e.slice(2,6),a=parseInt("".concat(e[0]).concat(e[1]));return a=a+(a>=18?1:0)+(a>=24?1:0),"".concat(String.fromCharCode(a+55)).concat(t)}static convertA5to6Digit(e){var t=e.toUpperCase().split("");if(t[0]in Ke.alpha5_){var a=t[0];t[0]=Ke.alpha5_[a]}return t.join("")}}function Qe(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}We(Ke,"alpha5_",{A:"10",B:"11",C:"12",D:"13",E:"14",F:"15",G:"16",H:"17",J:"18",K:"19",L:"20",M:"21",N:"22",P:"23",Q:"24",R:"25",S:"26",T:"27",U:"28",V:"29",W:"30",X:"31",Y:"32",Z:"33"}),We(Ke,"argPerigee_",new Be(35,42)),We(Ke,"bstar_",new Be(54,61)),We(Ke,"checksum_",new Be(69,69)),We(Ke,"classification_",new Be(8,8)),We(Ke,"eccentricity_",new Be(27,33)),We(Ke,"elsetNum_",new Be(65,68)),We(Ke,"ephemerisType_",new Be(63,63)),We(Ke,"epochDay_",new Be(21,32)),We(Ke,"epochYear_",new Be(19,20)),We(Ke,"inclination_",new Be(9,16)),We(Ke,"intlDesLaunchNum_",new Be(12,14)),We(Ke,"intlDesLaunchPiece_",new Be(15,17)),We(Ke,"intlDesYear_",new Be(10,11)),We(Ke,"intlDes_",new Be(10,17)),We(Ke,"lineNumber_",new Be(1,1)),We(Ke,"meanAnom_",new Be(44,51)),We(Ke,"meanMoDev1_",new Be(34,43)),We(Ke,"meanMoDev2_",new Be(45,52)),We(Ke,"meanMo_",new Be(53,63)),We(Ke,"rightAscension_",new Be(18,25)),We(Ke,"revNum_",new Be(64,68)),We(Ke,"satNum_",new Be(3,7));class $e extends Pe{constructor(e){if(e.type)switch(e.type){case i.OPTICAL:case i.MECHANICAL:case i.PHASED_ARRAY_RADAR:case i.OBSERVER:case i.BISTATIC_RADIO_TELESCOPE:case i.SHORT_TERM_FENCE:break;default:throw new Error("Invalid sensor type")}super(e),Qe(this,"minRng",void 0),Qe(this,"minAz",void 0),Qe(this,"minEl",void 0),Qe(this,"maxRng",void 0),Qe(this,"maxAz",void 0),Qe(this,"maxEl",void 0),Qe(this,"minRng2",void 0),Qe(this,"minAz2",void 0),Qe(this,"minEl2",void 0),Qe(this,"maxRng2",void 0),Qe(this,"maxAz2",void 0),Qe(this,"maxEl2",void 0),this.validateSensorInputData_(e),this.minRng=e.minRng,this.minAz=e.minAz,this.minEl=e.minEl,this.maxRng=e.maxRng,this.maxAz=e.maxAz,this.maxEl=e.maxEl,this.minRng2=e.minRng2,this.minAz2=e.minAz2,this.minEl2=e.minEl2,this.maxRng2=e.maxRng2,this.maxAz2=e.maxAz2,this.maxEl2=e.maxEl2}isSensor(){return!0}calculatePasses(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,r=!1,i=0,o=[],s=a.getTime(),l=0;l<e;l++){var h=new Date(s+1e3*l),c=this.rae(t,h),u=this.isRaeInFov(c);if(0===l){var m=this.rae(t,new Date(a.getTime()-1e3));r=this.isRaeInFov(m)}var d=$e.getPassType_(u,r);if(i=Math.max(i,c.el),d===n.ENTER||d===n.EXIT){var f={type:d,time:h,az:c.az,el:c.el,rng:c.rng};d===n.EXIT&&(f.maxElPass=i),o.push(f),i=0}r=u}return o}isRaeInFov(e){if(e.el<this.minEl||e.el>this.maxEl)return!1;if(e.rng<this.minRng||e.rng>this.maxRng)return!1;if(this.minAz>this.maxAz){if(e.az<this.minAz&&e.az>this.maxAz)return!1}else if(e.az<this.minAz||e.az>this.maxAz)return!1;return!0}isSatInFov(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return this.isRaeInFov(this.rae(e,t))}isDeepSpace(){return this.maxRng>6e3}isNearEarth(){return this.maxRng<=6e3}toJ2000(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=we(e).gmst,a=se(this.llaRad(),t);return new Ue(ee.fromDateTime(e),new Te(a.x,a.y,a.z),new Te(0,0,0))}static getPassType_(e,t){var a=n.OUT_OF_VIEW;return e&&!t?a=n.ENTER:!e&&t?a=n.EXIT:e&&t&&(a=n.IN_VIEW),a}validateFov_(e){this.validateParameter(e.maxAz,0,360,"Invalid maximum azimuth - must be between 0 and 360"),this.validateParameter(e.minAz,0,360,"Invalid maximum azimuth - must be between 0 and 360"),this.validateParameter(e.maxEl,-15,180,"Invalid maximum elevation - must be between 0 and 180"),this.validateParameter(e.minEl,-15,90,"Invalid minimum elevation - must be between 0 and 90"),this.validateParameter(e.maxRng,0,null,"Invalid maximum range - must be greater than 0"),this.validateParameter(e.minRng,0,null,"Invalid minimum range - must be greater than 0")}validateFov2_(e){this.validateParameter(e.maxAz2,0,360,"Invalid maximum azimuth2 - must be between 0 and 360"),this.validateParameter(e.minAz2,0,360,"Invalid maximum azimuth2 - must be between 0 and 360"),this.validateParameter(e.maxEl2,-15,180,"Invalid maximum elevation2 - must be between 0 and 180"),this.validateParameter(e.minEl2,-15,90,"Invalid minimum elevation2 - must be between 0 and 90"),this.validateParameter(e.maxRng2,0,null,"Invalid maximum range2 - must be greater than 0"),this.validateParameter(e.minRng2,0,null,"Invalid minimum range2 - must be greater than 0")}validateSensorInputData_(e){this.validateLla_(e),this.validateFov_(e),(e.minAz2||e.maxAz2||e.minEl2||e.maxEl2||e.minRng2||e.maxRng2)&&this.validateFov2_(e)}validateLla_(e){this.validateParameter(e.lat,-90,90,"Invalid latitude - must be between -90 and 90"),this.validateParameter(e.lon,-180,180,"Invalid longitude - must be between -180 and 180"),this.validateParameter(e.alt,0,null,"Invalid altitude - must be greater than 0")}}class et{constructor(){}static azEl(e,t,a,r,n){var i={ra:r,dec:n,dist:0},o=at.azEl(e,t,a,i),s=o.el+et.atmosphericRefraction(o.el);return{az:o.az*c,el:s*c}}static atmosphericRefraction(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))}static declination(e,t){return Math.asin(Math.sin(t)*Math.cos(at.e)+Math.cos(t)*Math.sin(at.e)*Math.sin(e))}static rightAscension(e,t){return Math.atan2(Math.sin(e)*Math.cos(at.e)-Math.tan(t)*Math.sin(at.e),Math.cos(e))}static elevation(e,t,a){return Math.asin(Math.sin(t)*Math.sin(a)+Math.cos(t)*Math.cos(a)*Math.cos(e))}static azimuth(e,t,a){return Math.PI+Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(t)-Math.tan(a)*Math.cos(t))}}function tt(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class at{constructor(){}static azEl(e,t,a,r){var n,i=-a*h,o=t*h,s=at.date2jSince2000(e);null!==(n=r)&&void 0!==n||(r=at.raDec(e));var l=at.siderealTime(s,i)-r.ra;return{az:et.azimuth(l,o,r.dec),el:et.elevation(l,o,r.dec)}}static date2jSince2000(e){return e.getTime()/d+at.J1970_-at.J2000_}static diameter(e,t){return T(2*this.radius,e.subtract(t).magnitude(),a.Sphere)}static eclipseAngles(e,t){var a=t.subtract(e),r=e.magnitude();return[a.angle(e.negate()),Math.asin(De.radiusEquator/r),Math.asin(this.radius/a.magnitude())]}static eclipticLatitude(e){var t=l/360,a=e-.00569-.00478*Math.sin(t*e);return l*(a+3e-4*Math.sin(2*t*a))}static eclipticLongitude(e){return e+h*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*h+Math.PI}static getSetJulian(e,t,a,r,n,i,o){var s=at.hourAngle(e,a,r),l=at.approxTransit_(s,t,n);return at.solarTransitJulian(l,i,o)}static getSunTimeByAz(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(isNaN(r))throw new Error("azimuth missing");if(isNaN(t))throw new Error("latitude missing");if(isNaN(a))throw new Error("longitude missing");n&&(r*=h);var i=e instanceof Date?e:new Date(e),o=h*-a,s=h*t,l=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0).getTime(),c=d;for(l+=c;c>200;){var u=new Date(l),m=at.date2jSince2000(u),f=at.raDec(u),g=at.siderealTime(m,o)-f.ra;c/=2,et.azimuth(g,s,f.dec)<r?l+=c:l-=c}return new Date(Math.floor(l))}static getTimes(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(isNaN(t))throw new Error("latitude missing");if(isNaN(a))throw new Error("longitude missing");var i=e instanceof Date?e:new Date(e);n?i.setUTCHours(12,0,0,0):i.setHours(12,0,0,0);for(var o=[],s=0,l=0,c=0,{Jnoon:u,dh:m,lw:d,phi:f,dec:g,n:M,M:p,L:v}=at.calculateJnoon_(a,t,r,i),y={solarNoon:at.julian2date(u),nadir:at.julian2date(u+.5)},w=0,x=at.times_.length;w<x;w+=1)s=((o=at.times_[w])[0]+m)*h,c=u-((l=at.getSetJ_(s,d,f,g,M,p,v))-u),y[o[1]]=at.julian2date(c),y[o[2]]=at.julian2date(l);return y}static hourAngle(e,t,a){return Math.acos((Math.sin(e)-Math.sin(t)*Math.sin(a))/(Math.cos(t)*Math.cos(a)))}static julian2date(e){return new Date((e-at.J1970_)*d)}static julianCycle(e,t){var a=-t*h,r=at.date2jSince2000(e);return Math.round(r-at.J0_-a/(2*l/2))}static lightingRatio(e,t){var[a,r,n]=at.eclipseAngles(e,t);if(a-r+n<=1e-10)return 0;if(a-r-n<-1e-10){var i=a*a,o=1/(2*a),s=r*r,l=n*n,h=s-l,c=(i-h)*o,u=(i+h)*o,m=c/n,d=l-c*c,f=u/r,g=s-u*u;return 1-(l*Math.acos(m)-c*Math.sqrt(d)+(s*Math.acos(f)-u*Math.sqrt(g)))/(Math.PI*l)}return 1}static sunlightLegacy(e,t){var a=1,r=Math.asin(De.radiusMean/Math.sqrt((-e.x)**2+(-e.y)**2+(-e.z)**2))*c,n=Math.asin(at.radius/Math.sqrt((-e.x+t.x)**2+(-e.y+t.y)**2+(-e.z+t.z)**2))*c,i=Math.acos(e.negate().dot(t.negate())/(Math.sqrt((-e.x)**2+(-e.y)**2+(-e.z)**2)*Math.sqrt((-e.x+t.x)**2+(-e.y+t.y)**2+(-e.z+t.z)**2)))*c;return r>n&&i<r-n&&(a=0),Math.abs(r-n)<i&&i<r+n&&(a=.5),n>r&&(a=.5),i<n-r&&(a=.5),a}static position(e){var t=e.toJulianCenturies(),a=h,r=357.5291092+35999.05034*t,n=280.46+36000.77*t+1.914666471*Math.sin(r*a)+.019994643*Math.sin(2*r*a),i=23.439291-.0130042*t,o=1.000140612-.016708617*Math.cos(r*a)-139589e-9*Math.cos(2*r*a),s=new Te(o*Math.cos(n*a),o*Math.cos(i*a)*Math.sin(n*a),o*Math.sin(i*a)*Math.sin(n*a)).scale(149597870),l=De.precession(e);return s.rotZ(l.zed).rotY(-l.theta).rotZ(l.zeta)}static positionApparent(e){var t=at.position(e).magnitude()/299792.458;return at.position(e.roll(-t))}static raDec(e){var t=at.date2jSince2000(e),a=at.solarMeanAnomaly_(t),r=at.eclipticLongitude(a);return{dec:et.declination(r,0),ra:et.rightAscension(r,0),dist:0}}static shadow(e,t){var a=at.positionApparent(e),r=!1;if(a.dot(t)<0){var n=a.angle(t),i=t.magnitude(),o=i*Math.cos(n);i*Math.sin(n)<=De.radiusEquator+Math.tan(this.penumbraAngle)*o&&(r=!0)}return r}static siderealTime(e,t){return h*(280.16+360.9856235*e)-t}static solarTransitJulian(e,t,a){return at.J2000_+e+.0053*Math.sin(t)-.0069*Math.sin(2*a)}static approxTransit_(e,t,a){return at.J0_+(e+t)/l+a}static calculateJnoon_(e,t,a,r){var n=h*-e,i=h*t,o=at.observerAngle_(a),s=at.date2jSince2000(r),l=at.julianCycle_(s,n),c=at.approxTransit_(0,n,l),u=at.solarMeanAnomaly_(c),m=at.eclipticLongitude(u),d=et.declination(m,0);return{Jnoon:at.solarTransitJulian(c,u,m),dh:o,lw:n,phi:i,dec:d,n:l,M:u,L:m}}static getSetJ_(e,t,a,r,n,i,o){var s=at.hourAngle(e,a,r),l=at.approxTransit_(s,t,n);return at.solarTransitJulian(l,i,o)}static julianCycle_(e,t){var a=t/l;return Math.round(e-at.J0_-a)}static observerAngle_(e){return-2.076*Math.sqrt(e)/60}static solarMeanAnomaly_(e){return h*(357.5291+.98560028*e)}}function rt(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ge=at,tt(at,"J0_",9e-4),tt(at,"J1970_",2440587.5),tt(at,"J2000_",2451545),tt(at,"e",23.4397*h),tt(at,"times_",[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]]),tt(at,"mu",132712428e3),tt(at,"penumbraAngle",.26900424*h),tt(at,"radius",695500),tt(at,"solarFlux",1367),tt(at,"solarPressure",ge.solarFlux/299792458),tt(at,"umbraAngle",.26411888*h);class nt{constructor(){}static eci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee.fromDateTime(new Date),t=e.toJulianCenturies(),a=h,r=218.32+481267.8813*t+6.29*Math.sin((134.9+477198.85*t)*a)-1.27*Math.sin((259.2-413335.38*t)*a)+.66*Math.sin((235.7+890534.23*t)*a)+.21*Math.sin((269.9+954397.7*t)*a)-.19*Math.sin((357.5+35999.05*t)*a)-.11*Math.sin((186.6+966404.05*t)*a),n=5.13*Math.sin((93.3+483202.03*t)*a)+.28*Math.sin((228.2+960400.87*t)*a)-.28*Math.sin((318.3+6003.18*t)*a)-.17*Math.sin((217.6-407332.2*t)*a),i=.9508+.0518*Math.cos((134.9+477198.85*t)*a)+.0095*Math.cos((259.2-413335.38*t)*a)+.0078*Math.cos((235.7+890534.23*t)*a)+.0028*Math.cos((269.9+954397.7*t)*a),o=23.439291-.0130042*t,s=1/Math.sin(i*a),l=new Te(s*Math.cos(n*a)*Math.cos(r*a),s*(Math.cos(o*a)*Math.cos(n*a)*Math.sin(r*a)-Math.sin(o*a)*Math.sin(n*a)),s*(Math.sin(o*a)*Math.cos(n*a)*Math.sin(r*a)+Math.cos(o*a)*Math.sin(n*a))).scale(De.radiusEquator),c=De.precession(e);return l.rotZ(c.zed).rotY(-c.theta).rotZ(c.zeta)}static illumination(e,t){var a=null!=t?t:Te.origin,r=at.position(e).subtract(a),n=this.eci(e).subtract(a),i=r.angle(n);return.5*(1-Math.cos(i))}static diameter(e,t){return T(2*this.radiusEquator,e.subtract(t).magnitude(),a.Sphere)}static getMoonIllumination(e){var t=e instanceof Date?e.getTime():e,a=2551442778,r=new Date(t),n=at.date2jSince2000(r),i=at.raDec(r),o=nt.moonCoords(n),s=149598e3,l=Math.acos(Math.sin(i.dec)*Math.sin(o.dec)+Math.cos(i.dec)*Math.cos(o.dec)*Math.cos(i.ra-o.ra)),h=Math.atan2(s*Math.sin(l),o.dist-s*Math.cos(l)),c=Math.atan2(Math.cos(i.dec)*Math.sin(i.ra-o.ra),Math.sin(i.dec)*Math.cos(o.dec)-Math.cos(i.dec)*Math.sin(o.dec)*Math.cos(i.ra-o.ra)),u=.5+.5*h*(c<0?-1:1)/Math.PI,m=(t-94717884e4)%a;m<0&&(m+=a);var d=a-m+t,f=1275721389-m+t;f<t&&(f+=a);var g=637860694.5-m+t;g<t&&(g+=a);var M=1913582083.5-m+t;M<t&&(M+=a);var p=Math.min(d,g,f,M),v=null;for(var y of nt.moonCycles_)if(u>=y.from&&u<=y.to){v=y;break}if(!v)throw new Error("Moon phase not found");var w;return w=p===d?"newMoon":p===g?"firstQuarter":p===f?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(h))/2,phase:v,phaseValue:u,angle:c,next:{value:p,date:new Date(p).toISOString(),type:w,newMoon:{value:d,date:new Date(d).toISOString()},fullMoon:{value:f,date:new Date(f).toISOString()},firstQuarter:{value:g,date:new Date(g).toISOString()},thirdQuarter:{value:M,date:new Date(M).toISOString()}}}}static rae(e,t,a){var r=h*-a,n=h*t,i=at.date2jSince2000(e),o=nt.moonCoords(i),s=at.siderealTime(i,r)-o.ra,l=et.elevation(s,n,o.dec),c=Math.atan2(Math.sin(s),Math.tan(n)*Math.cos(o.dec)-Math.sin(o.dec)*Math.cos(s));return l+=et.atmosphericRefraction(l),{az:et.azimuth(s,n,o.dec),el:l,rng:o.dist,parallacticAngle:c}}static getMoonTimes(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new Date(e);r?n.setUTCHours(0,0,0,0):n.setHours(0,0,0,0);var{rise:i,set:o,ye:s}=nt.calculateRiseSetTimes_(n,t,a),l={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return i&&(l.rise=new Date(nt.hoursLater_(n,i))),o&&(l.set=new Date(nt.hoursLater_(n,o))),i||o?i&&o?(l.alwaysUp=!1,l.alwaysDown=!1,l.highest=new Date(nt.hoursLater_(n,Math.min(i,o)+Math.abs(o-i)/2))):(l.alwaysUp=!1,l.alwaysDown=!1):s>0?(l.alwaysUp=!0,l.alwaysDown=!1):(l.alwaysUp=!1,l.alwaysDown=!0),l}static hoursLater_(e,t){return new Date(e.getTime()+t*d/24)}static moonCoords(e){var t=h*(134.963+13.064993*e),a=h*(93.272+13.22935*e),r=h*(218.316+13.176396*e)+6.289*h*Math.sin(t),n=5.128*h*Math.sin(a),i=385001-20905*Math.cos(t);return{ra:et.rightAscension(r,n),dec:et.declination(r,n),dist:i}}static calculateRiseSetTimes_(e,t,a){for(var r=.133*h,n=nt.rae(e,t,a).el-r,i=0,o=0,s=0,l=0,c=0,u=0,m=0,d=0,f=0,g=0,M=0,p=0,v=0,y=1;y<=24&&(i=nt.rae(nt.hoursLater_(e,y),t,a).el-r,d=((c=(n+(o=nt.rae(nt.hoursLater_(e,y+1),t,a).el-r))/2-i)*(m=-(u=(o-n)/2)/(2*c))+u)*m+i,g=0,(f=u*u-4*c*i)>=0&&(M=m-(v=Math.sqrt(f)/(2*Math.abs(c))),p=m+v,Math.abs(M)<=1&&g++,Math.abs(p)<=1&&g++,M<-1&&(M=p)),1===g?n<0?s=y+M:l=y+M:2===g&&(s=y+(d<0?p:M),l=y+(d<0?M:p)),!s||!l);y+=2)n=o;return{rise:s,set:l,ye:d}}}function it(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}rt(nt,"mu",4902.799),rt(nt,"radiusEquator",1738),rt(nt,"moonCycles_",[{from:0,to:.033863193308711,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}]),(ye=Me||(Me={})).USSF="USSF",ye.CELESTRAK="Celestrak",ye.UNIV_OF_MICH="University of Michigan",ye.VIMPEL="JSC Vimpel",ye.TLE_TXT="TLE.txt",ye.EXTRA_JSON="extra.json",function(e){e[e.LEO=.45]="LEO",e[e.GEO=.82]="GEO",e[e.MAX=1]="MAX"}(pe||(pe={}));class ot extends $e{constructor(e){super(e),it(this,"country",void 0),it(this,"latRad",void 0),it(this,"lonRad",void 0),it(this,"shortName",void 0),it(this,"beamwidth",void 0),it(this,"changeObjectInterval",void 0),it(this,"linkAehf",void 0),it(this,"linkGalileo",void 0),it(this,"linkIridium",void 0),it(this,"linkStarlink",void 0),it(this,"linkWgs",void 0),it(this,"static",void 0),it(this,"sensorId",void 0),it(this,"url",void 0),it(this,"volume",void 0),it(this,"zoom",void 0),it(this,"band",void 0),it(this,"objName",void 0),it(this,"uiName",void 0),it(this,"system",void 0),it(this,"operator",void 0),this.country=e.country,this.latRad=e.lat*(Math.PI/180),this.lonRad=e.lon*(Math.PI/180),this.shortName=e.shortName,this.beamwidth=e.beamwidth,this.changeObjectInterval=e.changeObjectInterval,this.linkAehf=e.linkAehf,this.linkGalileo=e.linkGalileo,this.linkIridium=e.linkIridium,this.linkStarlink=e.linkStarlink,this.linkWgs=e.linkWgs,this.static=e.static,this.sensorId=e.sensorId,this.url=e.url,this.volume=e.volume,this.zoom=e.zoom,this.band=e.band,this.objName=e.objName,this.uiName=e.uiName,this.system=e.system,this.operator=e.operator}}function st(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lt{constructor(e,t,a,r){st(this,"x",void 0),st(this,"y",void 0),st(this,"z",void 0),st(this,"w",void 0),this.x=e,this.y=t,this.z=a,this.w=r}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=this.x.toFixed(e),a=this.y.toFixed(e),r=this.z.toFixed(e),n=this.w.toFixed(e);return"Q(x: ".concat(t,", y: ").concat(a,", z: ").concat(r,", w: ").concat(n,")")}positivePolar(){return this.w>=0?this.normalize():this.negate().normalize()}magnitudeSquared(){return this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z}magnitude(){return Math.sqrt(this.magnitudeSquared())}scale(e){return new lt(e*this.x,e*this.y,e*this.z,e*this.w)}negate(){return this.scale(-1)}normalize(){var e=this.magnitude();return 0===e?lt.zero:this.scale(1/e)}conjugate(){return new lt(-this.x,-this.y,-this.z,this.w)}inverse(){return this.conjugate().scale(1/this.magnitudeSquared())}add(e){return new lt(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}subtract(e){return new lt(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}addReal(e){return new lt(this.x,this.y,this.z,this.w+e)}multiply(e){var t=this.w*e.x+this.x*e.w+this.y*e.z-this.z*e.y,a=this.w*e.y-this.x*e.z+this.y*e.w+this.z*e.x,r=this.w*e.z+this.x*e.y-this.y*e.x+this.z*e.w,n=this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z;return new lt(t,a,r,n)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}rotateVector(e){var t=this.multiply(new lt(e.x,e.y,e.z,0)).multiply(this.conjugate());return new Ee([t.x,t.y,t.z])}rotateVector3D(e){var t=this.multiply(new lt(e.x,e.y,e.z,0)).multiply(this.conjugate());return new Te(t.x,t.y,t.z)}lerp(e,t){var a=1-t;return new lt(a*this.x+t*e.x,a*this.y+t*e.y,a*this.z+t*e.z,a*this.w+t*e.w).positivePolar()}slerp(e,t){var a=e,r=this.dot(a);if(r<0&&(r=-r,a=a.negate()),r>.9995)return this.lerp(a,t);var n=Math.acos(r),i=Math.sin(n),o=Math.sin((1-t)*n)/i,s=Math.sin(t*n)/i;return new lt(o*this.x+s*a.x,o*this.y+s*a.y,o*this.z+s*a.z,o*this.w+s*a.w).positivePolar()}toVector3D(){return new Te(this.x,this.y,this.z)}angle(e){var t=this.multiply(e.conjugate()).normalize();return 2*Math.atan2(t.toVector3D().magnitude(),t.w)}geodesicAngle(e){var t,a=this.dot(e);return(t=(Math.acos(2*a*a-1)+Math.PI)%(2*Math.PI)-Math.PI)==-Math.PI?Math.PI:t}distance(e){var t=this.subtract(e).magnitude(),a=this.add(e).magnitude();return t<a?t:a}delta(e){return this.inverse().multiply(e)}toDirectionCosineMatrix(){var e=this.w*this.w,t=this.x*this.x,a=this.y*this.y,r=this.z*this.z,n=[[e+t-a-r,2*(this.x*this.y+this.z*this.w),2*(this.x*this.z-this.y*this.w)],[2*(this.x*this.y-this.z*this.w),e-t+a-r,2*(this.y*this.z+this.x*this.w)],[2*(this.x*this.z+this.y*this.w),2*(this.y*this.z-this.x*this.w),e-t-a+r]];return new Ae(n)}toRotationMatrix(){return this.toDirectionCosineMatrix().transpose()}vectorAngle(e,t,a){var r=t.subtract(e),n=this.toDirectionCosineMatrix().multiplyVector3D(r);return a.angle(n)}kinematics(e){var t=new Ee([0,e.x,e.y,e.z]),a=new Ae([[this.x,this.w,-this.z,this.y],[this.y,this.z,this.w,-this.x],[this.z,-this.y,this.x,this.w],[this.w,-this.x,-this.y,-this.z]]).multiplyVector(t).scale(.5).elements;return new lt(a[0],a[1],a[2],a[3])}}st(lt,"zero",new(ve=lt)(0,0,0,0)),st(lt,"one",new ve(0,0,0,1)),st(lt,"xAxis",new ve(1,0,0,0)),st(lt,"yAxis",new ve(0,1,0,0)),st(lt,"zAxis",new ve(0,0,1,0));const ht=6371,ct={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(e,t,a){if(isNaN(e)||isNaN(t))throw Error("Invalid EclCoord object: ("+e+", "+t+")");this.lat=e,this.lng=t,void 0!==a&&(this.h=a)}};ct.EclCoord.prototype={toWgs84String:function(){return ct.Math.formatNum(180*this.lat/Math.PI)+", "+ct.Math.formatNum(180*-this.lng/Math.PI)}},ct.EclCoordfromWgs84=function(e,t,a){return new ct.EclCoord(e*Math.PI/180,-t*Math.PI/180,a)},ct.EqCoord=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid EqCoord object: ("+e+", "+t+")");this.ra=e,this.dec=t},ct.EqCoord.prototype={toString:function(){return"ra:"+ct.Math.formatNum(180*this.ra/Math.PI)+", dec:"+ct.Math.formatNum(180*this.dec/Math.PI)}},ct.HzCoord=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid HzCoord object: ("+e+", "+t+")");this.az=e,this.alt=t},ct.HzCoord.prototype={toString:function(){return"azi:"+ct.Math.formatNum(180*this.az/Math.PI)+", alt:"+ct.Math.formatNum(180*this.alt/Math.PI)}},ct.Coord={dmsToDeg:function(e,t,a,r){return r=(60*(60*t+a)+r)/3600,e?-r:r},calcAngle:function(e,t,a,r){return ct.Coord.dmsToDeg(e,t,a,r)*Math.PI/180},calcRA:function(e,t,a){return ct.Coord.dmsToDeg(!1,e,t,a)%24*15*Math.PI/180},secondsToHMSStr:function(e){var t=Math.floor(e/86400);e=ct.Math.pMod(e,86400);var a=Math.floor(e/3600)%24,r=Math.floor(e/60)%60;return(0!==t?t+"d ":"")+(10>a?"0":"")+a+":"+(10>r?"0":"")+r+":"+(10>(e=Math.floor(e%60))?"0":"")+e},secondsToHMStr:function(e){var t=Math.floor(e/86400);e=ct.Math.pMod(e,86400);var a=Math.floor(e/3600)%24;return(0!==t?t+"d ":"")+(10>a?"0":"")+a+":"+(10>(e=Math.floor(e/60)%60)?"0":"")+e},eqToEcl:function(e,t){var a=Math.sin(e.ra),r=Math.sin(e.dec),n=Math.cos(e.dec),i=Math.sin(t);return t=Math.cos(t),new ct.EclCoord(Math.atan2(a*t+r/n*i,Math.cos(e.ra)),Math.asin(r*t-n*i*a))},eclToEq:function(e,t){var a=Math.sin(e.lat),r=Math.sin(e.lng),n=Math.cos(e.lng),i=Math.sin(t);t=Math.cos(t);let o=Math.atan2(a*t-r/n*i,Math.cos(e.lat));return 0>o&&(o+=2*Math.PI),new ct.EqCoord(o,Math.asin(r*t+n*i*a))},eqToHz:function(e,t,a){a=a-t.lng-e.ra;var r=Math.cos(a),n=Math.sin(t.lat);t=Math.cos(t.lat);var i=Math.sin(e.dec);return e=Math.cos(e.dec),new ct.HzCoord(Math.atan2(Math.sin(a),r*n-i/e*t),Math.asin(n*i+t*e*r))}},ct.DeltaT={jdToJde:function(e,t){return t||(t=ct.DeltaT.estimate(e)),e+t/86400},jdeToJd:function(e,t){return t||(t=ct.DeltaT.estimate(e)),e-t/86400},decimalYear:function(e){return(e=ct.JulianDay.jdToCalendar(e)).y+(e.m-.5)/12},estimate:function(e){var t=ct.DeltaT.decimalYear(e);return e=Math.pow,-500>t?32*e((t-1820)/100,2)-20:500>t?10583.6-1014.41*(t/=100)+33.78311*e(t,2)-5.952053*e(t,3)-.1798452*e(t,4)+.022174192*e(t,5)+.0090316521*e(t,6):1600>t?1574.2-556.01*(t=(t-1e3)/100)+71.23472*e(t,2)+.319781*e(t,3)-.8503463*e(t,4)-.005050998*e(t,5)+.0083572073*e(t,6):1700>t?120-.9808*(t-=1600)-.01532*e(t,2)+e(t,3)/7129:1800>t?8.83+.1603*(t-=1700)-.0059285*e(t,2)+13336e-8*e(t,3)-e(t,4)/1174e3:1860>t?13.72-.332447*(t-=1800)+.0068612*e(t,2)+.0041116*e(t,3)-37436e-8*e(t,4)+121272e-10*e(t,5)-1.699e-7*e(t,6)+8.75e-10*e(t,7):1900>t?7.62+.5737*(t-=1860)-.251754*e(t,2)+.01680668*e(t,3)-.0004473624*e(t,4)+e(t,5)/233174:1920>t?1.494119*(t-=1900)-2.79-.0598939*e(t,2)+.0061966*e(t,3)-197e-6*e(t,4):1941>t?21.2+.84493*(t-=1920)-.0761*e(t,2)+.0020936*e(t,3):1961>t?29.07+.407*(t-=1950)-e(t,2)/233+e(t,3)/2547:1986>t?45.45+1.067*(t-=1975)-e(t,2)/260-e(t,3)/718:2005>t?63.86+.3345*(t-=2e3)-.060374*e(t,2)+.0017275*e(t,3)+651814e-9*e(t,4)+2373599e-11*e(t,5):2050>t?62.92+.32217*(t-=2e3)+.005589*e(t,2):2150>t?32*e((t-1820)/100,2)-20-.5628*(2150-t):32*e((t-1820)/100,2)-20}},ct.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(e,t){t||(t=0);var a=1-ct.Globe.Fl;return t=.001*t/ct.Globe.Er,{rhoslat:Math.sin(Math.atan(a*Math.tan(e)))*a+t*Math.sin(e),rhoclat:Math.cos(Math.atan(a*Math.tan(e)))+t*Math.cos(e)}}},ct.Interp={newLen3:function(e,t,a){if(3!=a.length)throw"Error not 3";if(t==e)throw"Error no x range";var r=a[1]-a[0],n=a[2]-a[1];return{x1:e,x3:t,y:a,a:r,b:n,c:n-r,abSum:r+n,xSum:t+e,xDiff:t-e}},interpolateX:function(e,t){return ct.Interp.interpolateN(e,(2*t-e.xSum)/e.xDiff)},interpolateN:function(e,t){return e.y[1]+.5*t*(e.abSum+t*e.c)}},ct.JulianDay=function(e,t){e instanceof Date&&(e=ct.JulianDay.dateToJD(e)),this.jd=e,this.deltaT=t||ct.DeltaT.estimate(this.jd),this.jde=ct.DeltaT.jdToJde(this.jd,this.deltaT)},ct.JulianDay.prototype={toCalendar:function(){return ct.JulianDay.jdToCalendar(this.jd)},toDate:function(){return ct.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-ct.J2000)/ct.JulianCentury},jdeJ2000Century:function(){return(this.jde-ct.J2000)/ct.JulianCentury},startOfDay:function(){return new ct.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},ct.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),ct.JulianDay.jdFromGregorian=function(e,t,a){return new ct.JulianDay(ct.JulianDay.jdFromGregorian(e,t,a))},ct.JulianDay.jdFromJulian=function(e,t,a){return new ct.JulianDay(ct.JulianDay.calendarJulianToJD(e,t,a))},ct.JulianDay.jdFromJDE=function(e){var t=ct.DeltaT.estimate(e);return e=ct.DeltaT.jdeToJd(e,t),new ct.JulianDay(e,t)},ct.JulianDay.dateToJD=function(e){var t=e.getUTCDate()+ct.JulianDay.secondsFromHMS(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/86400;return e.getTime()<ct.JulianDay.gregorianTimeStart?ct.JulianDay.calendarJulianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,t):ct.JulianDay.calendarGregorianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,t)},ct.JulianDay.calendarGregorianToJD=function(e,t,a){1!=t&&2!=t||(e--,t+=12);var r=Math.floor(e/100);return Math.floor(36525*(e+4716)/100)+Math.floor(306*(t+1)/10)+(2-r+Math.floor(r/4))+a-1524.5},ct.JulianDay.calendarJulianToJD=function(e,t,a){return 1!=t&&2!=t||(e--,t+=12),Math.floor(36525*(e+4716)/100)+Math.floor(306*(t+1)/10)+a-1524.5},ct.JulianDay.secondsFromHMS=function(e,t,a){return 3600*e+60*t+a},ct.JulianDay.jdToDate=function(e){var t=ct.JulianDay.jdToCalendar(e);return e=ct.Math.modF(e+.5)[1],e=Math.round(86400*e),new Date(Date.UTC(t.y,t.m-1,Math.floor(t.d),Math.floor(e/3600)%24,Math.floor(e/60)%60,Math.floor(e%60)))},ct.JulianDay.jdToCalendar=function(e){var t=(e=ct.Math.modF(e+.5))[0],a=t;2299151<=t&&(a=t+1+(a=Math.floor((100*t-186721625)/3652425))-Math.floor(a/4));var r=a+1524;t=Math.floor((100*r-12210)/36525);var n=Math.floor(36525*t/100);return a=Math.floor(1e4*(r-n)/306001),e=r-n-Math.floor(306001*a/1e4)+e[1],{y:1==(a=14==a||15==a?a-13:a-1)||2==a?Math.floor(t)-4715:Math.floor(t)-4716,m:a,d:e}},ct.JulianDay.leapYearGregorian=function(e){return 0==e%4&&0!=e%100||0==e%400},ct.JulianDay.dayOfYear=function(e,t,a,r){return e=2,r&&e--,ct.JulianDay._wholeMonths(t,e)+a},ct.JulianDay._wholeMonths=function(e,t){return Math.round(275*e/9-(e+9)/12*t-30)},ct.Math={pMod:function(e,t){return 0>(e%=t)&&(e+=t),e},modF:function(e){return 0>e?(e=-e,[-Math.floor(e),-e%1]):[Math.floor(e),e%1]},horner:function(e,t){var a=t.length-1;if(0>=a)throw"empty array not supported";for(var r=t[a];0<a;)r=r*e+t[--a];return r},formatNum:function(e,t){return t=Math.pow(10,4|t),Math.round(e*t)/t}},ct.Moon={parallax:function(e){return Math.asin(6378.14/e)},apparentEquatorial:function(e){var t=ct.Moon.geocentricPosition(e),a=ct.Nutation.nutation(e);return e=ct.Nutation.meanObliquityLaskar(e)+a.deltaobliquity,{eq:ct.Coord.eclToEq(new ct.EclCoord(t.lng+a.deltalng,t.lat),e),delta:t.delta}},apparentTopocentric:function(e,t,a){var r=ct.Moon.apparentEquatorial(e),n=ct.Globe.parallaxConstants(t.lat,t.h),i=ct.Moon.parallax(r.delta);return a||(a=ct.Sidereal.apparentInRa(e)),{eq:ct.Parallax.topocentric(r.eq,i,n.rhoslat,n.rhoclat,t.lng,a),delta:r.delta}},topocentricPosition:function(e,t,a){var r=ct.Sidereal.apparentInRa(e);e=ct.Moon.apparentTopocentric(e,t,r);var n=ct.Coord.eqToHz(e.eq,t,r);return!0===a&&(n.alt+=ct.Refraction.bennett2(n.alt)),t=ct.Moon.parallacticAngle(t.lat,r-(t.lng+e.eq.ra),e.eq.dec),{hz:n,eq:e.eq,delta:e.delta,q:t}},approxTransit:function(e,t){return e=e.startOfDay(),ct.Rise.approxTransit(t,ct.Sidereal.apparent0UT(e),ct.Moon.apparentTopocentric(e,t).eq)},approxTimes:function(e,t){e=e.startOfDay();var a=ct.Moon.apparentTopocentric(e,t),r=ct.Moon.parallax(a.delta);return r=ct.Rise.stdh0Lunar(r),e=ct.Sidereal.apparent0UT(e),ct.Rise.approxTimes(t,r,e,a.eq)},times:function(e,t){e=e.startOfDay();var a=ct.Moon.apparentTopocentric(new ct.JulianDay(e.jd-1,e.deltaT),t),r=ct.Moon.apparentTopocentric(e,t),n=ct.Moon.apparentTopocentric(new ct.JulianDay(e.jd+1,e.deltaT),t),i=ct.Moon.parallax(r.delta);i=ct.Rise.stdh0Lunar(i);var o=ct.Sidereal.apparent0UT(e);return ct.Rise.times(t,e.deltaT,i,o,[a.eq,r.eq,n.eq])},parallacticAngle:function(e,t,a){return Math.atan2(Math.sin(t),Math.tan(e)*Math.cos(a)-Math.sin(a)*Math.cos(t))},geocentricPosition:function(e){var t=Math.PI/180,a=e.jdeJ2000Century();e=ct.Math.pMod(ct.Math.horner(a,[218.3164477*t,481267.88123421*t,-.0015786*t,t/538841,-t/65194e3]),2*Math.PI);var r=ct.Math.pMod(ct.Math.horner(a,[297.8501921*t,445267.1114034*t,-.0018819*t,t/545868,-t/113065e3]),2*Math.PI),n=ct.Math.pMod(ct.Math.horner(a,[357.5291092*t,35999.0502909*t,-1535e-7*t,t/2449e4]),2*Math.PI),i=ct.Math.pMod(ct.Math.horner(a,[134.9633964*t,477198.8675055*t,.0087414*t,t/69699,-t/14712e3]),2*Math.PI),o=ct.Math.pMod(ct.Math.horner(a,[93.272095*t,483202.0175233*t,-.0036539*t,-t/3526e3,t/86331e4]),2*Math.PI),s=119.75*t+131.849*t*a,l=53.09*t+479264.29*t*a,h=313.45*t+481266.484*t*a,c=(a=ct.Math.horner(a,[1,-.002516,-74e-7]))*a;l=3958*Math.sin(s)+1962*Math.sin(e-o)+318*Math.sin(l);var u=0;for(s=-2235*Math.sin(e)+382*Math.sin(h)+175*Math.sin(s-o)+175*Math.sin(s+o)+127*Math.sin(e-i)-115*Math.sin(e+i),h=0;h<ct.Moon.ta.length;h++){var m=ct.Moon.ta[h],d=r*m[0]+n*m[1]+i*m[2]+o*m[3],f=Math.sin(d);switch(d=Math.cos(d),m[1]){case 0:l+=m[4]*f,u+=m[5]*d;break;case 1:case-1:l+=m[4]*f*a,u+=m[5]*d*a;break;case 2:case-2:l+=m[4]*f*c,u+=m[5]*d*c;break;default:throw"error"}}for(h=0;h<ct.Moon.tb.length;h++)switch(m=ct.Moon.tb[h],f=Math.sin(r*m[0]+n*m[1]+i*m[2]+o*m[3]),m[1]){case 0:s+=m[4]*f;break;case 1:case-1:s+=m[4]*f*a;break;case 2:case-2:s+=m[4]*f*c;break;default:throw"error"}return{lng:ct.Math.pMod(e,2*Math.PI)+1e-6*l*t,lat:1e-6*s*t,delta:385000.56+.001*u}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},ct.MoonIllum={phaseAngleEq:function(e,t,a,r){return e=ct.MoonIllum._coselong(e,a),Math.atan2(r*Math.sin(Math.acos(e)),t-r*e)},phaseAngleEq2:function(e,t){return Math.acos(-ct.MoonIllum._coselong(e,t))},illuminated:function(e){return(1+Math.cos(e))/2},positionAngle:function(e,t){var a=Math.cos(t.dec);return Math.atan2(a*Math.sin(t.ra-e.ra),Math.sin(t.dec)*Math.cos(e.dec)-a*Math.sin(e.dec)*Math.cos(t.ra-e.ra))},_coselong:function(e,t){return Math.sin(t.dec)*Math.sin(e.dec)+Math.cos(t.dec)*Math.cos(e.dec)*Math.cos(t.ra-e.ra)}},ct.Nutation={nutation:function(e){e=e.jdeJ2000Century();for(var t=ct.Math.horner(e,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,a=ct.Math.horner(e,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,r=ct.Math.horner(e,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,n=ct.Math.horner(e,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,i=ct.Math.horner(e,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,o=0,s=0,l=ct.Nutation.table22A.length-1;0<=l;l--){var h=ct.Nutation.table22A[l],c=h[0]*t+h[1]*a+h[2]*r+h[3]*n+h[4]*i,u=Math.cos(c);o+=Math.sin(c)*(h[5]+h[6]*e),s+=u*(h[7]+h[8]*e)}return{deltalng:1e-4/3600*o*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(e){var t=ct.Nutation.meanObliquityLaskar(e);return(e=ct.Nutation.nutation(e)).deltalng*Math.cos(t+e.deltaobliquity)},trueObliquity:function(e){return ct.Nutation.meanObliquityLaskar(e)+(e=ct.Nutation.nutation(e)).deltaobliquity},meanObliquity:function(e){return ct.Math.horner(e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(e){return ct.Math.horner(.01*e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},ct.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(e){return 8.794/60/60*Math.PI/180/e},topocentric:function(e,t,a,r,n,i){n=ct.Math.pMod(i-n-e.ra,2*Math.PI),t=Math.sin(t),i=Math.cos(n);var o=Math.cos(e.dec);return n=Math.atan2(-r*t*Math.sin(n),o-r*t*i),new ct.EqCoord(e.ra+n,Math.atan2((Math.sin(e.dec)-a*t)*Math.cos(n),o-r*t*i))},topocentric2:function(e,t,a,r,n,i){return n=ct.Math.pMod(i-n-e.ra,2*Math.PI),i=Math.cos(e.dec),new ct.EqCoord(e.ra+-t*r*Math.sin(n)/i,e.dec+-t*(a*i-r*Math.cos(n)*Math.sin(e.dec)))}},ct.Refraction={bennett:function(e){0>e&&(e=0);var t=Math.PI/180;return t/60/Math.tan(e+7.31*t*t/(e+4.4*t))},bennett2:function(e){var t=Math.PI/180,a=60/t,r=.06/a;return a=14.7*a*t,t*=13,(e=ct.Refraction.bennett(e))-r*Math.sin(a*e+t)},saemundsson:function(e){var t=Math.PI/180;return 1.02*t/60/Math.tan(e+10.3*t*t/(e+5.11*t))}},ct.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(e){return.7275*e-ct.Rise.meanRefraction},circumpolar:function(e,t,a){return-1>(e=(Math.sin(t)-Math.sin(e)*Math.sin(a))/(Math.cos(e)*Math.cos(a)))||1<e?null:e},approxTransit:function(e,t,a){return 43200*(a.ra+e.lng)/Math.PI-t},approxTimes:function(e,t,a,r){return(t=ct.Rise.circumpolar(e.lat,t,r.dec))?(t=43200*Math.acos(t)/Math.PI,e=43200*(r.ra+e.lng)/Math.PI-a,{transit:ct.Math.pMod(e,86400),transitd:Math.floor(e/86400),rise:ct.Math.pMod(e-t,86400),rised:Math.floor((e-t)/86400),set:ct.Math.pMod(e+t,86400),setd:Math.floor((e+t)/86400)}):null},times:function(e,t,a,r,n){function i(n){var i=ct.Math.pMod(r+360.985647*n/360,86400),o=n+t,h=ct.Interp.interpolateX(s,o);return o=ct.Interp.interpolateX(l,o),i=i*Math.PI/43200-(e.lng+h),h=Math.cos(o),ct.Math.pMod(n+(c*Math.sin(o)+u*h*Math.cos(i)-a)/(h*u*Math.sin(i))*43200/Math.PI,86400)}var o=ct.Rise.approxTimes(e,a,r,n[1]);if(!o)return null;var s=ct.Interp.newLen3(-86400,86400,[n[0].ra,n[1].ra,n[2].ra]),l=ct.Interp.newLen3(-86400,86400,[n[0].dec,n[1].dec,n[2].dec]);n=r+360.985647*o.transit/360;var h=ct.Interp.interpolateX(s,o.transit+t);o.transit=ct.Math.pMod(o.transit-(n-43200*(e.lng+h)/Math.PI),86400);var c=Math.sin(e.lat),u=Math.cos(e.lat);return o.rise=i(o.rise),o.set=i(o.set),o}},ct.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(e){return e=ct.Math.modF(e.jd+.5),[new ct.JulianDay(e[0]-.5).jdJ2000Century(),e[1]]},mean:function(e){return ct.Math.pMod(ct.Sidereal._mean(e),86400)},_mean:function(e){return(e=ct.Sidereal._mean0UT(e)).s+86636.55536784*e.f},_meanInRA:function(e){return(e=ct.Sidereal._mean0UT(e)).s*Math.PI/43200+2.0054758187*e.f*Math.PI},mean0UT:function(e){return e=ct.Sidereal._mean0UT(e),ct.Math.pMod(e.s,86400)},_mean0UT:function(e){return e=ct.Sidereal.jdToCFrac(e),{s:ct.Math.horner(e[0],ct.Sidereal.iau82),f:e[1]}},apparentInRa:function(e){var t=ct.Sidereal._meanInRA(e);return e=ct.Nutation.nutationInRA(e),ct.Math.pMod(t+e,2*Math.PI)},apparent:function(e){var t=ct.Sidereal._mean(e);return e=648e3*ct.Nutation.nutationInRA(e)/Math.PI/15,ct.Math.pMod(t+e,86400)},apparentLocal:function(e,t){return e=ct.Sidereal.apparent(e),ct.Math.pMod(e-43200*t/Math.PI,86400)},apparent0UT:function(e){var t=ct.Math.modF(e.jd+.5);return e=ct.Math.modF(e.jde+.5),t=ct.Math.horner((t[0]-.5-ct.J2000)/36525,ct.Sidereal.iau82)+86636.55536784*t[1],e=648e3*ct.Nutation.nutationInRA(new ct.JulianDay(e[0]))/Math.PI/15,ct.Math.pMod(t+e,86400)}},ct.Solar={earthsunDelta:149597870,apparentEquatorial:function(e){var t=e.jdJ2000Century(),a=ct.Solar.node(t);return t=ct.Solar.apparentLongitude(t,a),e=ct.Nutation.meanObliquityLaskar(e)+.00256*Math.PI/180*Math.cos(a),a=Math.sin(t),new ct.EqCoord(Math.atan2(Math.cos(e)*a,Math.cos(t)),Math.asin(Math.sin(e)*a))},apparentTopocentric:function(e,t,a){var r=ct.Solar.apparentEquatorial(e),n=ct.Globe.parallaxConstants(t.lat,t.h);return a||(a=ct.Sidereal.apparentInRa(e)),ct.Parallax.topocentric2(r,ct.Parallax.earthsunParallax,n.rhoslat,n.rhoclat,t.lng,a)},topocentricPosition:function(e,t,a){var r=ct.Sidereal.apparentInRa(e);return e=ct.Solar.apparentTopocentric(e,t,r),t=ct.Coord.eqToHz(e,t,r),!0===a&&(t.alt+=ct.Refraction.bennett2(t.alt)),{hz:t,eq:e}},approxTransit:function(e,t){return e=e.startOfDay(),ct.Rise.approxTransit(t,ct.Sidereal.apparent0UT(e),ct.Solar.apparentTopocentric(e,t))},approxTimes:function(e,t){var a=e.startOfDay();e=ct.Solar.apparentTopocentric(a,t);var r=ct.Rise.stdh0Solar;return a=ct.Sidereal.apparent0UT(a),ct.Rise.approxTimes(t,r,a,e)},times:function(e,t){e=e.startOfDay();var a=ct.Solar.apparentTopocentric(new ct.JulianDay(e.jd-1,e.deltaT),t),r=ct.Solar.apparentTopocentric(e,t),n=ct.Solar.apparentTopocentric(new ct.JulianDay(e.jd+1,e.deltaT),t),i=ct.Rise.stdh0Solar,o=ct.Sidereal.apparent0UT(e);return ct.Rise.times(t,e.deltaT,i,o,[a,r,n])},meanAnomaly:function(e){return ct.Math.horner(e,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(e){var t=ct.Math.horner(e,[280.46646,36000.76983,3032e-7])*Math.PI/180,a=ct.Solar.meanAnomaly(e);return e=(ct.Math.horner(e,[1.914602,-.004817,-14e-6])*Math.sin(a)+(.019993-101e-6*e)*Math.sin(2*a)+289e-6*Math.sin(3*a))*Math.PI/180,{s:ct.Math.pMod(t+e,2*Math.PI),v:ct.Math.pMod(a+e,2*Math.PI)}},apparentLongitude:function(e,t){return t||(t=ct.Solar.node(e)),ct.Solar.trueLongitude(e).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(t)},node:function(e){return(125.04-1934.136*e)*Math.PI/180}},ct.Solistice={march:function(e){return 1e3>e?ct.Solistice._eq(e,ct.Solistice.mc0):ct.Solistice._eq(e-2e3,ct.Solistice.mc2)},june:function(e){return 1e3>e?ct.Solistice._eq(e,ct.Solistice.jc0):ct.Solistice._eq(e-2e3,ct.Solistice.jc2)},september:function(e){return 1e3>e?ct.Solistice._eq(e,ct.Solistice.sc0):ct.Solistice._eq(e-2e3,ct.Solistice.sc2)},december:function(e){return 1e3>e?ct.Solistice._eq(e,ct.Solistice.dc0):ct.Solistice._eq(e-2e3,ct.Solistice.dc2)},_eq:function(e,t){t=((e=ct.Math.horner(.001*e,t))-ct.J2000)/ct.JulianCentury;var a=35999.373*Math.PI/180*t-2.47*Math.PI/180;a=1+.0334*Math.cos(a)+7e-4*Math.cos(2*a);for(var r=0,n=this.terms.length-1;0<=n;n--){var i=this.terms[n];r+=i[0]*Math.cos((i[1]+i[2]*t)*Math.PI/180)}return e+1e-5*r/a},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const ut=(e,t,a,r,n,i)=>{if(e<0||t<1||a<0||r<0||n<0||i<0)throw new Error("Invalid negative value");if(t>12)throw new Error("Invalid month value");if(a>31)throw new Error("Invalid day value");if(r>23)throw new Error("Invalid hour value");if(n>59)throw new Error("Invalid minute value");if(i>60)throw new Error("Invalid second value");return 367*e-Math.trunc(7*(e+Math.trunc((t+9)/12))*.25)+Math.trunc(275*t/9)+a+1721013.5+((i/60+n)/60+r)/24},mt=(e,t,a)=>({lon:t*c,lat:e*c,alt:a}),dt=(e,t)=>e.el>90-t,ft=(e,t,a)=>(e[3*t]=a.x,e[3*t+1]=a.y,e[3*t+2]=a.z,e),gt=(e,t)=>(e[3*t]=0,e[3*t+1]=0,e[3*t+2]=0,e),Mt=(e,t)=>(e[3*t]=0,e[3*t+1]=0,e[3*t+2]=0,e);var pt,vt,yt,wt;!function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.UMBRAL=0]="UMBRAL",e[e.PENUMBRAL=1]="PENUMBRAL",e[e.SUN=2]="SUN"}(vt||(vt={})),function(e){e.OBJ_DATA="objData",e.OFFSET="OFFSET",e.SAT_EDIT="SAT_EDIT",e.NEW_MISSILE="NEW_MISSILE",e.SATELLITE_SELECTED="SATELLITE_SELECTED",e.SENSOR="SENSOR",e.IS_UPDATE_SATELLITE_OVERFLY="IS_SHOW_SATELLITE_OVERFLY",e.UPDATE_MARKERS="UPDATE_MARKERS",e.SUNLIGHT_VIEW="SUNLIGHT_VIEW"}(yt||(yt={})),function(e){e[e.OFF=0]="OFF",e[e.SURV=1]="SURV",e[e.FOV=2]="FOV",e[e.OVERFLY=3]="OVERFLY"}(wt||(wt={}));const xt=new Float32Array(0),At=new Int8Array(0);let bt,Et=0,_t=[],Tt=xt,zt=xt,St=At,It=At,Pt=[0],Rt=[-1],Dt=!1,Ot=!1,Nt=1,Ct=Date.now(),jt=0,Lt=1,Ft=90,Ut=!1,qt=!1,kt=!1,Jt=!1,Yt=wt.OFF,Ht=!1,Vt=!1,Gt=!1,Bt=!1,Zt=0,Xt=50,Wt=[];const Kt="undefined"!=typeof process&&(null===(pt=null===process||void 0===process?void 0:process.release)||void 0===pt?void 0:pt.name);try{onmessage=e=>Qt(e)}catch(e){if(!process)throw e}const Qt=e=>{var t,a;let r,n=0,i=[];const o={isLowAlt:null,inclination:null,eccentricity:null,raan:null,argOfPerigee:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,tle1:null,tle2:null};switch(e.data.typ){case yt.OFFSET:return jt=e.data.staticOffset,Ct=e.data.dynamicOffsetEpoch,Lt=e.data.propRate,Dt=!0,void(Nt=1);case yt.OBJ_DATA:for(r=JSON.parse(e.data.dat),bt=r.length;n<bt;){const e={isLowAlt:null,inclination:null,eccentricity:null,raan:null,argOfPerigee:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};if(null===(t=r[n])||void 0===t?void 0:t.tle1){const t=Ve.createSatrec(r[n].tle1,r[n].tle2);e.isLowAlt=1===t.isimp,e.inclination=t.inclo,e.eccentricity=t.ecco,e.raan=t.nodeo,e.argOfPerigee=t.argpo,e.meanMotion=60*t.no*24/l,e.semiMajorAxis=Math.pow(8681663.653/e.meanMotion,2/3),e.semiMinorAxis=e.semiMajorAxis*Math.sqrt(1-Math.pow(e.eccentricity,2)),e.apogee=e.semiMajorAxis*(1+e.eccentricity)-ht,e.perigee=e.semiMajorAxis*(1-e.eccentricity)-ht,e.period=1440/e.meanMotion,delete t.id,_t.push({active:null===(a=r[n].active)||void 0===a||a,satrec:t,apogee:e.apogee,perigee:e.perigee}),n++}else{const e=r[n];e.lat?e.active=!0:e.active=!1,_t.push(Object.assign(Object.assign({},e),{active:e.active})),n++}}Tt=new Float32Array(3*bt),zt=new Float32Array(3*bt),e.data.isLowPerf&&(Jt=!0);break;case yt.SAT_EDIT:{const t=Ve.createSatrec(e.data.tle1,e.data.tle2);if(i=[],o.inclination=t.inclo,o.eccentricity=t.ecco,o.raan=t.nodeo,o.argOfPerigee=t.argpo,o.meanMotion=60*t.no*24/l,o.semiMajorAxis=Math.pow(8681663.653/o.meanMotion,2/3),o.semiMinorAxis=o.semiMajorAxis*Math.sqrt(1-Math.pow(o.eccentricity,2)),o.apogee=o.semiMajorAxis*(1+o.eccentricity)-ht,o.perigee=o.semiMajorAxis*(1-o.eccentricity)-ht,o.period=1440/o.meanMotion,o.tle1=e.data.tle1,o.tle2=e.data.tle2,i.push(o),_t[e.data.id].satrec=t,_t[e.data.id].active=!0,_t[e.data.id].apogee=o.apogee,_t[e.data.id].perigee=o.perigee,_t[n].isUpdated=!0,Kt)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(i),satId:e.data.id}),Dt=!0}break;case yt.NEW_MISSILE:_t[e.data.id]=e.data;break;case yt.SATELLITE_SELECTED:Rt=e.data.satelliteSelected,-1===Rt[0]&&(Vt=!0,Gt||(Gt=!0));break;case yt.SENSOR:Wt=e.data.sensor.filter((e=>e)).map((e=>new ot(e))),Ut=Wt.length>0,qt=Wt.length>1,Bt||(Bt=!0);break;case yt.IS_UPDATE_SATELLITE_OVERFLY:Ft=e.data.selectedSatFOV?e.data.selectedSatFOV:Ft;break;case yt.UPDATE_MARKERS:e.data.fieldOfViewSetLength&&(Zt=e.data.fieldOfViewSetLength),void 0!==e.data.markerMode&&(Yt=e.data.markerMode,Yt!==wt.SURV&&Yt!==wt.OFF||(Gt=!0),Yt!==wt.OVERFLY&&(Vt=!0,Gt=!0));break;case yt.SUNLIGHT_VIEW:e.data.isSunlightView&&(kt=e.data.isSunlightView);break;default:console.warn("Unknown message typ: "+e.data.typ)}Ot||e.data.typ!==yt.OBJ_DATA||(bt=-1,$t(),Ot=!0)},$t=e=>{_t=e||_t;const{now:t,j:a,gmst:r,gmstNext:n,isSunExclusion:o}=((e,t,a,r,n)=>{const o=((e,t,a)=>{const r=new Date,n=r.getTime()-e;return r.setTime(e+t+n*a),r})(e,t,a),s=ut(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds())+o.getUTCMilliseconds()*w,l=Ve.gstime(s);let h=!1,u={x:0,y:0,z:0};r&&1===n.length&&([h,u]=((e,t,a,r)=>{const n=new ct.JulianDay(t),o=ct.EclCoordfromWgs84(0,0,0),s=ct.EclCoordfromWgs84(e.lat,e.lon,e.alt),l=ct.Solar.topocentricPosition(n,o,!1),h=ct.Solar.topocentricPosition(n,s,!1),u=l.hz.az*c+180,m=l.hz.alt*c%360,d=h.hz.alt*c%360,f=new ct.JulianDay(ct.JulianDay.dateToJD(r)).jdJ2000Century();let g=180*ct.Solar.meanAnomaly(f)/p;g%=360;const M=le({az:u,el:m,rng:149597870700*(1.00014-.01671*Math.cos(g)-14e-5*Math.cos(2*g))/1e3},{lat:0,lon:0,alt:0},a);return e&&(e.type===i.OPTICAL||e.type===i.OBSERVER)&&d>-6?[!0,M]:[!1,M]})(n[0],s,l,o));const m=ut(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds()+1)+o.getUTCMilliseconds()*w;return{now:o,j:s,gmst:l,gmstNext:Ve.gstime(m),isSunExclusion:h,sunEci:u}})(Ct,jt,Lt,kt,Wt);bt=sa()?_t.length-1-Zt:_t.length-1,St=!Ut||St&&St!==At?At:new Int8Array(_t.length),It=!kt||It&&It!==At?At:new Int8Array(_t.length),ta(t,a,r,n,o),Ht&&(Ht=!1,bt-=Zt),ea(Tt,zt),Dt||ca(),Dt=!1,setTimeout((()=>{$t()}),1e3*(qt?2:1)/Nt)},ea=(e,t)=>{for(let a=0;a<bt;a++)(isNaN(e[3*a])||isNaN(e[3*a+1])||isNaN(e[3*a+2]))&&(gt(e,a),Mt(t,a))},ta=(e,t,a,r,n)=>{let i=-1;for(;i<bt&&!Dt;){i++;let o=!1;if(_t[i].satrec?o=!oa(e,i,a,t,n):_t[i].ra?(ra(i,e,a),Mt(zt,i)):_t[i].lat?(ia(i,a),Mt(zt,i)):_t[i].latList?o=!na(i,e,r,a):_t[i].isMarker&&(Yt===wt.FOV||Yt===wt.SURV||Ht)?i=ha(i,a):_t[i].isMarker&&(Yt===wt.OVERFLY||Vt)&&(i=aa(i,a)),!o&&(Vt=!1,_t[i].isMarker)){la(i);break}}},aa=(e,t)=>{if(Vt&&!0===_t[e].active)return e;let a,r,n,i,o,s,l,c,u,m,d,f,g;for(let M=0;M<Rt.length+1;M++){if(M===Rt.length){Pt.push(e);break}if(-1!==Rt[M]){if(Yt!==wt.OVERFLY)continue;for(m={x:Tt[3*Rt[M]],y:Tt[3*Rt[M]+1],z:Tt[3*Rt[M]+2]},d=ae(m,t),f=ne(d,t),i=f.alt,g={lat:f.lat,lon:f.lon,alt:1},c=1,i<2500&&Ft<=60&&(c=.5),(i>7e3||Ft>=90)&&(c=2),Rt.length>1&&(c=2),l=-60;l<60;l+=c)if(r=Math.max(Math.min(Math.round(f.lat)+l,90),-90)*h,!(r>90))for(s=i<2500&&Ft<=60?.5:i>7e3||Ft>=90?2:1,Rt.length>1&&(s=2),u=0;u<181;u+=s){if(n=(f.lon+u)*h,g=mt(r,n,15),a=ce(g,m),dt(a,Ft)){if(o=oe(g),e===bt)continue;_t[e].active=!0,Tt=ft(Tt,e,o),Mt(zt,e),e++}if(0!==u&&180!==u){if(n=(f.lon-u)*h,g=mt(r,n,15),a=ce(g,m),dt(a,Ft)){if(o=oe(g),e===bt)continue;_t[e].active=!0,Tt=ft(Tt,e,o),Mt(zt,e),e++}if(90===r||-90===r)break}}}}return e},ra=(e,t,a)=>{const r=et.azEl(t,0,188,_t[e].ra,_t[e].dec),n=le({az:r.az,el:r.el,rng:25e4},{lat:0,lon:0,alt:0},a);Tt[3*e]=n.x,Tt[3*e+1]=n.y,Tt[3*e+2]=n.z},na=(e,t,a,r)=>{if(!_t[e].active)return Tt[3*e]=0,Tt[3*e+1]=0,Tt[3*e+2]=0,!1;let n,i,o,s;const l=_t[e].altList.length;let c;for(let a=0;a<l;a++)if(1*_t[e].startTime+1e3*a>=t.getTime()){c=a;break}_t[e].lastTime=_t[e].lastTime>=0?_t[e].lastTime:0;const u=_t[e].lastTime+1,m=_t[e].latList[u],d=_t[e].lonList[u],f=_t[e].altList[u];n=Math.cos(m*h),i=Math.sin(m*h),o=Math.cos(d*h+a),s=Math.sin(d*h+a),0===_t[e].lastTime?Mt(zt,e):0===zt[3*e]&&0===zt[3*e+1]&&0===zt[3*e+2]?(zt[3*e]=(6371+f)*n*o-Tt[3*e],zt[3*e+1]=(6371+f)*n*s-Tt[3*e+1],zt[3*e+2]=(6371+f)*i-Tt[3*e+2]):(zt[3*e]+=(6371+f)*n*o-Tt[3*e],zt[3*e+1]+=(6371+f)*n*s-Tt[3*e+1],zt[3*e+2]+=(6371+f)*i-Tt[3*e+2],zt[3*e]*=.5,zt[3*e+1]*=.5,zt[3*e+2]*=.5),n=Math.cos(_t[e].latList[c]*h),i=Math.sin(_t[e].latList[c]*h),o=Math.cos(_t[e].lonList[c]*h+r),s=Math.sin(_t[e].lonList[c]*h+r),Tt[3*e]=(6371+_t[e].altList[c])*n*o,Tt[3*e+1]=(6371+_t[e].altList[c])*n*s,Tt[3*e+2]=(6371+_t[e].altList[c])*i,_t[e].lastTime=c;const g=Tt[3*e],M=Tt[3*e+1],p=Tt[3*e+2],v=re({x:g,y:M,z:p},r);if(ne({x:g,y:M,z:p},r).alt<=150&&!_t[e].latList&&(_t[e].active=!1),Wt[0]){const t=he(Wt[0].llaRad(),v);St[e]=Wt[0].isRaeInFov(t)?1:0}else St[e]=0;return!0},ia=(e,t)=>{const a=se({lat:_t[e].lat*h,lon:_t[e].lon*h,alt:_t[e].alt+2.5},t);Tt[3*e]=a.x,Tt[3*e+1]=a.y,Tt[3*e+2]=a.z},oa=(e,t,a,r,n)=>{let o,s;if(!_t[t].active)return!1;const h=1440*(r-_t[t].satrec.jdsatepoch),c=Ve.propagate(_t[t].satrec,h);try{if(Et<5&&Et>1&&!_t[t].isUpdated&&(Xt=Math.max(Xt,Xt*Lt),Math.abs(c.position.x-Tt[3*t])>Xt||Math.abs(c.position.y-Tt[3*t+1])>Xt||Math.abs(c.position.z-Tt[3*t+2])>Xt))throw new Error("Impossible orbit");if(isNaN(c.position.x)||isNaN(c.position.y)||isNaN(c.position.z))return!1;if(Tt[3*t]=c.position.x,Tt[3*t+1]=c.position.y,Tt[3*t+2]=c.position.z,zt[3*t]=c.velocity.x,zt[3*t+1]=c.velocity.y,zt[3*t+2]=c.velocity.z,_t[t].isUpdated&&(_t[t].isUpdated=!1),_t[t].isimp||h/1440>20){const e=6378.137,r=6356.7523142,n=Math.sqrt(c.position.x*c.position.x+c.position.y*c.position.y),i=(e-r)/e,o=2*i-i*i;let s=Math.atan2(c.position.y,c.position.x)-a;for(;s<-p;)s+=l;for(;s>p;)s-=l;const h=20;let u,m=0,d=Math.atan2(c.position.z,Math.sqrt(c.position.x*c.position.x+c.position.y*c.position.y));for(;m<h;)u=1/Math.sqrt(1-o*(Math.sin(d)*Math.sin(d))),d=Math.atan2(c.position.z+e*u*o*Math.sin(d),n),m+=1;const f=n/Math.cos(d)-e*u;if(f>_t[t].apogee+1e3||f<_t[t].perigee-100)throw new Error("Impossible orbit")}Ut&&(s=he(Wt[0].llaRad(),re(c.position,a)))}catch(e){_t[t].active=!1,postMessage({badObjectId:t}),Tt[3*t]=0,Tt[3*t+1]=0,Tt[3*t+2]=0,zt[3*t]=0,zt[3*t+1]=0,zt[3*t+2]=0,o=null,s=null}if(kt){const a=at.position(ee.fromDateTime(e)),r=at.lightingRatio(new Te(c.position.x,c.position.y,c.position.z),a);It[t]=vt.SUN,r<.05?It[t]=vt.UMBRAL:r<1&&(It[t]=vt.PENUMBRAL)}if(Ut&&!n)if(St[t]=0,qt){for(const e of Wt)if(e.type!==i.OPTICAL||It[t]!==vt.UMBRAL){if(St[t])break;try{o=re(c.position,a),s=he(Wt[0].llaRad(),o)}catch(e){continue}St[t]=e.isRaeInFov(s)?1:0}}else s&&(Wt[0].type===i.OPTICAL&&It[t]===vt.UMBRAL||(St[t]=Wt[0].isRaeInFov(s)?1:0));return!0},sa=()=>!Vt&&!Ht&&Yt===wt.OFF||Jt,la=e=>{for(;e<bt;e++){if(!_t[e].active){bt-=Zt;break}gt(Tt,e),Mt(zt,e),_t[e].active=!1}},ha=(e,t)=>{let a,r,n,i,o,s,l;Pt=[];for(let h=0;h<Wt.length+1&&(Pt.push(e),h!==Wt.length);h++)if(l=Wt[h],gt(Tt,e),Mt(zt,e),!Ht&&!(Yt!==wt.FOV&&Yt!==wt.SURV||Wt.length>1&&l.isDeepSpace())){if(o=Math.abs(l.maxAz-l.minAz)<30?.5:3,s=l.maxRng-l.minRng<720?125:30,Yt===wt.FOV||l.volume)if(0!==l.minAz&&360!==l.maxAz){for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=l.minAz,r=l.minEl;r<l.maxEl;r+=o){i=le({az:a,el:r,rng:n},l,t);try{_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}catch(e){}}for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=l.maxAz,r=l.minEl;r<l.maxEl;r+=o){i=le({az:a,el:r,rng:n},l,t);try{_t[e].active=!0}catch(e){}Tt=ft(Tt,e,i),Mt(zt,e),e++}if(void 0!==l.minAz2){for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=l.minAz2,r=l.minEl2;r<l.maxEl2;r+=o)i=le({az:a,el:r,rng:n},l,t),_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++;for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=l.maxAz2,r=l.minEl2;r<l.maxEl2;r+=o)i=le({az:a,el:r,rng:n},l,t),_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}}else for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(r=l.maxEl,a=l.minAz;a<l.maxAz;a+=o){i=le({az:a,el:r,rng:n},l,t);try{_t[e].active=!0}catch(e){}Tt=ft(Tt,e,i),Mt(zt,e),e++}if(l.maxEl-l.minEl<20)for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=0;a<Math.max(360,l.maxAz);a+=o){if(l.minAz>l.maxAz){if(!(a>=l.minAz||a<=l.maxAz))continue}else if(!(a>=l.minAz&&a<=l.maxAz))continue;if(i=le({az:a,el:r,rng:n},l,t),e===bt)break;_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}if(void 0!==l.minAz2)for(o=2,n=Math.max(l.minRng2,100);n<Math.min(l.maxRng2,6e4);n+=Math.min(l.maxRng2,6e4)/s)for(a=0;a<360;a+=1*o){if(l.minAz2>l.maxAz2){if(!(a>=l.minAz2||a<=l.maxAz2))continue}else if(!(a>=l.minAz2&&a<=l.maxAz2))continue;if(i=le({az:a,el:r,rng:n},l,t),e===bt)break;_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}if(Yt===wt.FOV||l.volume){for(n=Math.min(l.maxRng,6e4),a=0;a<Math.max(360,l.maxAz);a+=o){if(l.minAz>l.maxAz){if(!(a>=l.minAz||a<=l.maxAz))continue}else if(!(a>=l.minAz&&a<=l.maxAz))continue;for(r=l.minEl;r<l.maxEl&&(i=le({az:a,el:r,rng:n},l,t),e!==bt);r+=o)_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}if(void 0!==l.minAz2)for(n=Math.min(l.maxRng2,6e4),a=0;a<Math.max(360,l.maxAz2);a+=o){if(l.minAz2>l.maxAz2){if(!(a>=l.minAz2||a<=l.maxAz2))continue}else if(!(a>=l.minAz2&&a<=l.maxAz2))continue;for(r=l.minEl2;r<l.maxEl2&&(i=le({az:a,el:r,rng:n},l,t),e!==bt);r+=o)_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}}for(o=.25,r=l.minEl,n=l.maxRng,a=0;a<Math.max(360,l.maxAz);a+=o){if(l.minAz>l.maxAz){if(!(a>=l.minAz||a<=l.maxAz))continue}else if(!(a>=l.minAz&&a<=l.maxAz))continue;if(i=le({az:a,el:r,rng:n},l,t),e===bt)break;_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}for(n=l.minRng,a=0;a<Math.max(360,l.maxAz);a+=o){if(l.minAz>l.maxAz){if(!(a>=l.minAz||a<=l.maxAz))continue}else if(!(a>=l.minAz&&a<=l.maxAz))continue;if(i=le({az:a,el:r,rng:n},l,t),e===bt)break;_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}if(l.maxRng-l.minRng<720)for(n=Math.max(l.minRng,100);n<Math.min(l.maxRng,6e4);n+=Math.min(l.maxRng,6e4)/s)for(a=0;a<Math.max(360,l.maxAz);a+=o){if(l.minAz>l.maxAz){if(!(a>=l.minAz||a<=l.maxAz))continue}else if(!(a>=l.minAz&&a<=l.maxAz))continue;if(i=le({az:a,el:r,rng:n},l,t),e===bt)break;_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}if(l.minAz!==l.maxAz&&l.minAz!==l.maxAz-360){for(o=(l.maxRng-l.minRng)/5555,a=l.maxAz;a===l.maxAz;a+=1)for(n=l.minRng;n<l.maxRng&&(i=le({az:a,el:r,rng:n},l,t),e!==bt);n+=o)_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++;for(a=l.minAz;a===l.minAz;a+=1)for(n=l.minRng;n<l.maxRng&&(i=le({az:a,el:r,rng:n},l,t),e!==bt);n+=o)_t[e].active=!0,Tt=ft(Tt,e,i),Mt(zt,e),e++}}return e},ca=()=>{Et<5&&Et++;const e={satPos:Tt};e.satInView=Ut?St:At,e.satInSun=kt?It:At,Pt.length>=1?e.sensorMarkerArray=Pt:e.sensorMarkerArray=[];try{postMessage(e),postMessage({satVel:zt})}catch(e){if(!process)throw e}}})();