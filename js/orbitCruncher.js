/*! For license information please see orbitCruncher.js.LICENSE.txt */
(()=>{"use strict";var e,t,r,i,a,n,o,s,h;!function(e){e.LEO="Low Earth Orbit",e.MEO="Medium Earth Orbit",e.HEO="Highly Eccentric Orbit",e.GEO="Geosynchronous Orbit",e.OTHER="Uncategorized Orbit"}(e||(e={})),function(e){e.AFSPC="a",e.IMPROVED="i"}(t||(t={})),function(e){e[e.Circle=0]="Circle",e[e.Sphere=1]="Sphere"}(r||(r={})),(h=i||(i={}))[h.Cosine=0]="Cosine",h[h.Haversine=1]="Haversine",(s=a||(a={}))[s.OUT_OF_VIEW=-1]="OUT_OF_VIEW",s[s.ENTER=0]="ENTER",s[s.IN_VIEW=1]="IN_VIEW",s[s.EXIT=2]="EXIT",(o=n||(n={}))[o.UNKNOWN=0]="UNKNOWN",o[o.PAYLOAD=1]="PAYLOAD",o[o.ROCKET_BODY=2]="ROCKET_BODY",o[o.DEBRIS=3]="DEBRIS",o[o.SPECIAL=4]="SPECIAL",o[o.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",o[o.STAR=9]="STAR",o[o.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",o[o.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",o[o.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",o[o.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",o[o.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",o[o.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",o[o.LAUNCH_SITE=16]="LAUNCH_SITE",o[o.LAUNCH_POSITION=17]="LAUNCH_POSITION",o[o.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",o[o.CONTROL_FACILITY=19]="CONTROL_FACILITY",o[o.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",o[o.OPTICAL=21]="OPTICAL",o[o.MECHANICAL=22]="MECHANICAL",o[o.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",o[o.OBSERVER=24]="OBSERVER",o[o.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",o[o.COUNTRY=26]="COUNTRY",o[o.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",o[o.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",o[o.NOTIONAL=29]="NOTIONAL",o[o.FRAGMENT=30]="FRAGMENT",o[o.SHORT_TERM_FENCE=31]="SHORT_TERM_FENCE",o[o.MAX_SPACE_OBJECT_TYPE=32]="MAX_SPACE_OBJECT_TYPE";var l=2*Math.PI,c=(Math.PI,Math.PI/180),u=180/Math.PI,d=1/60/60*c,m=d/1e4,p=864e5,f=86400,v=86164.0905,g=604800,M=Math.PI,y=2/3,w=15e-13,b=1.15741e-8,_=398600.4415;class x{constructor(e){if(function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"posix",void 0),this.posix=e,e<0)throw new Error("Epoch cannot be negative")}toString(){return this.toDateTime().toISOString()}toExcelString(){return this.toString().substring(0,19)}difference(e){return this.posix-e.posix}equals(e){return this.posix===e.posix}toDateTime(){return new Date(1e3*this.posix)}toEpochYearAndDay(){var e=this.toDateTime();return{epochYr:e.getUTCFullYear().toString().slice(2,4),epochDay:(this.getDayOfYear_(e)+(60*e.getUTCHours()+e.getUTCMinutes())/1440).toFixed(8).padStart(12,"0")}}getDayOfYear_(e){var t=e.getUTCMonth(),r=e.getUTCDate(),i=[0,31,59,90,120,151,181,212,243,273,304,334][t]+r;return t>1&&this.isLeapYear_(e)&&i++,i}isLeapYear_(e){var t=e.getUTCFullYear();return 0==(3&t)&&(t%100!=0||t%400==0)}toJulianDate(){return this.posix/f+2440587.5}toJulianCenturies(){return(this.toJulianDate()-2451545)/36525}operatorGreaterThan(e){return this.posix>e.posix}operatorGreaterThanOrEqual(e){return this.posix>=e.posix}operatorLessThan(e){return this.posix<e.posix}operatorLessThanOrEqual(e){return this.posix<=e.posix}}function A(e){for(var t=Math.abs(e),r=1,i=2;i<=t;i++)r*=i;return r}function S(e,t){for(var r=t[0],i=1;i<t.length;i++)r=r*e+t[i];return r}function E(e,t){var r=e,i=2*Math.PI-e,a=Math.atan2(Math.sin(r-t),Math.cos(r-t)),n=Math.atan2(Math.sin(i-t),Math.cos(i-t));return Math.abs(a)<Math.abs(n)?r:i}function T(e,t){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Sphere){case r.Circle:return 2*Math.atan(e/(2*t));case r.Sphere:return 2*Math.asin(e/(2*t));default:throw new Error("Invalid angular diameter method.")}}function P(e,t){var r=0,i=0;if(Math.abs(e)<1e-8)i=t,r=t;else if(e<1-1e-8){var a=Math.sqrt(1-e*e)*Math.sin(t)/(1+e*Math.cos(t)),n=(e+Math.cos(t))/(1+e*Math.cos(t));i=(r=Math.atan2(a,n))-e*Math.sin(r)}return e<1&&((i-=Math.floor(i/(2*Math.PI))*(2*Math.PI))<0&&(i+=2*Math.PI),r-=Math.floor(r/(2*Math.PI))*(2*Math.PI)),{e0:r,m:i}}function I(e,t,r){return Math.max(t,Math.min(e,r))}function D(e,t){return Number(e.toFixed(t))}n.UNKNOWN,n.PAYLOAD,n.ROCKET_BODY,n.DEBRIS,n.SPECIAL,n.BALLISTIC_MISSILE,n.STAR,n.INTERGOVERNMENTAL_ORGANIZATION,n.SUBORBITAL_PAYLOAD_OPERATOR,n.PAYLOAD_OWNER,n.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER,n.PAYLOAD_MANUFACTURER,n.LAUNCH_AGENCY,n.LAUNCH_SITE,n.LAUNCH_POSITION,n.LAUNCH_FACILITY,n.CONTROL_FACILITY,n.GROUND_SENSOR_STATION,n.OPTICAL,n.MECHANICAL,n.PHASED_ARRAY_RADAR,n.OBSERVER,n.BISTATIC_RADIO_TELESCOPE,n.COUNTRY,n.LAUNCH_VEHICLE_MANUFACTURER,n.ENGINE_MANUFACTURER,n.NOTIONAL,n.FRAGMENT,n.SHORT_TERM_FENCE,n.MAX_SPACE_OBJECT_TYPE;class j{constructor(e){(function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"_coeffs",void 0),this._coeffs=e}static fromVals(e){var t=[];for(var r of e){var[i,a,n,o]=r,s=0===a?1:2,h=A(i+a),l=A(i-a)*(s*(2*i+1)),c=Math.sqrt(h/l),u=n/c,d=o/c;t.push([i,a,u,d])}return new j(t)}getCoeffs(e,t){return this._coeffs[j.index_(e,t)]}static index_(e,t){return((e-2)*(e+2)+e>>1)-1+t}}var z=j.fromVals([[2,0,-.000484165371736,0],[2,1,-1.86987635955e-10,1.19528012031e-9],[2,2,243914352398e-17,-140016683654e-17],[3,0,9.57254173792e-7,0],[3,1,202998882184e-17,2.48513158716e-7],[3,2,9.04627768605e-7,-6.19025944205e-7],[3,3,7.21072657057e-7,141435626958e-17],[4,0,5.39873863789e-7,0],[4,1,-5.36321616971e-7,-4.73440265853e-7],[4,2,3.50694105785e-7,6.6267157254e-7],[4,3,9.90771803829e-7,-2.00928369177e-7],[4,4,-1.88560802735e-7,3.08853169333e-7],[5,0,6.8532347563e-8,0],[5,1,-6.21012128528e-8,-9.44226127525e-8],[5,2,6.52438297612e-7,-3.23349612668e-7],[5,3,-4.51955406071e-7,-2.14847190624e-7],[5,4,-2.95301647654e-7,4.96658876769e-8],[5,5,1.74971983203e-7,-6.69384278219e-7],[6,0,-1.49957994714e-7,0],[6,1,-7.60879384947e-8,2.62890545501e-8],[6,2,4.81732442832e-8,-3.73728201347e-7],[6,3,5.71730990516e-8,9.02694517163e-9],[6,4,-8.62142660109e-8,-4.71408154267e-7],[6,5,-2.6713332549e-7,-5.36488432483e-7],[6,6,9.67616121092e-9,-2.37192006935e-7],[7,0,9.0978937145e-8,0],[7,1,2.79872910488e-7,9.54336911867e-8],[7,2,3.29743816488e-7,9.30667596042e-8],[7,3,2.50398657706e-7,-2.17198608738e-7],[7,4,-2.75114355257e-7,-1.23800392323e-7],[7,5,1.93765507243e-9,1.77377719872e-8],[7,6,-3.58856860645e-7,1.51789817739e-7],[7,7,1.09185148045e-9,2.44415707993e-8],[8,0,4.96711667324e-8,0],[8,1,2.33422047893e-8,5.90060493411e-8],[8,2,8.02978722615e-8,6.54175425859e-8],[8,3,-1.91877757009e-8,-8.63454445021e-8],[8,4,-2.44600105471e-7,7.00233016934e-8],[8,5,-2.55352403037e-8,8.91462164788e-8],[8,6,-6.57361610961e-8,3.09238461807e-7],[8,7,6.72811580072e-8,7.47440473633e-8],[8,8,-1.24092493016e-7,1.20533165603e-7],[9,0,2.76714300853e-8,0],[9,1,1.43387502749e-7,2.16834947618e-8],[9,2,2.22288318564e-8,-3.22196647116e-8],[9,3,-1.60811502143e-7,-7.42287409462e-8],[9,4,-9.00179225336e-9,1.94666779475e-8],[9,5,-1.66165092924e-8,-5.41113191483e-8],[9,6,6.26941938248e-8,2.22903525945e-7],[9,7,-1.18366323475e-7,-9.65152667886e-8],[9,8,1.88436022794e-7,-3.08566220421e-9],[9,9,-4.77475386132e-8,9.66412847714e-8],[10,0,5.26222488569e-8,0],[10,1,8.35115775652e-8,-1.31314331796e-7],[10,2,-9.42413882081e-8,-5.1579165739e-8],[10,3,-6.89895048176e-9,-1.53768828694e-7],[10,4,-8.40764549716e-8,-7.92806255331e-8],[10,5,-4.93395938185e-8,-5.05370221897e-8],[10,6,-3.75885236598e-8,-7.95667053872e-8],[10,7,8.11460540925e-9,-3.36629641314e-9],[10,8,4.04927981694e-8,-9.18705975922e-8],[10,9,1.25491334939e-7,-3.76516222392e-8],[10,10,1.00538634409e-7,-2.4014844952e-8],[11,0,-5.09613707522e-8,0],[11,1,1.51687209933e-8,-2.68604146166e-8],[11,2,1.86309749878e-8,-9.90693862047e-8],[11,3,-3.09871239854e-8,-1.4813180426e-7],[11,4,-3.89580205051e-8,-6.3666651198e-8],[11,5,3.77848029452e-8,4.94736238169e-8],[11,6,-1.18676592395e-9,3.44769584593e-8],[11,7,4.11565188074e-9,-8.98252808977e-8],[11,8,-5.984108413e-9,2.43989612237e-8],[11,9,-3.14231072723e-8,4.17731829829e-8],[11,10,-5.21882681927e-8,-1.83364561788e-8],[11,11,4.60344448746e-8,-6.96662308185e-8],[12,0,3.77252636558e-8,0],[12,1,-5.40654977836e-8,-4.35675748979e-8],[12,2,1.42979642253e-8,3.20975937619e-8],[12,3,3.93995876403e-8,2.44264863505e-8],[12,4,-6.86908127934e-8,4.15081109011e-9],[12,5,3.0941112873e-8,7.82536279033e-9],[12,6,3.41523275208e-9,3.91765484449e-8],[12,7,-1.86909958587e-8,3.56131849382e-8],[12,8,-2.53769398865e-8,1.69361024629e-8],[12,9,4.22880630662e-8,2.52692598301e-8],[12,10,-6.17619654902e-9,3.08375794212e-8],[12,11,1.12502994122e-8,-6.37946501558e-9],[12,12,-2.4953260739e-9,-1.117806019e-8],[13,0,4.22982206413e-8,0],[13,1,-5.13569699124e-8,3.90510386685e-8],[13,2,5.59217667099e-8,-6.27337565381e-8],[13,3,-2.19360927945e-8,9.74829362237e-8],[13,4,-3.13762599666e-9,-1.19627874492e-8],[13,5,5.90049394905e-8,6.64975958036e-8],[13,6,-3.59038073075e-8,-6.57280613686e-9],[13,7,2.53002147087e-9,-6.21470822331e-9],[13,8,-9.83150822695e-9,-1.04740222825e-8],[13,9,2.47325771791e-8,4.52870369936e-8],[13,10,4.1032465393e-8,-3.6812102948e-8],[13,11,-4.43869677399e-8,-4.76507804288e-9],[13,12,-3.12622200222e-8,8.78405809267e-8],[13,13,-6.12759553199e-8,6.85261488594e-8],[14,0,-2.42786502921e-8,0],[14,1,-1.86968616381e-8,2.94747542249e-8],[14,2,-3.67789379502e-8,-5.16779392055e-9],[14,3,3.58875097333e-8,2.04618827833e-8],[14,4,1.83865617792e-9,-2.26780613566e-8],[14,5,2.87344273542e-8,-1.63882249728e-8],[14,6,-1.94810485574e-8,2.47831272781e-9],[14,7,3.75003839415e-8,-4.17291319429e-9],[14,8,-3.50946485865e-8,-1.53515265203e-8],[14,9,3.20284939341e-8,2.88804922064e-8],[14,10,3.90329180008e-8,-1.44308452469e-9],[14,11,1.53970516502e-8,-3.90548173245e-8],[14,12,8.40829163869e-9,-3.11327189117e-8],[14,13,3.22147043964e-8,4.5189722496e-8],[14,14,-5.18980794309e-8,-4.81506636748e-9],[15,0,1.47910068708e-9,0],[15,1,1.00817268177e-8,1.09773066324e-8],[15,2,-2.13942673775e-8,-3.08914875777e-8],[15,3,5.21392929041e-8,1.72892926103e-8],[15,4,-4.08150084078e-8,6.50174707794e-9],[15,5,1.24935723108e-8,8.08375563996e-9],[15,6,3.31211643896e-8,-3.68246004304e-8],[15,7,5.96210699259e-8,5.31841171879e-9],[15,8,-3.22428691498e-8,2.21523579587e-8],[15,9,1.28788268085e-8,3.75629820829e-8],[15,10,1.04688722521e-8,1.47222147015e-8],[15,11,-1.11675061934e-9,1.80996198432e-8],[15,12,-3.23962134415e-8,1.55243104746e-8],[15,13,-2.83933019117e-8,-4.22066791103e-9],[15,14,5.1916885933e-9,-2.43752739666e-8],[15,15,-1.90930538322e-8,-4.71139421558e-9],[16,0,-3.15322986722e-9,0],[16,1,2.58360856231e-8,3.25447560859e-8],[16,2,-2.33671404512e-8,2.88799363439e-8],[16,3,-3.36019429391e-8,-2.2041898801e-8],[16,4,4.02316284314e-8,4.83837716909e-8],[16,5,-1.29501939245e-8,-3.19458578129e-9],[16,6,1.40239252323e-8,-3.50760208303e-8],[16,7,-7.08412635136e-9,-8.81581561131e-9],[16,8,-2.09018868094e-8,5.0052739053e-9],[16,9,-2.18588720643e-8,-3.95012419994e-8],[16,10,-1.17529900814e-8,1.14211582961e-8],[16,11,1.87574042592e-8,-3.03161919925e-9],[16,12,1.95400194038e-8,6.66983574071e-9],[16,13,1.38196369576e-8,1.02778499508e-9],[16,14,-1.93182168856e-8,-3.86174893776e-8],[16,15,-1.45149060142e-8,-3.27443078739e-8],[16,16,-3.79671710746e-8,3.02155372655e-9],[17,0,1.97605066395e-8,0],[17,1,-2.54177575118e-8,-3.06630529689e-8],[17,2,-1.95988656721e-8,6.4926589341e-9],[17,3,5.64123066224e-9,6.78327095529e-9],[17,4,7.07457075637e-9,2.49437600834e-8],[17,5,-1.54987006052e-8,6.60021551851e-9],[17,6,-1.18194012847e-8,-2.89770975177e-8],[17,7,2.42149702381e-8,-4.22222973697e-9],[17,8,3.88442097559e-8,3.58904095943e-9],[17,9,3.81356493231e-9,-2.81466943714e-8],[17,10,-3.88216085542e-9,1.81328176508e-8],[17,11,-1.57356600363e-8,1.06560649404e-8],[17,12,2.88013010655e-8,2.03450136084e-8],[17,13,1.65503425731e-8,2.04667531435e-8],[17,14,-1.41983872649e-8,1.14948025244e-8],[17,15,5.42100361657e-9,5.32610369811e-9],[17,16,-3.01992205043e-8,3.65331918531e-9],[17,17,-3.43086856041e-8,-1.98523455381e-8],[18,0,5.08691038332e-9,0],[18,1,7.21098449649e-9,-3.88714473013e-8],[18,2,1.40631771205e-8,1.00093396253e-8],[18,3,-5.07232520873e-9,-4.90865931335e-9],[18,4,5.48759308217e-8,-1.3526711772e-9],[18,5,5.48710485555e-9,2.64338629459e-8],[18,6,1.46570755271e-8,-1.36438019951e-8],[18,7,6.75812328417e-9,6.88577494235e-9],[18,8,3.07619845144e-8,4.17827734107e-9],[18,9,-1.8847060188e-8,3.68302736953e-8],[18,10,5.27535358934e-9,-4.66091535881e-9],[18,11,-7.2962851896e-9,1.9521520802e-9],[18,12,-2.97449412422e-8,-1.64497878395e-8],[18,13,-6.27919717152e-9,-3.48383939938e-8],[18,14,-8.1560533641e-9,-1.28636585027e-8],[18,15,-4.05003412879e-8,-2.02684998021e-8],[18,16,1.04141042028e-8,6.61468817624e-9],[18,17,3.58771586841e-9,4.48065587564e-9],[18,18,3.12351953717e-9,-1.09906032543e-8],[19,0,-3.25780965394e-9,0],[19,1,-7.59903885319e-9,1.26835472605e-9],[19,2,3.53541528655e-8,-1.31346303514e-9],[19,3,-9.74103607309e-9,1.50662259043e-9],[19,4,1.57039009057e-8,-7.61677383811e-9],[19,5,1.09629213379e-8,2.83172176438e-8],[19,6,-4.08745178658e-9,1.86219430719e-8],[19,7,4.78275337044e-9,-7.172834559e-9],[19,8,2.9490836428e-8,-9.93037002883e-9],[19,9,3.07961427159e-9,6.94110477214e-9],[19,10,-3.38415069043e-8,-7.37981767136e-9],[19,11,1.60443652916e-8,9.96673453483e-9],[19,12,-2.47106581581e-9,9.16852310642e-9],[19,13,-7.4471737998e-9,-2.82584466742e-8],[19,14,-4.70502589215e-9,-1.29526697983e-8],[19,15,-1.76580549771e-8,-1.40350990039e-8],[19,16,-2.16950096188e-8,-7.24534721567e-9],[19,17,2.90444936079e-8,-1.5345653107e-8],[19,18,3.48382199593e-8,-9.54146344917e-9],[19,19,-2.5734934943e-9,4.83151822363e-9],[20,0,2.22384610651e-8,0],[20,1,5.16303125218e-9,6.69626726966e-9],[20,2,1.98831128238e-8,1.75183843257e-8],[20,3,-3.62601436785e-9,3.79590724141e-8],[20,4,2.42238118652e-9,-2.11057611874e-8],[20,5,-1.07042562564e-8,-7.71860083169e-9],[20,6,1.1047483757e-8,-2.17720365898e-9],[20,7,-2.10090282728e-8,-223491503969e-22],[20,8,4.42419185637e-9,1.83035804593e-9],[20,9,1.78846216942e-8,-6.63940865358e-9],[20,10,-3.25394919988e-8,-5.12308873621e-9],[20,11,1.38992707697e-8,-1.87706454942e-8],[20,12,-6.3575060075e-9,1.80260853103e-8],[20,13,2.75222725997e-8,6.90887077588e-9],[20,14,1.15841169405e-8,-1.43176160143e-8],[20,15,-2.60130744291e-8,-7.84379672413e-10],[20,16,-1.24137147118e-8,-2.77500443628e-10],[20,17,4.3690966796e-9,-1.37420446198e-8],[20,18,1.51842883022e-8,-8.08429903142e-10],[20,19,-3.14942002852e-9,1.06505202245e-8],[20,20,4.01448327968e-9,-1.20450644785e-8],[21,0,5.87820252575e-9,0],[21,1,-1.61000670141e-8,2.84359400791e-8],[21,2,-6.54460482558e-9,3.78474868508e-9],[21,3,1.9549199526e-8,2.26286963716e-8],[21,4,-5.76604339239e-9,1.94493782631e-8],[21,5,2.58856303016e-9,1.70850368669e-9],[21,6,-1.40168810589e-8,-273814826381e-23],[21,7,-8.64357168475e-9,4.42612277119e-9],[21,8,-1.70477278237e-8,1.5071119263e-9],[21,9,1.64489062394e-8,8.30113196365e-9],[21,10,-1.09928976409e-8,-1.46913794684e-9],[21,11,6.99300364214e-9,-3.53590565124e-8],[21,12,-3.19300109594e-9,1.45786917947e-8],[21,13,-1.8985452459e-8,1.40514791436e-8],[21,14,2.03580785674e-8,7.5577246284e-9],[21,15,1.75530220278e-8,1.04533886832e-8],[21,16,7.86969109367e-9,-6.56089715279e-9],[21,17,-6.99484489981e-9,-7.36064901147e-9],[21,18,2.59643291521e-8,-1.1156080613e-8],[21,19,-2.7374163641e-8,1.63958190052e-8],[21,20,-2.68682473584e-8,1.62086057168e-8],[21,21,8.30374873932e-9,-3.75546121742e-9],[22,0,-1.13735124259e-8,0],[22,1,1.62309865679e-8,-3.77303475153e-9],[22,2,-2.64090261387e-8,-2.10832402428e-9],[22,3,1.1658001654e-8,1.06764617222e-8],[22,4,-2.70979141451e-9,1.74980820565e-8],[22,5,-1.8645262501e-9,7.44718166476e-10],[22,6,9.64390704406e-9,-6.37316743908e-9],[22,7,1.59715981795e-8,4.39600942993e-9],[22,8,-2.35157426998e-8,4.83673695086e-9],[22,9,8.29435796737e-9,8.73382159986e-9],[22,10,6.00704037701e-9,2.21854121109e-8],[22,11,-4.96078301539e-9,-1.78822672474e-8],[22,12,2.13502315463e-9,-7.96120522503e-9],[22,13,-1.72631843979e-8,1.97026896892e-8],[22,14,1.09297133018e-8,8.25280905301e-9],[22,15,2.58410840629e-8,4.60172998318e-9],[22,16,1.41258558921e-10,-7.182380053e-9],[22,17,8.89294096846e-9,-1.45618348246e-8],[22,18,1.05047447464e-8,-1.64271275481e-8],[22,19,1.41305509124e-8,-3.84537168599e-9],[22,20,-1.67617655441e-8,1.99561513321e-8],[22,21,-2.50948756455e-8,2.36151346133e-8],[22,22,-9.59596694809e-9,2.49861413883e-9],[23,0,-2.26201075082e-8,0],[23,1,1.10870239758e-8,1.6137915153e-8],[23,2,-1.35191027779e-8,-5.01411714852e-9],[23,3,-2.45128011445e-8,-1.60570438998e-8],[23,4,-2.39887874558e-8,7.31536362289e-9],[23,5,7.99636624146e-10,-1.6144974141e-10],[23,6,-1.26082781309e-8,1.61308155632e-8],[23,7,-8.04132133762e-9,-1.11647197494e-9],[23,8,7.53785326469e-9,-3.2967992522e-10],[23,9,2.5505325495e-9,-1.28071525548e-8],[23,10,1.65167929134e-8,-1.85239620853e-9],[23,11,9.42656822725e-9,1.52386181583e-8],[23,12,1.63632625535e-8,-1.24098327824e-8],[23,13,-1.15107832808e-8,-4.84279171627e-9],[23,14,6.75321602206e-9,-1.82899962212e-9],[23,15,1.8689804286e-8,-3.60523754481e-9],[23,16,6.13840121864e-9,1.10362707266e-8],[23,17,-5.5372102391e-9,-1.2845906046e-8],[23,18,8.43361263813e-9,-1.49115921605e-8],[23,19,-5.20848228342e-9,1.07789593943e-8],[23,20,8.60434396837e-9,-5.34641639372e-9],[23,21,1.54578189867e-8,1.15333325358e-8],[23,22,-1.78417206471e-8,4.33092348903e-9],[23,23,2.85393980111e-9,-1.1323294597e-8],[24,0,7.63657386411e-10,0],[24,1,-3.14943681427e-9,-1.77191190396e-9],[24,2,1.38595572093e-9,1.711040664e-8],[24,3,-4.76406913528e-9,-9.42329378125e-9],[24,4,6.05108036341e-9,5.49769910191e-9],[24,5,-7.2947904748e-9,-2.13826490504e-8],[24,6,4.54210367535e-9,1.85596665318e-9],[24,7,-6.14244489298e-9,4.70081667951e-9],[24,8,1.54822444425e-8,-4.34472097787e-9],[24,9,-9.76623425797e-9,-1.6275513762e-8],[24,10,1.08934628974e-8,2.09168783608e-8],[24,11,1.45280775337e-8,1.87398018797e-8],[24,12,1.18970310717e-8,-6.2293309815e-9],[24,13,-2.89676673058e-9,3.13251295024e-9],[24,14,-2.00006558603e-8,-1.87249636821e-9],[24,15,6.10396350698e-9,-1.58957680563e-8],[24,16,8.88750753375e-9,2.96492703352e-9],[24,17,-1.19629964611e-8,-5.82074593955e-9],[24,18,-6.52630641555e-10,-1.01332355837e-8],[24,19,-4.38896550264e-9,-8.14552569977e-9],[24,20,-5.17551981851e-9,8.90354942378e-9],[24,21,6.03436755046e-9,1.40116090741e-8],[24,22,3.93640283055e-9,-4.28327655754e-9],[24,23,-6.1428347955e-9,-8.692679021e-9],[24,24,1.23903921309e-8,-3.75059286959e-9],[25,0,3.21309208115e-9,0],[25,1,6.89649208567e-9,-7.995518294e-9],[25,2,2.19498139173e-8,9.01370249111e-9],[25,3,-1.17774931587e-8,-1.26719024392e-8],[25,4,9.4254362892e-9,6.84937199311e-10],[25,5,-1.00497487339e-8,-9.2212239967e-10],[25,6,1.66832871654e-8,4.30583576199e-10],[25,7,7.71426681671e-9,-4.11703290425e-9],[25,8,3.1565194415e-9,-7.81960217669e-10],[25,9,-2.99385350515e-8,2.12695473199e-8],[25,10,8.81931818034e-9,-4.18041586166e-9],[25,11,1.2340148568e-9,1.08069128123e-8],[25,12,-7.65146786755e-9,1.1747374286e-8],[25,13,8.32308127158e-9,-1.13072604626e-8],[25,14,-1.97042124794e-8,6.53183488635e-9],[25,15,-4.35732052985e-9,-7.35147227573e-9],[25,16,9.18239548455e-10,-1.28124888592e-8],[25,17,-1.52176535379e-8,-3.21280397924e-9],[25,18,1.21901534245e-9,-1.49040483259e-8],[25,19,7.77589111757e-9,9.92518771941e-9],[25,20,-7.50856670672e-9,-5.62826155305e-10],[25,21,1.0723284068e-8,8.16090174381e-9],[25,22,-1.39902235929e-8,3.58546198324e-9],[25,23,8.40270853655e-9,-1.23338407961e-8],[25,24,4.12447134569e-9,-8.30716465317e-9],[25,25,1.07484366767e-8,4.72369913984e-9],[26,0,5.05833635414e-9,0],[26,1,-1.54756177965e-9,-7.70012788871e-9],[26,2,-3.58729876836e-9,1.14484111182e-8],[26,3,1.40505671267e-8,4.30905534294e-9],[26,4,1.90548709216e-8,-1.94161179658e-8],[26,5,1.07190025408e-8,9.08952851813e-9],[26,6,1.13116909406e-8,-9.34393384449e-9],[26,7,-1.562282956e-9,4.81168302477e-9],[26,8,3.94920146317e-9,1.153405253e-9],[26,9,-1.20371433638e-8,4.75177058134e-10],[26,10,-1.41246124334e-8,-6.45217247294e-9],[26,11,-5.20385857649e-9,2.12443340407e-9],[26,12,-1.75071176484e-8,2.01974971938e-9],[26,13,-335708835245e-22,1.50474091686e-9],[26,14,7.96385051492e-9,7.84704068835e-9],[26,15,-1.32388781089e-8,8.03960091442e-9],[26,16,1.29093226253e-9,-6.11434455706e-9],[26,17,-1.24494157564e-8,7.8077484564e-9],[26,18,-1.30317424459e-8,4.9998916257e-9],[26,19,-2.05807464595e-9,3.54396135438e-9],[26,20,6.55952144018e-9,-1.1687804118e-8],[26,21,-8.70038868454e-9,1.68222257564e-9],[26,22,1.01580452049e-8,7.54358531576e-9],[26,23,1.24105057436e-9,1.08580088935e-8],[26,24,8.58620351967e-9,1.48288510099e-8],[26,25,3.93441578873e-9,-5.97792415806e-10],[26,26,3.93179749568e-10,1.93894997772e-9],[27,0,2.7717632236e-9,0],[27,1,2.48982909452e-9,3.77378455357e-9],[27,2,1.45270146453e-9,5.03113268026e-10],[27,3,-3.62306812856e-10,1.088457625e-8],[27,4,-5.99191537157e-10,9.40517681233e-9],[27,5,1.67690560888e-8,1.38338587209e-8],[27,6,3.64265989803e-9,6.13032807744e-9],[27,7,-1.23459266009e-8,-3.86514075952e-9],[27,8,-6.1040764482e-9,-8.99504471581e-9],[27,9,3.40113157078e-9,1.10992938665e-8],[27,10,-1.33158893187e-8,1.72832279915e-10],[27,11,1.98322808107e-9,-9.69054254426e-9],[27,12,-1.13695413044e-8,1.90072943781e-9],[27,13,-4.97224781272e-9,-4.14521559996e-9],[27,14,1.55033957088e-8,1.1882128969e-8],[27,15,-1.80057326196e-9,1.1763698622e-9],[27,16,2.7572995289e-9,2.78770269194e-9],[27,17,3.79281571763e-9,3.14983101049e-10],[27,18,-2.87144071715e-9,7.44190558718e-9],[27,19,-3.26518614707e-10,-2.93243500455e-9],[27,20,-8.55182561846e-10,3.47617208115e-9],[27,21,4.86877030983e-9,-7.0872528354e-9],[27,22,-5.74332100084e-9,2.90056687384e-9],[27,23,-5.41033470941e-9,-1.10452433655e-8],[27,24,4.16951885933e-10,-1.80038186307e-9],[27,25,1.22815470212e-8,5.62425137285e-9],[27,26,-6.59498075164e-9,-2.22838418639e-9],[27,27,7.60067381059e-9,6.9238741892e-10],[28,0,-9.10376375863e-9,0],[28,1,-5.55484993587e-9,7.9330019258e-9],[28,2,-1.5189131211e-8,-7.97957089012e-9],[28,3,2.5318254224e-9,1.11373049392e-8],[28,4,-1.99212752126e-9,1.25054704704e-8],[28,5,1.08871875702e-8,-4.22573826989e-9],[28,6,-5.22194316032e-9,1.32656509709e-8],[28,7,-7.05588863746e-10,5.12740997711e-9],[28,8,-4.23704976329e-9,-3.32584474553e-9],[28,9,1.13842461859e-8,-1.04163010811e-8],[28,10,-9.22867885082e-9,8.17851851593e-9],[28,11,-2.9809734257e-9,-1.45944538949e-9],[28,12,-4.83471863256e-10,9.64951845027e-9],[28,13,1.64993974957e-9,6.63803768689e-9],[28,14,-8.23334828619e-9,-1.26939492243e-8],[28,15,-1.22774798187e-8,-1.97537366262e-9],[28,16,-3.57280690709e-9,-1.35890044766e-8],[28,17,1.33742628184e-8,-4.72374226319e-9],[28,18,5.62532322748e-9,-3.87230727328e-9],[28,19,5.77104709635e-9,2.35011734292e-8],[28,20,-1.15922189521e-9,6.62939940662e-9],[28,21,6.63154344375e-9,6.33201211223e-9],[28,22,-1.94231451662e-9,-7.33725263107e-9],[28,23,6.20158165102e-9,2.61202437682e-9],[28,24,1.11186270621e-8,-1.35606378769e-8],[28,25,7.29495896149e-9,-1.76041477031e-8],[28,26,1.23084992259e-8,3.89251843939e-9],[28,27,-8.11971206724e-9,1.3027922855e-9],[28,28,6.9872587832e-9,6.80526167979e-9],[29,0,-4.97406439473e-9,0],[29,1,4.98979084585e-9,-9.82512461189e-9],[29,2,-3.12119754621e-9,-2.63433487676e-9],[29,3,1.82518120454e-9,-1.05769977751e-8],[29,4,-2.42786314995e-8,2.26110758622e-9],[29,5,-6.8110306367e-9,6.01242555817e-9],[29,6,1.19592879211e-8,9.7020069574e-9],[29,7,-5.91100934209e-9,-2.14599788734e-9],[29,8,-1.6946723555e-8,1.11160276839e-8],[29,9,-1.2937116169e-9,1.41793573226e-9],[29,10,1.37184624798e-8,1.79543486167e-9],[29,11,-5.96272885876e-9,6.33350180946e-9],[29,12,-4.56278910357e-10,-5.01222008898e-9],[29,13,-1.09095923049e-9,-2.34179014389e-9],[29,14,-3.23718965114e-9,-4.58306325034e-9],[29,15,-9.57359749406e-9,-6.77546725808e-9],[29,16,1.37450063496e-9,-1.4864526654e-8],[29,17,-1.57662415501e-9,-3.92506699434e-9],[29,18,-3.67597840865e-9,-2.58549575294e-9],[29,19,-6.30046143533e-9,5.86840708296e-9],[29,20,-7.96446331531e-9,5.74239983127e-9],[29,21,-9.8726430286e-9,-5.51700601596e-9],[29,22,1.15574836058e-8,-1.47663300854e-9],[29,23,-1.84576717899e-9,2.63546763516e-9],[29,24,3.42199668119e-10,-2.38230581193e-9],[29,25,5.85864038329e-9,8.68333958543e-9],[29,26,7.87039835357e-9,-6.92232980921e-9],[29,27,-7.98313300841e-9,-1.01903214091e-9],[29,28,9.73355537526e-9,-5.71293958601e-9],[29,29,1.28224843767e-8,-5.01548480482e-9],[30,0,6.02882084759e-9,0],[30,1,-5.57556615596e-10,1.24285275602e-9],[30,2,-1.0370644769e-8,-2.61802322444e-9],[30,3,2.14692300603e-9,-1.36464188501e-8],[30,4,-4.55090433473e-10,-3.91117213505e-9],[30,5,-4.36973977446e-9,-5.35558974983e-9],[30,6,3.28451285815e-10,3.17808233981e-9],[30,7,4.04923220309e-9,1.83962458779e-9],[30,8,2.54952865236e-9,4.62058281854e-9],[30,9,-7.32592511128e-9,-9.7277817424e-9],[30,10,4.27609484555e-9,-4.10864961814e-9],[30,11,-1.04043005227e-8,1.07581457651e-8],[30,12,1.71622295302e-8,-1.08456775556e-8],[30,13,1.42173587056e-8,2.96806226352e-9],[30,14,5.11505860834e-9,8.07288811257e-9],[30,15,2.10512146846e-10,-1.04541123836e-9],[30,16,-1.08921920457e-8,4.35254063533e-9],[30,17,-6.14382436271e-9,-6.03140938575e-9],[30,18,-1.1114926509e-8,-7.65521957976e-9],[30,19,-1.2967398433e-8,2.42005669694e-9],[30,20,-4.89261172033e-9,1.27655684422e-8],[30,21,-1.0628473781e-8,-5.97537587412e-9],[30,22,-4.83763240001e-9,-9.37720111156e-9],[30,23,5.7411388543e-9,-1.03756082222e-8],[30,24,-2.35238020789e-9,-2.7590933962e-9],[30,25,3.04426404856e-9,-1.54853389229e-8],[30,26,1.22149787623e-9,1.24069551653e-8],[30,27,-7.95063844863e-9,1.27529431593e-8],[30,28,-5.47120800289e-9,-7.96006293513e-9],[30,29,4.1592295424e-9,1.89489104417e-9],[30,30,2.64794018006e-9,8.12994755178e-9],[31,0,7.33100089318e-9,0],[31,1,6.11169376734e-9,-1.60774540844e-8],[31,2,7.49625106123e-9,6.37776322444e-9],[31,3,-8.89920966189e-9,-7.6550294416e-9],[31,4,1.22555580723e-8,-4.94466436575e-9],[31,5,-8.71279064045e-9,3.08325747379e-9],[31,6,-1.68890803585e-9,1.3703621527e-9],[31,7,-2.71996133536e-9,-6.8862512168e-10],[31,8,-7.50260355354e-10,2.28102724239e-9],[31,9,-6.55840403272e-10,5.24179002617e-9],[31,10,3.99161675027e-9,-4.73500202132e-9],[31,11,6.93506892777e-10,2.08668068881e-8],[31,12,5.5287540984e-10,4.52042167068e-9],[31,13,9.40389423562e-9,4.6684078573e-9],[31,14,-7.88650771167e-9,3.51952460147e-9],[31,15,4.29954776132e-9,-2.80870684394e-9],[31,16,-7.19430261173e-9,6.11805049979e-9],[31,17,-2.53821168958e-9,6.83008216722e-9],[31,18,-6.02099321996e-10,-2.04187286905e-9],[31,19,2.89086482301e-9,4.43976791609e-9],[31,20,-1.75732193914e-9,5.64081954558e-9],[31,21,-9.67143669208e-9,7.09357408027e-9],[31,22,-9.0531201252e-9,-1.18308417466e-8],[31,23,8.32234353898e-9,4.51774572555e-9],[31,24,-2.81565064366e-9,-3.34369513768e-9],[31,25,-1.64574268169e-8,-2.20460908971e-9],[31,26,-1.26653070356e-8,1.59189398991e-9],[31,27,-1.34953305827e-9,1.07507650019e-8],[31,28,1.04226918411e-8,2.8072229491e-9],[31,29,-1.5812688103e-9,-2.18247510672e-9],[31,30,-9.47416722001e-10,-7.78077525656e-9],[31,31,-8.59193452715e-9,-1.85200316483e-9],[32,0,-2.33966288032e-9,0],[32,1,-1.69210486076e-9,1.27760467976e-9],[32,2,1.13999662663e-8,-3.35609127916e-9],[32,3,-1.444433154e-10,4.05424830941e-9],[32,4,8.56367829112e-10,-6.75422476107e-9],[32,5,8.60776205333e-9,1.82572279646e-9],[32,6,-1.00402568672e-8,-7.6305617634e-9],[32,7,1.37058613278e-9,2.75465347035e-9],[32,8,1.19653531908e-8,4.91018212548e-9],[32,9,7.332252213e-9,7.18971591052e-10],[32,10,912133506379e-22,-5.70680927495e-9],[32,11,-5.42043742127e-9,7.583606425e-9],[32,12,-1.70289059214e-8,1.40808168623e-8],[32,13,4.02186822027e-9,5.34936491964e-9],[32,14,-5.44420334437e-9,2.20410694316e-9],[32,15,5.1658020828e-9,-8.74727531741e-9],[32,16,4.14867061294e-9,4.27270420004e-9],[32,17,-6.46857778906e-9,1.01916486215e-8],[32,18,1.27286345117e-8,-1.12136888089e-9],[32,19,7.55189536923e-10,-2.7754653073e-9],[32,20,3.8161056442e-9,3.19534855653e-10],[32,21,-2.33262996771e-9,1.16411650251e-8],[32,22,-1.20880678762e-8,-2.72691793232e-9],[32,23,8.18682122143e-9,-2.33549712722e-9],[32,24,-3.55036315667e-9,6.54834763861e-10],[32,25,-1.89374992503e-8,-6.43429532848e-9],[32,26,5.22535531492e-9,-3.68856221241e-9],[32,27,-4.53740085214e-9,-6.68075560111e-9],[32,28,1.653041745e-9,-5.73130340772e-9],[32,29,4.32768192965e-9,2.88179889934e-9],[32,30,-6.74805866294e-9,1.39346268546e-9],[32,31,-6.26740251766e-9,-2.18475608171e-10],[32,32,3.3975660331e-9,1.42646165155e-9],[33,0,-3.49357179498e-9,0],[33,1,-1.39642913445e-9,-2.16391760811e-9],[33,2,-7.48774194896e-9,-5.0187208152e-10],[33,3,-1.99661955793e-9,7.0930410268e-9],[33,4,-4.270199819e-9,2.27426656698e-9],[33,5,2.37784729729e-10,3.74439169451e-9],[33,6,1.22603039921e-9,-2.87328300836e-9],[33,7,-6.11215086076e-9,2.49383366316e-9],[33,8,-8.23144405057e-10,1.44915555407e-8],[33,9,5.05097392033e-9,7.4051746902e-9],[33,10,-2.39709923317e-9,1.07022906758e-9],[33,11,2.43388836443e-9,-8.67071813487e-9],[33,12,-2.33510532329e-9,8.9435069891e-9],[33,13,2.6041538193e-9,3.13805750981e-9],[33,14,4.92959662302e-9,5.71204550617e-9],[33,15,-4.64145303396e-9,-3.47835302325e-9],[33,16,7.39530517571e-9,6.28613189283e-9],[33,17,-5.73064590551e-9,1.28779114927e-8],[33,18,-9.74285933562e-9,-1.89598124592e-9],[33,19,8.52447331156e-9,2.07561717246e-9],[33,20,-3.32627500309e-9,-7.77689999053e-9],[33,21,9.38761672387e-10,8.17787598674e-10],[33,22,-1.05439940875e-8,-1.56190227392e-8],[33,23,1.15896250314e-10,-1.01356350767e-8],[33,24,1.11416074527e-8,-8.57153776484e-9],[33,25,5.24730532375e-9,-1.04941656537e-8],[33,26,1.09590005596e-8,4.5404144025e-9],[33,27,-1.32772908147e-9,1.26154161942e-9],[33,28,1.75943381421e-9,-1.02060346415e-9],[33,29,-1.63075128633e-8,5.72191328891e-9],[33,30,-1.56977064277e-9,-1.84579402264e-8],[33,31,4.69481868853e-9,1.02290050028e-9],[33,32,6.56775919022e-9,-4.39711913398e-9],[33,33,-1.52043850303e-9,8.31263004529e-9],[34,0,-9.08833340447e-9,0],[34,1,-2.76889795047e-9,6.3891897021e-9],[34,2,6.7688190654e-9,5.30082118696e-9],[34,3,1.25429669786e-8,8.11619669834e-9],[34,4,-8.30005417504e-9,1.19586870272e-9],[34,5,-3.88131685638e-9,3.54963449977e-9],[34,6,4.84093709579e-10,7.62975480293e-9],[34,7,2.75125793239e-9,-6.56263573163e-9],[34,8,-9.83446807592e-9,4.68751478021e-9],[34,9,1.53042494664e-9,2.10165697829e-9],[34,10,-7.52633242389e-9,1.46544229781e-9],[34,11,-3.82043431506e-9,-1.07829735599e-9],[34,12,1.42629362262e-8,-4.60063642968e-9],[34,13,-3.56240984255e-9,1.03329523096e-9],[34,14,-2.50187664392e-9,9.64686908241e-9],[34,15,3.75939804157e-10,6.2628624977e-9],[34,16,-1.45874042713e-9,-1.4938092908e-9],[34,17,-4.73747570512e-9,3.93698829389e-9],[34,18,-1.47488701345e-8,-5.38197998817e-9],[34,19,-3.59837568897e-9,7.15302015583e-9],[34,20,3.64466859655e-9,-1.01824147346e-8],[34,21,-9.81980297066e-10,-7.42166456548e-9],[34,22,-3.18152215406e-9,3.36620175035e-9],[34,23,-1.1297312057e-9,-1.18981902172e-8],[34,24,8.78079044954e-9,4.20436158037e-9],[34,25,8.41097170248e-9,-9.86300815266e-9],[34,26,3.99964384231e-9,-1.29360014691e-8],[34,27,1.31566196208e-8,-3.91137836409e-9],[34,28,-1.65320604713e-10,-2.00370653858e-8],[34,29,7.08151676681e-9,-4.31563574113e-9],[34,30,-2.05666035677e-8,-5.86948946952e-10],[34,31,-4.57411268111e-9,-1.60852780125e-9],[34,32,9.14033593474e-9,2.31645138264e-9],[34,33,1.37617937967e-8,4.3547198646e-9],[34,34,-8.54011998155e-9,1.65364599023e-9],[35,0,8.60443158492e-9,0],[35,1,-1.07631176168e-8,-1.03576288219e-8],[35,2,-1.48166749807e-8,7.47316845223e-9],[35,3,1.88623900305e-9,3.49967679465e-9],[35,4,-2.82338523108e-9,9.20674937921e-9],[35,5,-7.23688443416e-9,-1.15478796146e-8],[35,6,3.28708320436e-9,7.90142264483e-9],[35,7,-3.45829826367e-9,4.71386839716e-9],[35,8,4.15911228686e-9,9.21486965423e-9],[35,9,-7.83584593022e-10,-1.08780700595e-9],[35,10,-2.63078124596e-9,1.14437669825e-8],[35,11,3.1135284219e-9,-3.11508942142e-9],[35,12,8.10432165903e-9,-6.4323395678e-9],[35,13,-1.60870380988e-9,3.02852925442e-9],[35,14,-7.16511186947e-9,-7.02737046917e-9],[35,15,-1.53690564123e-8,8.75984924717e-9],[35,16,-6.89772047703e-9,-7.36827047584e-9],[35,17,7.03755899027e-10,-8.82920485773e-9],[35,18,-5.55247661498e-9,-1.14710477959e-8],[35,19,-1.07112499273e-9,-3.41854119412e-9],[35,20,9.92702305837e-10,-1.13573745208e-10],[35,21,1.29333785663e-8,-8.17657795386e-10],[35,22,7.51479477595e-9,5.7229930908e-9],[35,23,-8.16391242216e-9,-2.22442612532e-9],[35,24,2.78435090517e-9,6.38499607176e-9],[35,25,7.16858934156e-9,1.99781103645e-9],[35,26,-4.70300232305e-9,4.61488943108e-9],[35,27,1.09602089094e-8,-1.33812635796e-8],[35,28,7.88159460716e-9,-1.53673024839e-8],[35,29,7.70786810766e-9,3.40140754669e-9],[35,30,-4.0519283993e-9,2.87370616224e-9],[35,31,7.84140204315e-9,4.0412480788e-9],[35,32,-3.16267901777e-9,-7.41858064221e-9],[35,33,5.8609633966e-9,-3.07739390905e-9],[35,34,-1.21632099674e-9,2.66717400938e-9],[35,35,-5.8786572941e-9,-5.01230638002e-9],[36,0,-4.02590604243e-9,0],[36,1,-1.13386686386e-9,5.14982653283e-9],[36,2,-4.31575901448e-9,-3.40211031655e-9],[36,3,700409280444e-22,-1.58895672921e-8],[36,4,3.00961129935e-9,1.38917218538e-9],[36,5,-7.42261535513e-9,1.4033786019e-9],[36,6,1.08546024568e-8,-3.16311943226e-9],[36,7,1.70813806147e-9,6.17680210154e-9],[36,8,3.44939360246e-9,-5.03767857861e-9],[36,9,2.92192219493e-9,-3.74028113708e-10],[36,10,4.23119681703e-9,6.83503143788e-9],[36,11,-4.10039232642e-9,4.75118294475e-9],[36,12,4.87204962837e-10,-9.84587714675e-9],[36,13,-6.15416963507e-9,8.0318113556e-9],[36,14,-1.04141682764e-8,-5.94203574762e-9],[36,15,9.54892409044e-10,3.33310574172e-9],[36,16,1.25505913598e-9,-1.60569406116e-10],[36,17,4.95066186034e-9,-8.65314022477e-9],[36,18,1.77184202015e-9,4.4603340077e-9],[36,19,-5.25149217565e-9,-6.65319486115e-9],[36,20,-6.03793346956e-9,3.52627660597e-9],[36,21,1.0690892473e-8,-5.67948915026e-9],[36,22,3.21356130034e-9,1.61234121461e-9],[36,23,-3.61160199501e-10,2.74891917069e-9],[36,24,2.10662869987e-9,-4.24514998756e-9],[36,25,4.3497929214e-9,1.5607147346e-8],[36,26,3.68762567031e-9,9.37175113714e-9],[36,27,-7.91229464362e-9,8.8299681063e-9],[36,28,2.22637976824e-9,-4.34372617405e-9],[36,29,1.84511675839e-9,2.0734471834e-10],[36,30,-1.00411515955e-8,6.05413293608e-9],[36,31,-8.39084442298e-9,-5.54047445598e-9],[36,32,1.25654207109e-8,2.30476235625e-9],[36,33,3.89957606637e-9,-3.50340856893e-9],[36,34,-9.08693282663e-9,4.35776976715e-9],[36,35,-1.38812503272e-10,-1.25527291076e-8],[36,36,4.6014646572e-9,-5.94245336314e-9]]);function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class C{constructor(e,t,r){O(this,"height",void 0),O(this,"hp0",void 0),O(this,"hp1",void 0),this.height=e,this.hp0=t,this.hp1=r}}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class R{constructor(e){N(this,"_table",void 0),N(this,"_hMin",void 0),N(this,"_hMax",void 0),this._table=e,this._hMin=e[0][0],this._hMax=e[e.length-1][0]}static fromVals(e){var t=[];for(var r of e){var[i,a,n]=r;t.push([i,a,n])}return new R(t)}getAtmosphere(e){if(e<this._hMin||e>this._hMax)return null;for(var t=0;t<this._table.length-2&&e>this._table[t+1][0];)t++;return new C(e,this._table[t],this._table[t+1])}}var L=R.fromVals([[100,4.974e-7,4.974e-7],[120,2.49e-8,2.49e-8],[130,8.377e-9,8.71e-9],[140,3.899e-9,4.059e-9],[150,2.122e-9,2.215e-9],[160,1.263e-9,1.344e-9],[170,8.008e-10,8.758e-10],[180,5.283e-10,6.01e-10],[190,3.617e-10,4.297e-10],[200,2.557e-10,3.162e-10],[210,1.839e-10,2.396e-10],[220,1.341e-10,1.853e-10],[230,9949e-14,1.455e-10],[240,7488e-14,1.157e-10],[250,5709e-14,9308e-14],[260,4403e-14,7555e-14],[270,343e-13,6182e-14],[280,2697e-14,5095e-14],[290,2139e-14,4226e-14],[300,1708e-14,3526e-14],[320,1099e-14,2511e-14],[340,7214e-15,1819e-14],[360,4824e-15,1337e-14],[380,3274e-15,9955e-15],[400,2249e-15,7492e-15],[420,1558e-15,5684e-15],[440,1091e-15,4355e-15],[460,7701e-16,3362e-15],[480,5474e-16,2612e-15],[500,3916e-16,2042e-15],[520,2819e-16,1605e-15],[540,2042e-16,1267e-15],[560,1488e-16,1005e-15],[580,1092e-16,7997e-16],[600,807e-16,639e-15],[620,6012e-17,5123e-16],[640,4519e-17,4121e-16],[660,343e-16,3325e-16],[680,2632e-17,2691e-16],[700,2043e-17,2185e-16],[720,1607e-17,1779e-16],[740,1281e-17,1452e-16],[760,1036e-17,119e-15],[780,8496e-18,9776e-17],[800,7069e-18,8059e-17],[840,468e-17,5741e-17],[880,32e-16,421e-16],[920,221e-17,313e-16],[960,156e-17,236e-16],[1e3,115e-17,181e-16]]);class F{constructor(e){(function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"_coeffs",void 0),this._coeffs=e}static fromCoeffs(e){var t=[];for(var r of e){var[i,a,n,o,s,h,l,c,u]=r;t.push([i,a,n,o,s,h,l,c,u])}return new F(t)}getCoeffs(e){return this._coeffs[e]}}var U=F.fromCoeffs([[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5]]);function q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class k{constructor(e,t){q(this,"jd",void 0),q(this,"offset",void 0),this.jd=e,this.offset=t}}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Y{constructor(e){J(this,"_offsets",void 0),J(this,"_jdFirst",void 0),J(this,"_jdLast",void 0),J(this,"_offsetFirst",void 0),J(this,"_offsetLast",void 0),this._offsets=e,this._jdFirst=this._offsets[0].jd,this._jdLast=this._offsets[this._offsets.length-1].jd,this._offsetFirst=this._offsets[0].offset,this._offsetLast=this._offsets[this._offsets.length-1].offset}static fromVals(e){var t=[];for(var r of e){var[i,a]=r;t.push(new k(i,a))}return new Y(t)}getLeapSeconds(e){if(e>=this._jdLast)return this._offsetLast;if(e<=this._jdFirst)return this._offsetFirst;for(var t=0;t<this._offsets.length-2;t++)if(e>=this._offsets[t].jd&&e<this._offsets[t+1].jd)return this._offsets[t].offset;return 0}}var G,H,B,V=Y.fromVals([[2441317.5,10],[2441499.5,11],[2441683.5,12],[2442048.5,13],[2442413.5,14],[2442778.5,15],[2443144.5,16],[2443509.5,17],[2443874.5,18],[2444239.5,19],[2444786.5,20],[2445151.5,21],[2445516.5,22],[2446247.5,23],[2447161.5,24],[2447892.5,25],[2448257.5,26],[2448804.5,27],[2449169.5,28],[2449534.5,29],[2450083.5,30],[2450630.5,31],[2451179.5,32],[2453736.5,33],[2454832.5,34],[2456109.5,35],[2457204.5,36],[2457754.5,37]]);class Z{constructor(){}static getInstance(){return Z.instance_}getEgm96Coeffs(e,t){return z.getCoeffs(e,t)}getIau1980Coeffs(e){return U.getCoeffs(e)}getLeapSeconds(e){return V.getLeapSeconds(e)}getHpAtmosphere(e){return L.getAtmosphere(e)}}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}G=Z,H="instance_",B=new Z,(H=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(H))in G?Object.defineProperty(G,H,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[H]=B;class W{constructor(e,t,r){if(X(this,"week",void 0),X(this,"seconds",void 0),this.week=e,this.seconds=t,e<0)throw new Error("GPS week must be non-negative.");if(t<0||t>=g)throw new Error("GPS seconds must be within a week.");W.reference=r}get week10Bit(){return this.week%1024}get week13Bit(){return this.week%8192}toString(){return"".concat(this.week,":").concat(this.seconds.toFixed(3))}toUTC(){var e=W.reference.roll(this.week*g+this.seconds),t=Z.getInstance().getLeapSeconds(e.toJulianDate());return e.roll(-(t-W.offset))}}X(W,"reference",void 0),X(W,"offset",19);class K extends x{}class Q extends x{}class $ extends x{}function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class te extends x{static now(){return new te((new Date).getTime()/1e3)}static fromDate(e){var{year:t,month:r,day:i,hour:a=0,minute:n=0,second:o=0}=e;return new te(te.dateToPosix_({year:t,month:r,day:i,hour:a,minute:n,second:o}))}static fromDateTime(e){return new te(e.getTime()/1e3)}static fromDateTimeString(e){var t=e.trim().toUpperCase().endsWith("Z")?e:"".concat(e,"Z");return new te(new Date(t).getTime()/1e3)}static fromJ2000TTSeconds(e){var t=new te(e+946728e3),r=Z.getInstance().getLeapSeconds(t.toJulianDate());return t.roll(-32.184-r)}static fromDefinitiveString(e){var t=e.trim().split(" "),r=t[0].split("/"),i=parseInt(r[0]),a=parseInt(r[1]),n=t[1],o=new Date("".concat(a,"-01-01T").concat(n,"Z")).getTime()+(i-1)*p;return new te(o/1e3)}roll(e){return new te(this.posix+e)}toMjd(){return this.toJulianDate()-2400000.5}toMjdGsfc(){return this.toMjd()-29999.5}toTAI(){var e=Z.getInstance().getLeapSeconds(this.toJulianDate());return new K(this.posix+e)}toTT(){return new $(this.toTAI().posix+32.184)}toTDB(){var e=this.toTT(),t=(357.5277233+35999.05034*e.toJulianCenturies())*c,r=.001658*Math.sin(t)+1385e-8*Math.sin(2*t);return new Q(e.posix+r)}toGPS(){var e=te.fromDateTimeString("1980-01-06T00:00:00.000Z"),t=Z.getInstance().getLeapSeconds(this.toJulianDate()),r=this.roll(t-W.offset).difference(e)/g,i=Math.floor(r);return new W(i,(r-i)*g,e)}gmstAngle(){var e=S(this.toJulianCenturies(),te.gmstPoly_)/240*c%l;return e<0&&(e+=l),e}gmstAngleDegrees(){return this.gmstAngle()*u}static isLeapYear_(e){return e%4==0&&e%100!=0||e%400==0}static dayOfYear_(e,t,r){var i=te.isLeapYear_(e)?1:0;return te.dayOfYearLookup_[i][t-1]+r-1}static dateToPosix_(e){var{year:t,month:r,day:i,hour:a,minute:n,second:o}=e,s=t-1900;return 60*n+3600*a+86400*te.dayOfYear_(t,r,i)+31536e3*(s-70)+86400*Math.floor((s-69)/4)-86400*Math.floor((s-1)/100)+86400*Math.floor((s+299)/400)+o}}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ee(te,"gmstPoly_",new Float64Array([-62e-7,.093104,3164400184.812866,67310.54841])),ee(te,"dayOfYearLookup_",[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]]);class ie{constructor(e,t){re(this,"start",void 0),re(this,"end",void 0),this.start=e,this.end=t}}class ae{static get(e){return this.cache_.get(e)}static add(e,t){if(this.cache_.set(e,t),this.cache_.size>1e3){var r=this.cache_.keys().next().value;this.cache_.delete(r)}}}function ne(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t),z:e.z}}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ae,"cache_",new Map);var oe,se,he,le,ce,ue,de,me,pe,fe;function ve(e){var t=((e,t,r,i,a,n)=>{if(void 0===e){var o=new Date,s=new Date(o.getUTCFullYear(),0,0),h=o.getDate()-s.getDate();return Math.floor(h/b)}if(void 0===t||void 0===r||void 0===i||void 0===a||void 0===n)throw new Error("Invalid date");return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+r+1721013.5+((n/60+a)/60+i)/24})(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*b;return{gmst:ke.gstime(t),j:t}}function ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Me{constructor(e){ge(this,"elements",void 0),ge(this,"rows",void 0),ge(this,"columns",void 0),this.elements=e,this.rows=e.length,this.columns=e[0].length}static allZeros(e,t){return this.fill(e,t,0)}static fill(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],a=0;a<e;a++){i[a]=[];for(var n=0;n<t;n++)i[a][n]=r}return new Me(i)}static rotX(e){var t=Math.cos(e),r=Math.sin(e),i=Me.zero(3,3);return i.elements[0][0]=1,i.elements[1][1]=t,i.elements[1][2]=r,i.elements[2][1]=-r,i.elements[2][2]=t,i}static rotY(e){var t=Math.cos(e),r=Math.sin(e),i=Me.zero(3,3);return i.elements[0][0]=t,i.elements[0][2]=-r,i.elements[1][1]=1,i.elements[2][0]=r,i.elements[2][2]=t,i}static rotZ(e){var t=Math.cos(e),r=Math.sin(e),i=Me.zero(3,3);return i.elements[0][0]=t,i.elements[0][1]=r,i.elements[1][0]=-r,i.elements[1][1]=t,i.elements[2][2]=1,i}static zero(e,t){for(var r=[],i=0;i<e;i++){r[i]=[];for(var a=0;a<t;a++)r[i][a]=0}return new Me(r)}static identity(e){for(var t=[],r=0;r<e;r++){t[r]=[];for(var i=0;i<e;i++)t[r][i]=r===i?1:0}return new Me(t)}static diagonal(e){for(var t=e.length,r=[],i=0;i<t;i++){r[i]=[];for(var a=0;a<t;a++)r[i][a]=i===a?e[i]:0}return new Me(r)}add(e){for(var t=Me.zero(this.rows,this.columns),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.elements[r][i]=this.elements[r][i]+e.elements[r][i];return t}subtract(e){for(var t=Me.zero(this.rows,this.columns),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.elements[r][i]=this.elements[r][i]-e.elements[r][i];return t}scale(e){for(var t=Me.zero(this.rows,this.columns),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.elements[r][i]=this.elements[r][i]*e;return t}negate(){return this.scale(-1)}multiply(e){for(var t=Me.zero(this.rows,e.columns),r=0;r<this.rows;r++)for(var i=0;i<e.columns;i++)for(var a=0;a<this.columns;a++)t.elements[r][i]+=this.elements[r][a]*e.elements[a][i];return t}outerProduct(e){for(var t=Me.zero(this.rows,this.columns),r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)t.elements[r][i]=this.elements[r][i]*e.elements[r][i];return t}multiplyVector(e){for(var t=[],r=0;r<this.rows;r++){for(var i=0,a=0;a<this.columns;a++)i+=this.elements[r][a]*e.elements[a];t[r]=i}return new we(t)}multiplyVector3D(e){for(var t=[],r=0;r<this.rows;r++){for(var i=0,a=0;a<this.columns;a++)switch(a){case 0:i+=this.elements[r][a]*e.x;break;case 1:i+=this.elements[r][a]*e.y;break;case 2:i+=this.elements[r][a]*e.z}t[r]=i}return new _e(t[0],t[1],t[2])}reciprocal(){for(var e=Me.zero(this.rows,this.columns),t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)0!==this.elements[t][r]&&(e.elements[t][r]=1/this.elements[t][r]);return e}transpose(){for(var e=Me.zero(this.columns,this.rows),t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e.elements[r][t]=this.elements[t][r];return e}cholesky(){for(var e=Me.zero(this.rows,this.rows),t=0;t<this.rows;t++)for(var r=0;r<t+1;r++){for(var i=0,a=0;a<r;a++)i+=e.elements[t][a]*e.elements[r][a];e.elements[t][r]=t===r?Math.sqrt(this.elements[t][t]-i):1/e.elements[r][r]*(this.elements[t][r]-i)}return e}_swapRows(e,t){if(e!==t){var r=this.elements[e];this.elements[e]=this.elements[t],this.elements[t]=r}}_toReducedRowEchelonForm(){for(var e=0,t=0;t<this.rows&&e<this.columns;++t,++e){for(var r=t;0===this.elements[r][e];)if(++r===this.rows&&(r=t,++e===this.columns))return;if(this._swapRows(r,t),0!==this.elements[t][e])for(var i=this.elements[t][e],a=0;a<this.columns;++a)this.elements[t][a]/=i;for(var n=0;n<this.rows;++n)if(n!==t)for(var o=this.elements[n][e],s=0;s<this.columns;++s)this.elements[n][s]-=o*this.elements[t][s]}}inverse(){for(var e=Me.zero(this.rows,2*this.columns),t=0;t<this.rows;++t){for(var r=0;r<this.columns;++r)e.elements[t][r]=this.elements[t][r];e.elements[t][t+this.columns]=1}e._toReducedRowEchelonForm();for(var i=Me.zero(this.rows,this.columns),a=0;a<this.rows;++a)for(var n=0;n<this.columns;++n)i.elements[a][n]=e.elements[a][n+this.columns];return i}}function ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class we{constructor(e){ye(this,"elements",void 0),ye(this,"length",void 0),this.elements=e,this.length=e.length}static zero(e){return new we(new Array(e).fill(0))}static filled(e,t){return new we(new Array(e).fill(t))}static fromList(e){return new we(e)}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0)return"[".concat(this.elements.join(", "),"]");var t=this.elements.map((t=>t.toFixed(e)));return"[".concat(t.join(", "),"]")}get x(){return this.elements[0]}get y(){return this.elements[1]}get z(){return this.elements[2]}toList(){return Array.from(this.elements)}toArray(){return new Float64Array(this.elements)}magnitude(){var e=0;for(var t of this.elements)e+=t*t;return Math.sqrt(e)}add(e){for(var t=new Array(this.length),r=0;r<this.length;r++)t[r]=this.elements[r]+e.elements[r];return new we(t)}subtract(e){for(var t=new Array(this.length),r=0;r<this.length;r++)t[r]=this.elements[r]-e.elements[r];return new we(t)}scale(e){for(var t=new Array(this.length),r=0;r<this.length;r++)t[r]=this.elements[r]*e;return new we(t)}negate(){return this.scale(-1)}distance(e){return this.subtract(e).magnitude()}normalize(){var e=this.magnitude();return 0===e?we.zero(this.length):this.scale(1/e)}dot(e){for(var t=0,r=0;r<this.length;r++)t+=this.elements[r]*e.elements[r];return t}outer(e){for(var t=[],r=0;r<this.length;r++){t[r]=[];for(var i=0;i<e.length;i++)t[r][i]=this.elements[r]*e.elements[i]}return new Me(t)}cross(e){for(var t=new Array(this.length),r=0;r<this.length;r++)t[r]=this.elements[(r+1)%this.length]*e.elements[(r+2)%this.length]-this.elements[(r+2)%this.length]*e.elements[(r+1)%this.length];return new we(t)}skewSymmetric(){if(3!==this.length)throw new Error("Skew-symmetric matrix requires a vector of length 3.");return new Me([[0,-this.elements[2],this.elements[1]],[this.elements[2],0,-this.elements[0]],[-this.elements[1],this.elements[0],0]])}rotX(e){var t=Math.cos(e),r=Math.sin(e),i=new Array(3);return i[0]=this.elements[0],i[1]=t*this.elements[1]+r*this.elements[2],i[2]=-r*this.elements[1]+t*this.elements[2],new we(i)}rotY(e){var t=Math.cos(e),r=Math.sin(e),i=new Array(3);return i[0]=t*this.elements[0]+-r*this.elements[2],i[1]=this.elements[1],i[2]=r*this.elements[0]+t*this.elements[2],new we(i)}rotZ(e){var t=Math.cos(e),r=Math.sin(e),i=new Array(3);return i[0]=t*this.elements[0]+r*this.elements[1],i[1]=-r*this.elements[0]+t*this.elements[1],i[2]=this.elements[2],new we(i)}angle(e){var t=Math.atan2(this.cross(e).magnitude(),this.dot(e));return isNaN(t)?0:t}angleDegrees(e){return this.angle(e)*(180/Math.PI)}sight(e,t){var r=this.magnitude()**2,i=e.magnitude()**2,a=this.dot(e),n=(r-a)/(r+i-2*a),o=!1;return(n<0||n>1||(1-n)*r+a*n>=t*t)&&(o=!0),o}bisect(e){return this.scale(e.magnitude()).add(e.scale(this.magnitude())).normalize()}join(e){return new we(this.toList().concat(e.toList()))}slice(e,t){return new we(this.elements.slice(e,t))}row(){return new Me([this.toList()])}column(){return new Me(this.toList().map((e=>[e])))}toVector3D(e){return new _e(this.elements[e],this.elements[e+1],this.elements[e+2])}}function be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ye(we,"origin3",new(oe=we)([0,0,0])),ye(we,"origin6",new oe([0,0,0,0,0,0])),ye(we,"xAxis",new oe([1,0,0])),ye(we,"yAxis",new oe([0,1,0])),ye(we,"zAxis",new oe([0,0,1])),ye(we,"xAxisNeg",new oe([-1,0,0])),ye(we,"yAxisNeg",new oe([0,-1,0])),ye(we,"zAxisNeg",new oe([0,0,-1]));class _e{constructor(e,t,r){be(this,"x",void 0),be(this,"y",void 0),be(this,"z",void 0),this.x=e,this.y=t,this.z=r}static fromVector(e){return new _e(e.x,e.y,e.z)}toList(){return[this.x,this.y,this.z]}toArray(){return new Float64Array([this.x,this.y,this.z])}getElement(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("Index ".concat(e," outside 3D vector bounds."))}}toVector(){return new we(this.toList())}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0)return"[".concat(this.toList().join(", "),"]");var t=this.toList().map((t=>t.toFixed(e)));return"[".concat(t.join(", "),"]")}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}add(e){return new _e(this.x+e.x,this.y+e.y,this.z+e.z)}subtract(e){return new _e(this.x-e.x,this.y-e.y,this.z-e.z)}scale(e){return new _e(this.x*e,this.y*e,this.z*e)}negate(){return this.scale(-1)}distance(e){return t=this,r=e,Math.sqrt((t.x-r.x)**2+(t.y-r.y)**2+(t.z-r.z)**2);var t,r}normalize(){var e=this.magnitude();return 0===e?_e.origin:new _e(this.x/e,this.y/e,this.z/e)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}outer(e){return new Me([[this.x*e.x,this.x*e.y,this.x*e.z],[this.y*e.x,this.y*e.y,this.y*e.z],[this.z*e.x,this.z*e.y,this.z*e.z]])}cross(e){return new _e(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}skewSymmetric(){return new Me([[0,-this.z,this.y],[this.z,0,-this.x],[-this.y,this.x,0]])}rotX(e){var t=Math.cos(e),r=Math.sin(e);return new _e(this.x,t*this.y+r*this.z,-r*this.y+t*this.z)}rotY(e){var t=Math.cos(e),r=Math.sin(e);return new _e(t*this.x+-r*this.z,this.y,r*this.x+t*this.z)}rotZ(e){var t=Math.cos(e),r=Math.sin(e);return new _e(t*this.x+r*this.y,-r*this.x+t*this.y,this.z)}angle(e){var t=Math.atan2(this.cross(e).magnitude(),this.dot(e));return isNaN(t)?0:t}angleDegrees(e){return this.angle(e)*(180/Math.PI)}sight(e,t){var r=this.magnitude()**2,i=e.magnitude()**2,a=this.dot(e),n=(r-a)/(r+i-2*a),o=!1;return(n<0||n>1||(1-n)*r+a*n>=t*t)&&(o=!0),o}bisect(e){return this.scale(e.magnitude()).add(e.scale(this.magnitude())).normalize()}row(){return new Me([[this.x,this.y,this.z]])}column(){return new Me([[this.x],[this.y],[this.z]])}join(e){var t=new Float64Array(6);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=e.x,t[4]=e.y,t[5]=e.z,new we(t)}}function xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}be(_e,"origin",new(se=_e)(0,0,0)),be(_e,"xAxis",new se(1,0,0)),be(_e,"yAxis",new se(0,1,0)),be(_e,"zAxis",new se(0,0,1)),be(_e,"xAxisNeg",new se(-1,0,0)),be(_e,"yAxisNeg",new se(0,-1,0)),be(_e,"zAxisNeg",new se(0,0,-1));class Ae{constructor(e){var t,r,i,a,o,s;xe(this,"id",void 0),xe(this,"name",void 0),xe(this,"type",void 0),xe(this,"position",void 0),xe(this,"totalVelocity",void 0),xe(this,"velocity",void 0),xe(this,"active",!0),this.type=null!==(t=e.type)&&void 0!==t?t:n.UNKNOWN,this.name=null!==(r=e.name)&&void 0!==r?r:"Unknown",this.id=null!==(i=e.id)&&void 0!==i?i:-1,this.active=null===(a=e.active)||void 0===a||a,this.position=null!==(o=e.position)&&void 0!==o?o:{x:0,y:0,z:0},this.velocity=null!==(s=e.velocity)&&void 0!==s?s:{x:0,y:0,z:0},this.totalVelocity=Math.sqrt(this.velocity.x**2+this.velocity.y**2+this.velocity.z**2)}isSatellite(){return!1}isGroundObject(){return!1}isSensor(){return!1}isMarker(){return!1}isStatic(){return 0===this.velocity.x&&0===this.velocity.y&&0===this.velocity.z}isPayload(){return this.type===n.PAYLOAD}isRocketBody(){return this.type===n.ROCKET_BODY}isDebris(){return this.type===n.DEBRIS}isStar(){return this.type===n.STAR}isMissile(){return this.type===n.BALLISTIC_MISSILE}isNotional(){return this.type===n.NOTIONAL}getTypeString(){var e;return null!==(e={[n.UNKNOWN]:"Unknown",[n.PAYLOAD]:"Payload",[n.ROCKET_BODY]:"Rocket Body",[n.DEBRIS]:"Debris",[n.SPECIAL]:"Special",[n.BALLISTIC_MISSILE]:"Ballistic Missile",[n.STAR]:"Star",[n.INTERGOVERNMENTAL_ORGANIZATION]:"Intergovernmental Organization",[n.SUBORBITAL_PAYLOAD_OPERATOR]:"Suborbital Payload Operator",[n.PAYLOAD_OWNER]:"Payload Owner",[n.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER]:"Meteorological Rocket Launch Agency or Manufacturer",[n.PAYLOAD_MANUFACTURER]:"Payload Manufacturer",[n.LAUNCH_AGENCY]:"Launch Agency",[n.LAUNCH_SITE]:"Launch Site",[n.LAUNCH_POSITION]:"Launch Position",[n.LAUNCH_FACILITY]:"Launch Facility",[n.CONTROL_FACILITY]:"Control Facility",[n.GROUND_SENSOR_STATION]:"Ground Sensor Station",[n.OPTICAL]:"Optical",[n.MECHANICAL]:"Mechanical",[n.PHASED_ARRAY_RADAR]:"Phased Array Radar",[n.OBSERVER]:"Observer",[n.BISTATIC_RADIO_TELESCOPE]:"Bistatic Radio Telescope",[n.COUNTRY]:"Country",[n.LAUNCH_VEHICLE_MANUFACTURER]:"Launch Vehicle Manufacturer",[n.ENGINE_MANUFACTURER]:"Engine Manufacturer"}[this.type])&&void 0!==e?e:"Unknown"}validateParameter(e,t,r,i){if(null!=t&&e<t)throw new Error(i);if(null!=r&&e>r)throw new Error(i)}}function Se(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ee extends Ae{constructor(e){var t;super(e),Se(this,"name","Unknown Ground Object"),Se(this,"lat",void 0),Se(this,"lon",void 0),Se(this,"alt",void 0),this.validateGroundObjectInputData_(e),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.lat=e.lat,this.lon=e.lon,this.alt=e.alt}rae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return e.rae(this,t)}ecf(){return function(e){var{lon:t,lat:r,alt:i}=e,a=6378.137,n=(a-6356.7523142)/a,o=2*n-n*n,s=a/Math.sqrt(1-o*Math.sin(r)**2);return{x:(s+i)*Math.cos(r)*Math.cos(t),y:(s+i)*Math.cos(r)*Math.sin(t),z:(s*(1-o)+i)*Math.sin(r)}}(this.toGeodetic())}eci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,{gmst:t}=ve(e);return function(e,t){var r="".concat(t,",").concat(e.lat,",").concat(e.lon,",").concat(e.alt),i=ae.get(r);if(i)return i;var{lat:a,lon:n,alt:o}=e,s=Math.cos(a),h=Math.sin(a),l=Math.cos(n+t),c=Math.sin(n+t),u={x:(Pe.radiusMean+o)*s*l,y:(Pe.radiusMean+o)*s*c,z:(Pe.radiusMean+o)*h};return ae.add(r,u),u}(this.toGeodetic(),t)}lla(){return{lat:this.lat,lon:this.lon,alt:this.alt}}llaRad(){return{lat:this.lat*c,lon:this.lon*c,alt:this.alt}}get latRad(){return this.lat*c}get lonRad(){return this.lon*c}static fromGeodetic(e){return new Ee({lat:e.latDeg,lon:e.lonDeg,alt:e.alt})}toGeodetic(){return De.fromDegrees(this.lat,this.lon,this.alt)}validateGroundObjectInputData_(e){this.validateParameter(e.lat,-90,90,"Invalid latitude - must be between -90 and 90"),this.validateParameter(e.lon,-180,180,"Invalid longitude - must be between -180 and 180"),this.validateParameter(e.alt,0,null,"Invalid altitude - must be greater than 0")}isGroundObject(){switch(this.type){case n.INTERGOVERNMENTAL_ORGANIZATION:case n.SUBORBITAL_PAYLOAD_OPERATOR:case n.PAYLOAD_OWNER:case n.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER:case n.PAYLOAD_MANUFACTURER:case n.LAUNCH_VEHICLE_MANUFACTURER:case n.ENGINE_MANUFACTURER:case n.LAUNCH_AGENCY:case n.LAUNCH_SITE:case n.LAUNCH_POSITION:return!0;default:return!1}}}function Te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Pe{constructor(){}static smaToMeanMotion(e){return Math.sqrt(Pe.mu/(e*e*e))}static revsPerDayToSma(e){return Pe.mu**(1/3)/(l*e/f)**(2/3)}static precession(e){var t=e.toTT().toJulianCenturies();return{zeta:S(t,Pe.zetaPoly_),theta:S(t,Pe.thetaPoly_),zed:S(t,Pe.zedPoly_)}}static nutation(e){for(var t=e.toTT().toJulianCenturies(),r=S(t,Pe.moonAnomPoly_),i=S(t,Pe.sunAnomPoly_),a=S(t,Pe.moonLatPoly_),n=S(t,Pe.sunElongPoly_),o=S(t,Pe.moonRaanPoly_),s=0,h=0,l=Z.getInstance(),c=0;c<4;c++){var[u,p,f,v,g,M,y,w,b]=l.getIau1980Coeffs(c),_=u*r+p*i+f*a+v*n+g*o,x=w+b*t;s+=(M+y*t)*Math.sin(_),h+=x*Math.cos(_)}s*=m,h*=m;var A=S(t,Pe.meanEpsilonPoly_),E=A+h,T=s*Math.cos(A)+.00264*d*Math.sin(o)+63e-6*d*Math.sin(2*o);return{dPsi:s,dEps:h,mEps:A,eps:E,eqEq:T,gast:e.gmstAngle()+T}}static smaToDrift(e){return(1-l*Math.sqrt(e**3/Pe.mu)/v)*l}static smaToDriftDegrees(e){return Pe.smaToDrift(e)*u}static driftToSemimajorAxis(e){var t=(-e/l+1)*v;return(Pe.mu*t*t/(4*Math.PI*Math.PI))**(1/3)}static driftDegreesToSma(e){return Pe.driftToSemimajorAxis(c*e)}static diameter(e){return T(2*Pe.radiusEquator,e.magnitude(),r.Sphere)}}function Ie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}he=Pe,Te(Pe,"mu",_),Te(Pe,"radiusEquator",6378.1363),Te(Pe,"flattening",1/298.257223563),Te(Pe,"radiusPolar",he.radiusEquator*(1-he.flattening)),Te(Pe,"radiusMean",(2*he.radiusEquator+he.radiusPolar)/3),Te(Pe,"eccentricitySquared",he.flattening*(2-he.flattening)),Te(Pe,"j2",.00108262668355315),Te(Pe,"j3",-253265648533224e-20),Te(Pe,"j4",-1619621591367e-18),Te(Pe,"j5",-2.27296082868698e-7),Te(Pe,"j6",5.40681239107085e-7),Te(Pe,"rotation",new _e(0,0,7292115146706979e-20)),Te(Pe,"zetaPoly_",Float64Array.from([.017998*d,.30188*d,2306.2181*d,0])),Te(Pe,"thetaPoly_",Float64Array.from([-.041833*d,-.42665*d,2004.3109*d,0])),Te(Pe,"zedPoly_",Float64Array.from([.018203*d,1.09468*d,2306.2181*d,0])),Te(Pe,"moonAnomPoly_",Float64Array.from([14343e-9*c,.0088553*c,477198.8675605*c,134.96340251*c])),Te(Pe,"sunAnomPoly_",Float64Array.from([38e-9*c,-1537e-7*c,35999.0502911*c,357.52910918*c])),Te(Pe,"moonLatPoly_",Float64Array.from([-288e-9*c,-.003542*c,483202.0174577*c,93.27209062*c])),Te(Pe,"sunElongPoly_",Float64Array.from([1831e-9*c,-.0017696*c,445267.1114469*c,297.85019547*c])),Te(Pe,"moonRaanPoly_",Float64Array.from([2139e-9*c,.0020756*c,-1934.1361851*c,125.04455501*c])),Te(Pe,"meanEpsilonPoly_",Float64Array.from([.001813*d,-59e-5*d,-46.815*d,84381.448*d]));class De{constructor(e,t,r){if(Ie(this,"lat",void 0),Ie(this,"lon",void 0),Ie(this,"alt",void 0),Math.abs(e)>Math.PI/2)throw new RangeError("Latitude must be between -90 and 90 in Radians.");if(Math.abs(t)>Math.PI)throw new RangeError("Longitude must be between -180 and 180 in Radians.");if(r<-Pe.radiusMean)throw new RangeError("Altitude must be greater than ".concat(-Pe.radiusMean," km. Got ").concat(r," km."));this.lat=e,this.lon=t,this.alt=r}static fromDegrees(e,t,r){return new De(e*c,t*c,r)}toString(){return["Geodetic","  Latitude:  ".concat(this.latDeg.toFixed(4),""),"  Longitude: ".concat(this.lonDeg.toFixed(4),""),"  Altitude:  ".concat(this.alt.toFixed(3)," km")].join("\n")}get latDeg(){return this.lat*u}get lonDeg(){return this.lon*u}toGroundObject(){return new Ee({lat:this.latDeg,lon:this.lonDeg,alt:this.alt})}toITRF(e){var t=Math.sin(this.lat),r=Math.cos(this.lat),i=Pe.radiusEquator/Math.sqrt(1-Pe.eccentricitySquared*t*t),a=new _e((i+this.alt)*r*Math.cos(this.lon),(i+this.alt)*r*Math.sin(this.lon),(i*(1-Pe.eccentricitySquared)+this.alt)*t);return new Oe(e,a,_e.origin)}angle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Haversine;return function(e,t,r,a){switch(arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.Cosine){case i.Cosine:return function(e,t,r,i){var a=Math.sin(t)*Math.sin(i),n=Math.cos(t)*Math.cos(i)*Math.cos(r-e);return Math.acos(a+n)}(e,t,r,a);case i.Haversine:return function(e,t,r,i){var a=r-e,n=i-t,o=Math.sin(.5*a),s=Math.sin(.5*n),h=s*s+Math.cos(t)*Math.cos(i)*o*o;return 2*Math.asin(Math.min(1,Math.sqrt(h)))}(e,t,r,a);default:throw new Error("Invalid angular distance method.")}}(this.lon,this.lat,e.lon,e.lat,t)}angleDeg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Haversine;return this.angle(e,t)*u}distance(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Haversine;return this.angle(e,t)*Pe.radiusMean}fieldOfView(){return Math.acos(Pe.radiusMean/(Pe.radiusMean+this.alt))}isInView(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Haversine,r=Math.max(this.fieldOfView(),e.fieldOfView());return this.angle(e,t)<=r}}function je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ze{constructor(e,t,r){je(this,"epoch",void 0),je(this,"position",void 0),je(this,"velocity",void 0),this.epoch=e,this.position=t,this.velocity=r}toString(){return["[".concat(this.name,"]"),"  Epoch: ".concat(this.epoch),"  Position: ".concat(this.position.toString(6)," km"),"  Velocity: ".concat(this.velocity.toString(9)," km/s")].join("\n")}get mechanicalEnergy(){var e=this.position.magnitude(),t=this.velocity.magnitude();return t*t*.5-Pe.mu/e}get semimajorAxis(){var e=this.mechanicalEnergy;return-Pe.mu/(2*e)}get period(){var e=this.semimajorAxis;return l*Math.sqrt(e*e*e/Pe.mu)/60}get angularRate(){var e=this.semimajorAxis;return Math.sqrt(Pe.mu/(e*e*e))}toClassicalElements(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe.mu;if(!this.inertial)throw new Error("Classical elements are undefined for fixed frames.");return Ue.fromStateVector(this,e)}}class Oe extends ze{get name(){return"ITRF"}get inertial(){return!1}get height(){var e=Pe.radiusEquator,t=Pe.eccentricitySquared,r=this.position.magnitude(),i=this.position.z/r,a=1-i*i;return r-e*Math.sqrt((1-t)/(1-t*a))}get alt(){return this.height}toJ2000(){var e=Pe.precession(this.epoch),t=Pe.nutation(this.epoch),r=this.epoch.gmstAngle()+t.eqEq,i=this.position.rotZ(-r),a=this.velocity.add(Pe.rotation.cross(this.position)).rotZ(-r),n=i.rotX(t.eps).rotZ(t.dPsi).rotX(-t.mEps),o=a.rotX(t.eps).rotZ(t.dPsi).rotX(-t.mEps),s=n.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta),h=o.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta);return new Ne(this.epoch,s,h)}toGeodetic(){var e,t=Pe.radiusEquator,r=Pe.eccentricitySquared,i=this.position.x,a=this.position.y,n=this.position.z,o=Math.atan2(a,i),s=Math.sqrt(i*i+a*a),h=Math.atan(n/s),l=h,c=0;if(0===i&&0===a)l=h,e=n>0?n-Pe.radiusPolar:n+Pe.radiusPolar;else{for(var u=0;u<20;u++){var d=Math.sin(l);c=1/Math.sqrt(1-r*d*d),l=Math.atan((n+t*c*r*d)/s)}e=s/Math.cos(l)-t*c}return new De(l,o,e)}}class Ce extends ze{get name(){return"TEME"}get inertial(){return!0}static fromClassicalElements(e){var t=e.toPositionVelocity();return new Ce(e.epoch,t.position,t.velocity)}toJ2000(){var e=Pe.precession(this.epoch),t=Pe.nutation(this.epoch),r=t.mEps+t.dEps,i=t.dPsi*Math.cos(r),a=this.position.rotZ(-i).rotX(r).rotZ(t.dPsi).rotX(-t.mEps),n=this.velocity.rotZ(-i).rotX(r).rotZ(t.dPsi).rotX(-t.mEps),o=a.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta),s=n.rotZ(e.zed).rotY(-e.theta).rotZ(e.zeta);return new Ne(this.epoch,o,s)}}class Ne extends ze{static fromClassicalElements(e){var t=e.toPositionVelocity();return new Ne(e.epoch,t.position,t.velocity)}get name(){return"J2000"}get inertial(){return!0}toITRF(){var e=Pe.precession(this.epoch),t=Pe.nutation(this.epoch),r=this.epoch.gmstAngle()+t.eqEq,i=this.position.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),a=this.velocity.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),n=i.rotX(t.mEps).rotZ(-t.dPsi).rotX(-t.eps),o=a.rotX(t.mEps).rotZ(-t.dPsi).rotX(-t.eps),s=n.rotZ(r),h=o.rotZ(r).add(Pe.rotation.negate().cross(s));return new Oe(this.epoch,s,h)}toTEME(){var e=Pe.precession(this.epoch),t=Pe.nutation(this.epoch),r=t.mEps+t.dEps,i=t.dPsi*Math.cos(r),a=this.position.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),n=this.velocity.rotZ(-e.zeta).rotY(e.theta).rotZ(-e.zed),o=a.rotX(t.mEps).rotZ(-t.dPsi).rotX(-r).rotZ(i),s=n.rotX(t.mEps).rotZ(-t.dPsi).rotX(-r).rotZ(i);return new Ce(this.epoch,o,s)}}function Re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Le{constructor(e){var{epoch:t,h:r,k:i,lambda:a,a:n,p:o,q:s,mu:h,I:l}=e;Re(this,"epoch",void 0),Re(this,"a",void 0),Re(this,"h",void 0),Re(this,"k",void 0),Re(this,"p",void 0),Re(this,"q",void 0),Re(this,"lambda",void 0),Re(this,"mu",void 0),Re(this,"I",void 0),this.epoch=t,this.h=r,this.k=i,this.lambda=a,this.a=n,this.p=o,this.q=s,this.mu=null!=h?h:_,this.I=null!=l?l:1}toString(){return["[EquinoctialElements]","  Epoch: ".concat(this.epoch),"  a: ".concat(this.a," km"),"  h: ".concat(this.h),"  k: ".concat(this.k),"  p: ".concat(this.p),"  q: ".concat(this.q),"  lambda: ".concat(this.lambda," rad")].join("\n")}get semimajorAxis(){return this.a}get meanLongitude(){return this.lambda}get meanMotion(){return Math.sqrt(this.mu/this.a**3)}get retrogradeFactor(){return this.I}isPrograde(){return 1===this.I}isRetrograde(){return-1===this.I}get period(){return l*Math.sqrt(this.semimajorAxis**3/this.mu)/60}get revsPerDay(){return 1440/this.period}toClassicalElements(){var e=this.semimajorAxis,t=Math.sqrt(this.k*this.k+this.h*this.h),r=Math.PI*(.5*(1-this.I))+2*this.I*Math.atan(Math.sqrt(this.p*this.p+this.q*this.q)),i=Math.atan2(this.p,this.q),a=Math.atan2(this.h,this.k)-this.I*Math.atan2(this.p,this.q),n=function(e,t){var r,i;if(e>1e-8){for(var a=1,n=(r=t<0&&t>-Math.PI||t>Math.PI?t-e:t+e)+(t-r+e*Math.sin(r))/(1-e*Math.cos(r));Math.abs(n-r)>1e-8&&a<=50;)a++,n=(r=n)+(t-r+e*Math.sin(r))/(1-e*Math.cos(r));var o=Math.sqrt(1-e*e)*Math.sin(n)/(1-e*Math.cos(n)),s=(Math.cos(n)-e)/(1-e*Math.cos(n));i=Math.atan2(o,s)}else i=t,r=t;return{e0:r,nu:i}}(t,this.lambda-this.I*i-a).nu;return new Ue({epoch:this.epoch,semimajorAxis:e,eccentricity:t,inclination:r,rightAscension:i,argPerigee:a,trueAnomaly:n,mu:this.mu})}toPositionVelocity(){return this.toClassicalElements().toPositionVelocity()}}function Fe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ue{constructor(e){var{epoch:t,semimajorAxis:r,eccentricity:i,inclination:a,rightAscension:n,argPerigee:o,trueAnomaly:s,mu:h=_}=e;Fe(this,"epoch",void 0),Fe(this,"semimajorAxis",void 0),Fe(this,"eccentricity",void 0),Fe(this,"inclination",void 0),Fe(this,"rightAscension",void 0),Fe(this,"argPerigee",void 0),Fe(this,"trueAnomaly",void 0),Fe(this,"mu",void 0),this.epoch=t,this.semimajorAxis=r,this.eccentricity=i,this.inclination=a,this.rightAscension=n,this.argPerigee=o,this.trueAnomaly=s,this.mu=h}static fromStateVector(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;if(!e.inertial)throw new Error("State vector must be in inertial frame (like J2000).");var r=e.position,i=e.velocity,a=e.semimajorAxis,n=r.scale(i.magnitude()**2-t/r.magnitude()),o=i.scale(r.dot(i)),s=n.subtract(o).scale(1/t),h=s.magnitude(),c=r.cross(i),u=Math.acos(I(c.z/c.magnitude(),-1,1)),d=_e.zAxis.cross(c),m=Math.acos(I(d.x/d.magnitude(),-1,1));d.y<0&&(m=l-m);var p=d.angle(s);s.z<0&&(p=l-p);var f=s.angle(r);return r.dot(i)<0&&(f=l-f),new Ue({epoch:e.epoch,semimajorAxis:a,eccentricity:h,inclination:u,rightAscension:m,argPerigee:p,trueAnomaly:f,mu:t})}get inclinationDegrees(){return this.inclination*u}get rightAscensionDegrees(){return this.rightAscension*u}get argPerigeeDegrees(){return this.argPerigee*u}get trueAnomalyDegrees(){return this.trueAnomaly*u}get apogee(){return this.semimajorAxis*(1+this.eccentricity)}get perigee(){return this.semimajorAxis*(1-this.eccentricity)}toString(){return["[ClassicalElements]","  Epoch: ".concat(this.epoch),"  Semimajor Axis (a):       ".concat(this.semimajorAxis.toFixed(4)," km"),"  Eccentricity (e):         ".concat(this.eccentricity.toFixed(7)),"  Inclination (i):          ".concat(this.inclinationDegrees.toFixed(4),""),"  Right Ascension ():      ".concat(this.rightAscensionDegrees.toFixed(4),""),"  Argument of Perigee ():  ".concat(this.argPerigeeDegrees.toFixed(4),""),"  True Anomaly ():         ".concat(this.trueAnomalyDegrees.toFixed(4),"")].join("\n")}get meanMotion(){return Math.sqrt(this.mu/this.semimajorAxis**3)}get period(){return l*Math.sqrt(this.semimajorAxis**3/this.mu)/60}get revsPerDay(){return 1440/this.period}getOrbitRegime(){var t=this.revsPerDay,r=.016666666666666666*this.period;return t>=.99&&t<=1.01&&this.eccentricity<.01?e.GEO:r>=600&&r<=800&&this.eccentricity<=.25?e.MEO:t>=11.25&&this.eccentricity<=.25?e.LEO:this.eccentricity>.25?e.HEO:e.OTHER}toPositionVelocity(){var e=new _e(Math.cos(this.trueAnomaly),Math.sin(this.trueAnomaly),0).scale(this.semimajorAxis*(1-this.eccentricity**2)/(1+this.eccentricity*Math.cos(this.trueAnomaly))),t=new _e(-Math.sin(this.trueAnomaly),this.eccentricity+Math.cos(this.trueAnomaly),0).scale(Math.sqrt(this.mu/(this.semimajorAxis*(1-this.eccentricity**2))));return{position:e.rotZ(-this.argPerigee).rotX(-this.inclination).rotZ(-this.rightAscension),velocity:t.rotZ(-this.argPerigee).rotX(-this.inclination).rotZ(-this.rightAscension)}}toEquinoctialElements(){var e=this.inclination>Math.PI/2?-1:1,t=this.eccentricity*Math.sin(this.argPerigee+e*this.rightAscension),r=this.eccentricity*Math.cos(this.argPerigee+e*this.rightAscension),i=P(this.eccentricity,this.trueAnomaly).m+this.argPerigee+e*this.rightAscension,a=this.semimajorAxis,n=Math.tan(.5*this.inclination)**e*Math.sin(this.rightAscension),o=Math.tan(.5*this.inclination)**e*Math.cos(this.rightAscension);return new Le({epoch:this.epoch,k:r,h:t,lambda:i,a,p:n,q:o,mu:this.mu,I:e})}propagate(e){for(var t=this.epoch,r=this.meanMotion,i=e.difference(t),a=Math.cos(this.trueAnomaly),n=Math.acos(I((this.eccentricity+a)/(1+this.eccentricity*a),-1,1)),o=(n=E(n,this.trueAnomaly))-this.eccentricity*Math.sin(n),s=((o=E(o,n))+r*i)%l,h=s,c=0;c<32;c++){var u=s+this.eccentricity*Math.sin(h);if(Math.abs(u-h)<1e-12)break;h=u}var d=Math.cos(h),m=I(Math.acos((d-this.eccentricity)/(1-this.eccentricity*d)),-1,1);return m=E(m,h),new Ue({epoch:e,semimajorAxis:this.semimajorAxis,eccentricity:this.eccentricity,inclination:this.inclination,rightAscension:this.rightAscension,argPerigee:this.argPerigee,trueAnomaly:m,mu:this.mu})}}class qe{constructor(){}static createTle(e){var{inc:t,meanmo:r,rasc:i,argPe:a,meana:n,ecen:o,epochyr:s,epochday:h,intl:l}=e,c=Ve.convert6DigitToA5(e.scc),u=s.padStart(2,"0"),d=parseFloat(h).toFixed(8).padStart(12,"0"),m=qe.inclination(t),p=qe.meanMotion(r),f=qe.rightAscension(i),v=qe.argumentOfPerigee(a),g=qe.meanAnomaly(n),M=qe.eccentricity(o),y=l.padEnd(8," "),w=e.sat?e.sat.tle1.substring(32,71):" +.00000000 +00000+0 +00000-0 0  9990";return w=" "===(w=" "===(w=" "===(w=" "===w[1]?qe.setCharAt(w,1,"+"):w)[12]?qe.setCharAt(w,12,"+"):w)[21]?qe.setCharAt(w,21,"+"):w)[32]?qe.setCharAt(w,32,"0"):w,{tle1:"1 ".concat(c,"U ").concat(y," ").concat(u).concat(d).concat(w),tle2:"2 ".concat(c," ").concat(m," ").concat(f," ").concat(M," ").concat(v," ").concat(g," ").concat(p," 00010")}}static argumentOfPerigee(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("argPe length is not 8");return t}static eccentricity(e){var t=e.padEnd(9,"0");if(7!==(t="."===t[1]?t.substring(2):t.substring(0,7)).length)throw new Error("ecen length is not 7");return t}static inclination(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("inc length is not 8");return t}static meanAnomaly(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("meana length is not 8");return t}static meanMotion(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(8).padStart(11,"0");if(11!==t.length)throw new Error("meanmo length is not 11");return t}static rightAscension(e){"number"==typeof e&&(e=e.toString());var t=parseFloat(e).toFixed(4).padStart(8,"0");if(8!==t.length)throw new Error("rasc length is not 8");return t}static setCharAt(e,t,r){return t>e.length-1?e:"".concat(e.substring(0,t)).concat(r).concat(e.substring(t+1))}}!function(e){e.wgs72old="wgs72old",e.wgs72="wgs72",e.wgs84="wgs84"}(le||(le={}));class ke{static angle_(e,t){var r=ke.mag_(e),i=ke.mag_(t);if(r*i>1e-8*1e-8){var a=ke.dot_(e,t)/(r*i);return Math.abs(a)>1&&(a=Number(ke.sgn_(a))),Math.acos(a)}return 999999.1}static asinh_(e){return Math.log(e+Math.sqrt(e*e+1))}static createSatrec(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le.wgs72,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.IMPROVED,o={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},s=1440/(2*M);o.error=0,o.satnum=e.substring(2,7),o.epochyr=parseInt(e.substring(18,20)),o.epochdays=parseFloat(e.substring(20,32)),o.ndot=parseFloat(e.substring(33,43)),o.nddot=parseFloat("".concat(e.substring(44,45),".").concat(e.substring(45,50),"E").concat(e.substring(50,52))),o.bstar=parseFloat("".concat(e.substring(53,54),".").concat(e.substring(54,59),"E").concat(e.substring(59,61))),o.inclo=parseFloat(r.substring(8,16)),o.nodeo=parseFloat(r.substring(17,25)),o.ecco=parseFloat(".".concat(r.substring(26,33))),o.argpo=parseFloat(r.substring(34,42)),o.mo=parseFloat(r.substring(43,51)),o.no=parseFloat(r.substring(52,63)),o.no/=s,o.inclo*=c,o.nodeo*=c,o.argpo*=c,o.mo*=c,i=o.epochyr<57?o.epochyr+2e3:o.epochyr+1900;var{mon:h,day:l,hr:u,min:d,sec:m}=ke.days2mdhms(i,o.epochdays),p=ke.jday(i,h,l,u,d,m);return o.jdsatepoch=p.jd+p.jdFrac,ke.sgp4init_(o,{whichconst:a,opsmode:n,satn:o.satnum,epoch:o.jdsatepoch-2433281.5,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xndot:o.ndot,xnddot:o.nddot,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}static cross_(e,t){var r=[0,0,0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=e[2]*t[0]-e[0]*t[2],r[2]=e[0]*t[1]-e[1]*t[0],r}static days2mdhms(e,t){for(var r=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],i=Math.floor(t),a=1,n=0;i>n+r[a-1]&&a<12;)n+=r[a-1],a+=1;var o=a,s=i-n,h=24*(t-i),l=Math.floor(h);h=60*(h-l);var c=Math.floor(h);return{mon:o,day:s,hr:l,min:c,sec:60*(h-c)}}static dot_(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}static gstime(e){var t=(e-2451545)/36525,r=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(r=r*c/240%l)<0&&(r+=l),r}static invjday(e,t){var r,i;Math.abs(t)>=1&&(e+=Math.floor(t),t-=Math.floor(t));var a=e-Math.floor(e)-.5;Math.abs(a)>1e-8&&(e-=a,t+=a);var n=e-2415019.5,o=n/365.25,s=1900+Math.floor(o);r=Math.floor(.25*(s-1901)),(i=Math.floor(n-(365*(s-1900)+r)))+t<1&&(s-=1,r=Math.floor(.25*(s-1901)),i=Math.floor(n-(365*(s-1900)+r)));var{mon:h,day:l,hr:c,min:u,sec:d}=ke.days2mdhms(s,i+t);return{year:s,mon:h,day:l,hr:c,min:u,sec:d}}static jday(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;e instanceof Date&&(t=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCHours(),a=e.getUTCMinutes(),n=e.getUTCSeconds(),o=e.getUTCMilliseconds(),e=e.getUTCFullYear());var s=367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+r+1721013.5,h=(o/1e3+n+60*a+3600*i)/86400;if(Math.abs(h)>1){var l=Math.floor(h);s+=l,h-=l}return{jd:s,jdFrac:h}}static mag_(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}static newtonnu_(e,t){var r=999999.9,i=999999.9,a=1e-8;if(Math.abs(e)<a)i=t,r=t;else if(e<1-a){var n=Math.sqrt(1-e*e)*Math.sin(t)/(1+e*Math.cos(t)),o=(e+Math.cos(t))/(1+e*Math.cos(t));i=(r=Math.atan2(n,o))-e*Math.sin(r)}else if(e>1+a){if(e>1&&Math.abs(t)+1e-5<M-Math.acos(1/e)){var s=Math.sqrt(e*e-1)*Math.sin(t)/(1+e*Math.cos(t));r=ke.asinh_(s),i=e*ke.sinh_(r)-r}}else Math.abs(t)<168*M/180&&(i=(r=Math.tan(.5*t))+r*r*r/3);return e<1&&((i%=2*M)<0&&(i+=2*M),r%=2*M),{e0:r,m:i}}static propagate(e,t){var{xke:r,j2:i,j3oj2:a}=e,n=e.radiusearthkm*e.xke/60;e.t=t,e.error=0;var o=e.mo+e.mdot*e.t,s=e.argpo+e.argpdot*e.t,h=e.nodeo+e.nodedot*e.t,c=s,u=o,d=e.t*e.t,m=h+e.nodecf*d,p=1-e.cc1*e.t,f=e.bstar*e.cc4*e.t,v=e.t2cof*d;if(1!==e.isimp){var g=e.omgcof*e.t,b=1+e.eta*Math.cos(o),_=g+e.xmcof*(b*b*b-e.delmo);u=o+_,c=s-_;var x=d*e.t,A=x*e.t;p=p-e.d2*d-e.d3*x-e.d4*A,f+=e.bstar*e.cc5*(Math.sin(u)-e.sinmao),v=v+e.t3cof*x+A*(e.t4cof+e.t*e.t5cof)}var S=e.no,E=e.ecco,T=e.inclo;if("d"===e.method){var P=e.t,I=ke.dspace_(e.irez,e.d2201,e.d2211,e.d3210,e.d3222,e.d4410,e.d4422,e.d5220,e.d5232,e.d5421,e.d5433,e.dedt,e.del1,e.del2,e.del3,e.didt,e.dmdt,e.dnodt,e.domdt,e.argpo,e.argpdot,e.t,P,e.gsto,e.xfact,e.xlamo,e.no,e.atime,E,c,T,e.xli,u,e.xni,m,S);[E,c,T,u,m,S]=I}if(S<=0)return e.error=2,{position:!1,velocity:!1};var D=(r/S)**y*p*p;if(S=r/D**1.5,(E-=f)>=1||E<-.001)return e.error=1,{position:!1,velocity:!1};E<1e-6&&(E=1e-6);var j=(u+=e.no*v)+c+m,z=E,O=T,C=c%=l,N=m%=l,R=u=((j%=l)-c-m)%l,L=Math.sin(T),F=Math.cos(T);if("d"===e.method){var U={inclo:e.inclo,init:"n",ep:z,inclp:O,nodep:N,argpp:C,mp:R,opsmode:e.operationmode},q=ke.dpper_(e,U);if(({ep:z,nodep:N,argpp:C,mp:R}=q),(O=q.inclp)<0&&(O=-O,N+=M,C-=M),z<0||z>1)return e.error=3,{position:!1,velocity:!1}}"d"===e.method&&(L=Math.sin(O),F=Math.cos(O),e.aycof=-.5*a*L,Math.abs(F+1)>15e-13?e.xlcof=-.25*a*L*(3+5*F)/(1+F):e.xlcof=-.25*a*L*(3+5*F)/w);for(var k=z*Math.cos(C),J=1/(D*(1-z*z)),Y=z*Math.sin(C)+J*e.aycof,G=(R+C+N+J*e.xlcof*k-N)%l,H=G,B=9999.9,V=1,Z=0,X=0;Math.abs(B)>=1e-12&&V<=10;)X=Math.sin(H),B=(G-Y*(Z=Math.cos(H))+k*X-H)/(B=1-Z*k-X*Y),Math.abs(B)>=.95&&(B=B>0?.95:-.95),H+=B,V+=1;var W=k*Z+Y*X,K=k*X-Y*Z,Q=k*k+Y*Y,$=D*(1-Q);if($<0)return e.error=4,{position:!1,velocity:!1};var ee=D*(1-W),te=Math.sqrt(D)*K/ee,re=Math.sqrt($)/ee,ie=Math.sqrt(1-Q),ae=D/ee*(X-Y-k*(J=K/(1+ie))),ne=D/ee*(Z-k+Y*J),oe=Math.atan2(ae,ne),se=(ne+ne)*ae,he=1-2*ae*ae,le=.5*i*(J=1/$),ce=le*J;if("d"===e.method){var ue=F*F;e.con41=3*ue-1,e.x1mth2=1-ue,e.x7thm1=7*ue-1}var de=ee*(1-1.5*ce*ie*e.con41)+.5*le*e.x1mth2*he;if(de<1)return e.error=6,{position:!1,velocity:!1};oe-=.25*ce*e.x7thm1*se;var me=N+1.5*ce*F*se,pe=O+1.5*ce*F*L*he,fe=te-S*le*e.x1mth2*se/r,ve=re+S*le*(e.x1mth2*he+1.5*e.con41)/r,ge=Math.sin(oe),Me=Math.cos(oe),ye=Math.sin(me),we=Math.cos(me),be=Math.sin(pe),_e=Math.cos(pe),xe=-ye*_e,Ae=we*_e,Se=xe*ge+we*Me,Ee=Ae*ge+ye*Me,Te=be*ge,Pe=xe*Me-we*ge,Ie=Ae*Me-ye*ge,De=be*Me;return{position:{x:de*Se*e.radiusearthkm,y:de*Ee*e.radiusearthkm,z:de*Te*e.radiusearthkm},velocity:{x:(fe*Se+ve*Pe)*n,y:(fe*Ee+ve*Ie)*n,z:(fe*Te+ve*De)*n}}}static rv2coe(e,t,r){var i,a,n,o,s,h,c,u,d,m,p,f,v,g,y,w,b=[0,0,0],_=[0,0,0],x=0,A=.5*M,S=1e-8,E=999999.1,T=ke.mag_(e),P=ke.mag_(t),I=ke.cross_(e,t),D=ke.mag_(I);if(D>S){b[0]=-I[1],b[1]=I[0],b[2]=0,f=ke.mag_(b);var j=P*P-r/T;for(p=ke.dot_(e,t),y=0;y<=2;y++)_[y]=(j*e[y]-p*t[y])/r;if(n=ke.mag_(_),g=P*P*.5-r/T,a=Math.abs(g)>S?-r/(2*g):999999.9,i=D*D/r,v=I[2]/D,o=Math.acos(v),w=1,n<S?w=o<S||Math.abs(o-M)<S?2:3:(o<S||Math.abs(o-M)<S)&&(w=4),f>S){var z=b[0]/f;Math.abs(z)>1&&(z=ke.sgn_(z)),s=Math.acos(z),b[1]<0&&(s=l-s)}else s=E;if(1===w?(h=ke.angle_(b,_),_[2]<0&&(h=l-h)):h=E,1===w||4===w?(c=ke.angle_(_,e),p<0&&(c=l-c)):c=E,3===w?(u=ke.angle_(b,e),e[2]<0&&(u=l-u),x=u):u=E,n>S&&4===w){var O=_[0]/n;Math.abs(O)>1&&(O=ke.sgn_(O)),m=Math.acos(O),_[1]<0&&(m=l-m),o>A&&(m=l-m)}else m=E;if(T>S&&2===w){var C=e[0]/T;Math.abs(C)>1&&(C=ke.sgn_(C)),d=Math.acos(C),e[1]<0&&(d=l-d),o>A&&(d=l-d),x=d}else d=E;1!==w&&4!==w||(x=ke.newtonnu_(n,c).m)}else i=E,a=E,n=E,o=E,s=E,h=E,c=E,x=E,u=E,d=E,m=E;return{p:i,a,ecc:n,incl:o,omega:s,argp:h,nu:c,m:x,arglat:u,truelon:d,lonper:m}}static sgn_(e){return e<0?-1:1}static sinh_(e){return(Math.exp(e)-Math.exp(-e))/2}static dpper_(e,t){var{e3:r,ee2:i,peo:a,pgho:n,pho:o,PInco:s,plo:h,se2:c,se3:u,sgh2:d,sgh3:m,sgh4:p,sh2:f,sh3:v,si2:g,si3:y,sl2:w,sl3:b,sl4:_,t:x,xgh2:A,xgh3:S,xgh4:E,xh2:T,xh3:P,xi2:I,xi3:D,xl2:j,xl3:z,xl4:O,zmol:C,zmos:N}=e,{ep:R,inclp:L,nodep:F,argpp:U,mp:q}=t,{opsmode:k="i",init:J}=t,Y=N+119459e-10*x;"y"===J&&(Y=N);var G=Y+.0335*Math.sin(Y),H=Math.sin(G),B=.5*H*H-.25,V=-.5*H*Math.cos(G),Z=c*B+u*V,X=g*B+y*V,W=w*B+b*V+_*H,K=d*B+m*V+p*H,Q=f*B+v*V;Y=C+.00015835218*x,"y"===J&&(Y=C),G=Y+.1098*Math.sin(Y);var $=Z+(i*(B=.5*(H=Math.sin(G))*H-.25)+r*(V=-.5*H*Math.cos(G))),ee=X+(I*B+D*V),te=W+(j*B+z*V+O*H),re=K+(A*B+S*V+E*H),ie=Q+(T*B+P*V);if("n"===J){te-=h,re-=n,ie-=o,L+=ee-=s,R+=$-=a;var ae=Math.sin(L),ne=Math.cos(L);if(L>=.2)U+=re-=ne*(ie/=ae),F+=ie,q+=te;else{var oe=Math.sin(F),se=Math.cos(F),he=ae*oe,le=ae*se;he+=ie*se+ee*ne*oe,le+=-ie*oe+ee*ne*se,(F%=l)<0&&"a"===k&&(F+=l);var ce=q+U+ne*F;ce+=te+re-ee*F*ae;var ue=F;(F=Math.atan2(he,le))<0&&"a"===k&&(F+=l),Math.abs(ue-F)>M&&(F<ue?F+=l:F-=l),U=ce-(q+=te)-ne*F}}return{ep:R,inclp:L,nodep:F,argpp:U,mp:q}}static dscom_(e){var{epoch:t,ep:r,argpp:i,tc:a,inclp:n,nodep:o,np:s}=e,h=.01675,l=.0549,c=2*Math.PI,u=0,d=0,m=0,p=0,f=0,v=0,g=0,M=0,y=0,w=0,b=0,_=0,x=0,A=0,S=0,E=0,T=0,P=0,I=0,D=0,j=0,z=0,O=0,C=0,N=0,R=0,L=0,F=0,U=0,q=0,k=0,J=0,Y=0,G=0,H=0,B=0,V=0,Z=0,X=s,W=r,K=Math.sin(o),Q=Math.cos(o),$=Math.sin(i),ee=Math.cos(i),te=Math.sin(n),re=Math.cos(n),ie=W*W,ae=1-ie,ne=Math.sqrt(ae),oe=t+18261.5+a/1440,se=(4.523602-.00092422029*oe)%c,he=Math.sin(se),le=Math.cos(se),ce=.91375164-.03568096*le,ue=Math.sqrt(1-ce*ce),de=.089683511*he/ue,me=Math.sqrt(1-de*de),pe=5.8351514+.001944368*oe,fe=.39785416*he/ue,ve=me*le+.91744867*de*he;fe=Math.atan2(fe,ve),fe+=pe-se;for(var ge=Math.cos(fe),Me=Math.sin(fe),ye=.1945905,we=-.98088458,be=.91744867,_e=.39785416,xe=Q,Ae=K,Se=29864797e-13,Ee=1/X,Te=1;Te<=2;Te++){var Pe=ye*xe+we*be*Ae,Ie=-we*xe+ye*be*Ae,De=-ye*Ae+we*be*xe,je=we*_e,ze=we*Ae+ye*be*xe,Oe=ye*_e,Ce=re*De+te*je,Ne=re*ze+te*Oe,Re=-te*De+re*je,Le=-te*ze+re*Oe,Fe=Pe*ee+Ce*$,Ue=Ie*ee+Ne*$,qe=-Pe*$+Ce*ee,ke=-Ie*$+Ne*ee,Je=Re*$,Ye=Le*$,Ge=Re*ee,He=Le*ee;F=-6*Pe*Re+ie*(-24*Fe*Ge-6*qe*Je),U=-6*(Pe*Le+Ie*Re)+ie*(-24*(Ue*Ge+Fe*He)+-6*(qe*Ye+ke*Je)),q=-6*Ie*Le+ie*(-24*Ue*He-6*ke*Ye),J=6*Ce*Re+ie*(24*Fe*Je-6*qe*Ge),Y=6*(Ne*Re+Ce*Le)+ie*(24*(Ue*Je+Fe*Ye)-6*(ke*Ge+qe*He)),G=6*Ne*Le+ie*(24*Ue*Ye-6*ke*He),L=(L=3*(Pe*Pe+Ce*Ce)+(B=12*Fe*Fe-3*qe*qe)*ie)+L+ae*B,k=(k=6*(Pe*Ie+Ce*Ne)+(V=24*Fe*Ue-6*qe*ke)*ie)+k+ae*V,H=(H=3*(Ie*Ie+Ne*Ne)+(Z=12*Ue*Ue-3*ke*ke)*ie)+H+ae*Z,d=-.5*(m=Se*Ee)/ne,u=-15*W*(p=m*ne),f=Fe*qe+Ue*ke,v=Ue*qe+Fe*ke,g=Ue*ke-Fe*qe,1===Te&&(M=u,y=d,w=m,b=p,_=f,x=v,A=g,S=L,I=k,O=H,E=F,T=U,P=q,D=J,j=Y,z=G,C=B,N=V,R=Z,ye=ge,we=Me,be=ce,_e=ue,xe=me*Q+de*K,Ae=K*me-Q*de,Se=4.7968065e-7)}return{snodm:K,cnodm:Q,sinim:te,cosim:re,sinomm:$,cosomm:ee,day:oe,e3:2*u*g,ee2:2*u*v,em:W,emsq:ie,gam:pe,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:ne,se2:2*M*x,se3:2*M*A,sgh2:2*b*N,sgh3:2*b*(R-C),sgh4:-18*b*h,sh2:-2*y*j,sh3:-2*y*(z-D),si2:2*y*T,si3:2*y*(P-E),sl2:-2*w*I,sl3:-2*w*(O-S),sl4:-2*w*(-21-9*ie)*h,s1:u,s2:d,s3:m,s4:p,s5:f,s6:v,s7:g,ss1:M,ss2:y,ss3:w,ss4:b,ss5:_,ss6:x,ss7:A,sz1:S,sz2:I,sz3:O,sz11:E,sz12:T,sz13:P,sz21:D,sz22:j,sz23:z,sz31:C,sz32:N,sz33:R,xgh2:2*p*V,xgh3:2*p*(Z-B),xgh4:-18*p*l,xh2:-2*d*Y,xh3:-2*d*(G-J),xi2:2*d*U,xi3:2*d*(q-F),xl2:-2*m*k,xl3:-2*m*(H-L),xl4:-2*m*(-21-9*ie)*l,nm:X,z1:L,z2:k,z3:H,z11:F,z12:U,z13:q,z21:J,z22:Y,z23:G,z31:B,z32:V,z33:Z,zmol:(.2299715*oe-pe+4.7199672)%c,zmos:(6.2565837+.017201977*oe)%c}}static dsinit_(e){var{xke:t,cosim:r,argpo:i,s1:a,s2:n,s3:o,s4:s,s5:h,sinim:c,ss1:u,ss2:d,ss3:m,ss4:p,ss5:f,sz1:v,sz3:g,sz11:y,sz13:w,sz21:b,sz23:_,sz31:x,sz33:A,t:S,tc:E,gsto:T,mo:P,mdot:I,no:D,nodeo:j,nodedot:z,xPIdot:O,z1:C,z3:N,z11:R,z13:L,z21:F,z23:U,z31:q,z33:k,ecco:J,eccsq:Y}=e,{emsq:G,em:H,argpm:B,inclm:V,mm:Z,nm:X,nodem:W,irez:K,atime:Q,d2201:$,d2211:ee,d3210:te,d3222:re,d4410:ie,d4422:ae,d5220:ne,d5232:oe,d5421:se,d5433:he,dedt:le,didt:ce,dmdt:ue,dnodt:de,domdt:me,del1:pe,del2:fe,del3:ve,xfact:ge,xlamo:Me,xli:ye,xni:we}=e,be=.0043752690880113,_e=.00015835218,xe=119459e-10;K=0,X<.0052359877&&X>.0034906585&&(K=1),X>=.00826&&X<=.00924&&H>=.5&&(K=2);var Ae=-xe*d*(b+_);(V<.052359877||V>M-.052359877)&&(Ae=0),0!==c&&(Ae/=c),ue=-xe*m*(v+g-14-6*G)-_e*o*(C+N-14-6*G);var Se=-_e*n*(F+U);(V<.052359877||V>M-.052359877)&&(Se=0),me=p*xe*(x+A-6)-r*Ae+s*_e*(q+k-6),de=Ae,0!==c&&(me-=r/c*Se,de+=Se/c);var Ee=(T+E*be)%l;if(H+=(le=u*xe*f+a*_e*h)*S,0!==K){var Te=(X/t)**(2/3);if(2===K){var Pe,Ie,De,je,ze,Oe,Ce,Ne,Re,Le=r*r,Fe=H,Ue=G,qe=(H=J)*(G=Y);H<=.65?(Pe=3.616-13.247*H+16.29*G,Ie=117.39*H-19.302-228.419*G+156.591*qe,De=109.7927*H-18.9068-214.6334*G+146.5816*qe,je=242.694*H-41.122-471.094*G+313.953*qe,ze=841.88*H-146.407-1629.014*G+1083.435*qe,Oe=3017.977*H-532.114-5740.032*G+3708.276*qe):(Pe=331.819*H-72.099-508.738*G+266.724*qe,Ie=1582.851*H-346.844-2415.925*G+1246.113*qe,De=1554.908*H-342.585-2366.899*G+1215.972*qe,je=4758.686*H-1052.797-7193.992*G+3651.957*qe,ze=16178.11*H-3581.69-24462.77*G+12422.52*qe,Oe=H>.715?29936.92*H-5149.66-54087.36*G+31324.56*qe:1464.74-4664.75*H+3763.64*G),H<.7?(Re=4988.61*H-919.2277-9064.77*G+5542.21*qe,Ce=4568.6173*H-822.71072-8491.4146*G+5337.524*qe,Ne=4690.25*H-853.666-8624.77*G+5341.4*qe):(Re=161616.52*H-37995.78-229838.2*G+109377.94*qe,Ce=218913.95*H-51752.104-309468.16*G+146349.42*qe,Ne=170470.89*H-40023.88-242699.48*G+115605.82*qe);var ke=c*c,Je=.75*(1+2*r+Le),Ye=X*X*3*(Te*Te),Ge=17891679e-13*Ye;$=Ge*Je*(-.306-.44*(H-.64)),ee=Ge*(1.5*ke)*Pe,te=(Ge=3.7393792e-7*(Ye*=Te))*(1.875*c*(1-2*r-3*Le))*Ie,re=Ge*(-1.875*c*(1+2*r-3*Le))*De,ie=(Ge=2*(Ye*=Te)*7.3636953e-9)*(35*ke*Je)*je,ae=Ge*(39.375*ke*ke)*ze,ne=(Ge=1.1428639e-7*(Ye*=Te))*(9.84375*c*(ke*(1-2*r-5*Le)+.33333333*(4*r-2+6*Le)))*Oe,oe=Ge*(c*(4.92187512*ke*(-2-4*r+10*Le)+6.56250012*(1+2*r-3*Le)))*Ne,se=(Ge=2*Ye*2.1765803e-9)*(29.53125*c*(2-8*r+Le*(8*r-12+10*Le)))*Ce,he=Ge*(29.53125*c*(-2-8*r+Le*(12+8*r-10*Le)))*Re,Me=(P+j+j-(Ee+Ee))%l,ge=I+ue+2*(z+de-be)-D,H=Fe,G=Ue}if(1===K){var He=1+r;fe=2*(pe=3*X*X*Te*Te)*(.75*(1+r)*(1+r))*(1+G*(.8125*G-2.5))*17891679e-13,ve=3*pe*(He*=1.875*He*He)*(1+G*(6.60937*G-6))*2.2123015e-7*Te,pe=pe*(.9375*c*c*(1+3*r)-.75*(1+r))*(1+2*G)*21460748e-13*Te,Me=(P+j+i-Ee)%l,ge=I+O+ue+me+de-(D+be)}ye=Me,we=D,Q=0,X=D+0}return{em:H,argpm:B+=me*S,inclm:V+=(ce=d*xe*(y+w)+n*_e*(R+L))*S,mm:Z+=ue*S,nm:X,nodem:W+=de*S,irez:K,atime:Q,d2201:$,d2211:ee,d3210:te,d3222:re,d4410:ie,d4422:ae,d5220:ne,d5232:oe,d5421:se,d5433:he,dedt:le,didt:ce,dmdt:ue,dndt:0,dnodt:de,domdt:me,del1:pe,del2:fe,del3:ve,xfact:ge,xlamo:Me,xli:ye,xni:we}}static dspace_(e,t,r,i,a,n,o,s,h,c,u,d,m,p,f,v,g,M,y,w,b,_,x,A,S,E,T,P,I,D,j,z,O,C,N,R){var L=.13130908,F=2.8843198,U=.37448087,q=5.7686396,k=.95240898,J=1.8014998,Y=1.050833,G=4.4108898,H=259200,B=0,V=(A+.0043752690880113*x)%l;if(I+=d*_,j+=v*_,D+=y*_,N+=M*_,O+=g*_,0!==e){var Z;(0===P||_*P<=0||Math.abs(_)<Math.abs(P))&&(P=0,C=T,z=E),Z=_>0?720:-720;for(var X=0,W=0,K=0,Q=0,$=0,ee=0,te=0,re=381;381===re;)2!==e?(ee=m*Math.sin(z-L)+p*Math.sin(2*(z-F))+f*Math.sin(3*(z-U)),Q=C+S,$=m*Math.cos(z-L)+2*p*Math.cos(2*(z-F))+3*f*Math.cos(3*(z-U)),$*=Q):(K=(te=w+b*P)+te,W=z+z,ee=t*Math.sin(K+z-q)+r*Math.sin(z-q)+i*Math.sin(te+z-k)+a*Math.sin(-te+z-k)+n*Math.sin(K+W-J)+o*Math.sin(W-J)+s*Math.sin(te+z-Y)+h*Math.sin(-te+z-Y)+c*Math.sin(te+W-G)+u*Math.sin(-te+W-G),Q=C+S,$=t*Math.cos(K+z-q)+r*Math.cos(z-q)+i*Math.cos(te+z-k)+a*Math.cos(-te+z-k)+s*Math.cos(te+z-Y)+h*Math.cos(-te+z-Y)+2*(n*Math.cos(K+W-J)+o*Math.cos(W-J)+c*Math.cos(te+W-G)+u*Math.cos(-te+W-G)),$*=Q),Math.abs(_-P)>=720?re=381:(X=_-P,re=0),381===re&&(z+=Q*Z+ee*H,C+=ee*Z+$*H,P+=Z);R=C+ee*X+$*X*X*.5;var ie=z+Q*X+ee*X*X*.5;1!==e?(O=ie-2*N+2*V,B=R-T):(O=ie-N-D+V,B=R-T),R=T+B}return[I,D,j,O,N,R]}static getgravconst_(e){var t,r,i,a,n,o,s,h;switch(e){case"wgs72old":n=398600.79964,o=6378.135,s=1/(h=.0743669161),a=-165597e-11,i=(r=-253881e-11)/(t=.001082616);break;case"wgs72":n=398600.8,o=6378.135,s=1/(h=60/Math.sqrt(o*o*o/n)),a=-165597e-11,i=(r=-253881e-11)/(t=.001082616);break;case"wgs84":n=398600.5,o=6378.137,s=1/(h=60/Math.sqrt(o*o*o/n)),a=-161098761e-14,i=(r=-253215306e-14)/(t=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(e))}return{tumin:s,mus:n,radiusearthkm:o,xke:h,j2:t,j3:r,j4:a,j3oj2:i}}static initl_(e){var t,{opsmode:r,ecco:i,epoch:a,inclo:n,xke:o,j2:s}=e,{no:h}=e,{PI:l}=Math,c=2*l,u=2/3,d=i*i,m=1-d,p=Math.sqrt(m),f=Math.cos(n),v=f*f,g=(o/h)**u,M=.75*s*(3*v-1)/(p*m),y=M/(g*g),w=g*(1-y*y-y*(1/3+134*y*y/81)),b=(o/(h/=1+(y=M/(w*w))))**u,_=Math.sin(n),x=b*m,A=1-5*v,S=-A-v-v,E=1/b,T=x*x,P=b*(1-i);if("a"===r){var I=a-7305,D=Math.floor(I+1e-8),j=.017202791694070362;(t=(1.7321343856509375+j*D+(j+c)*(I-D)+I*I*5075514194322695e-30)%c)<0&&(t+=c)}else t=ke.gstime(a+2433281.5);return{no:h,method:"n",ainv:E,ao:b,con41:S,con42:A,cosio:f,cosio2:v,eccsq:d,omeosq:m,posq:T,rp:P,rteosq:p,sinio:_,gsto:t}}static sgp4init_(e,r){var{whichconst:i=le.wgs72,opsmode:a=t.IMPROVED,satn:n=e.satnum,epoch:o,xbstar:s,xecco:h,xargpo:c,xinclo:u,xndot:d,xnddot:m,xmo:p,xno:f,xnodeo:v}=r;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.PInco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0;var g=ke.getgravconst_(i);e.tumin=g.tumin,e.mus=g.mus,e.radiusearthkm=g.radiusearthkm,e.xke=g.xke,e.j2=g.j2,e.j3=g.j3,e.j4=g.j4,e.j3oj2=g.j3oj2;var{j2:M}=g,{j4:b}=g,{xke:_}=g,{j3oj2:x}=g;e.error=0,e.operationmode=a;var A=n.split("")[0].toLowerCase();isNaN(parseInt(A))&&" "!==A?e.satnum=parseInt(A.charCodeAt(0)-96+9+e.satnum.slice(1,5)).toString():e.satnum=n,e.bstar=s,e.ndot=d,e.nddot=m,e.ecco=h,e.argpo=c,e.inclo=u,e.mo=p,e.no=f,e.nodeo=v;var S=78/e.radiusearthkm+1,E=42/e.radiusearthkm,T=E*E*E*E;e.init="y",e.t=0;var P={ecco:e.ecco,epoch:o,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode,xke:e.xke,j2:e.j2},I=ke.initl_(P),{ao:D,con42:j,cosio:z,cosio2:O,eccsq:C,omeosq:N,posq:R,rp:L,rteosq:F,sinio:U}=I;if(e.no=I.no,e.con41=I.con41,e.gsto=I.gsto,e.a=(e.no*e.tumin)**(-2/3),e.alta=e.a*(1+e.ecco)-1,e.altp=e.a*(1-e.ecco)-1,e.error=0,N>=0||e.no>=0){e.isimp=0,L<220/e.radiusearthkm+1&&(e.isimp=1);var q=S,k=T,J=(L-1)*e.radiusearthkm;if(J<156){q=J-78,J<98&&(q=20);var Y=(120-q)/e.radiusearthkm;k=Y*Y*Y*Y,q=q/e.radiusearthkm+1}var G=1/R,H=1/(D-q);e.eta=D*e.ecco*H;var B=e.eta*e.eta,V=e.ecco*e.eta,Z=Math.abs(1-B),X=k*H**4,W=X/Z**3.5,K=W*e.no*(D*(1+1.5*B+V*(4+B))+.375*M*H/Z*e.con41*(8+3*B*(8+B)));e.cc1=e.bstar*K;var Q=0;e.ecco>1e-4&&(Q=-2*X*H*x*e.no*U/e.ecco),e.x1mth2=1-O,e.cc4=2*e.no*W*D*N*(e.eta*(2+.5*B)+e.ecco*(.5+2*B)-M*H/(D*Z)*(-3*e.con41*(1-2*V+B*(1.5-.5*V))+.75*e.x1mth2*(2*B-V*(1+B))*Math.cos(2*e.argpo))),e.cc5=2*W*D*N*(1+2.75*(B+V)+V*B);var $=O*O,ee=1.5*M*G*e.no,te=.5*ee*M*G,re=-.46875*b*G*G*e.no;e.mdot=e.no+.5*ee*F*e.con41+.0625*te*F*(13-78*O+137*$),e.argpdot=-.5*ee*j+.0625*te*(7-114*O+395*$)+re*(3-36*O+49*$);var ie=-ee*z;e.nodedot=ie+(.5*te*(4-19*O)+2*re*(3-7*O))*z;var ae=e.argpdot+e.nodedot;e.omgcof=e.bstar*Q*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-y*X*e.bstar/V),e.nodecf=3.5*N*ie*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(z+1)>15e-13?e.xlcof=-.25*x*U*(3+5*z)/(1+z):e.xlcof=-.25*x*U*(3+5*z)/w,e.aycof=-.5*x*U;var ne=1+e.eta*Math.cos(e.mo);if(e.delmo=ne*ne*ne,e.sinmao=Math.sin(e.mo),e.x7thm1=7*O-1,l/e.no>=225){e.method="d",e.isimp=1;var oe=e.inclo,se={epoch:o,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,PInco:e.PInco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos},he=ke.dscom_(se);e.e3=he.e3,e.ee2=he.ee2,e.peo=he.peo,e.pgho=he.pgho,e.pho=he.pho,e.PInco=he.PInco,e.plo=he.plo,e.se2=he.se2,e.se3=he.se3,e.sgh2=he.sgh2,e.sgh3=he.sgh3,e.sgh4=he.sgh4,e.sh2=he.sh2,e.sh3=he.sh3,e.si2=he.si2,e.si3=he.si3,e.sl2=he.sl2,e.sl3=he.sl3,e.sl4=he.sl4;var{sinim:ce,cosim:ue,em:de,emsq:me,s1:pe,s2:fe,s3:ve,s4:ge,s5:Me,ss1:ye,ss2:we,ss3:be,ss4:_e,ss5:xe,sz1:Ae,sz3:Se,sz11:Ee,sz13:Te,sz21:Pe,sz23:Ie,sz31:De,sz33:je}=he;e.xgh2=he.xgh2,e.xgh3=he.xgh3,e.xgh4=he.xgh4,e.xh2=he.xh2,e.xh3=he.xh3,e.xi2=he.xi2,e.xi3=he.xi3,e.xl2=he.xl2,e.xl3=he.xl3,e.xl4=he.xl4,e.zmol=he.zmol,e.zmos=he.zmos;var{nm:ze,z1:Oe,z3:Ce,z11:Ne,z13:Re,z21:Le,z23:Fe,z31:Ue,z33:qe}=he,Je={inclo:oe,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode},Ye=ke.dpper_(e,Je);e.ecco=Ye.ep,e.inclo=Ye.inclp,e.nodeo=Ye.nodep,e.argpo=Ye.argpp,e.mo=Ye.mp;var Ge={xke:_,cosim:ue,emsq:me,argpo:e.argpo,s1:pe,s2:fe,s3:ve,s4:ge,s5:Me,sinim:ce,ss1:ye,ss2:we,ss3:be,ss4:_e,ss5:xe,sz1:Ae,sz3:Se,sz11:Ee,sz13:Te,sz21:Pe,sz23:Ie,sz31:De,sz33:je,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xPIdot:ae,z1:Oe,z3:Ce,z11:Ne,z13:Re,z21:Le,z23:Fe,z31:Ue,z33:qe,ecco:e.ecco,eccsq:C,em:de,argpm:0,inclm:oe,mm:0,nm:ze,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni},He=ke.dsinit_(Ge);e.irez=He.irez,e.atime=He.atime,e.d2201=He.d2201,e.d2211=He.d2211,e.d3210=He.d3210,e.d3222=He.d3222,e.d4410=He.d4410,e.d4422=He.d4422,e.d5220=He.d5220,e.d5232=He.d5232,e.d5421=He.d5421,e.d5433=He.d5433,e.dedt=He.dedt,e.didt=He.didt,e.dmdt=He.dmdt,e.dnodt=He.dnodt,e.domdt=He.domdt,e.del1=He.del1,e.del2=He.del2,e.del3=He.del3,e.xfact=He.xfact,e.xlamo=He.xlamo,e.xli=He.xli,e.xni=He.xni}if(1!==e.isimp){var Be=e.cc1*e.cc1;e.d2=4*D*H*Be;var Ve=e.d2*H*e.cc1/3;e.d3=(17*D+q)*Ve,e.d4=.5*Ve*D*H*(221*D+31*q)*e.cc1,e.t3cof=e.d2+2*Be,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*Be)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*Be*(2*e.d2+Be))}}ke.propagate(e,0),e.init="n"}}function Je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ye{constructor(e,t){Je(this,"start",void 0),Je(this,"stop",void 0),Je(this,"length",void 0),this.start=e-1,this.stop=t,this.length=this.stop-this.start}}function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ve{constructor(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.AFSPC,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:le.wgs72;Be(this,"line1",void 0),Be(this,"line2",void 0),Be(this,"epoch",void 0),Be(this,"satnum",void 0),Be(this,"satrec_",void 0),this.line1=e,this.line2=r,this.epoch=Ve.parseEpoch_(e.substring(18,32)),this.satnum=parseInt(Ve.convertA5to6Digit(e.substring(2,7))),this.satrec_=ke.createSatrec(e,r,a,i)}toString(){return"".concat(this.line1,"\n").concat(this.line2)}get semimajorAxis(){return Ve.tleSma_(this.line2)}get eccentricity(){return Ve.tleEcc_(this.line2)}get inclination(){return Ve.tleInc_(this.line2)}get inclinationDegrees(){return Ve.tleInc_(this.line2)*u}get apogee(){return this.semimajorAxis*(1+this.eccentricity)}get perigee(){return this.semimajorAxis*(1-this.eccentricity)}get period(){return l*Math.sqrt(this.semimajorAxis**3/_)/60}static parseEpoch_(e){var t=parseInt(e.substring(0,2));t+=t>=57?1900:2e3;var r=parseFloat(e.substring(2,14))-1;return te.fromDateTimeString("".concat(t,"-01-01T00:00:00.000Z")).roll(r*f)}propagate(e){var t=new Float64Array(3),r=new Float64Array(3),i=ke.propagate(this.satrec_,e.difference(this.epoch)/60);if(!i)throw new Error("Propagation failed");return Ve.sv2rv_(i,t,r),new Ce(e,new _e(t[0],t[1],t[2]),new _e(r[0],r[1],r[2]))}static sv2rv_(e,t,r){var i=e.position,a=e.velocity;t[0]=i.x,t[1]=i.y,t[2]=i.z,r[0]=a.x,r[1]=a.y,r[2]=a.z}currentState_(){var e=new Float64Array(3),t=new Float64Array(3),r=ke.propagate(this.satrec_,0);return Ve.sv2rv_(r,e,t),new Ce(this.epoch,new _e(e[0],e[1],e[2]),new _e(t[0],t[1],t[2]))}get state(){return this.currentState_()}static tleSma_(e){var t=parseFloat(e.substring(52,63));return _**(1/3)/(l*t/f)**(2/3)}static tleEcc_(e){return parseFloat("0.".concat(e.substring(26,33)))}static tleInc_(e){return parseFloat(e.substring(8,16))*c}static fromClassicalElements(e){var{epochYr:t,epochDay:r}=e.epoch.toEpochYearAndDay(),i=qe.createTle({inc:qe.inclination(e.inclinationDegrees),meanmo:qe.meanMotion(e.revsPerDay),ecen:qe.eccentricity(e.eccentricity.toFixed(7)),argPe:qe.argumentOfPerigee(e.argPerigeeDegrees),meana:qe.meanAnomaly(P(e.eccentricity,e.trueAnomaly).m*u),rasc:qe.rightAscension(e.rightAscensionDegrees),epochday:r,epochyr:t,scc:"00001",intl:"58001A  "});return new Ve(i.tle1,i.tle2)}static argOfPerigee(e){var t=parseFloat(e.substring(Ve.argPerigee_.start,Ve.argPerigee_.stop));if(!(t>=0&&t<360))throw new Error("Invalid argument of perigee: ".concat(t));return D(t,4)}static bstar(e){var t=Ve.bstar_.start+1,r=Ve.bstar_.start+6,i=Ve.bstar_.stop-1,a=e.substring(Ve.bstar_.start,t),n=parseFloat("0.".concat(e.substring(t,r))),o=e.substring(r,i),s=parseInt(e.substring(i,Ve.bstar_.stop));if("-"===o)s*=-1;else if("+"!==o)throw new Error("Invalid BSTAR symbol: ".concat(a));if(n*=10**s,"-"===a)n*=-1;else if("+"!==a&&" "!==a)throw new Error("Invalid BSTAR symbol: ".concat(a));return D(n,14)}static checksum(e){return parseInt(e.substring(Ve.checksum_.start,Ve.checksum_.stop))}static classification(e){return e.substring(Ve.classification_.start,Ve.classification_.stop)}static eccentricity(e){var t=parseFloat("0.".concat(e.substring(Ve.eccentricity_.start,Ve.eccentricity_.stop)));if(!(t>=0&&t<=1))throw new Error("Invalid eccentricity: ".concat(t));return D(t,7)}static elsetNum(e){return parseInt(e.substring(Ve.elsetNum_.start,Ve.elsetNum_.stop))}static ephemerisType(e){var t=parseInt(e.substring(Ve.ephemerisType_.start,Ve.ephemerisType_.stop));if(0!==t&&4!==t)throw new Error("Invalid ephemeris type");if(4===t)throw new Error("SGP4-XP is not supported");return t}static epochDay(e){var t=parseFloat(e.substring(Ve.epochDay_.start,Ve.epochDay_.stop));if(t<1||t>365.99999999)throw new Error("Invalid epoch day");return D(t,8)}static epochYear(e){var t=parseInt(e.substring(Ve.epochYear_.start,Ve.epochYear_.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t}static epochYearFull(e){var t=parseInt(e.substring(Ve.epochYear_.start,Ve.epochYear_.stop));if(t<0||t>99)throw new Error("Invalid epoch year");return t<57?t+2e3:t+1900}static inclination(e){var t=parseFloat(e.substring(Ve.inclination_.start,Ve.inclination_.stop));if(t<0||t>180)throw new Error("Invalid inclination: ".concat(t));return D(t,4)}static intlDes(e){return e.substring(Ve.intlDes_.start,Ve.intlDes_.stop).trim()}static intlDesLaunchNum(e){return parseInt(e.substring(Ve.intlDesLaunchNum_.start,Ve.intlDesLaunchNum_.stop))}static intlDesLaunchPiece(e){return e.substring(Ve.intlDesLaunchPiece_.start,Ve.intlDesLaunchPiece_.stop).trim()}static intlDesYear(e){return parseInt(e.substring(Ve.intlDesYear_.start,Ve.intlDesYear_.stop))}static lineNumber(e){var t=parseInt(e.substring(Ve.lineNumber_.start,Ve.lineNumber_.stop));if(1!==t&&2!==t)throw new Error("Invalid line number");return t}static meanAnomaly(e){var t=parseFloat(e.substring(Ve.meanAnom_.start,Ve.meanAnom_.stop));if(!(t>=0&&t<=360))throw new Error("Invalid mean anomaly: ".concat(t));return D(t,4)}static meanMoDev1(e){var t=parseFloat(e.substring(Ve.meanMoDev1_.start,Ve.meanMoDev1_.stop));if(isNaN(t))throw new Error("Invalid first derivative of mean motion.");return D(t,8)}static meanMoDev2(e){var t=parseFloat(e.substring(Ve.meanMoDev2_.start,Ve.meanMoDev2_.stop));if(isNaN(t))throw new Error("Invalid second derivative of mean motion.");return t}static meanMotion(e){var t=parseFloat(e.substring(Ve.meanMo_.start,Ve.meanMo_.stop));if(!(t>0&&t<=17))throw new Error("Invalid mean motion: ".concat(t));return D(t,8)}static period(e){return 1440/Ve.meanMotion(e)}static rightAscension(e){var t=parseFloat(e.substring(Ve.rightAscension_.start,Ve.rightAscension_.stop));if(!(t>=0&&t<=360))throw new Error("Invalid Right Ascension: ".concat(t));return D(t,4)}static rawSatNum(e){return e.substring(Ve.satNum_.start,Ve.satNum_.stop)}static revNum(e){return parseInt(e.substring(Ve.revNum_.start,Ve.revNum_.stop))}static satNum(e){var t=e.substring(Ve.satNum_.start,Ve.satNum_.stop),r=Ve.convertA5to6Digit(t);return parseInt(r)}static parseLine1(e){return{lineNumber1:Ve.lineNumber(e),satNum:Ve.satNum(e),satNumRaw:Ve.rawSatNum(e),classification:Ve.classification(e),intlDes:Ve.intlDes(e),intlDesYear:Ve.intlDesYear(e),intlDesLaunchNum:Ve.intlDesLaunchNum(e),intlDesLaunchPiece:Ve.intlDesLaunchPiece(e),epochYear:Ve.epochYear(e),epochYearFull:Ve.epochYearFull(e),epochDay:Ve.epochDay(e),meanMoDev1:Ve.meanMoDev1(e),meanMoDev2:Ve.meanMoDev2(e),bstar:Ve.bstar(e),ephemerisType:Ve.ephemerisType(e),elsetNum:Ve.elsetNum(e),checksum1:Ve.checksum(e)}}static parseLine2(e){return{lineNumber2:Ve.lineNumber(e),satNum:Ve.satNum(e),satNumRaw:Ve.rawSatNum(e),inclination:Ve.inclination(e),rightAscension:Ve.rightAscension(e),eccentricity:Ve.eccentricity(e),argOfPerigee:Ve.argOfPerigee(e),meanAnomaly:Ve.meanAnomaly(e),meanMotion:Ve.meanMotion(e),revNum:Ve.revNum(e),checksum2:Ve.checksum(e),period:Ve.period(e)}}static parse(e,t){var r=Ve.parseLine1(e),i=Ve.parseLine2(t);if(r.satNum!==i.satNum)throw new Error("Satellite numbers do not match");if(r.satNumRaw!==i.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==r.lineNumber1)throw new Error("First line number must be 1");if(2!==i.lineNumber2)throw new Error("Second line number must be 2");return{satNum:r.satNum,intlDes:r.intlDes,epochYear:r.epochYear,epochDay:r.epochDay,meanMoDev1:r.meanMoDev1,meanMoDev2:r.meanMoDev2,bstar:r.bstar,inclination:i.inclination,rightAscension:i.rightAscension,eccentricity:i.eccentricity,argOfPerigee:i.argOfPerigee,meanAnomaly:i.meanAnomaly,meanMotion:i.meanMotion,period:i.period}}static parseAll(e,t){var r=Ve.parseLine1(e),i=Ve.parseLine2(t);if(r.satNum!==i.satNum)throw new Error("Satellite numbers do not match");if(r.satNumRaw!==i.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==r.lineNumber1)throw new Error("First line number must be 1");if(2!==i.lineNumber2)throw new Error("Second line number must be 2");return He(He({},r),i)}static convert6DigitToA5(e){if(e.length<6)return e;if(RegExp(/[A-Z\u017F\u212A]/i,"u").test(e[0]))return e;var t=e.slice(2,6),r=parseInt("".concat(e[0]).concat(e[1]));return r=r+(r>=18?1:0)+(r>=24?1:0),"".concat(String.fromCharCode(r+55)).concat(t)}static convertA5to6Digit(e){var t=e.toUpperCase().split("");if(t[0]in Ve.alpha5_){var r=t[0];t[0]=Ve.alpha5_[r]}return t.join("")}}Be(Ve,"alpha5_",{A:"10",B:"11",C:"12",D:"13",E:"14",F:"15",G:"16",H:"17",J:"18",K:"19",L:"20",M:"21",N:"22",P:"23",Q:"24",R:"25",S:"26",T:"27",U:"28",V:"29",W:"30",X:"31",Y:"32",Z:"33"}),Be(Ve,"argPerigee_",new Ye(35,42)),Be(Ve,"bstar_",new Ye(54,61)),Be(Ve,"checksum_",new Ye(69,69)),Be(Ve,"classification_",new Ye(8,8)),Be(Ve,"eccentricity_",new Ye(27,33)),Be(Ve,"elsetNum_",new Ye(65,68)),Be(Ve,"ephemerisType_",new Ye(63,63)),Be(Ve,"epochDay_",new Ye(21,32)),Be(Ve,"epochYear_",new Ye(19,20)),Be(Ve,"inclination_",new Ye(9,16)),Be(Ve,"intlDesLaunchNum_",new Ye(12,14)),Be(Ve,"intlDesLaunchPiece_",new Ye(15,17)),Be(Ve,"intlDesYear_",new Ye(10,11)),Be(Ve,"intlDes_",new Ye(10,17)),Be(Ve,"lineNumber_",new Ye(1,1)),Be(Ve,"meanAnom_",new Ye(44,51)),Be(Ve,"meanMoDev1_",new Ye(34,43)),Be(Ve,"meanMoDev2_",new Ye(45,52)),Be(Ve,"meanMo_",new Ye(53,63)),Be(Ve,"rightAscension_",new Ye(18,25)),Be(Ve,"revNum_",new Ye(64,68)),Be(Ve,"satNum_",new Ye(3,7));class Ze{constructor(){}static azEl(e,t,r,i,a){var n={ra:i,dec:a,dist:0},o=We.azEl(e,t,r,n),s=o.el+Ze.atmosphericRefraction(o.el);return{az:o.az*u,el:s*u}}static atmosphericRefraction(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))}static declination(e,t){return Math.asin(Math.sin(t)*Math.cos(We.e)+Math.cos(t)*Math.sin(We.e)*Math.sin(e))}static rightAscension(e,t){return Math.atan2(Math.sin(e)*Math.cos(We.e)-Math.tan(t)*Math.sin(We.e),Math.cos(e))}static elevation(e,t,r){return Math.asin(Math.sin(t)*Math.sin(r)+Math.cos(t)*Math.cos(r)*Math.cos(e))}static azimuth(e,t,r){return Math.PI+Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(t)-Math.tan(r)*Math.cos(t))}}function Xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class We{constructor(){}static azEl(e,t,r,i){var a,n=-r*c,o=t*c,s=We.date2jSince2000(e);null!==(a=i)&&void 0!==a||(i=We.raDec(e));var h=We.siderealTime(s,n)-i.ra;return{az:Ze.azimuth(h,o,i.dec),el:Ze.elevation(h,o,i.dec)}}static date2jSince2000(e){return e.getTime()/p+We.J1970_-We.J2000_}static diameter(e,t){return T(2*this.radius,e.subtract(t).magnitude(),r.Sphere)}static eclipseAngles(e,t){var r=t.subtract(e),i=e.magnitude();return[r.angle(e.negate()),Math.asin(Pe.radiusEquator/i),Math.asin(this.radius/r.magnitude())]}static eclipticLatitude(e){var t=l/360,r=e-.00569-.00478*Math.sin(t*e);return l*(r+3e-4*Math.sin(2*t*r))}static eclipticLongitude(e){return e+c*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*c+Math.PI}static getSetJulian(e,t,r,i,a,n,o){var s=We.hourAngle(e,r,i),h=We.approxTransit_(s,t,a);return We.solarTransitJulian(h,n,o)}static getSunTimeByAz(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(isNaN(i))throw new Error("azimuth missing");if(isNaN(t))throw new Error("latitude missing");if(isNaN(r))throw new Error("longitude missing");a&&(i*=c);var n=e instanceof Date?e:new Date(e),o=c*-r,s=c*t,h=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0).getTime(),l=p;for(h+=l;l>200;){var u=new Date(h),d=We.date2jSince2000(u),m=We.raDec(u),f=We.siderealTime(d,o)-m.ra;l/=2,Ze.azimuth(f,s,m.dec)<i?h+=l:h-=l}return new Date(Math.floor(h))}static getTimes(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(isNaN(t))throw new Error("latitude missing");if(isNaN(r))throw new Error("longitude missing");var n=e instanceof Date?e:new Date(e);a?n.setUTCHours(12,0,0,0):n.setHours(12,0,0,0);for(var o=[],s=0,h=0,l=0,{Jnoon:u,dh:d,lw:m,phi:p,dec:f,n:v,M:g,L:M}=We.calculateJnoon_(r,t,i,n),y={solarNoon:We.julian2date(u),nadir:We.julian2date(u+.5)},w=0,b=We.times_.length;w<b;w+=1)s=((o=We.times_[w])[0]+d)*c,l=u-((h=We.getSetJ_(s,m,p,f,v,g,M))-u),y[o[1]]=We.julian2date(l),y[o[2]]=We.julian2date(h);return y}static hourAngle(e,t,r){return Math.acos((Math.sin(e)-Math.sin(t)*Math.sin(r))/(Math.cos(t)*Math.cos(r)))}static julian2date(e){return new Date((e-We.J1970_)*p)}static julianCycle(e,t){var r=-t*c,i=We.date2jSince2000(e);return Math.round(i-We.J0_-r/(2*l/2))}static lightingRatio(e,t){var[r,i,a]=We.eclipseAngles(e,t);if(r-i+a<=1e-10)return 0;if(r-i-a<-1e-10){var n=r*r,o=1/(2*r),s=i*i,h=a*a,l=s-h,c=(n-l)*o,u=(n+l)*o,d=c/a,m=h-c*c,p=u/i,f=s-u*u;return 1-(h*Math.acos(d)-c*Math.sqrt(m)+(s*Math.acos(p)-u*Math.sqrt(f)))/(Math.PI*h)}return 1}static sunlightLegacy(e,t){var r=1,i=Math.asin(Pe.radiusMean/Math.sqrt((-e.x)**2+(-e.y)**2+(-e.z)**2))*u,a=Math.asin(We.radius/Math.sqrt((-e.x+t.x)**2+(-e.y+t.y)**2+(-e.z+t.z)**2))*u,n=Math.acos(e.negate().dot(t.negate())/(Math.sqrt((-e.x)**2+(-e.y)**2+(-e.z)**2)*Math.sqrt((-e.x+t.x)**2+(-e.y+t.y)**2+(-e.z+t.z)**2)))*u;return i>a&&n<i-a&&(r=0),Math.abs(i-a)<n&&n<i+a&&(r=.5),a>i&&(r=.5),n<a-i&&(r=.5),r}static position(e){var t=e.toJulianCenturies(),r=c,i=357.5291092+35999.05034*t,a=280.46+36000.77*t+1.914666471*Math.sin(i*r)+.019994643*Math.sin(2*i*r),n=23.439291-.0130042*t,o=1.000140612-.016708617*Math.cos(i*r)-139589e-9*Math.cos(2*i*r),s=new _e(o*Math.cos(a*r),o*Math.cos(n*r)*Math.sin(a*r),o*Math.sin(n*r)*Math.sin(a*r)).scale(149597870),h=Pe.precession(e);return s.rotZ(h.zed).rotY(-h.theta).rotZ(h.zeta)}static positionApparent(e){var t=We.position(e).magnitude()/299792.458;return We.position(e.roll(-t))}static raDec(e){var t=We.date2jSince2000(e),r=We.solarMeanAnomaly_(t),i=We.eclipticLongitude(r);return{dec:Ze.declination(i,0),ra:Ze.rightAscension(i,0),dist:0}}static shadow(e,t){var r=We.positionApparent(e),i=!1;if(r.dot(t)<0){var a=r.angle(t),n=t.magnitude(),o=n*Math.cos(a);n*Math.sin(a)<=Pe.radiusEquator+Math.tan(this.penumbraAngle)*o&&(i=!0)}return i}static siderealTime(e,t){return c*(280.16+360.9856235*e)-t}static solarTransitJulian(e,t,r){return We.J2000_+e+.0053*Math.sin(t)-.0069*Math.sin(2*r)}static approxTransit_(e,t,r){return We.J0_+(e+t)/l+r}static calculateJnoon_(e,t,r,i){var a=c*-e,n=c*t,o=We.observerAngle_(r),s=We.date2jSince2000(i),h=We.julianCycle_(s,a),l=We.approxTransit_(0,a,h),u=We.solarMeanAnomaly_(l),d=We.eclipticLongitude(u),m=Ze.declination(d,0);return{Jnoon:We.solarTransitJulian(l,u,d),dh:o,lw:a,phi:n,dec:m,n:h,M:u,L:d}}static getSetJ_(e,t,r,i,a,n,o){var s=We.hourAngle(e,r,i),h=We.approxTransit_(s,t,a);return We.solarTransitJulian(h,n,o)}static julianCycle_(e,t){var r=t/l;return Math.round(e-We.J0_-r)}static observerAngle_(e){return-2.076*Math.sqrt(e)/60}static solarMeanAnomaly_(e){return c*(357.5291+.98560028*e)}}function Ke(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ce=We,Xe(We,"J0_",9e-4),Xe(We,"J1970_",2440587.5),Xe(We,"J2000_",2451545),Xe(We,"e",23.4397*c),Xe(We,"times_",[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]]),Xe(We,"mu",132712428e3),Xe(We,"penumbraAngle",.26900424*c),Xe(We,"radius",695500),Xe(We,"solarFlux",1367),Xe(We,"solarPressure",ce.solarFlux/299792458),Xe(We,"umbraAngle",.26411888*c);class Qe{constructor(){}static eci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te.fromDateTime(new Date),t=e.toJulianCenturies(),r=c,i=218.32+481267.8813*t+6.29*Math.sin((134.9+477198.85*t)*r)-1.27*Math.sin((259.2-413335.38*t)*r)+.66*Math.sin((235.7+890534.23*t)*r)+.21*Math.sin((269.9+954397.7*t)*r)-.19*Math.sin((357.5+35999.05*t)*r)-.11*Math.sin((186.6+966404.05*t)*r),a=5.13*Math.sin((93.3+483202.03*t)*r)+.28*Math.sin((228.2+960400.87*t)*r)-.28*Math.sin((318.3+6003.18*t)*r)-.17*Math.sin((217.6-407332.2*t)*r),n=.9508+.0518*Math.cos((134.9+477198.85*t)*r)+.0095*Math.cos((259.2-413335.38*t)*r)+.0078*Math.cos((235.7+890534.23*t)*r)+.0028*Math.cos((269.9+954397.7*t)*r),o=23.439291-.0130042*t,s=1/Math.sin(n*r),h=new _e(s*Math.cos(a*r)*Math.cos(i*r),s*(Math.cos(o*r)*Math.cos(a*r)*Math.sin(i*r)-Math.sin(o*r)*Math.sin(a*r)),s*(Math.sin(o*r)*Math.cos(a*r)*Math.sin(i*r)+Math.cos(o*r)*Math.sin(a*r))).scale(Pe.radiusEquator),l=Pe.precession(e);return h.rotZ(l.zed).rotY(-l.theta).rotZ(l.zeta)}static illumination(e,t){var r=null!=t?t:_e.origin,i=We.position(e).subtract(r),a=this.eci(e).subtract(r),n=i.angle(a);return.5*(1-Math.cos(n))}static diameter(e,t){return T(2*this.radiusEquator,e.subtract(t).magnitude(),r.Sphere)}static getMoonIllumination(e){var t=e instanceof Date?e.getTime():e,r=2551442778,i=new Date(t),a=We.date2jSince2000(i),n=We.raDec(i),o=Qe.moonCoords(a),s=149598e3,h=Math.acos(Math.sin(n.dec)*Math.sin(o.dec)+Math.cos(n.dec)*Math.cos(o.dec)*Math.cos(n.ra-o.ra)),l=Math.atan2(s*Math.sin(h),o.dist-s*Math.cos(h)),c=Math.atan2(Math.cos(n.dec)*Math.sin(n.ra-o.ra),Math.sin(n.dec)*Math.cos(o.dec)-Math.cos(n.dec)*Math.sin(o.dec)*Math.cos(n.ra-o.ra)),u=.5+.5*l*(c<0?-1:1)/Math.PI,d=(t-94717884e4)%r;d<0&&(d+=r);var m=r-d+t,p=1275721389-d+t;p<t&&(p+=r);var f=637860694.5-d+t;f<t&&(f+=r);var v=1913582083.5-d+t;v<t&&(v+=r);var g=Math.min(m,f,p,v),M=null;for(var y of Qe.moonCycles_)if(u>=y.from&&u<=y.to){M=y;break}if(!M)throw new Error("Moon phase not found");var w;return w=g===m?"newMoon":g===f?"firstQuarter":g===p?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(l))/2,phase:M,phaseValue:u,angle:c,next:{value:g,date:new Date(g).toISOString(),type:w,newMoon:{value:m,date:new Date(m).toISOString()},fullMoon:{value:p,date:new Date(p).toISOString()},firstQuarter:{value:f,date:new Date(f).toISOString()},thirdQuarter:{value:v,date:new Date(v).toISOString()}}}}static rae(e,t,r){var i=c*-r,a=c*t,n=We.date2jSince2000(e),o=Qe.moonCoords(n),s=We.siderealTime(n,i)-o.ra,h=Ze.elevation(s,a,o.dec),l=Math.atan2(Math.sin(s),Math.tan(a)*Math.cos(o.dec)-Math.sin(o.dec)*Math.cos(s));return h+=Ze.atmosphericRefraction(h),{az:Ze.azimuth(s,a,o.dec),el:h,rng:o.dist,parallacticAngle:l}}static getMoonTimes(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Date(e);i?a.setUTCHours(0,0,0,0):a.setHours(0,0,0,0);var{rise:n,set:o,ye:s}=Qe.calculateRiseSetTimes_(a,t,r),h={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return n&&(h.rise=new Date(Qe.hoursLater_(a,n))),o&&(h.set=new Date(Qe.hoursLater_(a,o))),n||o?n&&o?(h.alwaysUp=!1,h.alwaysDown=!1,h.highest=new Date(Qe.hoursLater_(a,Math.min(n,o)+Math.abs(o-n)/2))):(h.alwaysUp=!1,h.alwaysDown=!1):s>0?(h.alwaysUp=!0,h.alwaysDown=!1):(h.alwaysUp=!1,h.alwaysDown=!0),h}static hoursLater_(e,t){return new Date(e.getTime()+t*p/24)}static moonCoords(e){var t=c*(134.963+13.064993*e),r=c*(93.272+13.22935*e),i=c*(218.316+13.176396*e)+6.289*c*Math.sin(t),a=5.128*c*Math.sin(r),n=385001-20905*Math.cos(t);return{ra:Ze.rightAscension(i,a),dec:Ze.declination(i,a),dist:n}}static calculateRiseSetTimes_(e,t,r){for(var i=.133*c,a=Qe.rae(e,t,r).el-i,n=0,o=0,s=0,h=0,l=0,u=0,d=0,m=0,p=0,f=0,v=0,g=0,M=0,y=1;y<=24&&(n=Qe.rae(Qe.hoursLater_(e,y),t,r).el-i,m=((l=(a+(o=Qe.rae(Qe.hoursLater_(e,y+1),t,r).el-i))/2-n)*(d=-(u=(o-a)/2)/(2*l))+u)*d+n,f=0,(p=u*u-4*l*n)>=0&&(v=d-(M=Math.sqrt(p)/(2*Math.abs(l))),g=d+M,Math.abs(v)<=1&&f++,Math.abs(g)<=1&&f++,v<-1&&(v=g)),1===f?a<0?s=y+v:h=y+v:2===f&&(s=y+(m<0?g:v),h=y+(m<0?v:g)),!s||!h);y+=2)a=o;return{rise:s,set:h,ye:m}}}function $e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ke(Qe,"mu",4902.799),Ke(Qe,"radiusEquator",1738),Ke(Qe,"moonCycles_",[{from:0,to:.033863193308711,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}]),(fe=ue||(ue={})).USSF="USSF",fe.CELESTRAK="Celestrak",fe.UNIV_OF_MICH="University of Michigan",fe.VIMPEL="JSC Vimpel",fe.TLE_TXT="TLE.txt",fe.EXTRA_JSON="extra.json",function(e){e.AEHF="AEHF",e.GALILEO="Galileo",e.IRIDIUM="Iridium",e.STARLINK="Starlink",e.WGS="WGS"}(de||(de={})),function(e){e[e.LEO=.45]="LEO",e[e.GEO=.82]="GEO",e[e.MAX=1]="MAX"}(me||(me={}));class et{constructor(e,t,r,i){$e(this,"x",void 0),$e(this,"y",void 0),$e(this,"z",void 0),$e(this,"w",void 0),this.x=e,this.y=t,this.z=r,this.w=i}toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=this.x.toFixed(e),r=this.y.toFixed(e),i=this.z.toFixed(e),a=this.w.toFixed(e);return"Q(x: ".concat(t,", y: ").concat(r,", z: ").concat(i,", w: ").concat(a,")")}positivePolar(){return this.w>=0?this.normalize():this.negate().normalize()}magnitudeSquared(){return this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z}magnitude(){return Math.sqrt(this.magnitudeSquared())}scale(e){return new et(e*this.x,e*this.y,e*this.z,e*this.w)}negate(){return this.scale(-1)}normalize(){var e=this.magnitude();return 0===e?et.zero:this.scale(1/e)}conjugate(){return new et(-this.x,-this.y,-this.z,this.w)}inverse(){return this.conjugate().scale(1/this.magnitudeSquared())}add(e){return new et(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}subtract(e){return new et(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}addReal(e){return new et(this.x,this.y,this.z,this.w+e)}multiply(e){var t=this.w*e.x+this.x*e.w+this.y*e.z-this.z*e.y,r=this.w*e.y-this.x*e.z+this.y*e.w+this.z*e.x,i=this.w*e.z+this.x*e.y-this.y*e.x+this.z*e.w,a=this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z;return new et(t,r,i,a)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}rotateVector(e){var t=this.multiply(new et(e.x,e.y,e.z,0)).multiply(this.conjugate());return new we([t.x,t.y,t.z])}rotateVector3D(e){var t=this.multiply(new et(e.x,e.y,e.z,0)).multiply(this.conjugate());return new _e(t.x,t.y,t.z)}lerp(e,t){var r=1-t;return new et(r*this.x+t*e.x,r*this.y+t*e.y,r*this.z+t*e.z,r*this.w+t*e.w).positivePolar()}slerp(e,t){var r=e,i=this.dot(r);if(i<0&&(i=-i,r=r.negate()),i>.9995)return this.lerp(r,t);var a=Math.acos(i),n=Math.sin(a),o=Math.sin((1-t)*a)/n,s=Math.sin(t*a)/n;return new et(o*this.x+s*r.x,o*this.y+s*r.y,o*this.z+s*r.z,o*this.w+s*r.w).positivePolar()}toVector3D(){return new _e(this.x,this.y,this.z)}angle(e){var t=this.multiply(e.conjugate()).normalize();return 2*Math.atan2(t.toVector3D().magnitude(),t.w)}geodesicAngle(e){var t,r=this.dot(e);return(t=(Math.acos(2*r*r-1)+Math.PI)%(2*Math.PI)-Math.PI)==-Math.PI?Math.PI:t}distance(e){var t=this.subtract(e).magnitude(),r=this.add(e).magnitude();return t<r?t:r}delta(e){return this.inverse().multiply(e)}toDirectionCosineMatrix(){var e=this.w*this.w,t=this.x*this.x,r=this.y*this.y,i=this.z*this.z,a=[[e+t-r-i,2*(this.x*this.y+this.z*this.w),2*(this.x*this.z-this.y*this.w)],[2*(this.x*this.y-this.z*this.w),e-t+r-i,2*(this.y*this.z+this.x*this.w)],[2*(this.x*this.z+this.y*this.w),2*(this.y*this.z-this.x*this.w),e-t-r+i]];return new Me(a)}toRotationMatrix(){return this.toDirectionCosineMatrix().transpose()}vectorAngle(e,t,r){var i=t.subtract(e),a=this.toDirectionCosineMatrix().multiplyVector3D(i);return r.angle(a)}kinematics(e){var t=new we([0,e.x,e.y,e.z]),r=new Me([[this.x,this.w,-this.z,this.y],[this.y,this.z,this.w,-this.x],[this.z,-this.y,this.x,this.w],[this.w,-this.x,-this.y,-this.z]]).multiplyVector(t).scale(.5).elements;return new et(r[0],r[1],r[2],r[3])}}function tt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$e(et,"zero",new(pe=et)(0,0,0,0)),$e(et,"one",new pe(0,0,0,1)),$e(et,"xAxis",new pe(1,0,0,0)),$e(et,"yAxis",new pe(0,1,0,0)),$e(et,"zAxis",new pe(0,0,1,0));class rt{constructor(e,t,r,i){tt(this,"mass",void 0),tt(this,"area",void 0),tt(this,"dragCoeff",void 0),tt(this,"cosine",void 0),this.mass=e,this.area=t,this.dragCoeff=r,this.cosine=i}static _getHPDensity(e,t){var r=Z.getInstance().getHpAtmosphere(e.height);if(null===r)return 0;var i=We.positionApparent(e.epoch),a=.5*(1+new Ne(e.epoch,i,_e.origin).toITRF().position.normalize().rotZ(-30*c).normalize().dot(e.position.normalize())),n=Math.sqrt(a),o=n>1e-12?a*n**(t-2):0,s=r.height,[h,l,u]=r.hp0,[d,m,p]=r.hp1,f=(h-s)/(h-d),v=l*(m/l)**f;return 0===o?v:v+(u*(p/u)**f-v)*o}acceleration(e){var t=e.toITRF(),r=rt._getHPDensity(t,this.cosine);if(0===r)return _e.origin;var i=new Oe(e.epoch,Pe.rotation,_e.origin).toJ2000().position,a=e.velocity.subtract(i.cross(e.position)).scale(1e3),n=a.magnitude(),o=-.5*r*(this.dragCoeff*this.area/this.mass)*n;return a.scale(o/1e3)}}function it(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class at{constructor(e,t){it(this,"degree",void 0),it(this,"order",void 0),it(this,"_asphericalFlag",void 0),this.degree=Math.min(Math.max(e,0),36),this.order=Math.min(Math.max(t,0),36),this._asphericalFlag=e>=2}_spherical(e){var t=e.position.magnitude();return e.position.scale(-Pe.mu/(t*t*t))}_aspherical(e){var t=e.toITRF().position,r=1/t.magnitude(),i=t.x*r,a=t.y*r,n=t.z*r,o=n,s=Pe.radiusEquator*r,h=s,l=Pe.mu*r*r,c=0,u=0,d=0,m=0,p=new Float64Array(this.order+4),f=new Float64Array(this.order+4),v=new Float64Array(this.order+4),g=new Float64Array(this.order+4),M=new Float64Array(this.order+4);M[0]=1,g[0]=o,g[1]=1,p[0]=1,p[1]=i,f[1]=a;for(var y=Z.getInstance(),w=2,b=1,_=3;w<=this.degree;b++,w++,_++){var x=2*w-1;h*=s;var A=y.getEgm96Coeffs(w,0)[2];v[0]=(x*o*g[0]-b*M[0])/w,v[1]=M[1]+x*g[0],v[2]=M[2]+x*g[1];var S=v[1]*A,E=v[0]*A*_;if(this.order>0){var T=0,P=0;p[w]=p[1]*p[b]-f[1]*f[b],f[w]=f[1]*p[b]+p[1]*f[b];for(var I=w<this.order?w:this.order,D=1,j=0,z=2,O=3;D<=I;j++,D++,z++,O++){v[z]=M[z]+x*g[D];var C=D,N=w+z,R=v[D],L=v[z],F=y.getEgm96Coeffs(w,D),U=F[2],q=F[3],k=C*R,J=U*p[D]+q*f[D];S+=L*J,E+=N*(R*J),T+=k*(U*p[j]+q*f[j]),P-=k*(U*f[j]-q*p[j])}d+=h*T,m+=h*P}if(c+=h*S,u+=h*E,w<this.degree)for(var Y=0;Y<=w;Y++)M[Y]=g[Y],g[Y]=v[Y]}var G=u+o*c,H=new _e(-l*(G*i-d),-l*(G*a-m),-l*(G*n-c));return new Oe(e.epoch,H,_e.origin).toJ2000().position}acceleration(e){var t=this._spherical(e);return this._asphericalFlag&&(t=t.add(this._aspherical(e))),t}}class nt{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe.mu;(function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"mu",void 0),this.mu=e}_spherical(e){var t=e.position.magnitude();return e.position.scale(-this.mu/(t*t*t))}acceleration(e){return this._spherical(e)}}class ot{acceleration(e){throw Error("Not implemented")}}function st(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ht extends ot{constructor(e,t,r){super(),st(this,"mass",void 0),st(this,"area",void 0),st(this,"reflectCoeff",void 0),this.mass=e,this.area=t,this.reflectCoeff=r}acceleration(e){var t=We.positionApparent(e.epoch),r=e.position.subtract(t),i=r.magnitude(),a=i*i,n=We.lightingRatio(e.position,t)*ht._kRef/a;return r.scale(n/i).scale(this.area*this.reflectCoeff/this.mass*.001)}}function lt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}st(ht,"_kRef",102050623550.92827);class ct{constructor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];lt(this,"moon",void 0),lt(this,"sun",void 0),this.moon=e,this.sun=t}static _moonGravity(e){var t=Qe.eci(e.epoch),r=t.subtract(e.position),i=r.magnitude()**3,a=t,n=t.magnitude()**3;return r.scale(1/i).add(a.scale(-1/n)).scale(Qe.mu)}static _sunGravity(e){var t=We.positionApparent(e.epoch),r=t.subtract(e.position),i=r.magnitude()**3,a=t,n=t.magnitude()**3;return r.scale(1/i).add(a.scale(-1/n)).scale(We.mu)}acceleration(e){var t=_e.origin;return this.moon&&(t=t.add(ct._moonGravity(e))),this.sun&&(t=t.add(ct._sunGravity(e))),t}}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class dt{constructor(){ut(this,"_centralGravity",void 0),ut(this,"_thirdBodyGravity",void 0),ut(this,"_solarRadiationPressure",void 0),ut(this,"_atmosphericDrag",void 0),ut(this,"_maneuverThrust",null)}setGravity(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe.mu;return this._centralGravity=new nt(e),this}setEarthGravity(e,t){this._centralGravity=new at(e,t)}setThirdBodyGravity(e){var{moon:t=!1,sun:r=!1}=e;this._thirdBodyGravity=new ct(t,r)}setSolarRadiationPressure(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.2;this._solarRadiationPressure=new ht(e,t,r)}setAtmosphericDrag(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;this._atmosphericDrag=new rt(e,t,r,i)}loadManeuver(e){this._maneuverThrust=e}clearManeuver(){this._maneuverThrust=null}acceleration(e){var t=_e.origin;return this._centralGravity&&(t=t.add(this._centralGravity.acceleration(e))),this._thirdBodyGravity&&(t=t.add(this._thirdBodyGravity.acceleration(e))),this._solarRadiationPressure&&(t=t.add(this._solarRadiationPressure.acceleration(e))),this._atmosphericDrag&&(t=t.add(this._atmosphericDrag.acceleration(e))),this._maneuverThrust&&(t=t.add(this._maneuverThrust.acceleration(e))),t}derivative(e){return e.velocity.join(this.acceleration(e))}}function mt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class pt{constructor(e,t,r,i,a,n){mt(this,"t0",void 0),mt(this,"p0",void 0),mt(this,"m0",void 0),mt(this,"t1",void 0),mt(this,"p1",void 0),mt(this,"m1",void 0),this.t0=e,this.p0=t,this.m0=r,this.t1=i,this.p1=a,this.m1=n}position_(e){var t=e*e,r=t*e,i=this.p0.scale(2*r-3*t+1),a=this.m0.scale((r-2*t+e)*(this.t1-this.t0)),n=this.p1.scale(-2*r+3*t),o=this.m1.scale((r-t)*(this.t1-this.t0));return i.add(a).add(n).add(o)}velocity_(e){var t=e*e,r=this.p0.scale(6*t-6*e),i=this.m0.scale((3*t-4*e+1)*(this.t1-this.t0)),a=this.p1.scale(-6*t+6*e),n=this.m1.scale((3*t-2*e)*(this.t1-this.t0));return r.add(i).add(a).add(n).scale(1/(this.t1-this.t0))}interpolate(e){var t=(e-this.t0)/(this.t1-this.t0);return[this.position_(t),this.velocity_(t)]}}class ft{inWindow(e){var t=this.window().start,r=this.window().end;return t<=e&&e<=r}overlap(e){var t=this.window().start,r=this.window().end,i=e.window().start,a=e.window().end;if(t<=a&&i<=r){var n=new te(Math.max(t.posix,i.posix)),o=new te(Math.min(r.posix,a.posix));return new ie(n,o)}return null}}class vt extends ft{interpolate(e){throw new Error("Not implemented.")}get sizeBytes(){throw new Error("Not implemented.")}}class gt extends vt{constructor(e){super(),function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_splines",void 0),this._splines=e}static fromEphemeris(e){for(var t=[],r=0;r<e.length-1;r++){var i=e[r],a=i.epoch.posix,n=i.position,o=i.velocity,s=e[r+1],h=s.epoch.posix,l=s.position,c=s.velocity;t.push(new pt(a,n,o,h,l,c))}return new gt(t)}get sizeBytes(){return 896*this._splines.length/8}matchSpline_(e){for(var t=0,r=this._splines.length;t<r;){var i=t+r>>1;this._splines[i].t1<e?t=i+1:r=i}return this._splines[t]}interpolate(e){if(!this.inWindow(e))return null;var t=e.posix,r=this.matchSpline_(t).interpolate(t);return new Ne(e,r[0],r[1])}window(){return new ie(new te(this._splines[0].t0),new te(this._splines[this._splines.length-1].t1))}}function Mt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yt extends vt{constructor(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;super(),Mt(this,"t_",void 0),Mt(this,"x_",void 0),Mt(this,"y_",void 0),Mt(this,"z_",void 0),Mt(this,"order",void 0),this.t_=e,this.x_=t,this.y_=r,this.z_=i,this.order=a}static fromEphemeris(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=e.length,i=new Float64Array(r),a=new Float64Array(r),n=new Float64Array(r),o=new Float64Array(r),s=0;s<r;s++){var h=e[s];i[s]=h.epoch.posix,a[s]=h.position.x,n[s]=h.position.y,o[s]=h.position.z}return new yt(i,a,n,o,t)}get sizeBytes(){return 256*this.t_.length/8}interpolate(e){if(!this.inWindow(e))return null;var t=e.posix,r=this.slice_(t),i=r.left,a=r.right,n=this.t_.subarray(i,a),o=this.x_.subarray(i,a),s=this.y_.subarray(i,a),h=this.z_.subarray(i,a),l=new _e(yt.position_(n,o,t),yt.position_(n,s,t),yt.position_(n,h,t)),c=new _e(yt.velocity_(n,o,t),yt.velocity_(n,s,t),yt.velocity_(n,h,t));return new Ne(e,l,c)}static position_(e,t,r){for(var i=e.length-1,a=0,n=0;n<i;n++){for(var o=t[n],s=0;s<i;s++)n!==s&&(o*=(r-e[s])/(e[n]-e[s]));a+=o}return a}static velocity_(e,t,r){for(var i=e.length,a=0,n=0;n<i;n++){for(var o=0,s=0;s<i;s++)if(s!==n){for(var h=1/(e[n]-e[s]),l=0;l<i;l++)l!==s&&l!==n&&(h*=(r-e[l])/(e[n]-e[l]));o+=h}a+=t[n]*o}return a}static _getClosest(e,t,r,i,a){return e-t>=i-e?a:r}slice_(e){var t=this.t_.length;if(e<=this.t_[0])return{left:0,right:this.order};if(e>=this.t_[t-1])return{left:t-this.order,right:t};for(var r=0,i=this.t_.length,a=0;r<i&&(a=r+i>>1,this.t_[a]!==e);)if(e<this.t_[a]){if(a>0&&e>this.t_[a-1]){a=yt._getClosest(e,this.t_[a-1],a-1,this.t_[a],a);break}i=a}else{if(a<this.t_.length-1&&e<this.t_[a+1]){a=yt._getClosest(e,this.t_[a],a,this.t_[a+1],a+1);break}r=a+1}var n=Math.floor(this.order/2),o=a-n,s=a+n-(this.order%2==1?1:0);return o<0?{left:0,right:this.order}:s>t?{left:t-this.order,right:t}:{left:o,right:s}}window(){return new ie(new te(this.t_[0]),new te(this.t_[this.t_.length-1]))}}class wt extends vt{constructor(e){super(),function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"ephemeris",void 0),this.ephemeris=e}get sizeBytes(){return 448*this.ephemeris.length/8}window(){return new ie(this.ephemeris[0].epoch,this.ephemeris[this.ephemeris.length-1].epoch)}static getClosest_(e,t,r){return e-t.epoch.posix>=r.epoch.posix-e?r:t}matchState_(e){var t=e.posix;if(t<=this.ephemeris[0].epoch.posix)return this.ephemeris[0];if(t>=this.ephemeris[this.ephemeris.length-1].epoch.posix)return this.ephemeris[this.ephemeris.length-1];for(var r=0,i=this.ephemeris.length,a=0;r<i;){if(a=r+i>>1,this.ephemeris[a].epoch.posix===t)return this.ephemeris[a];if(t<this.ephemeris[a].epoch.posix){if(a>0&&t>this.ephemeris[a-1].epoch.posix)return wt.getClosest_(t,this.ephemeris[a-1],this.ephemeris[a]);i=a}else{if(a<this.ephemeris.length-1&&t<this.ephemeris[a+1].epoch.posix)return wt.getClosest_(t,this.ephemeris[a],this.ephemeris[a+1]);r=a+1}}return this.ephemeris[a]}static _gravity(e){var t=e.magnitude();return e.scale(-Pe.mu/(t*t*t))}static integrate_(e,t){var r=e.position,i=wt._gravity(r),a=e.velocity,n=r.add(a.scale(t)).add(i.scale(.5*t*t)),o=wt._gravity(n),s=a.add(i.add(o).scale(.5*t));return new Ne(e.epoch.roll(t),n,s)}interpolate(e){if(!this.inWindow(e))return null;for(var t,r,i=this.matchState_(e);i.epoch.posix!==e.posix;){var a=e.posix-i.epoch.posix,n=(t=Math.min(5,Math.abs(a)),r=a,Math.abs(t)*Math.sign(r));i=wt.integrate_(i,n)}return i}getCachedState(e){return this.inWindow(e)?this.matchState_(e):null}toCubicSpline(){return gt.fromEphemeris(this.ephemeris)}toLagrange(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return yt.fromEphemeris(this.ephemeris,e)}}class bt{static _check(e,t,r){return r?e>t:e<t}static search(e,t,r,i){for(var{tolerance:a=1e-5,solveMax:n=!1}=i,o=t,s=r,h=s-(s-o)*bt._grInv,l=o+(s-o)*bt._grInv;Math.abs(s-o)>a;)bt._check(e(h),e(l),n)?s=l:o=h,h=s-(s-o)*bt._grInv,l=o+(s-o)*bt._grInv;return.5*(s+o)}}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(bt,"_grInv",1/(.5*(Math.sqrt(5)+1)));class _t{ephemeris(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,i=[this.propagate(e)],a=e;a<=t;)a=a.roll(r),i.push(this.propagate(a));return new wt(i)}maneuver(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=[],i=e.start,a=e.stop;r.push(this.propagate(i));for(var n=i;n<=a;)n=n.roll(t),r.push(this.propagate(n));return r}ephemerisManeuver(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,a=[],n=e;a.push(this.propagate(n));for(var o=t,s=n;s<=o;)s=s.roll(i),a.push(this.propagate(s));return new wt(a)}ascendingNodeEpoch(e){var t=this.state.period/60,r=t/8,i=e,a=i.roll(t);this.propagate(i);for(var n=this.state.position.z;i<=a&&(i=i.roll(r),this.propagate(i),!(Math.sign(this.state.position.z)===Math.sign(-n)&&this.state.velocity.z>0));)n=this.state.position.z;var o=bt.search((e=>(this.propagate(new te(e)),Math.abs(this.state.position.z))),i.posix-r,i.posix,{tolerance:.001});return new te(o)}descendingNodeEpoch(e){var t=this.state.period/60,r=t/8,i=e,a=i.roll(t);this.propagate(i);for(var n=this.state.position.z;i<=a&&(i=i.roll(r),this.propagate(i),!(Math.sign(this.state.position.z)===Math.sign(-n)&&this.state.velocity.z<0));)n=this.state.position.z;var o=bt.search((e=>(this.propagate(new te(e)),Math.abs(this.state.position.z))),i.posix-r,i.posix,{tolerance:.001});return new te(o)}apogeeEpoch(e){var t=this.state.period/60/8,r=e;this.propagate(r);for(var i=r,a=this.state.position.magnitude(),n=0;n<8;n++){r=r.roll(t);var o=new te(bt.search((e=>(this.propagate(new te(e)),this.state.position.magnitude())),r.posix-t,r.posix,{tolerance:.001,solveMax:!0}));this.propagate(o);var s=this.state.position.magnitude();s>a&&(i=o,a=s)}return i}perigeeEpoch(e){var t=this.state.period/60/8,r=e;this.propagate(r);for(var i=r,a=this.state.position.magnitude(),n=0;n<8;n++){r=r.roll(t);var o=new te(bt.search((e=>(this.propagate(new te(e)),this.state.position.magnitude())),r.posix-t,r.posix,{tolerance:.001,solveMax:!1}));this.propagate(o);var s=this.state.position.magnitude();s<a&&(i=o,a=s)}return i}}function xt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class At{constructor(e,t){xt(this,"cacheState",void 0),xt(this,"stepSize",void 0),this.cacheState=e,this.stepSize=t}}function St(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Et{constructor(e,t,r){St(this,"state",void 0),St(this,"error",void 0),St(this,"newStep",void 0),this.state=e,this.error=t,this.newStep=r}}function Tt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Pt extends _t{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new dt).setGravity(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-9;super(),Tt(this,"initState_",void 0),Tt(this,"forceModel_",void 0),Tt(this,"tolerance_",void 0),Tt(this,"_cacheState",void 0),Tt(this,"_checkpoints",[]),Tt(this,"_stepSize",60),this.initState_=e,this.forceModel_=t,this.tolerance_=r,this._cacheState=this.initState_,this.tolerance_=Math.max(Pt._minTolerance,Math.abs(r))}get state(){return this._cacheState}reset(){this._cacheState=this.initState_,this._stepSize=60}setForceModel(e){this.forceModel_=e}kfn_(e,t,r,i,a){var n=e.roll(r*a),o=t.add(i),s=new Ne(n,o.toVector3D(0),o.toVector3D(3));return this.forceModel_.derivative(s).scale(a)}integrate_(e,t){for(var r=new Array(this.a.length).fill(we.origin3),i=e.position.join(e.velocity),a=0;a<this.a.length;a++){var n=we.origin6;if(0!==a)for(var o=0;o<a;o++)n=n.add(r[o].scale(this.b[a][o]));r[a]=this.kfn_(e.epoch,i,this.a[a],n,t)}for(var s=i,h=i,l=0;l<r.length;l++)s=s.add(r[l].scale(this.ch[l])),h=h.add(r[l].scale(this.c[l]));var c=s.distance(h),u=.9*t*(this.tolerance_/c)**(1/this.order),d=Math.abs(t);return u=Math.max(.2*d,Math.min(5*d,u)),u=Math.max(1e-5,Math.min(1e3,u)),new Et(new Ne(e.epoch.roll(t),s.toVector3D(0),s.toVector3D(3)),c,u)}propagate(e){for(var t=e.difference(this._cacheState.epoch);0!==t;){var r=t>=0?1:-1,i=Math.min(Math.abs(t),this._stepSize)*r,a=this.integrate_(this._cacheState,i);this._stepSize=a.newStep,a.error>this.tolerance_||(this._cacheState=a.state,t=e.difference(this._cacheState.epoch))}return this._cacheState}maneuver(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;if(e.isImpulsive)return this._cacheState=e.apply(this.propagate(e.center)),[this._cacheState];var r=this.propagate(e.start);this.forceModel_.loadManeuver(e);for(var i=[r];r.epoch<e.stop;){var a=Math.min(e.stop.difference(r.epoch),t);r=this.propagate(r.epoch.roll(a)),i.push(r)}return this.forceModel_.clearManeuver(),i}ephemerisManeuver(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,a=r.filter((r=>r.start>=e||r.stop<=t)),n=[];for(var o of(a[0].start>e&&n.push(this.propagate(e)),a)){for(;this._cacheState.epoch<o.start;){var s=Math.min(o.start.difference(this._cacheState.epoch),i);this.propagate(this._cacheState.epoch.roll(s)),this._cacheState.epoch.posix!==o.start.posix&&n.push(this._cacheState)}n.push(...this.maneuver(o,i))}for(;this._cacheState.epoch.posix<t.posix;){var h=Math.min(t.difference(this._cacheState.epoch),i);this.propagate(this._cacheState.epoch.roll(h)),n.push(this._cacheState)}return new wt(n)}checkpoint(){return this._checkpoints.push(new At(this._cacheState,this._stepSize)),this._checkpoints.length-1}clearCheckpoints(){this._checkpoints.length=0}restore(e){var t=this._checkpoints[e];this._cacheState=t.cacheState,this._stepSize=t.stepSize}}Tt(Pt,"_minTolerance",1e-15);const It=6371,Dt=(e,t,r,i,a,n)=>{if(e<0||t<1||r<0||i<0||a<0||n<0)throw new Error("Invalid negative value");if(t>12)throw new Error("Invalid month value");if(r>31)throw new Error("Invalid day value");if(i>23)throw new Error("Invalid hour value");if(a>59)throw new Error("Invalid minute value");if(n>60)throw new Error("Invalid second value");return 367*e-Math.trunc(7*(e+Math.trunc((t+9)/12))*.25)+Math.trunc(275*t/9)+r+1721013.5+((n/60+a)/60+i)/24},jt={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(e,t,r){if(isNaN(e)||isNaN(t))throw Error("Invalid EclCoord object: ("+e+", "+t+")");this.lat=e,this.lng=t,void 0!==r&&(this.h=r)}};jt.EclCoord.prototype={toWgs84String:function(){return jt.Math.formatNum(180*this.lat/Math.PI)+", "+jt.Math.formatNum(180*-this.lng/Math.PI)}},jt.EclCoordfromWgs84=function(e,t,r){return new jt.EclCoord(e*Math.PI/180,-t*Math.PI/180,r)},jt.EqCoord=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid EqCoord object: ("+e+", "+t+")");this.ra=e,this.dec=t},jt.EqCoord.prototype={toString:function(){return"ra:"+jt.Math.formatNum(180*this.ra/Math.PI)+", dec:"+jt.Math.formatNum(180*this.dec/Math.PI)}},jt.HzCoord=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid HzCoord object: ("+e+", "+t+")");this.az=e,this.alt=t},jt.HzCoord.prototype={toString:function(){return"azi:"+jt.Math.formatNum(180*this.az/Math.PI)+", alt:"+jt.Math.formatNum(180*this.alt/Math.PI)}},jt.Coord={dmsToDeg:function(e,t,r,i){return i=(60*(60*t+r)+i)/3600,e?-i:i},calcAngle:function(e,t,r,i){return jt.Coord.dmsToDeg(e,t,r,i)*Math.PI/180},calcRA:function(e,t,r){return jt.Coord.dmsToDeg(!1,e,t,r)%24*15*Math.PI/180},secondsToHMSStr:function(e){var t=Math.floor(e/86400);e=jt.Math.pMod(e,86400);var r=Math.floor(e/3600)%24,i=Math.floor(e/60)%60;return(0!==t?t+"d ":"")+(10>r?"0":"")+r+":"+(10>i?"0":"")+i+":"+(10>(e=Math.floor(e%60))?"0":"")+e},secondsToHMStr:function(e){var t=Math.floor(e/86400);e=jt.Math.pMod(e,86400);var r=Math.floor(e/3600)%24;return(0!==t?t+"d ":"")+(10>r?"0":"")+r+":"+(10>(e=Math.floor(e/60)%60)?"0":"")+e},eqToEcl:function(e,t){var r=Math.sin(e.ra),i=Math.sin(e.dec),a=Math.cos(e.dec),n=Math.sin(t);return t=Math.cos(t),new jt.EclCoord(Math.atan2(r*t+i/a*n,Math.cos(e.ra)),Math.asin(i*t-a*n*r))},eclToEq:function(e,t){var r=Math.sin(e.lat),i=Math.sin(e.lng),a=Math.cos(e.lng),n=Math.sin(t);t=Math.cos(t);let o=Math.atan2(r*t-i/a*n,Math.cos(e.lat));return 0>o&&(o+=2*Math.PI),new jt.EqCoord(o,Math.asin(i*t+a*n*r))},eqToHz:function(e,t,r){r=r-t.lng-e.ra;var i=Math.cos(r),a=Math.sin(t.lat);t=Math.cos(t.lat);var n=Math.sin(e.dec);return e=Math.cos(e.dec),new jt.HzCoord(Math.atan2(Math.sin(r),i*a-n/e*t),Math.asin(a*n+t*e*i))}},jt.DeltaT={jdToJde:function(e,t){return t||(t=jt.DeltaT.estimate(e)),e+t/86400},jdeToJd:function(e,t){return t||(t=jt.DeltaT.estimate(e)),e-t/86400},decimalYear:function(e){return(e=jt.JulianDay.jdToCalendar(e)).y+(e.m-.5)/12},estimate:function(e){var t=jt.DeltaT.decimalYear(e);return e=Math.pow,-500>t?32*e((t-1820)/100,2)-20:500>t?10583.6-1014.41*(t/=100)+33.78311*e(t,2)-5.952053*e(t,3)-.1798452*e(t,4)+.022174192*e(t,5)+.0090316521*e(t,6):1600>t?1574.2-556.01*(t=(t-1e3)/100)+71.23472*e(t,2)+.319781*e(t,3)-.8503463*e(t,4)-.005050998*e(t,5)+.0083572073*e(t,6):1700>t?120-.9808*(t-=1600)-.01532*e(t,2)+e(t,3)/7129:1800>t?8.83+.1603*(t-=1700)-.0059285*e(t,2)+13336e-8*e(t,3)-e(t,4)/1174e3:1860>t?13.72-.332447*(t-=1800)+.0068612*e(t,2)+.0041116*e(t,3)-37436e-8*e(t,4)+121272e-10*e(t,5)-1.699e-7*e(t,6)+8.75e-10*e(t,7):1900>t?7.62+.5737*(t-=1860)-.251754*e(t,2)+.01680668*e(t,3)-.0004473624*e(t,4)+e(t,5)/233174:1920>t?1.494119*(t-=1900)-2.79-.0598939*e(t,2)+.0061966*e(t,3)-197e-6*e(t,4):1941>t?21.2+.84493*(t-=1920)-.0761*e(t,2)+.0020936*e(t,3):1961>t?29.07+.407*(t-=1950)-e(t,2)/233+e(t,3)/2547:1986>t?45.45+1.067*(t-=1975)-e(t,2)/260-e(t,3)/718:2005>t?63.86+.3345*(t-=2e3)-.060374*e(t,2)+.0017275*e(t,3)+651814e-9*e(t,4)+2373599e-11*e(t,5):2050>t?62.92+.32217*(t-=2e3)+.005589*e(t,2):2150>t?32*e((t-1820)/100,2)-20-.5628*(2150-t):32*e((t-1820)/100,2)-20}},jt.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(e,t){t||(t=0);var r=1-jt.Globe.Fl;return t=.001*t/jt.Globe.Er,{rhoslat:Math.sin(Math.atan(r*Math.tan(e)))*r+t*Math.sin(e),rhoclat:Math.cos(Math.atan(r*Math.tan(e)))+t*Math.cos(e)}}},jt.Interp={newLen3:function(e,t,r){if(3!=r.length)throw"Error not 3";if(t==e)throw"Error no x range";var i=r[1]-r[0],a=r[2]-r[1];return{x1:e,x3:t,y:r,a:i,b:a,c:a-i,abSum:i+a,xSum:t+e,xDiff:t-e}},interpolateX:function(e,t){return jt.Interp.interpolateN(e,(2*t-e.xSum)/e.xDiff)},interpolateN:function(e,t){return e.y[1]+.5*t*(e.abSum+t*e.c)}},jt.JulianDay=function(e,t){e instanceof Date&&(e=jt.JulianDay.dateToJD(e)),this.jd=e,this.deltaT=t||jt.DeltaT.estimate(this.jd),this.jde=jt.DeltaT.jdToJde(this.jd,this.deltaT)},jt.JulianDay.prototype={toCalendar:function(){return jt.JulianDay.jdToCalendar(this.jd)},toDate:function(){return jt.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-jt.J2000)/jt.JulianCentury},jdeJ2000Century:function(){return(this.jde-jt.J2000)/jt.JulianCentury},startOfDay:function(){return new jt.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},jt.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),jt.JulianDay.jdFromGregorian=function(e,t,r){return new jt.JulianDay(jt.JulianDay.jdFromGregorian(e,t,r))},jt.JulianDay.jdFromJulian=function(e,t,r){return new jt.JulianDay(jt.JulianDay.calendarJulianToJD(e,t,r))},jt.JulianDay.jdFromJDE=function(e){var t=jt.DeltaT.estimate(e);return e=jt.DeltaT.jdeToJd(e,t),new jt.JulianDay(e,t)},jt.JulianDay.dateToJD=function(e){var t=e.getUTCDate()+jt.JulianDay.secondsFromHMS(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/86400;return e.getTime()<jt.JulianDay.gregorianTimeStart?jt.JulianDay.calendarJulianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,t):jt.JulianDay.calendarGregorianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,t)},jt.JulianDay.calendarGregorianToJD=function(e,t,r){1!=t&&2!=t||(e--,t+=12);var i=Math.floor(e/100);return Math.floor(36525*(e+4716)/100)+Math.floor(306*(t+1)/10)+(2-i+Math.floor(i/4))+r-1524.5},jt.JulianDay.calendarJulianToJD=function(e,t,r){return 1!=t&&2!=t||(e--,t+=12),Math.floor(36525*(e+4716)/100)+Math.floor(306*(t+1)/10)+r-1524.5},jt.JulianDay.secondsFromHMS=function(e,t,r){return 3600*e+60*t+r},jt.JulianDay.jdToDate=function(e){var t=jt.JulianDay.jdToCalendar(e);return e=jt.Math.modF(e+.5)[1],e=Math.round(86400*e),new Date(Date.UTC(t.y,t.m-1,Math.floor(t.d),Math.floor(e/3600)%24,Math.floor(e/60)%60,Math.floor(e%60)))},jt.JulianDay.jdToCalendar=function(e){var t=(e=jt.Math.modF(e+.5))[0],r=t;2299151<=t&&(r=t+1+(r=Math.floor((100*t-186721625)/3652425))-Math.floor(r/4));var i=r+1524;t=Math.floor((100*i-12210)/36525);var a=Math.floor(36525*t/100);return r=Math.floor(1e4*(i-a)/306001),e=i-a-Math.floor(306001*r/1e4)+e[1],{y:1==(r=14==r||15==r?r-13:r-1)||2==r?Math.floor(t)-4715:Math.floor(t)-4716,m:r,d:e}},jt.JulianDay.leapYearGregorian=function(e){return 0==e%4&&0!=e%100||0==e%400},jt.JulianDay.dayOfYear=function(e,t,r,i){return e=2,i&&e--,jt.JulianDay._wholeMonths(t,e)+r},jt.JulianDay._wholeMonths=function(e,t){return Math.round(275*e/9-(e+9)/12*t-30)},jt.Math={pMod:function(e,t){return 0>(e%=t)&&(e+=t),e},modF:function(e){return 0>e?(e=-e,[-Math.floor(e),-e%1]):[Math.floor(e),e%1]},horner:function(e,t){var r=t.length-1;if(0>=r)throw"empty array not supported";for(var i=t[r];0<r;)i=i*e+t[--r];return i},formatNum:function(e,t){return t=Math.pow(10,4|t),Math.round(e*t)/t}},jt.Moon={parallax:function(e){return Math.asin(6378.14/e)},apparentEquatorial:function(e){var t=jt.Moon.geocentricPosition(e),r=jt.Nutation.nutation(e);return e=jt.Nutation.meanObliquityLaskar(e)+r.deltaobliquity,{eq:jt.Coord.eclToEq(new jt.EclCoord(t.lng+r.deltalng,t.lat),e),delta:t.delta}},apparentTopocentric:function(e,t,r){var i=jt.Moon.apparentEquatorial(e),a=jt.Globe.parallaxConstants(t.lat,t.h),n=jt.Moon.parallax(i.delta);return r||(r=jt.Sidereal.apparentInRa(e)),{eq:jt.Parallax.topocentric(i.eq,n,a.rhoslat,a.rhoclat,t.lng,r),delta:i.delta}},topocentricPosition:function(e,t,r){var i=jt.Sidereal.apparentInRa(e);e=jt.Moon.apparentTopocentric(e,t,i);var a=jt.Coord.eqToHz(e.eq,t,i);return!0===r&&(a.alt+=jt.Refraction.bennett2(a.alt)),t=jt.Moon.parallacticAngle(t.lat,i-(t.lng+e.eq.ra),e.eq.dec),{hz:a,eq:e.eq,delta:e.delta,q:t}},approxTransit:function(e,t){return e=e.startOfDay(),jt.Rise.approxTransit(t,jt.Sidereal.apparent0UT(e),jt.Moon.apparentTopocentric(e,t).eq)},approxTimes:function(e,t){e=e.startOfDay();var r=jt.Moon.apparentTopocentric(e,t),i=jt.Moon.parallax(r.delta);return i=jt.Rise.stdh0Lunar(i),e=jt.Sidereal.apparent0UT(e),jt.Rise.approxTimes(t,i,e,r.eq)},times:function(e,t){e=e.startOfDay();var r=jt.Moon.apparentTopocentric(new jt.JulianDay(e.jd-1,e.deltaT),t),i=jt.Moon.apparentTopocentric(e,t),a=jt.Moon.apparentTopocentric(new jt.JulianDay(e.jd+1,e.deltaT),t),n=jt.Moon.parallax(i.delta);n=jt.Rise.stdh0Lunar(n);var o=jt.Sidereal.apparent0UT(e);return jt.Rise.times(t,e.deltaT,n,o,[r.eq,i.eq,a.eq])},parallacticAngle:function(e,t,r){return Math.atan2(Math.sin(t),Math.tan(e)*Math.cos(r)-Math.sin(r)*Math.cos(t))},geocentricPosition:function(e){var t=Math.PI/180,r=e.jdeJ2000Century();e=jt.Math.pMod(jt.Math.horner(r,[218.3164477*t,481267.88123421*t,-.0015786*t,t/538841,-t/65194e3]),2*Math.PI);var i=jt.Math.pMod(jt.Math.horner(r,[297.8501921*t,445267.1114034*t,-.0018819*t,t/545868,-t/113065e3]),2*Math.PI),a=jt.Math.pMod(jt.Math.horner(r,[357.5291092*t,35999.0502909*t,-1535e-7*t,t/2449e4]),2*Math.PI),n=jt.Math.pMod(jt.Math.horner(r,[134.9633964*t,477198.8675055*t,.0087414*t,t/69699,-t/14712e3]),2*Math.PI),o=jt.Math.pMod(jt.Math.horner(r,[93.272095*t,483202.0175233*t,-.0036539*t,-t/3526e3,t/86331e4]),2*Math.PI),s=119.75*t+131.849*t*r,h=53.09*t+479264.29*t*r,l=313.45*t+481266.484*t*r,c=(r=jt.Math.horner(r,[1,-.002516,-74e-7]))*r;h=3958*Math.sin(s)+1962*Math.sin(e-o)+318*Math.sin(h);var u=0;for(s=-2235*Math.sin(e)+382*Math.sin(l)+175*Math.sin(s-o)+175*Math.sin(s+o)+127*Math.sin(e-n)-115*Math.sin(e+n),l=0;l<jt.Moon.ta.length;l++){var d=jt.Moon.ta[l],m=i*d[0]+a*d[1]+n*d[2]+o*d[3],p=Math.sin(m);switch(m=Math.cos(m),d[1]){case 0:h+=d[4]*p,u+=d[5]*m;break;case 1:case-1:h+=d[4]*p*r,u+=d[5]*m*r;break;case 2:case-2:h+=d[4]*p*c,u+=d[5]*m*c;break;default:throw"error"}}for(l=0;l<jt.Moon.tb.length;l++)switch(d=jt.Moon.tb[l],p=Math.sin(i*d[0]+a*d[1]+n*d[2]+o*d[3]),d[1]){case 0:s+=d[4]*p;break;case 1:case-1:s+=d[4]*p*r;break;case 2:case-2:s+=d[4]*p*c;break;default:throw"error"}return{lng:jt.Math.pMod(e,2*Math.PI)+1e-6*h*t,lat:1e-6*s*t,delta:385000.56+.001*u}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},jt.MoonIllum={phaseAngleEq:function(e,t,r,i){return e=jt.MoonIllum._coselong(e,r),Math.atan2(i*Math.sin(Math.acos(e)),t-i*e)},phaseAngleEq2:function(e,t){return Math.acos(-jt.MoonIllum._coselong(e,t))},illuminated:function(e){return(1+Math.cos(e))/2},positionAngle:function(e,t){var r=Math.cos(t.dec);return Math.atan2(r*Math.sin(t.ra-e.ra),Math.sin(t.dec)*Math.cos(e.dec)-r*Math.sin(e.dec)*Math.cos(t.ra-e.ra))},_coselong:function(e,t){return Math.sin(t.dec)*Math.sin(e.dec)+Math.cos(t.dec)*Math.cos(e.dec)*Math.cos(t.ra-e.ra)}},jt.Nutation={nutation:function(e){e=e.jdeJ2000Century();for(var t=jt.Math.horner(e,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,r=jt.Math.horner(e,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,i=jt.Math.horner(e,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,a=jt.Math.horner(e,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,n=jt.Math.horner(e,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,o=0,s=0,h=jt.Nutation.table22A.length-1;0<=h;h--){var l=jt.Nutation.table22A[h],c=l[0]*t+l[1]*r+l[2]*i+l[3]*a+l[4]*n,u=Math.cos(c);o+=Math.sin(c)*(l[5]+l[6]*e),s+=u*(l[7]+l[8]*e)}return{deltalng:1e-4/3600*o*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(e){var t=jt.Nutation.meanObliquityLaskar(e);return(e=jt.Nutation.nutation(e)).deltalng*Math.cos(t+e.deltaobliquity)},trueObliquity:function(e){return jt.Nutation.meanObliquityLaskar(e)+(e=jt.Nutation.nutation(e)).deltaobliquity},meanObliquity:function(e){return jt.Math.horner(e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(e){return jt.Math.horner(.01*e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},jt.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(e){return 8.794/60/60*Math.PI/180/e},topocentric:function(e,t,r,i,a,n){a=jt.Math.pMod(n-a-e.ra,2*Math.PI),t=Math.sin(t),n=Math.cos(a);var o=Math.cos(e.dec);return a=Math.atan2(-i*t*Math.sin(a),o-i*t*n),new jt.EqCoord(e.ra+a,Math.atan2((Math.sin(e.dec)-r*t)*Math.cos(a),o-i*t*n))},topocentric2:function(e,t,r,i,a,n){return a=jt.Math.pMod(n-a-e.ra,2*Math.PI),n=Math.cos(e.dec),new jt.EqCoord(e.ra+-t*i*Math.sin(a)/n,e.dec+-t*(r*n-i*Math.cos(a)*Math.sin(e.dec)))}},jt.Refraction={bennett:function(e){0>e&&(e=0);var t=Math.PI/180;return t/60/Math.tan(e+7.31*t*t/(e+4.4*t))},bennett2:function(e){var t=Math.PI/180,r=60/t,i=.06/r;return r=14.7*r*t,t*=13,(e=jt.Refraction.bennett(e))-i*Math.sin(r*e+t)},saemundsson:function(e){var t=Math.PI/180;return 1.02*t/60/Math.tan(e+10.3*t*t/(e+5.11*t))}},jt.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(e){return.7275*e-jt.Rise.meanRefraction},circumpolar:function(e,t,r){return-1>(e=(Math.sin(t)-Math.sin(e)*Math.sin(r))/(Math.cos(e)*Math.cos(r)))||1<e?null:e},approxTransit:function(e,t,r){return 43200*(r.ra+e.lng)/Math.PI-t},approxTimes:function(e,t,r,i){return(t=jt.Rise.circumpolar(e.lat,t,i.dec))?(t=43200*Math.acos(t)/Math.PI,e=43200*(i.ra+e.lng)/Math.PI-r,{transit:jt.Math.pMod(e,86400),transitd:Math.floor(e/86400),rise:jt.Math.pMod(e-t,86400),rised:Math.floor((e-t)/86400),set:jt.Math.pMod(e+t,86400),setd:Math.floor((e+t)/86400)}):null},times:function(e,t,r,i,a){function n(a){var n=jt.Math.pMod(i+360.985647*a/360,86400),o=a+t,l=jt.Interp.interpolateX(s,o);return o=jt.Interp.interpolateX(h,o),n=n*Math.PI/43200-(e.lng+l),l=Math.cos(o),jt.Math.pMod(a+(c*Math.sin(o)+u*l*Math.cos(n)-r)/(l*u*Math.sin(n))*43200/Math.PI,86400)}var o=jt.Rise.approxTimes(e,r,i,a[1]);if(!o)return null;var s=jt.Interp.newLen3(-86400,86400,[a[0].ra,a[1].ra,a[2].ra]),h=jt.Interp.newLen3(-86400,86400,[a[0].dec,a[1].dec,a[2].dec]);a=i+360.985647*o.transit/360;var l=jt.Interp.interpolateX(s,o.transit+t);o.transit=jt.Math.pMod(o.transit-(a-43200*(e.lng+l)/Math.PI),86400);var c=Math.sin(e.lat),u=Math.cos(e.lat);return o.rise=n(o.rise),o.set=n(o.set),o}},jt.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(e){return e=jt.Math.modF(e.jd+.5),[new jt.JulianDay(e[0]-.5).jdJ2000Century(),e[1]]},mean:function(e){return jt.Math.pMod(jt.Sidereal._mean(e),86400)},_mean:function(e){return(e=jt.Sidereal._mean0UT(e)).s+86636.55536784*e.f},_meanInRA:function(e){return(e=jt.Sidereal._mean0UT(e)).s*Math.PI/43200+2.0054758187*e.f*Math.PI},mean0UT:function(e){return e=jt.Sidereal._mean0UT(e),jt.Math.pMod(e.s,86400)},_mean0UT:function(e){return e=jt.Sidereal.jdToCFrac(e),{s:jt.Math.horner(e[0],jt.Sidereal.iau82),f:e[1]}},apparentInRa:function(e){var t=jt.Sidereal._meanInRA(e);return e=jt.Nutation.nutationInRA(e),jt.Math.pMod(t+e,2*Math.PI)},apparent:function(e){var t=jt.Sidereal._mean(e);return e=648e3*jt.Nutation.nutationInRA(e)/Math.PI/15,jt.Math.pMod(t+e,86400)},apparentLocal:function(e,t){return e=jt.Sidereal.apparent(e),jt.Math.pMod(e-43200*t/Math.PI,86400)},apparent0UT:function(e){var t=jt.Math.modF(e.jd+.5);return e=jt.Math.modF(e.jde+.5),t=jt.Math.horner((t[0]-.5-jt.J2000)/36525,jt.Sidereal.iau82)+86636.55536784*t[1],e=648e3*jt.Nutation.nutationInRA(new jt.JulianDay(e[0]))/Math.PI/15,jt.Math.pMod(t+e,86400)}},jt.Solar={earthsunDelta:149597870,apparentEquatorial:function(e){var t=e.jdJ2000Century(),r=jt.Solar.node(t);return t=jt.Solar.apparentLongitude(t,r),e=jt.Nutation.meanObliquityLaskar(e)+.00256*Math.PI/180*Math.cos(r),r=Math.sin(t),new jt.EqCoord(Math.atan2(Math.cos(e)*r,Math.cos(t)),Math.asin(Math.sin(e)*r))},apparentTopocentric:function(e,t,r){var i=jt.Solar.apparentEquatorial(e),a=jt.Globe.parallaxConstants(t.lat,t.h);return r||(r=jt.Sidereal.apparentInRa(e)),jt.Parallax.topocentric2(i,jt.Parallax.earthsunParallax,a.rhoslat,a.rhoclat,t.lng,r)},topocentricPosition:function(e,t,r){var i=jt.Sidereal.apparentInRa(e);return e=jt.Solar.apparentTopocentric(e,t,i),t=jt.Coord.eqToHz(e,t,i),!0===r&&(t.alt+=jt.Refraction.bennett2(t.alt)),{hz:t,eq:e}},approxTransit:function(e,t){return e=e.startOfDay(),jt.Rise.approxTransit(t,jt.Sidereal.apparent0UT(e),jt.Solar.apparentTopocentric(e,t))},approxTimes:function(e,t){var r=e.startOfDay();e=jt.Solar.apparentTopocentric(r,t);var i=jt.Rise.stdh0Solar;return r=jt.Sidereal.apparent0UT(r),jt.Rise.approxTimes(t,i,r,e)},times:function(e,t){e=e.startOfDay();var r=jt.Solar.apparentTopocentric(new jt.JulianDay(e.jd-1,e.deltaT),t),i=jt.Solar.apparentTopocentric(e,t),a=jt.Solar.apparentTopocentric(new jt.JulianDay(e.jd+1,e.deltaT),t),n=jt.Rise.stdh0Solar,o=jt.Sidereal.apparent0UT(e);return jt.Rise.times(t,e.deltaT,n,o,[r,i,a])},meanAnomaly:function(e){return jt.Math.horner(e,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(e){var t=jt.Math.horner(e,[280.46646,36000.76983,3032e-7])*Math.PI/180,r=jt.Solar.meanAnomaly(e);return e=(jt.Math.horner(e,[1.914602,-.004817,-14e-6])*Math.sin(r)+(.019993-101e-6*e)*Math.sin(2*r)+289e-6*Math.sin(3*r))*Math.PI/180,{s:jt.Math.pMod(t+e,2*Math.PI),v:jt.Math.pMod(r+e,2*Math.PI)}},apparentLongitude:function(e,t){return t||(t=jt.Solar.node(e)),jt.Solar.trueLongitude(e).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(t)},node:function(e){return(125.04-1934.136*e)*Math.PI/180}},jt.Solistice={march:function(e){return 1e3>e?jt.Solistice._eq(e,jt.Solistice.mc0):jt.Solistice._eq(e-2e3,jt.Solistice.mc2)},june:function(e){return 1e3>e?jt.Solistice._eq(e,jt.Solistice.jc0):jt.Solistice._eq(e-2e3,jt.Solistice.jc2)},september:function(e){return 1e3>e?jt.Solistice._eq(e,jt.Solistice.sc0):jt.Solistice._eq(e-2e3,jt.Solistice.sc2)},december:function(e){return 1e3>e?jt.Solistice._eq(e,jt.Solistice.dc0):jt.Solistice._eq(e-2e3,jt.Solistice.dc2)},_eq:function(e,t){t=((e=jt.Math.horner(.001*e,t))-jt.J2000)/jt.JulianCentury;var r=35999.373*Math.PI/180*t-2.47*Math.PI/180;r=1+.0334*Math.cos(r)+7e-4*Math.cos(2*r);for(var i=0,a=this.terms.length-1;0<=a;a--){var n=this.terms[a];i+=n[0]*Math.cos((n[1]+n[2]*t)*Math.PI/180)}return e+1e-5*i/r},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const zt=(e,t,r)=>{const i=new Date,a=i.getTime()-e;return i.setTime(e+t+a*r),i};let Ot,Ct=0,Nt=1;var Rt,Lt;!function(e){e[e.INIT=0]="INIT",e[e.UPDATE=1]="UPDATE",e[e.CHANGE_ORBIT_TYPE=2]="CHANGE_ORBIT_TYPE",e[e.MISSILE_UPDATE=3]="MISSILE_UPDATE",e[e.SATELLITE_UPDATE=4]="SATELLITE_UPDATE"}(Rt||(Rt={})),function(e){e[e.ORBIT=0]="ORBIT",e[e.TRAIL=1]="TRAIL"}(Lt||(Lt={}));const Ft=[];let Ut,qt=Lt.ORBIT,kt=1;try{onmessage=e=>Jt(e)}catch(e){if(!process)throw e}const Jt=e=>{var t;switch(e.data.typ){case Rt.INIT:kt=e.data.orbitFadeFactor,Ut=e.data.numSegs;break;case Rt.SATELLITE_UPDATE:e.data.tle1&&(Ft[e.data.id].satrec=ke.createSatrec(e.data.tle1,e.data.tle2));break;case Rt.MISSILE_UPDATE:e.data.latList&&(Ft[e.data.id].latList=e.data.latList,Ft[e.data.id].lonList=e.data.lonList,Ft[e.data.id].altList=e.data.altList);break;case Rt.CHANGE_ORBIT_TYPE:return void(qt=e.data.orbitType)}if(e.data.typ===Rt.INIT){const t=JSON.parse(e.data.objData),r=t.length-1;let i=-1;for(;i<r;)if(i++,t[i].missile)Ft[i]=t[i];else if(t[i].ignore)Ft[i]={ignore:!0};else{if(!t[i].tle1)throw new Error("Invalid Object Data");Ft[i]={satrec:ke.createSatrec(t[i].tle1,t[i].tle2)}}}if(e.data.typ===Rt.SATELLITE_UPDATE||e.data.typ===Rt.MISSILE_UPDATE){Ot=e.data.dynamicOffsetEpoch,Ct=e.data.staticOffset,Nt=e.data.propRate;const r=e.data.id,i=e.data.isEcfOutput||!1,a=new Float32Array(4*(Ut+1)),n=Ut+1;let o=0;if(Ft[r].missile)for(;o<n;){const e=Ft[r];0===(null===(t=e.latList)||void 0===t?void 0:t.length)?(a[4*o]=0,a[4*o+1]=0,a[4*o+2]=0,a[4*o+3]=0,o++):(Gt(e,o,a,n),o++)}else{const e=zt(Ot,Ct,Nt),t=1440*(Dt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+1.15741e-8*e.getUTCMilliseconds()-Ft[r].satrec.jdsatepoch),s=2*Math.PI/Ft[r].satrec.no,h=s/Ut;if(qt===Lt.ORBIT)for(;o<n;)Bt(t,o,h,r,i,s,a,n),o++;else if(qt===Lt.TRAIL)for(;o<n;)Ht(t,o,h,r,i,s,a,n),o++}Yt({pointsOut:a,satId:r})}},Yt=({pointsOut:e,satId:t})=>{try{postMessage({pointsOut:e,satId:t})}catch(e){if(!process)throw e}},Gt=(e,t,r,i)=>{const a=Math.round(e.altList.length*(t/Ut)),n=zt(Ot,Ct,Nt),o=Dt(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())+1.15741e-8*n.getUTCMilliseconds(),s=ke.gstime(o),h=Math.cos(e.latList[a]*c),l=Math.sin(e.latList[a]*c),u=Math.cos(e.lonList[a]*c+s),d=Math.sin(e.lonList[a]*c+s);r[4*t]=(It+e.altList[a])*h*u,r[4*t+1]=(It+e.altList[a])*h*d,r[4*t+2]=(It+e.altList[a])*l,r[4*t+3]=Math.min(kt*(i/(t+1)),1)},Ht=(e,t,r,i,a,n,o,s)=>{const h=e+t*r;let c=ke.propagate(Ft[i].satrec,h);if(!c)return o[4*t]=0,o[4*t+1]=0,o[4*t+2]=0,void(o[4*t+3]=0);let u=c.position;a&&(u=ne(u,-t*r*l/n)),o[4*t]=u.x,o[4*t+1]=u.y,o[4*t+2]=u.z,o[4*t+3]=t<s/40?Math.min(kt*(s/40/(2*(t+1))),1):0},Bt=(e,t,r,i,a,n,o,s)=>{const h=e+t*r;let c=ke.propagate(Ft[i].satrec,h);if(!c)return o[4*t]=0,o[4*t+1]=0,o[4*t+2]=0,void(o[4*t+3]=0);let u=c.position;a&&(u=ne(u,-t*r*l/n)),o[4*t]=u.x,o[4*t+1]=u.y,o[4*t+2]=u.z,o[4*t+3]=Math.min(kt*(s/(t+1)),1)}})();